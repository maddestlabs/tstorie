/* Generated by Nim Compiler v2.2.6 */
/* Compiled for: Linux, wasm32, clang */
/* Command for C compiler:
   emcc -c -w -ferror-limit=3 -fno-strict-aliasing -pthread   -I/home/codespace/.choosenim/toolchains/nim-2.2.6/lib -I/workspaces/telestorie -o /workspaces/telestorie/nimcache_test/@mbackends@ssdl3@ssdl_window.nim.c.o /workspaces/telestorie/nimcache_test/@mbackends@ssdl3@ssdl_window.nim.c */
#define NIM_INTBITS 32

#include "nimbase.h"
#include "SDL3/SDL.h"
#include <string.h>
#include "SDL3_ttf/SDL_ttf.h"
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(proc, file) \
  TFrame FR_; \
  FR_.procname = proc; FR_.filename = file; FR_.line = 0; FR_.len = 0; nimFrame(&FR_);

#define nimln_(n) \
  FR_.line = n;

#define nimlf_(n, file) \
  FR_.line = n; FR_.filename = file;

typedef struct tySequence__c5tLc28JqMkmyDqVscozRw tySequence__c5tLc28JqMkmyDqVscozRw;
typedef struct tySequence__c5tLc28JqMkmyDqVscozRw_Content tySequence__c5tLc28JqMkmyDqVscozRw_Content;
typedef struct tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw;
typedef struct tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA tySequence__hETDgeXECLenIIi9aRQgjOA;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content tySequence__hETDgeXECLenIIi9aRQgjOA_Content;
typedef struct tyTuple__hSHiEU6uEtL7soi1F4tKCg tyTuple__hSHiEU6uEtL7soi1F4tKCg;
typedef struct tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw;
typedef struct tyTuple__FtZxsWeKlOo83uVL9c4OOmg tyTuple__FtZxsWeKlOo83uVL9c4OOmg;
typedef struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ;
typedef struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA;
typedef struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ tyObject_Style__UURjArTrf2wmcCbN5MncAQ;
typedef struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ;
struct tySequence__c5tLc28JqMkmyDqVscozRw {
  NI len; tySequence__c5tLc28JqMkmyDqVscozRw_Content* p;
};
typedef NU8 tyEnum_SDLInputEventKind__yN657yqmcSUemP1RtCUekQ;
typedef NU8 tyEnum_KeyCode__di2kA5MM40uRU9bPNgrRDnA;
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg {
	tyEnum_SDLInputEventKind__yN657yqmcSUemP1RtCUekQ kind;
	tyEnum_KeyCode__di2kA5MM40uRU9bPNgrRDnA key;
	NI scancode;
	NimStringV2 ch;
};
typedef NU8 tyArray__Zu7UusKTJ9auYSy2NZNrWFg[128];
struct tySequence__hETDgeXECLenIIi9aRQgjOA {
  NI len; tySequence__hETDgeXECLenIIi9aRQgjOA_Content* p;
};
struct tyTuple__hSHiEU6uEtL7soi1F4tKCg {
	NU8 Field0;
	NU8 Field1;
	NU8 Field2;
};
struct tyTuple__FtZxsWeKlOo83uVL9c4OOmg {
	NI Field0;
	NI Field1;
	NI Field2;
	NI Field3;
};
struct tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw {
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg val;
	NIM_BOOL has;
};
struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ {
	NI Field0;
	NI Field1;
};
struct tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw {
	SDL_Window* window;
	SDL_Renderer* renderer;
	NI width;
	NI height;
	NI cellWidth;
	NI cellHeight;
	tySequence__hETDgeXECLenIIi9aRQgjOA cells;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg bgColor;
	tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw clipRect;
	tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ offset;
	TTF_Font* font;
	NIM_BOOL useTTF;
};
struct tySequence__c5tLc28JqMkmyDqVscozRw_Content { NI cap; tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg data[SEQ_DECL_SIZE]; };
struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ {
	NU8 r;
	NU8 g;
	NU8 b;
};
struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ bg;
	NIM_BOOL bold;
	NIM_BOOL underline;
	NIM_BOOL italic;
	NIM_BOOL dim;
};
struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA {
	NimStringV2 ch;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ style;
};
struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content { NI cap; tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA data[SEQ_DECL_SIZE]; };
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap_p0, NI elemSize_p1, NI elemAlign_p2);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, add__backendsZsdl3Zsdl95window_u27)(tySequence__c5tLc28JqMkmyDqVscozRw* x_p0, tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg y_p1);
N_LIB_PRIVATE N_NIMCALL(NI, getEventScancode__backendsZsdl3Zsdl95input_u4345)(SDL_Event* event_p0);
N_LIB_PRIVATE N_NIMCALL(tyEnum_KeyCode__di2kA5MM40uRU9bPNgrRDnA, scancodeToKeyCode__backendsZsdl3Zsdl95input_u4101)(NI scancode_p0);
static N_INLINE(void, nimFrame)(TFrame* s_p0);
N_LIB_PRIVATE N_NOINLINE(void, callDepthLimitReached__system_u4625)(void);
static N_INLINE(void, popFrame)(void);
extern NIM_THREADVAR NIM_BOOL nimInErrorMode__system_u4407;
extern NIM_THREADVAR TFrame* framePtr__system_u2725;
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4407);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, nimFrame)(TFrame* s_p0) {
	{
		if (!(framePtr__system_u2725 == ((TFrame*) NIM_NIL))) goto LA3_;
		(*s_p0).calldepth = ((NI16)0);
	}
	goto LA1_;
LA3_: ;
	{
		(*s_p0).calldepth = (NI16)((*framePtr__system_u2725).calldepth + ((NI16)1));
	}
LA1_: ;
	(*s_p0).prev = framePtr__system_u2725;
	framePtr__system_u2725 = s_p0;
	{
		if (!((*s_p0).calldepth == ((NI16)2000))) goto LA8_;
		callDepthLimitReached__system_u4625();
	}
LA8_: ;
}
static N_INLINE(void, popFrame)(void) {
	framePtr__system_u2725 = (*framePtr__system_u2725).prev;
}
N_LIB_PRIVATE N_NIMCALL(tySequence__c5tLc28JqMkmyDqVscozRw, pollEvents__backendsZsdl3Zsdl95window_u19)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0) {
	tySequence__c5tLc28JqMkmyDqVscozRw result;
	SDL_Event event_1;
NIM_BOOL* nimErr_;
	nimfr_("pollEvents", "/workspaces/telestorie/backends/sdl3/sdl_window.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(26, "/workspaces/telestorie/backends/sdl3/sdl_window.nim");	result.len = 0; result.p = (tySequence__c5tLc28JqMkmyDqVscozRw_Content*) newSeqPayload(0, sizeof(tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg), NIM_ALIGNOF(tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg));
	nimZeroMem((void*)(&event_1), sizeof(SDL_Event));
	{
		nimln_(29);		while (1) {
			NIM_BOOL T3_;
			T3_ = (NIM_BOOL)0;
			T3_ = SDL_PollEvent((&event_1));
			if (!T3_) goto LA2;
			nimln_(30);			switch (event_1.type) {
			case ((NU32)256):
			case ((NU32)515):
			{
				tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg T5_;
				nimln_(32);				nimZeroMem((void*)(&T5_), sizeof(tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg));
				T5_.kind = ((tyEnum_SDLInputEventKind__yN657yqmcSUemP1RtCUekQ)0);
				add__backendsZsdl3Zsdl95window_u27((&result), T5_);
			}
			break;
			case ((NU32)768):
			{
				NI scancode_1;
				tyEnum_KeyCode__di2kA5MM40uRU9bPNgrRDnA keycode_1;
				tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg T7_;
				nimln_(35);				scancode_1 = getEventScancode__backendsZsdl3Zsdl95input_u4345((&event_1));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(36);				keycode_1 = scancodeToKeyCode__backendsZsdl3Zsdl95input_u4101(scancode_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(37);				nimZeroMem((void*)(&T7_), sizeof(tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg));
				T7_.kind = ((tyEnum_SDLInputEventKind__yN657yqmcSUemP1RtCUekQ)1);
				T7_.key = keycode_1;
				T7_.scancode = scancode_1;
				add__backendsZsdl3Zsdl95window_u27((&result), T7_);
			}
			break;
			case ((NU32)769):
			{
				NI scancode_2;
				tyEnum_KeyCode__di2kA5MM40uRU9bPNgrRDnA keycode_2;
				tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg T9_;
				nimln_(40);				scancode_2 = getEventScancode__backendsZsdl3Zsdl95input_u4345((&event_1));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(41);				keycode_2 = scancodeToKeyCode__backendsZsdl3Zsdl95input_u4101(scancode_2);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(42);				nimZeroMem((void*)(&T9_), sizeof(tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg));
				T9_.kind = ((tyEnum_SDLInputEventKind__yN657yqmcSUemP1RtCUekQ)2);
				T9_.key = keycode_2;
				T9_.scancode = scancode_2;
				add__backendsZsdl3Zsdl95window_u27((&result), T9_);
			}
			break;
			case ((NU32)514):
			{
				int w_1;
				int h_1;
				NIM_BOOL T11_;
				tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg T12_;
				w_1 = (int)0;
				h_1 = (int)0;
				nimln_(47);				T11_ = (NIM_BOOL)0;
				T11_ = SDL_GetWindowSize((*canvas_p0).window, (&w_1), (&h_1));
				(void)(T11_);
				nimln_(48);				(*canvas_p0).width = ((NI) (w_1));
				nimln_(49);				(*canvas_p0).height = ((NI) (h_1));
				nimln_(50);				nimZeroMem((void*)(&T12_), sizeof(tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg));
				T12_.kind = ((tyEnum_SDLInputEventKind__yN657yqmcSUemP1RtCUekQ)4);
				add__backendsZsdl3Zsdl95window_u27((&result), T12_);
			}
			break;
			default:
			{
				tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg T14_;
				nimln_(53);				nimZeroMem((void*)(&T14_), sizeof(tyObject_SDLInputEvent__59b7dApF39bbgeaxejw3Dfcg));
				T14_.kind = ((tyEnum_SDLInputEventKind__yN657yqmcSUemP1RtCUekQ)5);
				add__backendsZsdl3Zsdl95window_u27((&result), T14_);
			}
			break;
			}
		} LA2: ;
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
