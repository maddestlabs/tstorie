/* Generated by Nim Compiler v2.2.6 */
/* Compiled for: Linux, wasm32, clang */
/* Command for C compiler:
   emcc -c -w -ferror-limit=3 -fno-strict-aliasing -pthread   -I/home/codespace/.choosenim/toolchains/nim-2.2.6/lib -I/workspaces/telestorie -o /workspaces/telestorie/nimcache_test/@mbackends@ssdl3@ssdl_canvas.nim.c.o /workspaces/telestorie/nimcache_test/@mbackends@ssdl3@ssdl_canvas.nim.c */
#define NIM_INTBITS 32

#include "nimbase.h"
#include <string.h>
#include "SDL3/SDL.h"
#include "SDL3/SDL_rect.h"
#include "SDL3/SDL_render.h"
#include "SDL3_ttf/SDL_ttf.h"
#include "emscripten/html5.h"
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(proc, file) \
  TFrame FR_; \
  FR_.procname = proc; FR_.filename = file; FR_.line = 0; FR_.len = 0; nimFrame(&FR_);

#define nimln_(n) \
  FR_.line = n;

#define nimlf_(n, file) \
  FR_.line = n; FR_.filename = file;

typedef struct tyTuple__hU79ak4NYUdNYnRLUvBkfpg tyTuple__hU79ak4NYUdNYnRLUvBkfpg;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ tyObject_Style__UURjArTrf2wmcCbN5MncAQ;
typedef struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ;
typedef struct tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA tySequence__hETDgeXECLenIIi9aRQgjOA;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content tySequence__hETDgeXECLenIIi9aRQgjOA_Content;
typedef struct tyTuple__hSHiEU6uEtL7soi1F4tKCg tyTuple__hSHiEU6uEtL7soi1F4tKCg;
typedef struct tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw;
typedef struct tyTuple__FtZxsWeKlOo83uVL9c4OOmg tyTuple__FtZxsWeKlOo83uVL9c4OOmg;
typedef struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ;
typedef struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA;
typedef struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ;
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ {
	NU8 r;
	NU8 g;
	NU8 b;
};
struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ bg;
	NIM_BOOL bold;
	NIM_BOOL underline;
	NIM_BOOL italic;
	NIM_BOOL dim;
};
struct tyTuple__hU79ak4NYUdNYnRLUvBkfpg {
	NimStringV2 Field0;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ Field1;
};
struct tySequence__hETDgeXECLenIIi9aRQgjOA {
  NI len; tySequence__hETDgeXECLenIIi9aRQgjOA_Content* p;
};
struct tyTuple__hSHiEU6uEtL7soi1F4tKCg {
	NU8 Field0;
	NU8 Field1;
	NU8 Field2;
};
struct tyTuple__FtZxsWeKlOo83uVL9c4OOmg {
	NI Field0;
	NI Field1;
	NI Field2;
	NI Field3;
};
struct tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw {
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg val;
	NIM_BOOL has;
};
struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ {
	NI Field0;
	NI Field1;
};
struct tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw {
	SDL_Window* window;
	SDL_Renderer* renderer;
	NI width;
	NI height;
	NI cellWidth;
	NI cellHeight;
	tySequence__hETDgeXECLenIIi9aRQgjOA cells;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg bgColor;
	tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw clipRect;
	tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ offset;
	TTF_Font* font;
	NIM_BOOL useTTF;
};
struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA {
	NimStringV2 ch;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ style;
};
typedef NimStringV2 tyArray__Re75IspeoxXy2oCZHwcRrA[2];
typedef NimStringV2 tyArray__nHXaesL0DJZHyVS07ARPRA[1];
struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ {
	NI rc;
	NI rootIdx;
};
struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content { NI cap; tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA data[SEQ_DECL_SIZE]; };
N_LIB_PRIVATE N_NOCONV(void, deallocShared)(void* p_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseIndexError2)(NI i_p0, NI n_p1);
N_LIB_PRIVATE N_NIMCALL(void, writeCell__backendsZsdl3Zsdl95canvas_u631)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0, NI x_p1, NI y_p2, NimStringV2 ch_p3, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p4);
N_LIB_PRIVATE N_NOINLINE(void, raiseOverflow)(void);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___backendsZsdl3Zsdl95canvas_u192)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA* dest_p0, tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, eqdup___system_u2695)(NimStringV2 src_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Style__UURjArTrf2wmcCbN5MncAQ, eqdup___srcZtypes_u76)(tyObject_Style__UURjArTrf2wmcCbN5MncAQ src_p0);
static N_INLINE(void, nimFrame)(TFrame* s_p0);
N_LIB_PRIVATE N_NOINLINE(void, callDepthLimitReached__system_u4625)(void);
static N_INLINE(void, popFrame)(void);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nimCharToStr)(NIM_CHAR x_p0);
N_LIB_PRIVATE N_NIMCALL(void, failedAssertImpl__stdZassertions_u234)(NimStringV2 msg_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, white__srcZtypes_u59)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___backendsZsdl3Zsdl95canvas_u183)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___backendsZsdl3Zsdl95canvas_u186)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA* dest_p0, tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA src_p1);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1);
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2);
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, renderText__backendsZsdl3Zsdl95fonts_u2625)(SDL_Renderer* renderer_p0, TTF_Font* font_p1, NimStringV2 text_p2, NF x_p3, NF y_p4, tyTuple__hSHiEU6uEtL7soi1F4tKCg color_p5);
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
static N_INLINE(tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw, none__backendsZsdl3Zsdl95canvas_u51)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___backendsZsdl3Zsdl95canvas_u246)(tySequence__hETDgeXECLenIIi9aRQgjOA* dest_p0, tySequence__hETDgeXECLenIIi9aRQgjOA src_p1);
N_LIB_PRIVATE N_NIMCALL(tySequence__hETDgeXECLenIIi9aRQgjOA, newSeq__backendsZsdl3Zsdl95canvas_u100)(NI len_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseRangeErrorI)(NI64 i_p0, NI64 a_p1, NI64 b_p2);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, black__srcZtypes_u45)(void);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, cstrToNimstr)(NCSTRING str_p0);
N_LIB_PRIVATE N_NIMCALL(void, echoBinSafe)(NimStringV2* args_p0, NI args_p0Len_0);
N_LIB_PRIVATE N_NIMCALL(void, init__backendsZsdl3Zsdl95fonts_u603)(void);
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p_p0);
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___backendsZsdl3Zsdl95canvas_u325)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___backendsZsdl3Zsdl95canvas_u237)(tySequence__hETDgeXECLenIIi9aRQgjOA dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p_p0, NI alignment_p1);
static N_INLINE(void, nimIncRef)(void* p_p0);
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1);
static const struct {
  NI cap; NIM_CHAR data[152+1];
} TM__SSaROBXxOTPQwZpw5Hlivg_5 = { 152 | NIM_STRLIT_FLAG, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim(272, 11) `len(a) == L` the length of the string changed while iterating over it" };
static const NimStringV2 TM__SSaROBXxOTPQwZpw5Hlivg_6 = {152, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_5};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__SSaROBXxOTPQwZpw5Hlivg_7 = { 1 | NIM_STRLIT_FLAG, " " };
static const NimStringV2 TM__SSaROBXxOTPQwZpw5Hlivg_8 = {1, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_7};
static const NimStringV2 TM__SSaROBXxOTPQwZpw5Hlivg_18 = {1, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_7};
static const NimStringV2 TM__SSaROBXxOTPQwZpw5Hlivg_22 = {1, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_7};
static const struct {
  NI cap; NIM_CHAR data[26+1];
} TM__SSaROBXxOTPQwZpw5Hlivg_24 = { 26 | NIM_STRLIT_FLAG, "Failed to initialize SDL: " };
static const NimStringV2 TM__SSaROBXxOTPQwZpw5Hlivg_25 = {26, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_24};
static const struct {
  NI cap; NIM_CHAR data[98+1];
} TM__SSaROBXxOTPQwZpw5Hlivg_27 = { 98 | NIM_STRLIT_FLAG, "[Canvas] Warning: Failed to load /fonts/KodeMono-VariableFont_wght.ttf, falling back to debug text" };
static const struct {
  NI cap; NIM_CHAR data[69+1];
} TM__SSaROBXxOTPQwZpw5Hlivg_29 = { 69 | NIM_STRLIT_FLAG, "[Canvas] TTF font loaded successfully: KodeMono-VariableFont_wght.ttf" };
static const NimStringV2 TM__SSaROBXxOTPQwZpw5Hlivg_31 = {1, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_7};
static const struct {
  NI cap; NIM_CHAR data[25+1];
} TM__SSaROBXxOTPQwZpw5Hlivg_33 = { 25 | NIM_STRLIT_FLAG, "Failed to create window: " };
static const NimStringV2 TM__SSaROBXxOTPQwZpw5Hlivg_34 = {25, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_33};
static const struct {
  NI cap; NIM_CHAR data[27+1];
} TM__SSaROBXxOTPQwZpw5Hlivg_35 = { 27 | NIM_STRLIT_FLAG, "Failed to create renderer: " };
static const NimStringV2 TM__SSaROBXxOTPQwZpw5Hlivg_36 = {27, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_35};
static NIM_CONST tyArray__nHXaesL0DJZHyVS07ARPRA TM__SSaROBXxOTPQwZpw5Hlivg_26 = {{98, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_27}}
;
static NIM_CONST tyArray__nHXaesL0DJZHyVS07ARPRA TM__SSaROBXxOTPQwZpw5Hlivg_28 = {{69, (NimStrPayload*)&TM__SSaROBXxOTPQwZpw5Hlivg_29}}
;
extern NIM_THREADVAR NIM_BOOL nimInErrorMode__system_u4407;
extern NIM_THREADVAR TFrame* framePtr__system_u2725;
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___backendsZsdl3Zsdl95canvas_u506)(tyTuple__hU79ak4NYUdNYnRLUvBkfpg* dest_p0) {
	if ((*dest_p0).Field0.p && !((*dest_p0).Field0.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).Field0.p);
}
}
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4407);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, nimFrame)(TFrame* s_p0) {
	{
		if (!(framePtr__system_u2725 == ((TFrame*) NIM_NIL))) goto LA3_;
		(*s_p0).calldepth = ((NI16)0);
	}
	goto LA1_;
LA3_: ;
	{
		(*s_p0).calldepth = (NI16)((*framePtr__system_u2725).calldepth + ((NI16)1));
	}
LA1_: ;
	(*s_p0).prev = framePtr__system_u2725;
	framePtr__system_u2725 = s_p0;
	{
		if (!((*s_p0).calldepth == ((NI16)2000))) goto LA8_;
		callDepthLimitReached__system_u4625();
	}
LA8_: ;
}
static N_INLINE(void, popFrame)(void) {
	framePtr__system_u2725 = (*framePtr__system_u2725).prev;
}
N_LIB_PRIVATE N_NIMCALL(void, writeCell__backendsZsdl3Zsdl95canvas_u631)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0, NI x_p1, NI y_p2, NimStringV2 ch_p3, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p4) {
	NI idx_1;
	NI TM__SSaROBXxOTPQwZpw5Hlivg_2;
	NI TM__SSaROBXxOTPQwZpw5Hlivg_3;
	nimfr_("writeCell", "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");
{	nimlf_(267, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	{
		NIM_BOOL T3_;
		NIM_BOOL T4_;
		NIM_BOOL T5_;
		T3_ = (NIM_BOOL)0;
		T4_ = (NIM_BOOL)0;
		T5_ = (NIM_BOOL)0;
		T5_ = (x_p1 < ((NI)0));
		if (T5_) goto LA6_;
		T5_ = ((*canvas_p0).cellWidth <= x_p1);
LA6_: ;
		T4_ = T5_;
		if (T4_) goto LA7_;
		T4_ = (y_p2 < ((NI)0));
LA7_: ;
		T3_ = T4_;
		if (T3_) goto LA8_;
		T3_ = ((*canvas_p0).cellHeight <= y_p2);
LA8_: ;
		if (!T3_) goto LA9_;
		nimln_(268);		goto BeforeRet_;
	}
LA9_: ;
	nimln_(269);	if (nimMulInt(y_p2, (*canvas_p0).cellWidth, &TM__SSaROBXxOTPQwZpw5Hlivg_2)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_2), x_p1, &TM__SSaROBXxOTPQwZpw5Hlivg_3)) { raiseOverflow(); goto BeforeRet_;
	};
	idx_1 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_3);
	nimln_(270);	{
		NIM_BOOL T13_;
		NI T15_;
		NimStringV2 colontmpD_;
		tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__2;
		tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA T18_;
		T13_ = (NIM_BOOL)0;
		T13_ = (((NI)0) <= idx_1);
		if (!(T13_)) goto LA14_;
		T15_ = (*canvas_p0).cells.len;
		T13_ = (idx_1 < T15_);
LA14_: ;
		if (!T13_) goto LA16_;
		colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
		nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
		nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (idx_1 < 0 || idx_1 >= (*canvas_p0).cells.len){ raiseIndexError2(idx_1,(*canvas_p0).cells.len-1); goto BeforeRet_;
		}
		nimlf_(271, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");		nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		colontmpD_ = eqdup___system_u2695(ch_p3);
		T18_.ch = colontmpD_;
		nimlf_(271, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");		nimlf_(74, "/workspaces/telestorie/src/types.nim");		colontmpD__2 = eqdup___srcZtypes_u76(style_p4);
		T18_.style = colontmpD__2;
		nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		eqsink___backendsZsdl3Zsdl95canvas_u192((&(*canvas_p0).cells.p->data[idx_1]), T18_);
	}
LA16_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, writeCellText__backendsZsdl3Zsdl95canvas_u641)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0, NI x_p1, NI y_p2, NimStringV2 text_p3, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p4) {
	NI currentX_1;
NIM_BOOL* nimErr_;
	nimfr_("writeCellText", "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(275, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	currentX_1 = x_p1;
	{
		NIM_CHAR ch_1;
		NI i_1;
		NI L_1;
		ch_1 = (NIM_CHAR)0;
		nimlf_(267, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_1 = ((NI)0);
		nimln_(268);		L_1 = text_p3.len;
		{
			nimln_(269);			while (1) {
				NimStringV2 colontmpD_;
				NI TM__SSaROBXxOTPQwZpw5Hlivg_4;
				if (!(i_1 < L_1)) goto LA3;
				colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
				nimlf_(276, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				if (i_1 < 0 || i_1 >= text_p3.len){ raiseIndexError2(i_1,text_p3.len-1); goto LA4_;
				}
				ch_1 = text_p3.p->data[i_1];
				nimln_(277);				{
					if (!((*canvas_p0).cellWidth <= currentX_1)) goto LA7_;
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
					nimlf_(278, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");					goto LA1;
				}
LA7_: ;
				nimln_(279);				colontmpD_ = nimCharToStr(ch_1);
				writeCell__backendsZsdl3Zsdl95canvas_u631(canvas_p0, currentX_1, y_p2, colontmpD_, style_p4);
				if (NIM_UNLIKELY(*nimErr_)) goto LA4_;
				nimln_(280);				if (nimAddInt(currentX_1, ((NI)1), &TM__SSaROBXxOTPQwZpw5Hlivg_4)) { raiseOverflow(); goto LA4_;
				};
				currentX_1 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_4);
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_1 += ((NI)1);
				nimln_(272);				{
					if (!!((text_p3.len == L_1))) goto LA11_;
					failedAssertImpl__stdZassertions_u234(TM__SSaROBXxOTPQwZpw5Hlivg_6);
					if (NIM_UNLIKELY(*nimErr_)) goto LA4_;
				}
LA11_: ;
				{
					LA4_:;
				}
				{
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
				}
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			} LA3: ;
		}
	} LA1: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, clearCells__backendsZsdl3Zsdl95canvas_u653)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0, tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ bg_p1) {
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ clearStyle_1;
NIM_BOOL* nimErr_;
	nimfr_("clearCells", "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(284, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	nimZeroMem((void*)(&clearStyle_1), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	clearStyle_1.fg = white__srcZtypes_u59();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	clearStyle_1.bg = bg_p1;
	clearStyle_1.bold = NIM_FALSE;
	{
		NI i_1;
		NI colontmp_;
		NI T2_;
		NI i_2;
		i_1 = (NI)0;
		colontmp_ = (NI)0;
		nimlf_(126, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		nimlf_(285, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");		T2_ = (*canvas_p0).cells.len;
		colontmp_ = T2_;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_2 = ((NI)0);
		{
			nimln_(129);			while (1) {
				tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD_;
				tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA T5_;
				NI TM__SSaROBXxOTPQwZpw5Hlivg_9;
				if (!(i_2 < colontmp_)) goto LA4;
				nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
				nimlf_(285, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				i_1 = i_2;
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (i_1 < 0 || i_1 >= (*canvas_p0).cells.len){ raiseIndexError2(i_1,(*canvas_p0).cells.len-1); goto BeforeRet_;
				}
				T5_.ch = TM__SSaROBXxOTPQwZpw5Hlivg_8;
				nimlf_(286, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				nimlf_(74, "/workspaces/telestorie/src/types.nim");				colontmpD_ = eqdup___srcZtypes_u76(clearStyle_1);
				T5_.style = colontmpD_;
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___backendsZsdl3Zsdl95canvas_u192((&(*canvas_p0).cells.p->data[i_1]), T5_);
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_2, ((NI)1), &TM__SSaROBXxOTPQwZpw5Hlivg_9)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_9);
			} LA4: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, fillCellRect__backendsZsdl3Zsdl95canvas_u665)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0, NI x_p1, NI y_p2, NI w_p3, NI h_p4, NimStringV2 ch_p5, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p6) {
NIM_BOOL* nimErr_;
	nimfr_("fillCellRect", "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");
{nimErr_ = nimErrorFlag();
	{
		NI cy_1;
		NI colontmp_;
		NI TM__SSaROBXxOTPQwZpw5Hlivg_10;
		NI i_1;
		cy_1 = (NI)0;
		colontmp_ = (NI)0;
		nimln_(126);		nimlf_(290, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");		if (nimAddInt(y_p2, h_p4, &TM__SSaROBXxOTPQwZpw5Hlivg_10)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmp_ = (((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_10) <= (*canvas_p0).cellHeight) ? (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_10) : (*canvas_p0).cellHeight);
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_1 = y_p2;
		{
			nimln_(129);			while (1) {
				NI TM__SSaROBXxOTPQwZpw5Hlivg_13;
				if (!(i_1 < colontmp_)) goto LA3;
				nimlf_(290, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				cy_1 = i_1;
				{
					NI cx_1;
					NI colontmp__2;
					NI TM__SSaROBXxOTPQwZpw5Hlivg_11;
					NI i_2;
					cx_1 = (NI)0;
					colontmp__2 = (NI)0;
					nimlf_(126, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					nimlf_(291, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");					if (nimAddInt(x_p1, w_p3, &TM__SSaROBXxOTPQwZpw5Hlivg_11)) { raiseOverflow(); goto BeforeRet_;
					};
					colontmp__2 = (((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_11) <= (*canvas_p0).cellWidth) ? (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_11) : (*canvas_p0).cellWidth);
					nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					i_2 = x_p1;
					{
						nimln_(129);						while (1) {
							NI TM__SSaROBXxOTPQwZpw5Hlivg_12;
							if (!(i_2 < colontmp__2)) goto LA6;
							nimlf_(291, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");							cx_1 = i_2;
							nimln_(292);							writeCell__backendsZsdl3Zsdl95canvas_u631(canvas_p0, cx_1, cy_1, ch_p5, style_p6);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");							if (nimAddInt(i_2, ((NI)1), &TM__SSaROBXxOTPQwZpw5Hlivg_12)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_12);
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__SSaROBXxOTPQwZpw5Hlivg_13)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_13);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, clear__backendsZsdl3Zsdl95canvas_u488)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0, tyTuple__hSHiEU6uEtL7soi1F4tKCg bgColor_p1) {
	NIM_BOOL T1_;
	NIM_BOOL T2_;
	nimfr_("clear", "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");
	nimlf_(195, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	T1_ = (NIM_BOOL)0;
	T1_ = SDL_SetRenderDrawColor((*canvas_p0).renderer, bgColor_p1.Field0, bgColor_p1.Field1, bgColor_p1.Field2, ((NU8)255));
	(void)(T1_);
	nimln_(196);	T2_ = (NIM_BOOL)0;
	T2_ = SDL_RenderClear((*canvas_p0).renderer);
	(void)(T2_);
	popFrame();
}
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2) {
	int result;
	result = memcmp(a_p0, b_p1, ((size_t) (size_p2)));
	return result;
}
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2) {
	NIM_BOOL result;
	int T1_;
	T1_ = (int)0;
	T1_ = nimCmpMem(a_p0, b_p1, size_p2);
	result = (T1_ == ((NI32)0));
	return result;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1) {
	NIM_BOOL result;
	NI alen_1;
	NI blen_1;
	nimfr_("eqStrings", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/strmantle.nim");
{	nimlf_(33, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/strmantle.nim");	result = NIM_FALSE;
	nimln_(34);	alen_1 = a_p0.len;
	nimln_(35);	blen_1 = b_p1.len;
	nimln_(36);	{
		if (!(alen_1 == blen_1)) goto LA3_;
		nimln_(37);		{
			if (!(alen_1 == ((NI)0))) goto LA7_;
			nimln_(32);			nimln_(37);			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA7_: ;
		nimln_(38);		nimln_(32);		nimln_(38);		result = equalMem__system_u1749(((void*) ((&a_p0.p->data[((NI)0)]))), ((void*) ((&b_p1.p->data[((NI)0)]))), (alen_1));
		goto BeforeRet_;
	}
LA3_: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s_p0) {
	NCSTRING result;
	{
		if (!(s_p0.len == ((NI)0))) goto LA3_;
		result = "";
	}
	goto LA1_;
LA3_: ;
	{
		result = ((NCSTRING) ((*s_p0.p).data));
	}
LA1_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderCellsToPixels__backendsZsdl3Zsdl95canvas_u683)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0) {
NIM_BOOL* nimErr_;
	nimfr_("renderCellsToPixels", "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");
{nimErr_ = nimErrorFlag();
	{
		NI y_1;
		NI i_1;
		y_1 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_1 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI TM__SSaROBXxOTPQwZpw5Hlivg_20;
				if (!(i_1 < (*canvas_p0).cellHeight)) goto LA3;
				nimlf_(297, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				y_1 = i_1;
				{
					NI x_1;
					NI i_2;
					x_1 = (NI)0;
					nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					i_2 = ((NI)0);
					{
						nimln_(129);						while (1) {
							NI TM__SSaROBXxOTPQwZpw5Hlivg_19;
							if (!(i_2 < (*canvas_p0).cellWidth)) goto LA6;
							nimlf_(298, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");							x_1 = i_2;
							{
								tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA cell_1;
								NI idx_1;
								NI TM__SSaROBXxOTPQwZpw5Hlivg_14;
								NI TM__SSaROBXxOTPQwZpw5Hlivg_15;
								NI pixelX_1;
								NI TM__SSaROBXxOTPQwZpw5Hlivg_16;
								NI pixelY_1;
								NI TM__SSaROBXxOTPQwZpw5Hlivg_17;
								NIM_BOOL T16_;
								SDL_FRect bgRect_1;
								NIM_BOOL T17_;
								nimZeroMem((void*)(&cell_1), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
								nimln_(299);								if (nimMulInt(y_1, (*canvas_p0).cellWidth, &TM__SSaROBXxOTPQwZpw5Hlivg_14)) { raiseOverflow(); goto LA8_;
								};
								if (nimAddInt((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_14), x_1, &TM__SSaROBXxOTPQwZpw5Hlivg_15)) { raiseOverflow(); goto LA8_;
								};
								idx_1 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_15);
								nimln_(300);								{
									NIM_BOOL T11_;
									NI T13_;
									T11_ = (NIM_BOOL)0;
									T11_ = (idx_1 < ((NI)0));
									if (T11_) goto LA12_;
									T13_ = (*canvas_p0).cells.len;
									T11_ = (T13_ <= idx_1);
LA12_: ;
									if (!T11_) goto LA14_;
									nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");									eqdestroy___backendsZsdl3Zsdl95canvas_u183((&cell_1));
									nimlf_(301, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");									goto LA7;
								}
LA14_: ;
								nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								if (idx_1 < 0 || idx_1 >= (*canvas_p0).cells.len){ raiseIndexError2(idx_1,(*canvas_p0).cells.len-1); goto LA8_;
								}
								eqcopy___backendsZsdl3Zsdl95canvas_u186((&cell_1), (*canvas_p0).cells.p->data[idx_1]);
								nimlf_(304, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");								if (nimMulInt(x_1, ((NI)8), &TM__SSaROBXxOTPQwZpw5Hlivg_16)) { raiseOverflow(); goto LA8_;
								};
								pixelX_1 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_16);
								nimln_(305);								if (nimMulInt(y_1, ((NI)16), &TM__SSaROBXxOTPQwZpw5Hlivg_17)) { raiseOverflow(); goto LA8_;
								};
								pixelY_1 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_17);
								nimln_(308);								T16_ = (NIM_BOOL)0;
								T16_ = SDL_SetRenderDrawColor((*canvas_p0).renderer, cell_1.style.bg.r, cell_1.style.bg.g, cell_1.style.bg.b, ((NU8)255));
								(void)(T16_);
								nimln_(310);								bgRect_1.x = ((float) (pixelX_1));
								bgRect_1.y = ((float) (pixelY_1));
								bgRect_1.w = 8.0f;
								bgRect_1.h = 16.0f;
								nimln_(312);								T17_ = (NIM_BOOL)0;
								T17_ = SDL_RenderFillRect((*canvas_p0).renderer, (&bgRect_1));
								(void)(T17_);
								nimln_(315);								{
									NIM_BOOL T20_;
									T20_ = (NIM_BOOL)0;
									T20_ = !(eqStrings(cell_1.ch, TM__SSaROBXxOTPQwZpw5Hlivg_18));
									if (!(T20_)) goto LA21_;
									T20_ = (((NI)0) < cell_1.ch.len);
LA21_: ;
									if (!T20_) goto LA22_;
									nimln_(317);									{
										NIM_BOOL T26_;
										tyTuple__hSHiEU6uEtL7soi1F4tKCg color_1;
										NIM_BOOL T30_;
										T26_ = (NIM_BOOL)0;
										T26_ = (*canvas_p0).useTTF;
										if (!(T26_)) goto LA27_;
										T26_ = !(((*canvas_p0).font == 0));
LA27_: ;
										if (!T26_) goto LA28_;
										nimln_(319);										color_1.Field0 = cell_1.style.fg.r;
										color_1.Field1 = cell_1.style.fg.g;
										color_1.Field2 = cell_1.style.fg.b;
										nimln_(320);										T30_ = (NIM_BOOL)0;
										T30_ = renderText__backendsZsdl3Zsdl95fonts_u2625((*canvas_p0).renderer, (*canvas_p0).font, cell_1.ch, ((NF) (pixelX_1)), ((NF) (pixelY_1)), color_1);
										if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
										(void)(T30_);
									}
									goto LA24_;
LA28_: ;
									{
										NIM_BOOL T32_;
										NIM_BOOL T33_;
										nimln_(324);										T32_ = (NIM_BOOL)0;
										T32_ = SDL_SetRenderDrawColor((*canvas_p0).renderer, cell_1.style.fg.r, cell_1.style.fg.g, cell_1.style.fg.b, ((NU8)255));
										(void)(T32_);
										nimln_(326);										T33_ = (NIM_BOOL)0;
										T33_ = SDL_RenderDebugText((*canvas_p0).renderer, ((float) (pixelX_1)), ((float) (pixelY_1)), nimToCStringConv(cell_1.ch));
										(void)(T33_);
									}
LA24_: ;
								}
LA22_: ;
								{
									LA8_:;
								}
								{
									nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");									eqdestroy___backendsZsdl3Zsdl95canvas_u183((&cell_1));
								}
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							} LA7: ;
							nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");							if (nimAddInt(i_2, ((NI)1), &TM__SSaROBXxOTPQwZpw5Hlivg_19)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_19);
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__SSaROBXxOTPQwZpw5Hlivg_20)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_20);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
}
static N_INLINE(tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw, none__backendsZsdl3Zsdl95canvas_u51)(void) {
	tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw result;
	nimfr_("none", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/options.nim");
	nimlf_(155, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/options.nim");	nimZeroMem((void*)(&result), sizeof(tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw));
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw*, newSDLCanvas__backendsZsdl3Zsdl95canvas_u42)(NI width_p0, NI height_p1, NimStringV2 title_p2) {
	tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* result;
	tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* T1_;
	tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw T2_;
	NI colontmp_;
	NI colontmp__2;
	NI TM__SSaROBXxOTPQwZpw5Hlivg_21;
	tySequence__hETDgeXECLenIIi9aRQgjOA T3_;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ defaultStyle_1;
	int canvasW_1;
	int canvasH_1;
	int T24_;
	NI TM__SSaROBXxOTPQwZpw5Hlivg_30;
	tySequence__hETDgeXECLenIIi9aRQgjOA T25_;
NIM_BOOL* nimErr_;
	nimfr_("newSDLCanvas", "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(35, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	T1_ = NIM_NIL;
	T1_ = (tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw*) nimNewObj(sizeof(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw), NIM_ALIGNOF(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw));
	result = T1_;
	nimln_(36);	(*result).width = width_p0;
	nimln_(37);	(*result).height = height_p1;
	nimln_(38);	nimZeroMem((void*)(&T2_), sizeof(tyObject_Option__VDiubsYkEKLfAsoBlIa5Hw));
	T2_ = none__backendsZsdl3Zsdl95canvas_u51();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*result).clipRect = T2_;
	nimln_(39);	colontmp_ = ((NI)0);
	colontmp__2 = ((NI)0);
	(*result).offset.Field0 = colontmp_;
	(*result).offset.Field1 = colontmp__2;
	nimln_(42);	(*result).cellWidth = (NI)((width_p0) / (((NI)8)));
	nimln_(43);	(*result).cellHeight = (NI)((height_p1) / (((NI)16)));
	nimlf_(651, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	nimlf_(46, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	if (nimMulInt((*result).cellWidth, (*result).cellHeight, &TM__SSaROBXxOTPQwZpw5Hlivg_21)) { raiseOverflow(); goto BeforeRet_;
	};
	if (((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_21)) < ((NI)0) || ((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_21)) > ((NI)2147483647)){ raiseRangeErrorI((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_21), ((NI)0), ((NI)2147483647)); goto BeforeRet_;
	}
	T3_.len = 0; T3_.p = NIM_NIL;
	T3_ = newSeq__backendsZsdl3Zsdl95canvas_u100(((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_21)));
	nimlf_(651, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqsink___backendsZsdl3Zsdl95canvas_u246((&(*result).cells), T3_);
	nimlf_(47, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	nimZeroMem((void*)(&defaultStyle_1), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	defaultStyle_1.fg = white__srcZtypes_u59();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	defaultStyle_1.bg = black__srcZtypes_u45();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	defaultStyle_1.bold = NIM_FALSE;
	{
		NI i_1;
		NI colontmp__3;
		NI T5_;
		NI i_2;
		i_1 = (NI)0;
		colontmp__3 = (NI)0;
		nimlf_(126, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		nimlf_(48, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");		T5_ = (*result).cells.len;
		colontmp__3 = T5_;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_2 = ((NI)0);
		{
			nimln_(129);			while (1) {
				tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD_;
				tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA T8_;
				NI TM__SSaROBXxOTPQwZpw5Hlivg_23;
				if (!(i_2 < colontmp__3)) goto LA7;
				nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
				nimlf_(48, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				i_1 = i_2;
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (i_1 < 0 || i_1 >= (*result).cells.len){ raiseIndexError2(i_1,(*result).cells.len-1); goto BeforeRet_;
				}
				T8_.ch = TM__SSaROBXxOTPQwZpw5Hlivg_22;
				nimlf_(49, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				nimlf_(74, "/workspaces/telestorie/src/types.nim");				colontmpD_ = eqdup___srcZtypes_u76(defaultStyle_1);
				T8_.style = colontmpD_;
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___backendsZsdl3Zsdl95canvas_u192((&(*result).cells.p->data[i_1]), T8_);
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_2, ((NI)1), &TM__SSaROBXxOTPQwZpw5Hlivg_23)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_23);
			} LA7: ;
		}
	}
	nimlf_(52, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	{
		int T11_;
		NimStringV2 colontmpD__2;
		tyArray__Re75IspeoxXy2oCZHwcRrA T15_;
		NCSTRING T16_;
		T11_ = (int)0;
		T11_ = SDL_Init(((NU32)16416));
		if (!(T11_ < ((NI32)0))) goto LA12_;
		colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
		nimln_(53);		T15_[0] = TM__SSaROBXxOTPQwZpw5Hlivg_25;
		T16_ = (NCSTRING)0;
		T16_ = SDL_GetError();
		colontmpD__2 = cstrToNimstr(T16_);
		T15_[1] = colontmpD__2;
		echoBinSafe(T15_, 2);
		nimln_(54);		nimln_(33);		nimln_(54);		result = ((tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw*) NIM_NIL);
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
		goto BeforeRet_;
		{
			LA14_:;
		}
		{
			if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA12_: ;
	nimlf_(58, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	init__backendsZsdl3Zsdl95fonts_u603();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(61);	(*result).font = TTF_OpenFont("/fonts/KodeMono-VariableFont_wght.ttf", 16.0f);
	nimln_(62);	{
		if (!((*result).font == 0)) goto LA21_;
		nimln_(63);		echoBinSafe(TM__SSaROBXxOTPQwZpw5Hlivg_26, 1);
		nimln_(64);		(*result).useTTF = NIM_FALSE;
	}
	goto LA19_;
LA21_: ;
	{
		nimln_(66);		echoBinSafe(TM__SSaROBXxOTPQwZpw5Hlivg_28, 1);
		nimln_(67);		(*result).useTTF = NIM_TRUE;
	}
LA19_: ;
	canvasW_1 = (int)0;
	canvasH_1 = (int)0;
	nimln_(84);	T24_ = (int)0;
	T24_ = emscripten_get_canvas_element_size("#canvas", (&canvasW_1), (&canvasH_1));
	(void)(T24_);
	nimln_(85);	(*result).width = ((NI) (canvasW_1));
	nimln_(86);	(*result).height = ((NI) (canvasH_1));
	nimln_(89);	(*result).cellWidth = (NI)(((*result).width) / (((NI)8)));
	nimln_(90);	(*result).cellHeight = (NI)(((*result).height) / (((NI)16)));
	nimlf_(651, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	nimlf_(93, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	if (nimMulInt((*result).cellWidth, (*result).cellHeight, &TM__SSaROBXxOTPQwZpw5Hlivg_30)) { raiseOverflow(); goto BeforeRet_;
	};
	if (((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_30)) < ((NI)0) || ((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_30)) > ((NI)2147483647)){ raiseRangeErrorI((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_30), ((NI)0), ((NI)2147483647)); goto BeforeRet_;
	}
	T25_.len = 0; T25_.p = NIM_NIL;
	T25_ = newSeq__backendsZsdl3Zsdl95canvas_u100(((NI)(TM__SSaROBXxOTPQwZpw5Hlivg_30)));
	nimlf_(651, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqsink___backendsZsdl3Zsdl95canvas_u246((&(*result).cells), T25_);
	{
		NI i_3;
		NI colontmp__4;
		NI T27_;
		NI i_4;
		i_3 = (NI)0;
		colontmp__4 = (NI)0;
		nimlf_(126, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		nimlf_(94, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");		T27_ = (*result).cells.len;
		colontmp__4 = T27_;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_4 = ((NI)0);
		{
			nimln_(129);			while (1) {
				tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__3;
				tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA T30_;
				NI TM__SSaROBXxOTPQwZpw5Hlivg_32;
				if (!(i_4 < colontmp__4)) goto LA29;
				nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
				nimlf_(94, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				i_3 = i_4;
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (i_3 < 0 || i_3 >= (*result).cells.len){ raiseIndexError2(i_3,(*result).cells.len-1); goto BeforeRet_;
				}
				T30_.ch = TM__SSaROBXxOTPQwZpw5Hlivg_31;
				nimlf_(95, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");				nimlf_(74, "/workspaces/telestorie/src/types.nim");				colontmpD__3 = eqdup___srcZtypes_u76(defaultStyle_1);
				T30_.style = colontmpD__3;
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___backendsZsdl3Zsdl95canvas_u192((&(*result).cells.p->data[i_3]), T30_);
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_4, ((NI)1), &TM__SSaROBXxOTPQwZpw5Hlivg_32)) { raiseOverflow(); goto BeforeRet_;
				};
				i_4 = (NI)(TM__SSaROBXxOTPQwZpw5Hlivg_32);
			} LA29: ;
		}
	}
	nimlf_(101, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	(*result).window = SDL_CreateWindow(nimToCStringConv(title_p2), ((int) ((*result).width)), ((int) ((*result).height)), 0ULL);
	nimln_(115);	{
		NimStringV2 colontmpD__4;
		tyArray__Re75IspeoxXy2oCZHwcRrA T36_;
		NCSTRING T37_;
		if (!((*result).window == 0)) goto LA33_;
		colontmpD__4.len = 0; colontmpD__4.p = NIM_NIL;
		nimln_(116);		T36_[0] = TM__SSaROBXxOTPQwZpw5Hlivg_34;
		T37_ = (NCSTRING)0;
		T37_ = SDL_GetError();
		colontmpD__4 = cstrToNimstr(T37_);
		T36_[1] = colontmpD__4;
		echoBinSafe(T36_, 2);
		nimln_(119);		nimln_(33);		nimln_(119);		result = ((tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw*) NIM_NIL);
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (colontmpD__4.p && !(colontmpD__4.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__4.p);
}
		goto BeforeRet_;
		{
			LA35_:;
		}
		{
			if (colontmpD__4.p && !(colontmpD__4.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__4.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA33_: ;
	nimlf_(124, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	(*result).renderer = SDL_CreateRenderer((*result).window, ((NCSTRING) NIM_NIL));
	nimln_(128);	{
		NimStringV2 colontmpD__5;
		tyArray__Re75IspeoxXy2oCZHwcRrA T45_;
		NCSTRING T46_;
		if (!((*result).renderer == 0)) goto LA42_;
		colontmpD__5.len = 0; colontmpD__5.p = NIM_NIL;
		nimln_(129);		T45_[0] = TM__SSaROBXxOTPQwZpw5Hlivg_36;
		T46_ = (NCSTRING)0;
		T46_ = SDL_GetError();
		colontmpD__5 = cstrToNimstr(T46_);
		T45_[1] = colontmpD__5;
		echoBinSafe(T45_, 2);
		nimln_(130);		SDL_DestroyWindow((*result).window);
		nimln_(133);		nimln_(33);		nimln_(133);		result = ((tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw*) NIM_NIL);
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (colontmpD__5.p && !(colontmpD__5.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__5.p);
}
		goto BeforeRet_;
		{
			LA44_:;
		}
		{
			if (colontmpD__5.p && !(colontmpD__5.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__5.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA42_: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1) {
	NI result;
	nimfr_("-%", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");
	nimlf_(364, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");	nimln_(368);	result = ((NI) ((NU)((NU32)(((NU) (x_p0))) - (NU32)(((NU) (y_p1))))));
	popFrame();
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p_p0) {
	NIM_BOOL result;
	nimfr_("nimDecRefIsLast", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");
	nimlf_(219, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");	result = NIM_FALSE;
	nimln_(220);	{
		tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* cell_1;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		nimln_(221);		nimln_(60);		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
		cell_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T5_));
		nimln_(235);		{
			if (!((NI)((NI32)((*cell_1).rc) >> (NU32)(((NI)4))) == ((NI)0))) goto LA8_;
			nimln_(236);			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			nimln_(86);			(*cell_1).rc = minuspercent___system_u813((*cell_1).rc, ((NI)16));
		}
LA6_: ;
	}
LA3_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___backendsZsdl3Zsdl95canvas_u325)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* dest_p0) {
	eqdestroy___backendsZsdl3Zsdl95canvas_u237((*dest_p0).cells);
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___backendsZsdl3Zsdl95canvas_u363)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast(dest_p0);
		if (!T3_) goto LA4_;
		eqdestroy___backendsZsdl3Zsdl95canvas_u325((&(*dest_p0)));
		nimRawDispose(dest_p0, ((NI)4));
	}
LA4_: ;
}
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1) {
	NI result;
	nimfr_("+%", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");
	nimlf_(353, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");	nimln_(357);	result = ((NI) ((NU)((NU32)(((NU) (x_p0))) + (NU32)(((NU) (y_p1))))));
	popFrame();
	return result;
}
static N_INLINE(void, nimIncRef)(void* p_p0) {
	NI T1_;
	NI T2_;
	nimfr_("nimIncRef", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");
	nimlf_(88, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");	nimln_(60);	T1_ = (NI)0;
	T1_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
	nimln_(88);	nimln_(60);	T2_ = (NI)0;
	T2_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
	nimln_(88);	(*((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T1_))).rc = pluspercent___system_u793((*((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T2_))).rc, ((NI)16));
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___backendsZsdl3Zsdl95canvas_u366)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw** dest_p0, tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* src_p1) {
	{
		if (!src_p1) goto LA3_;
		nimIncRef(src_p1);
	}
LA3_: ;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = nimDecRefIsLast((*dest_p0));
		if (!T7_) goto LA8_;
		eqdestroy___backendsZsdl3Zsdl95canvas_u325((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)4));
	}
LA8_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(void, shutdown__backendsZsdl3Zsdl95canvas_u423)(tyObject_SDLCanvascolonObjectType___jfiVz4osS74NJSSsVwIKkw* canvas_p0) {
	nimfr_("shutdown", "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");
	nimlf_(139, "/workspaces/telestorie/backends/sdl3/sdl_canvas.nim");	{
		if (!!(((*canvas_p0).renderer == 0))) goto LA3_;
		nimln_(140);		SDL_DestroyRenderer((*canvas_p0).renderer);
	}
LA3_: ;
	nimln_(141);	{
		if (!!(((*canvas_p0).window == 0))) goto LA7_;
		nimln_(142);		SDL_DestroyWindow((*canvas_p0).window);
	}
LA7_: ;
	nimln_(143);	SDL_Quit();
	popFrame();
}
