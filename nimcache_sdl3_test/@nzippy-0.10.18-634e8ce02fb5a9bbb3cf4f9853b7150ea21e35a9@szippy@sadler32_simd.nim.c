/* Generated by Nim Compiler v2.2.6 */
/* Compiled for: Linux, amd64, gcc */
/* Command for C compiler:
   gcc -c  -w -fmax-errors=3 -fno-strict-aliasing -pthread -I/workspaces/telestorie/lib  -mssse3  -I/home/codespace/.choosenim/toolchains/nim-2.2.6/lib -I/workspaces/telestorie -o /workspaces/telestorie/nimcache_sdl3_test/@nzippy-0.10.18-634e8ce02fb5a9bbb3cf4f9853b7150ea21e35a9@szippy@sadler32_simd.nim.c.o /workspaces/telestorie/nimcache_sdl3_test/@nzippy-0.10.18-634e8ce02fb5a9bbb3cf4f9853b7150ea21e35a9@szippy@sadler32_simd.nim.c */
#define NIM_INTBITS 64

#include "nimbase.h"
#include "emmintrin.h"
#include "tmmintrin.h"
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(proc, file) \
  TFrame FR_; \
  FR_.procname = proc; FR_.filename = file; FR_.line = 0; FR_.len = 0; nimFrame(&FR_);

#define nimln_(n) \
  FR_.line = n;

#define nimlf_(n, file) \
  FR_.line = n; FR_.filename = file;

typedef struct tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q;
typedef struct tyObject_CatchableError__RGaUZ0FR8scVeQ8Z1MyBxw tyObject_CatchableError__RGaUZ0FR8scVeQ8Z1MyBxw;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tySequence__xhQiLwJj5RFCOa9c4fVuodA tySequence__xhQiLwJj5RFCOa9c4fVuodA;
typedef struct tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content;
typedef struct tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg;
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
	void* vTable[SEQ_DECL_SIZE];
};
struct RootObj {
	TNimTypeV2* m_type;
};
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tySequence__xhQiLwJj5RFCOa9c4fVuodA {
  NI len; tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content* p;
};
struct Exception {
	RootObj Sup;
	Exception* parent;
	NCSTRING name;
	NimStringV2 message;
	tySequence__xhQiLwJj5RFCOa9c4fVuodA trace;
	Exception* up;
};
struct tyObject_CatchableError__RGaUZ0FR8scVeQ8Z1MyBxw {
	Exception Sup;
};
struct tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q {
	tyObject_CatchableError__RGaUZ0FR8scVeQ8Z1MyBxw Sup;
};
struct tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg {
	NCSTRING procname;
	NI line;
	NCSTRING filename;
};
struct tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content { NI cap; tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg data[SEQ_DECL_SIZE]; };
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void, raiseExceptionEx)(Exception* e_p0, NCSTRING ename_p1, NCSTRING procname_p2, NCSTRING filename_p3, NI line_p4);
static N_INLINE(void, nimFrame)(TFrame* s_p0);
N_LIB_PRIVATE N_NOINLINE(void, callDepthLimitReached__system_u4643)(void);
static N_INLINE(void, popFrame)(void);
extern TNimTypeV2 NTIv2__9bC0xXOvbp0oMd69bjdtXY5Q_;
static const struct {
  NI cap; NIM_CHAR data[16+1];
} TM__I2VeM9cEba9cyIw2Ucb6ytPQ_2 = { 16 | NIM_STRLIT_FLAG, "Adler-32 len < 0" };
static const NimStringV2 TM__I2VeM9cEba9cyIw2Ucb6ytPQ_3 = {16, (NimStrPayload*)&TM__I2VeM9cEba9cyIw2Ucb6ytPQ_2};
static const struct {
  NI cap; NIM_CHAR data[26+1];
} TM__I2VeM9cEba9cyIw2Ucb6ytPQ_4 = { 26 | NIM_STRLIT_FLAG, "Adler-32 len > uint32.high" };
static const NimStringV2 TM__I2VeM9cEba9cyIw2Ucb6ytPQ_5 = {26, (NimStrPayload*)&TM__I2VeM9cEba9cyIw2Ucb6ytPQ_4};
extern NIM_THREADVAR TFrame* framePtr__system_u2743;
static N_INLINE(void, nimFrame)(TFrame* s_p0) {
	{
		if (!(framePtr__system_u2743 == ((TFrame*) NIM_NIL))) goto LA3_;
		(*s_p0).calldepth = ((NI16)0);
	}
	goto LA1_;
LA3_: ;
	{
		(*s_p0).calldepth = (NI16)((*framePtr__system_u2743).calldepth + ((NI16)1));
	}
LA1_: ;
	(*s_p0).prev = framePtr__system_u2743;
	framePtr__system_u2743 = s_p0;
	{
		if (!((*s_p0).calldepth == ((NI16)2000))) goto LA8_;
		callDepthLimitReached__system_u4643();
	}
LA8_: ;
}
static N_INLINE(void, popFrame)(void) {
	framePtr__system_u2743 = (*framePtr__system_u2743).prev;
}
N_LIB_PRIVATE N_NIMCALL(NU32, adler32_ssse3__pkgZzippyZadler3295simd_u84)(void* src_p0, NI len_p1) {
	NU32 result;
	NU8* src_2;
	NU32 pos_1;
	NU32 remaining_1;
	NU32 s1_1;
	NU32 s2_1;
	NU32 blocks_1;
	__m128i tap1_1;
	__m128i tap2_1;
	__m128i zero_1;
	__m128i ones_1;
	nimfr_("adler32_ssse3", "/home/codespace/.nimble/pkgs2/zippy-0.10.18-634e8ce02fb5a9bbb3cf4f9853b7150ea21e35a9/zippy/adler32_simd.nim");
{	result = (NU32)0;
	nimlf_(46, "/home/codespace/.nimble/pkgs2/zippy-0.10.18-634e8ce02fb5a9bbb3cf4f9853b7150ea21e35a9/zippy/adler32_simd.nim");	{
		if (!(len_p1 == ((NI)0))) goto LA3_;
		nimln_(47);		nimln_(45);		nimln_(47);		result = ((NU32)1);
		goto BeforeRet_;
	}
LA3_: ;
	nimln_(49);	{
		tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q* T9_;
		if (!(len_p1 < ((NI)0))) goto LA7_;
		T9_ = NIM_NIL;
		T9_ = (tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q*) nimNewObj(sizeof(tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q), NIM_ALIGNOF(tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q));
		(*T9_).Sup.Sup.Sup.m_type = (&NTIv2__9bC0xXOvbp0oMd69bjdtXY5Q_);
		(*T9_).Sup.Sup.name = "ZippyError";
		(*T9_).Sup.Sup.message = TM__I2VeM9cEba9cyIw2Ucb6ytPQ_3;
		(*T9_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		nimln_(50);		raiseExceptionEx((Exception*)T9_, "ZippyError", "adler32_ssse3", "/home/codespace/.nimble/pkgs2/zippy-0.10.18-634e8ce02fb5a9bbb3cf4f9853b7150ea21e35a9/zippy/adler32_simd.nim", 50);
goto BeforeRet_;
	}
LA7_: ;
	nimln_(51);	{
		tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q* T14_;
		if (!((NU64)(4294967295ULL) < (NU64)(((NU64) (len_p1))))) goto LA12_;
		T14_ = NIM_NIL;
		T14_ = (tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q*) nimNewObj(sizeof(tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q), NIM_ALIGNOF(tyObject_ZippyError__9bC0xXOvbp0oMd69bjdtXY5Q));
		(*T14_).Sup.Sup.Sup.m_type = (&NTIv2__9bC0xXOvbp0oMd69bjdtXY5Q_);
		(*T14_).Sup.Sup.name = "ZippyError";
		(*T14_).Sup.Sup.message = TM__I2VeM9cEba9cyIw2Ucb6ytPQ_5;
		(*T14_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		nimln_(52);		raiseExceptionEx((Exception*)T14_, "ZippyError", "adler32_ssse3", "/home/codespace/.nimble/pkgs2/zippy-0.10.18-634e8ce02fb5a9bbb3cf4f9853b7150ea21e35a9/zippy/adler32_simd.nim", 52);
goto BeforeRet_;
	}
LA12_: ;
	nimln_(54);	src_2 = ((NU8*) (src_p0));
	pos_1 = (NU32)0;
	nimln_(58);	remaining_1 = ((NU32) (len_p1));
	nimln_(59);	s1_1 = ((NU32)1);
	nimln_(60);	s2_1 = ((NU32)0);
	nimln_(62);	blocks_1 = (NU32)((NU32)(remaining_1) / (NU32)(((NU32)32)));
	nimln_(64);	remaining_1 -= (NU32)((NU32)(blocks_1) * (NU32)(((NU32)32)));
	nimln_(67);	tap1_1 = _mm_setr_epi8(((NI)32), ((NI)31), ((NI)30), ((NI)29), ((NI)28), ((NI)27), ((NI)26), ((NI)25), ((NI)24), ((NI)23), ((NI)22), ((NI)21), ((NI)20), ((NI)19), ((NI)18), ((NI)17));
	nimln_(68);	tap2_1 = _mm_setr_epi8(((NI)16), ((NI)15), ((NI)14), ((NI)13), ((NI)12), ((NI)11), ((NI)10), ((NI)9), ((NI)8), ((NI)7), ((NI)6), ((NI)5), ((NI)4), ((NI)3), ((NI)2), ((NI)1));
	nimln_(69);	zero_1 = _mm_setzero_si128();
	nimln_(70);	ones_1 = _mm_set1_epi16(((NI)1));
	{
		nimln_(72);		while (1) {
			NU32 n_1;
			__m128i vecPs_1;
			__m128i vecS2_1;
			__m128i vecS1_1;
			__m128i T27_;
			__m128i T28_;
			__m128i T29_;
			NI32 T30_;
			__m128i T31_;
			__m128i T32_;
			NI32 T33_;
			if (!((NU32)(((NU32)0)) < (NU32)(blocks_1))) goto LA16;
			nimln_(73);			n_1 = ((NU32)173);
			nimln_(74);			{
				if (!((NU32)(blocks_1) < (NU32)(n_1))) goto LA19_;
				nimln_(75);				n_1 = blocks_1;
			}
LA19_: ;
			nimln_(77);			blocks_1 -= n_1;
			nimln_(80);			vecPs_1 = _mm_set_epi32(((NI)0), ((NI)0), ((NI)0), (NU32)((NU32)(s1_1) * (NU32)(n_1)));
			nimln_(81);			vecS2_1 = _mm_set_epi32(((NI)0), ((NI)0), ((NI)0), s2_1);
			nimln_(82);			vecS1_1 = _mm_set_epi32(((NI)0), ((NI)0), ((NI)0), ((NI)0));
			{
				nimln_(84);				while (1) {
					__m128i bytes1_1;
					__m128i bytes2_1;
					__m128i T23_;
					__m128i mad1_1;
					__m128i T24_;
					__m128i T25_;
					__m128i mad2_1;
					__m128i T26_;
					if (!((NU32)(((NU32)0)) < (NU32)(n_1))) goto LA22;
					nimln_(86);					bytes1_1 = _mm_loadu_si128(((void*) ((&src_2[(NU32)((NU32)(pos_1) + (NU32)(((NU32)0)))]))));
					nimln_(87);					bytes2_1 = _mm_loadu_si128(((void*) ((&src_2[(NU32)((NU32)(pos_1) + (NU32)(((NU32)16)))]))));
					nimln_(89);					vecPs_1 = _mm_add_epi32(vecPs_1, vecS1_1);
					nimln_(91);					T23_ = _mm_sad_epu8(bytes1_1, zero_1);
					vecS1_1 = _mm_add_epi32(vecS1_1, T23_);
					nimln_(92);					mad1_1 = _mm_maddubs_epi16(bytes1_1, tap1_1);
					nimln_(93);					T24_ = _mm_madd_epi16(mad1_1, ones_1);
					vecS2_1 = _mm_add_epi32(vecS2_1, T24_);
					nimln_(94);					T25_ = _mm_sad_epu8(bytes2_1, zero_1);
					vecS1_1 = _mm_add_epi32(vecS1_1, T25_);
					nimln_(95);					mad2_1 = _mm_maddubs_epi16(bytes2_1, tap2_1);
					nimln_(96);					T26_ = _mm_madd_epi16(mad2_1, ones_1);
					vecS2_1 = _mm_add_epi32(vecS2_1, T26_);
					nimln_(98);					n_1 -= ((NI)1);
					nimln_(99);					pos_1 += ((NU32)32);
				} LA22: ;
			}
			nimln_(101);			T27_ = _mm_slli_epi32(vecPs_1, ((NI)5));
			vecS2_1 = _mm_add_epi32(vecS2_1, T27_);
			nimln_(103);			T28_ = _mm_shuffle_epi32(vecS1_1, ((NI32)177));
			vecS1_1 = _mm_add_epi32(vecS1_1, T28_);
			nimln_(104);			T29_ = _mm_shuffle_epi32(vecS1_1, ((NI32)78));
			vecS1_1 = _mm_add_epi32(vecS1_1, T29_);
			nimln_(105);			T30_ = (NI32)0;
			T30_ = _mm_cvtsi128_si32(vecS1_1);
			s1_1 += ((NU32) (T30_));
			nimln_(106);			T31_ = _mm_shuffle_epi32(vecS2_1, ((NI32)177));
			vecS2_1 = _mm_add_epi32(vecS2_1, T31_);
			nimln_(107);			T32_ = _mm_shuffle_epi32(vecS2_1, ((NI32)78));
			vecS2_1 = _mm_add_epi32(vecS2_1, T32_);
			nimln_(108);			T33_ = (NI32)0;
			T33_ = _mm_cvtsi128_si32(vecS2_1);
			s2_1 = ((NU32) (T33_));
			nimln_(110);			s1_1 = (NU32)((NU32)(s1_1) % (NU32)(((NU32)65521)));
			nimln_(111);			s2_1 = (NU32)((NU32)(s2_1) % (NU32)(((NU32)65521)));
		} LA16: ;
	}
	{
		NU32 i_1;
		NU32 res_1;
		i_1 = (NU32)0;
		nimlf_(137, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		res_1 = ((NU32)0);
		{
			nimln_(138);			while (1) {
				if (!((NU32)(res_1) < (NU32)(remaining_1))) goto LA36;
				nimlf_(113, "/home/codespace/.nimble/pkgs2/zippy-0.10.18-634e8ce02fb5a9bbb3cf4f9853b7150ea21e35a9/zippy/adler32_simd.nim");				i_1 = res_1;
				nimln_(114);				s1_1 += ((NU32) (src_2[(NU32)((NU32)(pos_1) + (NU32)(i_1))]));
				nimln_(115);				s2_1 += s1_1;
				nimlf_(140, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				res_1 += ((NI)1);
			} LA36: ;
		}
	}
	nimlf_(117, "/home/codespace/.nimble/pkgs2/zippy-0.10.18-634e8ce02fb5a9bbb3cf4f9853b7150ea21e35a9/zippy/adler32_simd.nim");	s1_1 = (NU32)((NU32)(s1_1) % (NU32)(((NU32)65521)));
	nimln_(118);	s2_1 = (NU32)((NU32)(s2_1) % (NU32)(((NU32)65521)));
	nimln_(120);	result = (NU32)((NU32)((NU64)(s2_1) << (NU64)(((NI)16))) | s1_1);
	}BeforeRet_: ;
	popFrame();
	return result;
}
