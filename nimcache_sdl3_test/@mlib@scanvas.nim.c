/* Generated by Nim Compiler v2.2.6 */
/* Compiled for: Linux, amd64, gcc */
/* Command for C compiler:
   gcc -c  -w -fmax-errors=3 -fno-strict-aliasing -pthread -I/workspaces/telestorie/lib   -I/home/codespace/.choosenim/toolchains/nim-2.2.6/lib -I/workspaces/telestorie -o /workspaces/telestorie/nimcache_sdl3_test/@mlib@scanvas.nim.c.o /workspaces/telestorie/nimcache_sdl3_test/@mlib@scanvas.nim.c */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
#include <math.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(proc, file) \
  TFrame FR_; \
  FR_.procname = proc; FR_.filename = file; FR_.line = 0; FR_.len = 0; nimFrame(&FR_);

#define nimln_(n) \
  FR_.line = n;

#define nimlf_(n, file) \
  FR_.line = n; FR_.filename = file;

typedef struct tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw;
typedef struct tySequence__YgO2VT9ba3Xqz9c7OAwDz9bbA tySequence__YgO2VT9ba3Xqz9c7OAwDz9bbA;
typedef struct tySequence__YgO2VT9ba3Xqz9c7OAwDz9bbA_Content tySequence__YgO2VT9ba3Xqz9c7OAwDz9bbA_Content;
typedef struct tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw;
typedef struct tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA;
typedef struct tyTuple__hSHiEU6uEtL7soi1F4tKCg tyTuple__hSHiEU6uEtL7soi1F4tKCg;
typedef struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ tyObject_Style__UURjArTrf2wmcCbN5MncAQ;
typedef struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ;
typedef struct tySequence__b2TMramkfBG8lW2tXCmrbQ tySequence__b2TMramkfBG8lW2tXCmrbQ;
typedef struct tySequence__b2TMramkfBG8lW2tXCmrbQ_Content tySequence__b2TMramkfBG8lW2tXCmrbQ_Content;
typedef struct tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ;
typedef struct tySequence__SFipDZIkFtPcrLs0AGBBjQ tySequence__SFipDZIkFtPcrLs0AGBBjQ;
typedef struct tySequence__SFipDZIkFtPcrLs0AGBBjQ_Content tySequence__SFipDZIkFtPcrLs0AGBBjQ_Content;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw;
typedef struct tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q;
typedef struct tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA tySequence__hETDgeXECLenIIi9aRQgjOA;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content tySequence__hETDgeXECLenIIi9aRQgjOA_Content;
typedef struct tyObject_Camera__bAKkpUa0tDGNmbVnEH3zjA tyObject_Camera__bAKkpUa0tDGNmbVnEH3zjA;
typedef struct tySequence__HE9bUKMf89b0tHZqiYlor7zg tySequence__HE9bUKMf89b0tHZqiYlor7zg;
typedef struct tySequence__HE9bUKMf89b0tHZqiYlor7zg_Content tySequence__HE9bUKMf89b0tHZqiYlor7zg_Content;
typedef struct tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q;
typedef struct tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content;
typedef struct tyObject_HashSet__smPxoGG8yFEJicoqITBXJw tyObject_HashSet__smPxoGG8yFEJicoqITBXJw;
typedef struct tySequence__4eRCaZmrYLLw2k30GPTiMw tySequence__4eRCaZmrYLLw2k30GPTiMw;
typedef struct tySequence__4eRCaZmrYLLw2k30GPTiMw_Content tySequence__4eRCaZmrYLLw2k30GPTiMw_Content;
typedef struct tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA;
typedef struct tyObject_Table__g89a9c4EKKrVz7xjdhWgSAxw tyObject_Table__g89a9c4EKKrVz7xjdhWgSAxw;
typedef struct tySequence__JiteSJxrvz63iP2o9bcn2Sg tySequence__JiteSJxrvz63iP2o9bcn2Sg;
typedef struct tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content;
typedef struct tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw;
typedef struct tySequence__yAQ9af4LrMfsCspWq9a5u6Og tySequence__yAQ9af4LrMfsCspWq9a5u6Og;
typedef struct tySequence__yAQ9af4LrMfsCspWq9a5u6Og_Content tySequence__yAQ9af4LrMfsCspWq9a5u6Og_Content;
typedef struct tyObject_Table__wHO9bxCEQsaOZ0Zzubt3C7Q tyObject_Table__wHO9bxCEQsaOZ0Zzubt3C7Q;
typedef struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og tySequence__pUxI6Ljo6IKKHXKOZkQ7Og;
typedef struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content;
typedef struct tyObject_TerminalInputParser__GHUTtss0GjS80F0ZztO53Q tyObject_TerminalInputParser__GHUTtss0GjS80F0ZztO53Q;
typedef struct tyObject_StringCsiState__yPPwgzKq9cCUo1gaKFHgn6w tyObject_StringCsiState__yPPwgzKq9cCUo1gaKFHgn6w;
typedef struct tySequence__9as8hCyx8WDhZXqXMf9bhgtA tySequence__9as8hCyx8WDhZXqXMf9bhgtA;
typedef struct tySequence__9as8hCyx8WDhZXqXMf9bhgtA_Content tySequence__9as8hCyx8WDhZXqXMf9bhgtA_Content;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct tySequence__xhQiLwJj5RFCOa9c4fVuodA tySequence__xhQiLwJj5RFCOa9c4fVuodA;
typedef struct tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content;
typedef struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ;
typedef struct tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg;
typedef struct tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ;
typedef struct tySequence__KCtCp2ewMkW3eTfCqhAg9ag tySequence__KCtCp2ewMkW3eTfCqhAg9ag;
typedef struct tySequence__KCtCp2ewMkW3eTfCqhAg9ag_Content tySequence__KCtCp2ewMkW3eTfCqhAg9ag_Content;
typedef struct tyObject_GcEnv__P5mFx1YRqn2iTLyn6f3MWg tyObject_GcEnv__P5mFx1YRqn2iTLyn6f3MWg;
typedef struct tyObject_CellSeq__Y61EHKUy9bziu9aZLY53Z6TA tyObject_CellSeq__Y61EHKUy9bziu9aZLY53Z6TA;
typedef struct tyTuple__N4J9cV4JZGem3ljqqj5rT0Q tyTuple__N4J9cV4JZGem3ljqqj5rT0Q;
typedef struct tyObject_CellSeq__h159c0ZpKR8vbgG5c0l2IHQ tyObject_CellSeq__h159c0ZpKR8vbgG5c0l2IHQ;
typedef struct tyTuple__lBireGel9cGbbGOTpgwUdwQ tyTuple__lBireGel9cGbbGOTpgwUdwQ;
typedef struct tyObject_Link__6V5xLDIraXInP9am5HdL18g tyObject_Link__6V5xLDIraXInP9am5HdL18g;
typedef struct tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A;
typedef struct tyObject_Env__YOkjv76lcCADUm0ClKJM5g tyObject_Env__YOkjv76lcCADUm0ClKJM5g;
typedef struct tySequence__Gf9avO3sd1YsdKIYcdAbNvA tySequence__Gf9avO3sd1YsdKIYcdAbNvA;
typedef struct tySequence__Gf9avO3sd1YsdKIYcdAbNvA_Content tySequence__Gf9avO3sd1YsdKIYcdAbNvA_Content;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ tySequence__sM4lkSb7zS6F7OVMvW9cffQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content;
typedef struct tyObject_FunctionValcolonObjectType___pGR2JmOxTVrNPc3jK4h0Xg tyObject_FunctionValcolonObjectType___pGR2JmOxTVrNPc3jK4h0Xg;
typedef struct tyObject_Table__Kkv168EwyeC2mcswHBvZ1A tyObject_Table__Kkv168EwyeC2mcswHBvZ1A;
typedef struct tySequence__2nVARL7psn6awrm07aftcQ tySequence__2nVARL7psn6awrm07aftcQ;
typedef struct tySequence__2nVARL7psn6awrm07aftcQ_Content tySequence__2nVARL7psn6awrm07aftcQ_Content;
typedef struct tyObject_Rand__xd6HIyS1W9aI4gBq8W9ct0qA tyObject_Rand__xd6HIyS1W9aI4gBq8W9ct0qA;
typedef struct tyObject_SectionManager__3O1n9bPakZR219aHHa6w8a4w tyObject_SectionManager__3O1n9bPakZR219aHHa6w8a4w;
typedef struct tyTuple__GZW9aA9aWhw50AbgdGq4sF7w tyTuple__GZW9aA9aWhw50AbgdGq4sF7w;
typedef struct tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ;
typedef struct tyObject_ContentBlock__GydJzwYQBr9aX1JqGLPpSJg tyObject_ContentBlock__GydJzwYQBr9aX1JqGLPpSJg;
typedef struct tySequence__S9b9bp4vmSJimm7gXb8S7U4A tySequence__S9b9bp4vmSJimm7gXb8S7U4A;
typedef struct tySequence__S9b9bp4vmSJimm7gXb8S7U4A_Content tySequence__S9b9bp4vmSJimm7gXb8S7U4A_Content;
typedef struct tySequence__4eQHGndY6XBYpFOH09apV8Q tySequence__4eQHGndY6XBYpFOH09apV8Q;
typedef struct tySequence__4eQHGndY6XBYpFOH09apV8Q_Content tySequence__4eQHGndY6XBYpFOH09apV8Q_Content;
typedef struct tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA;
typedef struct tyTuple__UV3llMMYFckfui8YMBuUZA tyTuple__UV3llMMYFckfui8YMBuUZA;
typedef struct tySequence__O5lGybQGugn7XHKA8EjO8w tySequence__O5lGybQGugn7XHKA8EjO8w;
typedef struct tySequence__O5lGybQGugn7XHKA8EjO8w_Content tySequence__O5lGybQGugn7XHKA8EjO8w_Content;
typedef struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA;
typedef struct tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw;
typedef struct tyTuple__cEv1MxME2o0Bb4INiYKVmQ tyTuple__cEv1MxME2o0Bb4INiYKVmQ;
typedef struct tyTuple__8ZxhPt1NwfElsJs8zUSV9bg tyTuple__8ZxhPt1NwfElsJs8zUSV9bg;
typedef struct tyTuple__QeWl6B6ffS4pU6WWrtcrDw tyTuple__QeWl6B6ffS4pU6WWrtcrDw;
typedef struct tyTuple__g1w83cyyBYiVU9c8WEJWnjQ tyTuple__g1w83cyyBYiVU9c8WEJWnjQ;
typedef struct tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ;
typedef struct tyTuple__9a36bWaF9cbmf9bDveJf6DOxA tyTuple__9a36bWaF9cbmf9bDveJf6DOxA;
typedef struct tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg;
typedef struct tyTuple__9bJQUgvR2blr9cUNMhbZPKyA tyTuple__9bJQUgvR2blr9cUNMhbZPKyA;
typedef struct tyObject_MarkdownElement__6CcW9a6nDOFxTP2Lq6QuXaA tyObject_MarkdownElement__6CcW9a6nDOFxTP2Lq6QuXaA;
typedef struct tyObject_StmtObj__PU3hDYOyNlb5NwdMYYosVA tyObject_StmtObj__PU3hDYOyNlb5NwdMYYosVA;
struct tySequence__YgO2VT9ba3Xqz9c7OAwDz9bbA {
  NI len; tySequence__YgO2VT9ba3Xqz9c7OAwDz9bbA_Content* p;
};
struct tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw {
	tySequence__YgO2VT9ba3Xqz9c7OAwDz9bbA data;
	NI counter;
};
struct tyTuple__hSHiEU6uEtL7soi1F4tKCg {
	NU8 Field0;
	NU8 Field1;
	NU8 Field2;
};
struct tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA {
	tyTuple__hSHiEU6uEtL7soi1F4tKCg fg;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg bg;
	NIM_BOOL bold;
	NIM_BOOL italic;
	NIM_BOOL underline;
	NIM_BOOL dim;
};
struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ {
	NU8 r;
	NU8 g;
	NU8 b;
};
struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ bg;
	NIM_BOOL bold;
	NIM_BOOL underline;
	NIM_BOOL italic;
	NIM_BOOL dim;
};
struct tySequence__b2TMramkfBG8lW2tXCmrbQ {
  NI len; tySequence__b2TMramkfBG8lW2tXCmrbQ_Content* p;
};
struct tySequence__SFipDZIkFtPcrLs0AGBBjQ {
  NI len; tySequence__SFipDZIkFtPcrLs0AGBBjQ_Content* p;
};
struct tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ {
	tySequence__SFipDZIkFtPcrLs0AGBBjQ data;
	NI counter;
};
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tySequence__hETDgeXECLenIIi9aRQgjOA {
  NI len; tySequence__hETDgeXECLenIIi9aRQgjOA_Content* p;
};
struct tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw {
	NI width;
	NI height;
	tySequence__hETDgeXECLenIIi9aRQgjOA cells;
	NI clipX;
	NI clipY;
	NI clipW;
	NI clipH;
	NI offsetX;
	NI offsetY;
};
struct tyObject_Camera__bAKkpUa0tDGNmbVnEH3zjA {
	NF x;
	NF y;
	NF targetX;
	NF targetY;
};
struct tySequence__HE9bUKMf89b0tHZqiYlor7zg {
  NI len; tySequence__HE9bUKMf89b0tHZqiYlor7zg_Content* p;
};
struct tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q {
  NI len; tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content* p;
};
struct tySequence__4eRCaZmrYLLw2k30GPTiMw {
  NI len; tySequence__4eRCaZmrYLLw2k30GPTiMw_Content* p;
};
struct tyObject_HashSet__smPxoGG8yFEJicoqITBXJw {
	tySequence__4eRCaZmrYLLw2k30GPTiMw data;
	NI counter;
};
typedef struct {
N_NIMCALL_PTR(NIM_BOOL, ClP_0) (tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA* codeBlock_p0, NimStringV2 lifecycle_p1, void* ClE_0);
void* ClE_0;
} tyProc__1HIi57XkOHWiA9beIRQnEiw;
struct tySequence__JiteSJxrvz63iP2o9bcn2Sg {
  NI len; tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content* p;
};
struct tyObject_Table__g89a9c4EKKrVz7xjdhWgSAxw {
	tySequence__JiteSJxrvz63iP2o9bcn2Sg data;
	NI counter;
};
struct tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw {
	NI x;
	NI y;
	NI width;
	NI height;
};
struct tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw {
	tyObject_Camera__bAKkpUa0tDGNmbVnEH3zjA camera;
	tySequence__HE9bUKMf89b0tHZqiYlor7zg sections;
	tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q links;
	NI focusedLinkIdx;
	tyObject_HashSet__smPxoGG8yFEJicoqITBXJw visitedSections;
	tyObject_HashSet__smPxoGG8yFEJicoqITBXJw hiddenSections;
	tyObject_HashSet__smPxoGG8yFEJicoqITBXJw removedSections;
	NIM_BOOL mouseEnabled;
	NIM_BOOL presentationMode;
	NF lastRenderTime;
	NI lastViewportWidth;
	NI lastViewportHeight;
	tyProc__1HIi57XkOHWiA9beIRQnEiw executeCallback;
	tyObject_Table__g89a9c4EKKrVz7xjdhWgSAxw contentBuffers;
	tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ frontMatter;
	tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw currentContentBounds;
	tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw currentContentBufferBounds;
	tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer;
	tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q** appState;
	tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw* styleSheet;
};
struct tySequence__yAQ9af4LrMfsCspWq9a5u6Og {
  NI len; tySequence__yAQ9af4LrMfsCspWq9a5u6Og_Content* p;
};
struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og {
  NI len; tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content* p;
};
struct tyObject_Table__wHO9bxCEQsaOZ0Zzubt3C7Q {
	tySequence__pUxI6Ljo6IKKHXKOZkQ7Og data;
	NI counter;
};
typedef NU8 tyEnum_ParserState__6PLEBin7h1EQimLs0bNQ8Q;
typedef NIM_CHAR tyArray__Wfh9bjgBQ4UqJsyISUuDSuA[16];
typedef NI64 tyArray__OVZLCdT9cxlVUwpPH2Dz8OA[16];
struct tyObject_StringCsiState__yPPwgzKq9cCUo1gaKFHgn6w {
	NI leaderlen;
	tyArray__Wfh9bjgBQ4UqJsyISUuDSuA leader;
	NI argi;
	tyArray__OVZLCdT9cxlVUwpPH2Dz8OA args;
};
struct tyObject_TerminalInputParser__GHUTtss0GjS80F0ZztO53Q {
	NIM_BOOL prevEsc;
	NIM_BOOL inEsc;
	NIM_BOOL inEscO;
	NIM_BOOL inUtf8;
	NI utf8Remaining;
	NimStringV2 utf8Buffer;
	tyEnum_ParserState__6PLEBin7h1EQimLs0bNQ8Q state;
	tyObject_StringCsiState__yPPwgzKq9cCUo1gaKFHgn6w csi;
	NI intermedlen;
	tyArray__Wfh9bjgBQ4UqJsyISUuDSuA intermed;
	NI mouseCol;
	NI mouseRow;
	NI width;
	NI height;
	NF escTimer;
	NIM_BOOL endedInEsc;
	NIM_BOOL enableEscapeTimeout;
	NI escapeTimeout;
	NIM_BOOL mouseTrackingDisabled;
	NF mouseTrackingReenableTime;
};
struct tySequence__9as8hCyx8WDhZXqXMf9bhgtA {
  NI len; tySequence__9as8hCyx8WDhZXqXMf9bhgtA_Content* p;
};
struct tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw {
	tySequence__9as8hCyx8WDhZXqXMf9bhgtA data;
	NI counter;
};
struct tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q {
	NIM_BOOL running;
	NI termWidth;
	NI termHeight;
	tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw currentBuffer;
	tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw previousBuffer;
	NI frameCount;
	NF totalTime;
	NF fps;
	NF lastFpsUpdate;
	NF targetFps;
	NI colorSupport;
	tySequence__yAQ9af4LrMfsCspWq9a5u6Og layers;
	tyObject_Table__wHO9bxCEQsaOZ0Zzubt3C7Q layerIndexCache;
	NIM_BOOL cacheValid;
	tyObject_TerminalInputParser__GHUTtss0GjS80F0ZztO53Q inputParser;
	NI lastMouseX;
	NI lastMouseY;
	void* audioSystemPtr;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg themeBackground;
	tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw styleSheet;
};
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
	void* vTable[SEQ_DECL_SIZE];
};
struct RootObj {
	TNimTypeV2* m_type;
};
struct tySequence__xhQiLwJj5RFCOa9c4fVuodA {
  NI len; tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content* p;
};
struct Exception {
	RootObj Sup;
	Exception* parent;
	NCSTRING name;
	NimStringV2 message;
	tySequence__xhQiLwJj5RFCOa9c4fVuodA trace;
	Exception* up;
};
struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ {
	NI rc;
	NI rootIdx;
};
struct tySequence__KCtCp2ewMkW3eTfCqhAg9ag {
  NI len; tySequence__KCtCp2ewMkW3eTfCqhAg9ag_Content* p;
};
struct tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ {
	NimStringV2 id;
	NimStringV2 title;
	NI level;
	tySequence__KCtCp2ewMkW3eTfCqhAg9ag blocks;
	tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ metadata;
};
struct tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg {
	tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ section;
	NF x;
	NF y;
	NF width;
	NF height;
	NI index;
	NIM_BOOL navigable;
	NI actualVisualWidth;
	NI actualVisualHeight;
	NI zIndex;
	NimStringV2 layerName;
};
struct tyObject_CellSeq__Y61EHKUy9bziu9aZLY53Z6TA {
	NI len;
	NI cap;
	tyTuple__N4J9cV4JZGem3ljqqj5rT0Q* d;
};
struct tyObject_CellSeq__h159c0ZpKR8vbgG5c0l2IHQ {
	NI len;
	NI cap;
	tyTuple__lBireGel9cGbbGOTpgwUdwQ* d;
};
struct tyObject_GcEnv__P5mFx1YRqn2iTLyn6f3MWg {
	tyObject_CellSeq__Y61EHKUy9bziu9aZLY53Z6TA traceStack;
	tyObject_CellSeq__h159c0ZpKR8vbgG5c0l2IHQ toFree;
	NI freed;
	NI touched;
	NI edges;
	NI rcSum;
	NIM_BOOL keepThreshold;
};
struct tyTuple__N4J9cV4JZGem3ljqqj5rT0Q {
	void** Field0;
	TNimTypeV2* Field1;
};
typedef NimStringV2 tyArray__24KAM9afIUgUaqBaEBB6r9bg[3];
struct tyObject_Link__6V5xLDIraXInP9am5HdL18g {
	NimStringV2 text;
	NimStringV2 target;
	NI screenX;
	NI screenY;
	NI width;
	NI index;
};
struct tySequence__Gf9avO3sd1YsdKIYcdAbNvA {
  NI len; tySequence__Gf9avO3sd1YsdKIYcdAbNvA_Content* p;
};
typedef struct {
N_NIMCALL_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, ClP_0) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
void* ClE_0;
} tyProc__uEHdpYdtD80h7sXcarWpbg;
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ {
  NI len; tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content* p;
};
typedef NU8 tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ;
struct tySequence__2nVARL7psn6awrm07aftcQ {
  NI len; tySequence__2nVARL7psn6awrm07aftcQ_Content* p;
};
struct tyObject_Table__Kkv168EwyeC2mcswHBvZ1A {
	tySequence__2nVARL7psn6awrm07aftcQ data;
	NI counter;
};
struct tyObject_Rand__xd6HIyS1W9aI4gBq8W9ct0qA {
	NU64 a0;
	NU64 a1;
};
struct tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A {
	tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ kind;
	NI i;
	NF f;
	NIM_BOOL b;
	NimStringV2 s;
	tyObject_FunctionValcolonObjectType___pGR2JmOxTVrNPc3jK4h0Xg* fnVal;
	tyObject_Table__Kkv168EwyeC2mcswHBvZ1A map;
	tySequence__Gf9avO3sd1YsdKIYcdAbNvA arr;
	void* ptrVal;
	tyObject_Rand__xd6HIyS1W9aI4gBq8W9ct0qA randState;
};
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_53) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_57) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_61) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_65) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_69) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
struct tyObject_SectionManager__3O1n9bPakZR219aHHa6w8a4w {
	tySequence__b2TMramkfBG8lW2tXCmrbQ sections;
	NI currentIndex;
	NIM_BOOL multiSectionMode;
	NI scrollY;
};
struct tyTuple__GZW9aA9aWhw50AbgdGq4sF7w {
	tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q Field0;
	NI Field1;
	NI Field2;
};
struct tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ {
	NimStringV2 id;
	NI z;
	NIM_BOOL visible;
	tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw buffer;
};
typedef NU8 tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg;
struct tySequence__S9b9bp4vmSJimm7gXb8S7U4A {
  NI len; tySequence__S9b9bp4vmSJimm7gXb8S7U4A_Content* p;
};
struct tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA {
	NimStringV2 code;
	NimStringV2 lifecycle;
	NimStringV2 language;
};
struct tyObject_ContentBlock__GydJzwYQBr9aX1JqGLPpSJg {
	tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg kind;
union{
	struct {
	NimStringV2 text;
	tySequence__S9b9bp4vmSJimm7gXb8S7U4A elements;
} _kind_1;
	struct {
	tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA codeBlock;
} _kind_2;
	struct {
	NI level;
	NimStringV2 title;
} _kind_3;
	struct {
	NimStringV2 content;
} _kind_4;
	struct {
	NimStringV2 ansiContent;
	NimStringV2 ansiBufferKey;
} _kind_5;
};
};
typedef NimStringV2 tyArray__Re75IspeoxXy2oCZHwcRrA[2];
struct tySequence__4eQHGndY6XBYpFOH09apV8Q {
  NI len; tySequence__4eQHGndY6XBYpFOH09apV8Q_Content* p;
};
typedef NU8 tySet_tyChar__nmiMWKVIe46vacnhAFrQvw[32];
typedef NIM_CHAR tyArray__KzYsGdAcGnUxHpbjbCVtbQ[3];
struct tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA {
	NI a;
	NI b;
};
struct tyTuple__UV3llMMYFckfui8YMBuUZA {
	NimStringV2 Field0;
	NimStringV2 Field1;
};
struct tySequence__O5lGybQGugn7XHKA8EjO8w {
  NI len; tySequence__O5lGybQGugn7XHKA8EjO8w_Content* p;
};
struct tyObject_Env__YOkjv76lcCADUm0ClKJM5g {
	tyObject_Table__Kkv168EwyeC2mcswHBvZ1A vars;
	tyObject_Env__YOkjv76lcCADUm0ClKJM5g* parent;
	tySequence__O5lGybQGugn7XHKA8EjO8w deferStack;
};
struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA {
	NimStringV2 ch;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ style;
};
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_368) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_377) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef NU8 tySet_tyUInt8__k3HXouOuhqAKq0dx450lXQ[32];
typedef N_CLOSURE_PTR(NIM_BOOL, TM__kUjodket9aV1BVUR0GC3cwA_388) (tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA* codeBlock_p0, NimStringV2 lifecycle_p1);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_406) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_412) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_420) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_428) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_453) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_457) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_461) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
struct tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw {
	NI x;
	NI y;
	NI width;
	NI height;
	NI worldX;
	NI worldY;
};
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__kUjodket9aV1BVUR0GC3cwA_475) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
struct tyTuple__cEv1MxME2o0Bb4INiYKVmQ {
	NI Field0;
	NimStringV2 Field1;
	tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw Field2;
};
struct tySequence__YgO2VT9ba3Xqz9c7OAwDz9bbA_Content { NI cap; tyTuple__cEv1MxME2o0Bb4INiYKVmQ data[SEQ_DECL_SIZE]; };
struct tySequence__b2TMramkfBG8lW2tXCmrbQ_Content { NI cap; tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ data[SEQ_DECL_SIZE]; };
struct tyTuple__8ZxhPt1NwfElsJs8zUSV9bg {
	NI Field0;
	NimStringV2 Field1;
	NimStringV2 Field2;
};
struct tySequence__SFipDZIkFtPcrLs0AGBBjQ_Content { NI cap; tyTuple__8ZxhPt1NwfElsJs8zUSV9bg data[SEQ_DECL_SIZE]; };
struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content { NI cap; tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA data[SEQ_DECL_SIZE]; };
struct tySequence__HE9bUKMf89b0tHZqiYlor7zg_Content { NI cap; tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg data[SEQ_DECL_SIZE]; };
struct tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content { NI cap; tyObject_Link__6V5xLDIraXInP9am5HdL18g data[SEQ_DECL_SIZE]; };
struct tyTuple__QeWl6B6ffS4pU6WWrtcrDw {
	NI Field0;
	NimStringV2 Field1;
};
struct tySequence__4eRCaZmrYLLw2k30GPTiMw_Content { NI cap; tyTuple__QeWl6B6ffS4pU6WWrtcrDw data[SEQ_DECL_SIZE]; };
struct tyTuple__g1w83cyyBYiVU9c8WEJWnjQ {
	NI Field0;
	NimStringV2 Field1;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ Field2;
};
struct tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content { NI cap; tyTuple__g1w83cyyBYiVU9c8WEJWnjQ data[SEQ_DECL_SIZE]; };
struct tySequence__yAQ9af4LrMfsCspWq9a5u6Og_Content { NI cap; tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ* data[SEQ_DECL_SIZE]; };
struct tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ {
	NI Field0;
	NimStringV2 Field1;
	NI Field2;
};
struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content { NI cap; tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ data[SEQ_DECL_SIZE]; };
struct tyTuple__9a36bWaF9cbmf9bDveJf6DOxA {
	NI Field0;
	NimStringV2 Field1;
	tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA Field2;
};
struct tySequence__9as8hCyx8WDhZXqXMf9bhgtA_Content { NI cap; tyTuple__9a36bWaF9cbmf9bDveJf6DOxA data[SEQ_DECL_SIZE]; };
struct tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg {
	NCSTRING procname;
	NI line;
	NCSTRING filename;
};
struct tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content { NI cap; tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg data[SEQ_DECL_SIZE]; };
struct tySequence__KCtCp2ewMkW3eTfCqhAg9ag_Content { NI cap; tyObject_ContentBlock__GydJzwYQBr9aX1JqGLPpSJg data[SEQ_DECL_SIZE]; };
struct tySequence__Gf9avO3sd1YsdKIYcdAbNvA_Content { NI cap; tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* data[SEQ_DECL_SIZE]; };
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content { NI cap; NimStringV2 data[SEQ_DECL_SIZE]; };
struct tyTuple__9bJQUgvR2blr9cUNMhbZPKyA {
	NI Field0;
	NimStringV2 Field1;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* Field2;
};
struct tySequence__2nVARL7psn6awrm07aftcQ_Content { NI cap; tyTuple__9bJQUgvR2blr9cUNMhbZPKyA data[SEQ_DECL_SIZE]; };
struct tyObject_MarkdownElement__6CcW9a6nDOFxTP2Lq6QuXaA {
	NimStringV2 text;
	NIM_BOOL bold;
	NIM_BOOL italic;
	NIM_BOOL isLink;
	NimStringV2 linkUrl;
};
struct tySequence__S9b9bp4vmSJimm7gXb8S7U4A_Content { NI cap; tyObject_MarkdownElement__6CcW9a6nDOFxTP2Lq6QuXaA data[SEQ_DECL_SIZE]; };
struct tySequence__4eQHGndY6XBYpFOH09apV8Q_Content { NI cap; tyTuple__UV3llMMYFckfui8YMBuUZA data[SEQ_DECL_SIZE]; };
struct tySequence__O5lGybQGugn7XHKA8EjO8w_Content { NI cap; tyObject_StmtObj__PU3hDYOyNlb5NwdMYYosVA* data[SEQ_DECL_SIZE]; };
N_LIB_PRIVATE N_NIMCALL(tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw, initTable__libZansi95art95bindings_u24)(NI initialSize_p0);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZansi95art95bindings_u171)(tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, setGlobalDefaultStyle__srcZtypes_u95)(tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p0);
static N_INLINE(void, nimFrame)(TFrame* s_p0);
N_LIB_PRIVATE N_NOINLINE(void, callDepthLimitReached__system_u4643)(void);
static N_INLINE(void, popFrame)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, rgb__srcZtypes_u16)(NU8 r_p0, NU8 g_p1, NU8 b_p2);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasKey__niminiZcodegen_u2028)(tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(NI, nsuParseInt)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2*, X5BX5D___libZstorie95md_u212)(tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ* t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(void, raiseDefect)(void);
static N_INLINE(void, popCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___stdZtypedthreads_u223)(Exception** dest_p0, Exception* src_p1, NIM_BOOL cyclic_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZcanvas_u3591)(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw** dest_p0, tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* src_p1);
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicStatic)(void* p_p0, TNimTypeV2* desc_p1);
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NOINLINE(void, rememberCycle__system_u3482)(NIM_BOOL isDestroyAction_p0, tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* s_p1, TNimTypeV2* desc_p2);
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__libZcanvas_u9303)(void* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u3510)(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___niminiZplugin_u500)(tySequence__SFipDZIkFtPcrLs0AGBBjQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u2909)(tySequence__JiteSJxrvz63iP2o9bcn2Sg dest_p0);
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimDestroyAndDispose)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___niminiZcodegen_u251)(tySequence__4eRCaZmrYLLw2k30GPTiMw dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u3292)(tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u924)(tySequence__HE9bUKMf89b0tHZqiYlor7zg dest_p0);
N_LIB_PRIVATE N_NOCONV(void, deallocShared)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZstorie95md_u4652)(tySequence__KCtCp2ewMkW3eTfCqhAg9ag dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, alignedDealloc)(void* p_p0, NI align_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqtrace___libZcanvas_u3522)(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* dest_p0, void* env_p1);
static N_INLINE(void, nimTraceRefDyn)(void* q_p0, void* env_p1);
static N_INLINE(void, add__system_u3022)(tyObject_CellSeq__Y61EHKUy9bziu9aZLY53Z6TA* s_p0, void** c_p1, TNimTypeV2* t_p2);
N_LIB_PRIVATE N_NIMCALL(void, resize__system_u3030)(tyObject_CellSeq__Y61EHKUy9bziu9aZLY53Z6TA* s_p0);
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(tySequence__HE9bUKMf89b0tHZqiYlor7zg, calculateSectionPositions__libZcanvas_u1485)(tySequence__b2TMramkfBG8lW2tXCmrbQ sections_p0);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap_p0, NI elemSize_p1, NI elemAlign_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZstorie95md_u4902)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* dest_p0, tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* src_p1);
N_LIB_PRIVATE N_NOINLINE(void, raiseIndexError2)(NI i_p0, NI n_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuToLowerAsciiStr)(NimStringV2 s_p0);
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0);
static N_INLINE(NIM_BOOL, contains__stdZenumutils_u50)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1);
static N_INLINE(NI, find__stdZenumutils_u55)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1);
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2);
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2);
N_LIB_PRIVATE N_NOINLINE(void, raiseOverflow)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2716)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, copyMem__system_u1741)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NOINLINE(void, raiseRangeErrorI)(NI64 i_p0, NI64 a_p1, NI64 b_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdup___libZstorie95md_u4905)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* src_p0, tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* Result);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___system_u2707)(NimStringV2* dest_p0);
static N_INLINE(NF, max__system_u1206)(NF x_p0, NF y_p1);
static N_INLINE(void, pluseq___pureZstrutils_u2621)(NF* x_p0, NF y_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__libZcanvas_u2231)(tySequence__HE9bUKMf89b0tHZqiYlor7zg* x_p0, tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* y_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___libZcanvas_u863)(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, failedAssertImpl__stdZassertions_u234)(NimStringV2 msg_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u866)(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZstorie95md_u4899)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_HashSet__smPxoGG8yFEJicoqITBXJw, initHashSet__niminiZcodegen_u119)(NI initialSize_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Table__g89a9c4EKKrVz7xjdhWgSAxw, initTable__libZcanvas_u2752)(NI initialSize_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ, eqdup___niminiZplugin_u488)(tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ src_p0);
N_LIB_PRIVATE N_NIMCALL(void, hideSection__libZcanvas_u661)(NimStringV2 sectionTitle_p0);
N_LIB_PRIVATE N_NIMCALL(void, incl__niminiZcodegen_u488)(tyObject_HashSet__smPxoGG8yFEJicoqITBXJw* s_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(void, markVisited__libZcanvas_u209)(NimStringV2 sectionTitle_p0);
N_LIB_PRIVATE N_NIMCALL(void, excl__libZcanvas_u252)(tyObject_HashSet__smPxoGG8yFEJicoqITBXJw* s_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZcanvas_u3633)(tyProc__1HIi57XkOHWiA9beIRQnEiw* dest_p0, tyProc__1HIi57XkOHWiA9beIRQnEiw src_p1, NIM_BOOL cyclic_p2);
static N_INLINE(void, nimIncRefCyclic)(void* p_p0, NIM_BOOL cyclic_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ, initTable__niminiZplugin_u343)(NI initialSize_p0);
N_LIB_PRIVATE N_NIMCALL(void, registerNative__niminiZruntime_u6373)(NimStringV2 name_p0, tyProc__uEHdpYdtD80h7sXcarWpbg fn_p1, tySequence__sM4lkSb7zS6F7OVMvW9cffQ imports_p2, tySequence__sM4lkSb7zS6F7OVMvW9cffQ storieLibs_p3, tySequence__sM4lkSb7zS6F7OVMvW9cffQ dependencies_p4, NimStringV2 description_p5);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_hideSection__libZcanvas_u7817)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, valNil__niminiZruntime_u1028)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_removeSection__libZcanvas_u7824)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(void, removeSection__libZcanvas_u748)(NimStringV2 sectionTitle_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_restoreSection__libZcanvas_u7835)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(void, restoreSection__libZcanvas_u776)(NimStringV2 sectionTitle_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_isVisited__libZcanvas_u7842)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, valBool__niminiZruntime_u1092)(NIM_BOOL b_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isVisited__libZcanvas_u150)(NimStringV2 sectionTitle_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, contains__niminiZcodegen_u1934)(tyObject_HashSet__smPxoGG8yFEJicoqITBXJw s_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_markVisited__libZcanvas_u7849)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, canvasRender__libZcanvas_u7856)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZstorie95themes_u2071)(tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw* dest_p0, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw, initTable__libZstorie95themes_u2039)(NI initialSize_p0);
N_LIB_PRIVATE N_NIMCALL(void, canvasRender__libZcanvas_u6039)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI viewportWidth_p1, NI viewportHeight_p2, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw styleSheet_p3);
N_LIB_PRIVATE N_NIMCALL(void, clearTransparent__backendsZterminalZtermbuffer_u340)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* tb_p0);
N_LIB_PRIVATE N_NIMCALL(void, setViewport__libZcanvas_u3662)(NI width_p0, NI height_p1);
N_LIB_PRIVATE N_NIMCALL(void, centerOnSection__libZcanvas_u146)(NI sectionIdx_p0, NI viewportWidth_p1, NI viewportHeight_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZcanvas_u869)(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* dest_p0, tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2710)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZstorie95md_u4655)(tySequence__KCtCp2ewMkW3eTfCqhAg9ag* dest_p0, tySequence__KCtCp2ewMkW3eTfCqhAg9ag src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___niminiZplugin_u503)(tySequence__SFipDZIkFtPcrLs0AGBBjQ* dest_p0, tySequence__SFipDZIkFtPcrLs0AGBBjQ src_p1);
N_LIB_PRIVATE N_NIMCALL(NI, getCurrentSectionIdx__libZcanvas_u32)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZcanvas_u3301)(tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q* dest_p0, tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q src_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isRemoved__libZcanvas_u689)(NimStringV2 sectionTitle_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u6180)(tyTuple__GZW9aA9aWhw50AbgdGq4sF7w* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ*, getLayer__srcZlayers_u2166)(tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q* state_p0, NimStringV2 id_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___srcZlayers_u85)(tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ** dest_p0, tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ* src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ*, addLayer__srcZlayers_u2140)(tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q* state_p0, NimStringV2 id_p1, NI z_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___srcZlayers_u76)(tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, renderSection__libZcanvas_u4813)(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* layout_p0, NI screenX_p1, NI screenY_p2, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p3, NIM_BOOL isCurrent_p4, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw styleSheet_p5, tyTuple__GZW9aA9aWhw50AbgdGq4sF7w* Result);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasKey__libZstorie95md_u2352)(tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA*, X5BX5D___libZcanvas_u3979)(tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw* t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Style__UURjArTrf2wmcCbN5MncAQ, toStyle__libZcanvas_u43)(tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA config_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, ansiToColor__libZcanvas_u3659)(NI code_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, black__srcZtypes_u45)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, red__srcZtypes_u47)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, green__srcZtypes_u49)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, yellow__srcZtypes_u51)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, blue__srcZtypes_u53)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, magenta__srcZtypes_u55)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, cyan__srcZtypes_u57)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, white__srcZtypes_u59)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, gray__srcZtypes_u42)(NU8 level_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isHidden__libZcanvas_u602)(NimStringV2 sectionTitle_p0);
N_LIB_PRIVATE N_NIMCALL(void, writeText__backendsZterminalZtermbuffer_u230)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* tb_p0, NI x_p1, NI y_p2, NimStringV2 text_p3, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p4);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getSectionRawContent__libZcanvas_u4307)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* section_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2*, X5BX5D___niminiZcodegen_u2098)(tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ* t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__stdZenumutils_u70)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* x_p0, NimStringV2 y_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, eqdup___system_u2713)(NimStringV2 src_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___libZstorie95types_u57)(tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg e_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseFieldErrorStr)(NimStringV2 f_p0, NimStringV2 discVal_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuRepeatStr)(NimStringV2 s_p0, NI n_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasKey__libZansi95art95bindings_u295)(tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, convertBracketNotationToAnsi__libZansi95parser_u374)(NimStringV2 text_p0);
N_LIB_PRIVATE N_NIMCALL(void, parseAnsiToBuffer__libZansi95parser_u183)(NimStringV2 ansiContent_p0, NI maxWidth_p1, NI maxHeight_p2, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* Result);
N_LIB_PRIVATE N_NIMCALL(void, X5BX5Deq___libZansi95art95bindings_u605)(tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw* t_p0, NimStringV2 key_p1, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* val_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuJoinSep)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 sep_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u3785)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, filterRemovedSectionLinks__libZcanvas_u1327)(NimStringV2 content_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__system_u8893)(NimStringV2 s_p0, NI first_p1, NI last_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuStrip)(NimStringV2 s_p0, NIM_BOOL leading_p1, NIM_BOOL trailing_p2, tySet_tyChar__nmiMWKVIe46vacnhAFrQvw chars_p3);
static N_INLINE(NIM_BOOL, contains__stdZprivateZospaths2_u380)(NIM_CHAR* a_p0, NI a_p0Len_0, NIM_CHAR item_p1);
static N_INLINE(NI, find__stdZprivateZospaths2_u385)(NIM_CHAR* a_p0, NI a_p0Len_0, NIM_CHAR item_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nimCharToStr)(NIM_CHAR x_p0);
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1319)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1);
N_NIMCALL(NimStringV2, mnewString)(NI len_p0);
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimPrepareStrMutationImpl__system_u2459)(NimStringV2* s_p0);
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZenumutils_u105)(NI a_p0, NI b_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZenvvars_u83)(tySequence__4eQHGndY6XBYpFOH09apV8Q dest_p0);
N_LIB_PRIVATE N_NIMCALL(tySequence__4eQHGndY6XBYpFOH09apV8Q, parseLinks__libZcanvas_u1237)(NimStringV2 text_p0);
N_LIB_PRIVATE N_NIMCALL(NI, nsuFindStr)(NimStringV2 s_p0, NimStringV2 sub_p1, NI start_p2, NI last_p3);
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1291)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1);
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZstrbasics_u48)(NI a_p0, NI b_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__libZcanvas_u1302)(tySequence__4eQHGndY6XBYpFOH09apV8Q* x_p0, tyTuple__UV3llMMYFckfui8YMBuUZA* y_p1);
N_LIB_PRIVATE N_NIMCALL(void, findSectionByReference__libZcanvas_u800)(NimStringV2 reference_p0, tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* Result);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuReplaceStr)(NimStringV2 s_p0, NimStringV2 sub_p1, NimStringV2 by_p2);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, contains__pureZstrutils_u1900)(NimStringV2 s_p0, NimStringV2 sub_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasKey__libZcanvas_u5297)(tyObject_Table__g89a9c4EKKrVz7xjdhWgSAxw t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u3788)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* dest_p0, tySequence__sM4lkSb7zS6F7OVMvW9cffQ src_p1);
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ*, X5BX5D___libZcanvas_u5609)(tyObject_Table__g89a9c4EKKrVz7xjdhWgSAxw* t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringV2 s_p0, NimStringV2 prefix_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, formatHeading__libZcanvas_u2520)(NimStringV2 text_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_CHAR, nsuToUpperAsciiChar)(NIM_CHAR c_p0);
static N_INLINE(void, appendChar)(NimStringV2* dest_p0, NIM_CHAR c_p1);
N_LIB_PRIVATE N_NIMCALL(NI, getVisualWidth__libZcanvas_u2348)(NimStringV2 text_p0);
N_LIB_PRIVATE N_NIMCALL(NI, getCharDisplayWidth__srcZcharwidth_u1)(NimStringV2 ch_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, truncateToVisualWidth__libZcanvas_u2420)(NimStringV2 text_p0, NI maxVisualWidth_p1);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s_p0, NI addLen_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasLinksOutsideBackticks__libZcanvas_u4788)(NimStringV2 text_p0);
N_LIB_PRIVATE N_NIMCALL(tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q, renderTextWithLinks__libZcanvas_u3854)(NimStringV2 text_p0, NI x_p1, NI y_p2, NI maxWidth_p3, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p4, NIM_BOOL isCurrent_p5, NI startLinkIdx_p6, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw styleSheet_p7, tyObject_Style__UURjArTrf2wmcCbN5MncAQ bodyStyle_p8);
N_LIB_PRIVATE N_NIMCALL(NI, renderInlineMarkdown__libZcanvas_u3665)(NimStringV2 text_p0, NI x_p1, NI y_p2, NI maxWidth_p3, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p4, tyObject_Style__UURjArTrf2wmcCbN5MncAQ baseStyle_p5);
N_LIB_PRIVATE N_NIMCALL(tyObject_Env__YOkjv76lcCADUm0ClKJM5g*, eqdup___niminiZruntime_u2903)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* src_p0, NIM_BOOL cyclic_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___niminiZruntime_u2896)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, getVar__niminiZruntime_u3112)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, NimStringV2 name_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___niminiZruntime_u92)(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* dest_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___systemZdollars_u14)(NI xX60gensym0__p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___system_u4952)(NF x_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nimBoolToStr)(NIM_BOOL x_p0);
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__libZcanvas_u4252)(tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q* x_p0, tyObject_Link__6V5xLDIraXInP9am5HdL18g* y_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__libZcanvas_u5709)(tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q* x_p0, tyObject_Link__6V5xLDIraXInP9am5HdL18g* y_p1, NI y_p1Len_0);
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ, wrapText__libZcanvas_u2495)(NimStringV2 text_p0, NI maxWidth_p1);
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ, nsuSplitChar)(NimStringV2 s_p0, NIM_CHAR sep_p1, NI maxsplit_p2);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nsuEndsWith)(NimStringV2 s_p0, NimStringV2 suffix_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___srcZlayers_u19)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* dest_p0, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw*, X5BX5D___libZansi95art95bindings_u1625)(tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw* t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___backendsZterminalZtermbuffer_u110)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA* dest_p0, tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA* src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___backendsZterminalZtermbuffer_u107)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___srcZlayers_u16)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___libZcanvas_u3289)(tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZstorie95themes_u2068)(tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, canvasUpdate__libZcanvas_u7889)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(void, canvasUpdate__libZcanvas_u6199)(NF deltaTime_p0);
N_LIB_PRIVATE N_NIMCALL(void, updateCamera__libZcanvas_u1447)(NF deltaTime_p0, NI viewportWidth_p1, NI viewportHeight_p2);
static N_INLINE(NF, min__system_u1173)(NF x_p0, NF y_p1);
static N_INLINE(NF, abs__pureZmath_u222)(NF x_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZcanvas_u3361)(tyObject_Link__6V5xLDIraXInP9am5HdL18g* dest_p0, tyObject_Link__6V5xLDIraXInP9am5HdL18g* src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u3358)(tyObject_Link__6V5xLDIraXInP9am5HdL18g* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, canvasHandleKey__libZcanvas_u7901)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(NI, canvasValueToInt__libZcanvas_u6506)(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* v_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, canvasHandleKey__libZcanvas_u6414)(NI keyCode_p0, tySet_tyUInt8__k3HXouOuhqAKq0dx450lXQ mods_p1);
N_LIB_PRIVATE N_NIMCALL(NI, getNextSectionAtLevel__libZcanvas_u2323)(NI currentIdx_p0, NI level_p1, NIM_BOOL forward_p2);
N_LIB_PRIVATE N_NIMCALL(NI, getSectionLevel__libZcanvas_u2307)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* section_p0);
N_LIB_PRIVATE N_NIMCALL(void, navigateToSection__libZcanvas_u1114)(NI sectionIdx_p0);
N_LIB_PRIVATE N_NIMCALL(void, executeLifecycleHooks__libZcanvas_u1094)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* section_p0, NimStringV2 lifecycle_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZstorie95md_u4512)(tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA* dest_p0, tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA* src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZstorie95md_u4509)(tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA* dest_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseDivByZero)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, canvasHandleMouse__libZcanvas_u7926)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, canvasHandleMouse__libZcanvas_u6480)(NI mouseX_p0, NI mouseY_p1, NI button_p2, NIM_BOOL isDown_p3);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, getContentBounds__libZcanvas_u8201)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___niminiZruntime_u1010)(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, valMap__niminiZruntime_u1210)(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A initialMap_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A, initTable__niminiZruntime_u1225)(NI initialSize_p0);
N_LIB_PRIVATE N_NIMCALL(void, X5BX5Deq___niminiZruntime_u1726)(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A* t_p0, NimStringV2 key_p1, tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* val_p2);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, valInt__niminiZruntime_u1086)(NI i_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, screenToContent__libZcanvas_u8376)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, eventToGrid__libZcanvas_u8475)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___niminiZruntime_u95)(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A** dest_p0, tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* src_p1, NIM_BOOL cyclic_p2);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasKey__niminiZruntime_u1333)(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A t_p0, NimStringV2 key_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A**, X5BX5D___niminiZruntime_u1596)(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A* t_p0, NimStringV2 key_p1);
static N_INLINE(NIM_BOOL, nimDivInt)(NI a_p0, NI b_p1, NI* res_p2);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_contentWrite__libZcanvas_u6509)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(void, X5BX5Deq___libZcanvas_u6609)(tyObject_Table__g89a9c4EKKrVz7xjdhWgSAxw* t_p0, NimStringV2 key_p1, tySequence__sM4lkSb7zS6F7OVMvW9cffQ val_p2);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_contentClear__libZcanvas_u7759)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_getSectionMetrics__libZcanvas_u7941)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(void, getSectionMetrics__libZcanvas_u1054)(tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw* Result);
N_LIB_PRIVATE N_NIMCALL(void, nimTestErrorFlag)(void);
static const struct {
  NI cap; NIM_CHAR data[8+1];
} TM__kUjodket9aV1BVUR0GC3cwA_2 = { 8 | NIM_STRLIT_FLAG, "minWidth" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_3 = {8, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_2};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_4 = {8, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_2};
N_LIB_PRIVATE TNimTypeV2 NTIv2__eOoMeFnqsdnNk9ad7pb3oOw_;
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__kUjodket9aV1BVUR0GC3cwA_6 = { 5 | NIM_STRLIT_FLAG, "width" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_7 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_6};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_8 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_6};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__kUjodket9aV1BVUR0GC3cwA_9 = { 6 | NIM_STRLIT_FLAG, "height" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_10 = {6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_9};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_11 = {6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_9};
static const struct {
  NI cap; NIM_CHAR data[9+1];
} TM__kUjodket9aV1BVUR0GC3cwA_12 = { 9 | NIM_STRLIT_FLAG, "navigable" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_13 = {9, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_12};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_14 = {9, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_12};
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__kUjodket9aV1BVUR0GC3cwA_17 = { 5 | NIM_STRLIT_FLAG, "false" };
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__kUjodket9aV1BVUR0GC3cwA_18 = { 2 | NIM_STRLIT_FLAG, "no" };
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_19 = { 1 | NIM_STRLIT_FLAG, "0" };
static const struct {
  NI cap; NIM_CHAR data[0+1];
} TM__kUjodket9aV1BVUR0GC3cwA_20 = { 0 | NIM_STRLIT_FLAG, "" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_21 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_22 = { 1 | NIM_STRLIT_FLAG, "z" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_23 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_22};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_24 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_22};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_25 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_22};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_27 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_22};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_28 = { 1 | NIM_STRLIT_FLAG, "x" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_29 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_30 = { 1 | NIM_STRLIT_FLAG, "y" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_31 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_32 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_33 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const struct {
  NI cap; NIM_CHAR data[149+1];
} TM__kUjodket9aV1BVUR0GC3cwA_36 = { 149 | NIM_STRLIT_FLAG, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim(187, 11) `len(a) == L` the length of the seq changed while iterating over it" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_37 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_36};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__kUjodket9aV1BVUR0GC3cwA_38 = { 12 | NIM_STRLIT_FLAG, "hideSections" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_39 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_38};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__kUjodket9aV1BVUR0GC3cwA_41 = { 4 | NIM_STRLIT_FLAG, "true" };
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__kUjodket9aV1BVUR0GC3cwA_42 = { 3 | NIM_STRLIT_FLAG, "yes" };
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_43 = { 1 | NIM_STRLIT_FLAG, "1" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_44 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_38};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__kUjodket9aV1BVUR0GC3cwA_45 = { 6 | NIM_STRLIT_FLAG, "hidden" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_46 = {6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_45};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_47 = {6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_45};
static const struct {
  NI cap; NIM_CHAR data[149+1];
} TM__kUjodket9aV1BVUR0GC3cwA_48 = { 149 | NIM_STRLIT_FLAG, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim(254, 11) `len(a) == L` the length of the seq changed while iterating over it" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_49 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_50 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const struct {
  NI cap; NIM_CHAR data[18+1];
} TM__kUjodket9aV1BVUR0GC3cwA_51 = { 18 | NIM_STRLIT_FLAG, "nimini_hideSection" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_52 = {18, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_51};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_54 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[20+1];
} TM__kUjodket9aV1BVUR0GC3cwA_55 = { 20 | NIM_STRLIT_FLAG, "nimini_removeSection" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_56 = {20, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_55};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_58 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[21+1];
} TM__kUjodket9aV1BVUR0GC3cwA_59 = { 21 | NIM_STRLIT_FLAG, "nimini_restoreSection" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_60 = {21, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_59};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_62 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[16+1];
} TM__kUjodket9aV1BVUR0GC3cwA_63 = { 16 | NIM_STRLIT_FLAG, "nimini_isVisited" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_64 = {16, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_63};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_66 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[18+1];
} TM__kUjodket9aV1BVUR0GC3cwA_67 = { 18 | NIM_STRLIT_FLAG, "nimini_markVisited" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_68 = {18, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_67};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_70 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__kUjodket9aV1BVUR0GC3cwA_71 = { 12 | NIM_STRLIT_FLAG, "canvasRender" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_72 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_71};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__kUjodket9aV1BVUR0GC3cwA_77 = { 4 | NIM_STRLIT_FLAG, "body" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_78 = {4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_77};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_79 = {4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_77};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__kUjodket9aV1BVUR0GC3cwA_81 = { 7 | NIM_STRLIT_FLAG, "heading" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_82 = {7, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_81};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_83 = {7, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_81};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_84 = {4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_77};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_85 = {4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_77};
static const struct {
  NI cap; NIM_CHAR data[11+1];
} TM__kUjodket9aV1BVUR0GC3cwA_86 = { 11 | NIM_STRLIT_FLAG, "placeholder" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_87 = {11, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_86};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_88 = {11, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_86};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__kUjodket9aV1BVUR0GC3cwA_89 = { 3 | NIM_STRLIT_FLAG, "\?\?\?" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_90 = {3, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_89};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__kUjodket9aV1BVUR0GC3cwA_94 = { 12 | NIM_STRLIT_FLAG, "hideHeadings" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_95 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_94};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_96 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_94};
static const struct {
  NI cap; NIM_CHAR data[11+1];
} TM__kUjodket9aV1BVUR0GC3cwA_97 = { 11 | NIM_STRLIT_FLAG, "showHeading" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_98 = {11, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_97};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_99 = {11, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_97};
static const struct {
  NI cap; NIM_CHAR data[69+1];
} TM__kUjodket9aV1BVUR0GC3cwA_100 = { 69 | NIM_STRLIT_FLAG, "field \'text\' is not accessible for type \'ContentBlock\' using \'kind = " };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_101 = {69, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_100};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_102 = { 1 | NIM_STRLIT_FLAG, "#" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_103 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_102};
static const struct {
  NI cap; NIM_CHAR data[70+1];
} TM__kUjodket9aV1BVUR0GC3cwA_104 = { 70 | NIM_STRLIT_FLAG, "field \'level\' is not accessible for type \'ContentBlock\' using \'kind = " };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_105 = {70, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_104};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_106 = { 1 | NIM_STRLIT_FLAG, " " };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_107 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_106};
static const struct {
  NI cap; NIM_CHAR data[70+1];
} TM__kUjodket9aV1BVUR0GC3cwA_108 = { 70 | NIM_STRLIT_FLAG, "field \'title\' is not accessible for type \'ContentBlock\' using \'kind = " };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_109 = {70, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_108};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__kUjodket9aV1BVUR0GC3cwA_111 = { 6 | NIM_STRLIT_FLAG, "render" };
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__kUjodket9aV1BVUR0GC3cwA_112 = { 5 | NIM_STRLIT_FLAG, "enter" };
static const struct {
  NI cap; NIM_CHAR data[74+1];
} TM__kUjodket9aV1BVUR0GC3cwA_113 = { 74 | NIM_STRLIT_FLAG, "field \'codeBlock\' is not accessible for type \'ContentBlock\' using \'kind = " };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_114 = {74, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_113};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_115 = {74, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_113};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_116 = {74, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_113};
static const struct {
  NI cap; NIM_CHAR data[18+1];
} TM__kUjodket9aV1BVUR0GC3cwA_117 = { 18 | NIM_STRLIT_FLAG, "{{CONTENT_BUFFER}}" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_118 = {18, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_117};
static const struct {
  NI cap; NIM_CHAR data[72+1];
} TM__kUjodket9aV1BVUR0GC3cwA_119 = { 72 | NIM_STRLIT_FLAG, "field \'content\' is not accessible for type \'ContentBlock\' using \'kind = " };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_120 = {72, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_119};
static const struct {
  NI cap; NIM_CHAR data[78+1];
} TM__kUjodket9aV1BVUR0GC3cwA_121 = { 78 | NIM_STRLIT_FLAG, "field \'ansiBufferKey\' is not accessible for type \'ContentBlock\' using \'kind = " };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_122 = {78, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_121};
static const struct {
  NI cap; NIM_CHAR data[76+1];
} TM__kUjodket9aV1BVUR0GC3cwA_123 = { 76 | NIM_STRLIT_FLAG, "field \'ansiContent\' is not accessible for type \'ContentBlock\' using \'kind = " };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_124 = {76, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_123};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__kUjodket9aV1BVUR0GC3cwA_125 = { 7 | NIM_STRLIT_FLAG, "{{ANSI:" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_126 = {7, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_125};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__kUjodket9aV1BVUR0GC3cwA_127 = { 2 | NIM_STRLIT_FLAG, "}}" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_128 = {2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_127};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_129 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_130 = { 1 | NIM_STRLIT_FLAG, "\012" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_131 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_130};
static NIM_CONST tySet_tyChar__nmiMWKVIe46vacnhAFrQvw TM__kUjodket9aV1BVUR0GC3cwA_138 = {
0x00, 0x3e, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_139 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_140 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_148 = { 1 | NIM_STRLIT_FLAG, "[" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_149 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_148};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_150 = { 1 | NIM_STRLIT_FLAG, "]" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_151 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_150};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_155 = { 1 | NIM_STRLIT_FLAG, ")" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_156 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_155};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_168 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_148};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__kUjodket9aV1BVUR0GC3cwA_169 = { 2 | NIM_STRLIT_FLAG, "](" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_170 = {2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_169};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_171 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_155};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_172 = { 1 | NIM_STRLIT_FLAG, "_" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_173 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_172};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_174 = { 1 | NIM_STRLIT_FLAG, "-" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_175 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_174};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_176 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_177 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_172};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_178 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_174};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_179 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_180 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_181 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_182 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_130};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_190 = {18, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_117};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_192 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_102};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_193 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_172};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_194 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_106};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_195 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_174};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_196 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_106};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_202 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_106};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_203 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_210 = { 1 | NIM_STRLIT_FLAG, "\?" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_211 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_210};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_214 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_215 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_222 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_210};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__kUjodket9aV1BVUR0GC3cwA_234 = { 4 | NIM_STRLIT_FLAG, "link" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_235 = {4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_234};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_236 = {4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_234};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__kUjodket9aV1BVUR0GC3cwA_237 = { 12 | NIM_STRLIT_FLAG, "link_focused" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_238 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_237};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_239 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_237};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_246 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[152+1];
} TM__kUjodket9aV1BVUR0GC3cwA_249 = { 152 | NIM_STRLIT_FLAG, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim(272, 11) `len(a) == L` the length of the string changed while iterating over it" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_250 = {152, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_249};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_254 = {152, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_249};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_256 = { 1 | NIM_STRLIT_FLAG, "`" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_257 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_256};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__kUjodket9aV1BVUR0GC3cwA_262 = { 2 | NIM_STRLIT_FLAG, "**" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_263 = {2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_262};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_266 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_273 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_210};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_281 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_148};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_286 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_287 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_295 = {152, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_249};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_304 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_305 = {2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_262};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__kUjodket9aV1BVUR0GC3cwA_306 = { 1 | NIM_STRLIT_FLAG, "*" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_307 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_306};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_308 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_311 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_106};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_312 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_314 = {2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_262};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_315 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_316 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_306};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_317 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_319 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_323 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_326 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_328 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_102};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_330 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_331 = {7, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_125};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_332 = {2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_127};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_336 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_106};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_343 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_106};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_349 = {2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_262};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_350 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_306};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_352 = {2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_262};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_353 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_354 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_306};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_355 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_357 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_361 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_367 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_36};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_369 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__kUjodket9aV1BVUR0GC3cwA_370 = { 12 | NIM_STRLIT_FLAG, "canvasUpdate" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_371 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_370};
static const struct {
  NI cap; NIM_CHAR data[10+1];
} TM__kUjodket9aV1BVUR0GC3cwA_372 = { 10 | NIM_STRLIT_FLAG, "mousefocus" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_373 = {10, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_372};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_374 = {10, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_372};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_376 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_36};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_378 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[15+1];
} TM__kUjodket9aV1BVUR0GC3cwA_379 = { 15 | NIM_STRLIT_FLAG, "canvasHandleKey" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_380 = {15, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_379};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_387 = {74, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_113};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_389 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__kUjodket9aV1BVUR0GC3cwA_390 = { 4 | NIM_STRLIT_FLAG, "exit" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_391 = {4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_390};
static const struct {
  NI cap; NIM_CHAR data[16+1];
} TM__kUjodket9aV1BVUR0GC3cwA_392 = { 16 | NIM_STRLIT_FLAG, "removeAfterVisit" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_393 = {16, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_392};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_394 = {16, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_392};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_395 = {4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_41};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_396 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_43};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_397 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_112};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_407 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[17+1];
} TM__kUjodket9aV1BVUR0GC3cwA_408 = { 17 | NIM_STRLIT_FLAG, "canvasHandleMouse" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_409 = {17, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_408};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_411 = {149, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_48};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_413 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[16+1];
} TM__kUjodket9aV1BVUR0GC3cwA_414 = { 16 | NIM_STRLIT_FLAG, "getContentBounds" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_415 = {16, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_414};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_416 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_417 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_418 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_6};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_419 = {6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_9};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_421 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[15+1];
} TM__kUjodket9aV1BVUR0GC3cwA_422 = { 15 | NIM_STRLIT_FLAG, "screenToContent" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_423 = {15, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_422};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_426 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_427 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_429 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[11+1];
} TM__kUjodket9aV1BVUR0GC3cwA_430 = { 11 | NIM_STRLIT_FLAG, "eventToGrid" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_431 = {11, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_430};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_432 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_433 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__kUjodket9aV1BVUR0GC3cwA_434 = { 5 | NIM_STRLIT_FLAG, "valid" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_435 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_434};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_436 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_437 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_438 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_434};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__kUjodket9aV1BVUR0GC3cwA_439 = { 7 | NIM_STRLIT_FLAG, "bufferX" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_440 = {7, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_439};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_441 = {7, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_439};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__kUjodket9aV1BVUR0GC3cwA_442 = { 7 | NIM_STRLIT_FLAG, "bufferY" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_443 = {7, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_442};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_444 = {7, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_442};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_445 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_446 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_447 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_434};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_450 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_451 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_452 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_434};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_454 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__kUjodket9aV1BVUR0GC3cwA_455 = { 12 | NIM_STRLIT_FLAG, "contentWrite" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_456 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_455};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_458 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__kUjodket9aV1BVUR0GC3cwA_459 = { 12 | NIM_STRLIT_FLAG, "contentClear" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_460 = {12, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_459};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_462 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static const struct {
  NI cap; NIM_CHAR data[17+1];
} TM__kUjodket9aV1BVUR0GC3cwA_463 = { 17 | NIM_STRLIT_FLAG, "getSectionMetrics" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_464 = {17, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_463};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_467 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_28};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_468 = {1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_30};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_469 = {5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_6};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_470 = {6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_9};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__kUjodket9aV1BVUR0GC3cwA_471 = { 6 | NIM_STRLIT_FLAG, "worldX" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_472 = {6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_471};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__kUjodket9aV1BVUR0GC3cwA_473 = { 6 | NIM_STRLIT_FLAG, "worldY" };
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_474 = {6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_473};
static const NimStringV2 TM__kUjodket9aV1BVUR0GC3cwA_476 = {0, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_20};
static NIM_CONST tyArray__24KAM9afIUgUaqBaEBB6r9bg TM__kUjodket9aV1BVUR0GC3cwA_16 = {{5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_17},
{2, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_18},
{1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_19}}
;
static NIM_CONST tyArray__24KAM9afIUgUaqBaEBB6r9bg TM__kUjodket9aV1BVUR0GC3cwA_40 = {{4, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_41},
{3, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_42},
{1, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_43}}
;
static NIM_CONST tyTuple__hSHiEU6uEtL7soi1F4tKCg TM__kUjodket9aV1BVUR0GC3cwA_80 = {((NU8)0),
((NU8)0),
((NU8)0)}
;
static NIM_CONST tyArray__Re75IspeoxXy2oCZHwcRrA TM__kUjodket9aV1BVUR0GC3cwA_110 = {{6, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_111},
{5, (NimStrPayload*)&TM__kUjodket9aV1BVUR0GC3cwA_112}}
;
static NIM_CONST tyArray__KzYsGdAcGnUxHpbjbCVtbQ TM__kUjodket9aV1BVUR0GC3cwA_142 = {42,
43,
45}
;
N_LIB_PRIVATE tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw gAnsiBuffers__libZcanvas_u31;
N_LIB_PRIVATE tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* canvasState__libZcanvas_u117;
N_LIB_PRIVATE void* gNiminiEnv__libZcanvas_u14 = NIM_NIL;
extern NIM_THREADVAR NIM_BOOL nimInErrorMode__system_u4425;
N_LIB_PRIVATE NF gSectionWidth__libZcanvas_u42 = 60.0;
N_LIB_PRIVATE tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA gDefaultStyleConfig__libZcanvas_u46 = {{((NU8)255),
((NU8)255),
((NU8)255)}
, {((NU8)0),
((NU8)0),
((NU8)0)}
, NIM_FALSE, NIM_FALSE, NIM_FALSE, NIM_FALSE}
;
N_LIB_PRIVATE NI gViewportWidth__libZcanvas_u118;
N_LIB_PRIVATE NI gViewportHeight__libZcanvas_u119;
extern NIM_THREADVAR TFrame* framePtr__system_u2743;
extern NIM_THREADVAR Exception* currException__system_u4070;
static NIM_CONST NU32 TM__kUjodket9aV1BVUR0GC3cwA_5[1] = {3926685696};
N_LIB_PRIVATE TNimTypeV2 NTIv2__eOoMeFnqsdnNk9ad7pb3oOw_ = {.destructor = (void*)rttiDestroy__libZcanvas_u9303, .size = sizeof(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw), .align = (NI16) NIM_ALIGNOF(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw), .depth = 0, .display = TM__kUjodket9aV1BVUR0GC3cwA_5, .traceImpl = (void*)eqtrace___libZcanvas_u3522, .flags = 0};
extern tyObject_SectionManager__3O1n9bPakZR219aHHa6w8a4w* gSectionMgr__libZsection95manager_u585;
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4425);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, nimFrame)(TFrame* s_p0) {
	{
		if (!(framePtr__system_u2743 == ((TFrame*) NIM_NIL))) goto LA3_;
		(*s_p0).calldepth = ((NI16)0);
	}
	goto LA1_;
LA3_: ;
	{
		(*s_p0).calldepth = (NI16)((*framePtr__system_u2743).calldepth + ((NI16)1));
	}
LA1_: ;
	(*s_p0).prev = framePtr__system_u2743;
	framePtr__system_u2743 = s_p0;
	{
		if (!((*s_p0).calldepth == ((NI16)2000))) goto LA8_;
		callDepthLimitReached__system_u4643();
	}
LA8_: ;
}
static N_INLINE(void, popFrame)(void) {
	framePtr__system_u2743 = (*framePtr__system_u2743).prev;
}
N_LIB_PRIVATE N_NIMCALL(void, setDefaultStyleConfig__libZcanvas_u49)(tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA config_p0) {
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ T1_;
NIM_BOOL* nimErr_;
	nimfr_("setDefaultStyleConfig", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(95, "/workspaces/telestorie/lib/canvas.nim");	gDefaultStyleConfig__libZcanvas_u46 = config_p0;
	nimln_(97);	T1_.fg.r = config_p0.fg.Field0;
	T1_.fg.g = config_p0.fg.Field1;
	T1_.fg.b = config_p0.fg.Field2;
	T1_.bg.r = config_p0.bg.Field0;
	T1_.bg.g = config_p0.bg.Field1;
	T1_.bg.b = config_p0.bg.Field2;
	T1_.bold = config_p0.bold;
	T1_.italic = config_p0.italic;
	T1_.underline = config_p0.underline;
	T1_.dim = config_p0.dim;
	setGlobalDefaultStyle__srcZtypes_u95(T1_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Style__UURjArTrf2wmcCbN5MncAQ, toStyle__libZcanvas_u43)(tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA config_p0) {
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ result;
	NIM_BOOL colontmpD_;
	NIM_BOOL colontmpD__2;
	NIM_BOOL colontmpD__3;
	NIM_BOOL colontmpD__4;
NIM_BOOL* nimErr_;
	nimfr_("toStyle", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	colontmpD_ = (NIM_BOOL)0;
	colontmpD__2 = (NIM_BOOL)0;
	colontmpD__3 = (NIM_BOOL)0;
	colontmpD__4 = (NIM_BOOL)0;
	nimln_(69);	nimln_(71);	result.fg = rgb__srcZtypes_u16(config_p0.fg.Field0, config_p0.fg.Field1, config_p0.fg.Field2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(72);	result.bg = rgb__srcZtypes_u16(config_p0.bg.Field0, config_p0.bg.Field1, config_p0.bg.Field2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(73);	colontmpD_ = config_p0.bold;
	result.bold = colontmpD_;
	nimln_(74);	colontmpD__2 = config_p0.italic;
	result.italic = colontmpD__2;
	nimln_(75);	colontmpD__3 = config_p0.underline;
	result.underline = colontmpD__3;
	nimln_(76);	colontmpD__4 = config_p0.dim;
	result.dim = colontmpD__4;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(void, popCurrentException)(void) {
	eqcopy___stdZtypedthreads_u223(&currException__system_u4070, (*currException__system_u4070).up, NIM_FALSE);
}
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1) {
	NI result;
	nimfr_("-%", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");
	nimlf_(364, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");	nimln_(368);	result = ((NI) ((NU)((NU64)(((NU) (x_p0))) - (NU64)(((NU) (y_p1))))));
	popFrame();
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicStatic)(void* p_p0, TNimTypeV2* desc_p1) {
	NIM_BOOL result;
	nimfr_("nimDecRefIsLastCyclicStatic", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");
	nimlf_(544, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");	result = NIM_FALSE;
	nimln_(545);	{
		tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* cell_1;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		nimln_(546);		nimlf_(60, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)16));
		cell_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T5_));
		nimlf_(547, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");		{
			if (!((NI)((*cell_1).rc & ((NI)-16)) == ((NI)0))) goto LA8_;
			nimln_(548);			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			nimln_(551);			(*cell_1).rc = minuspercent___system_u813((*cell_1).rc, ((NI)16));
		}
LA6_: ;
		nimln_(553);		rememberCycle__system_u3482(result, cell_1, desc_p1);
	}
LA3_: ;
	popFrame();
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0) {
	NIM_BOOL result;
	nimfr_("nimDecRefIsLastCyclicDyn", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");
	nimln_(518);	result = NIM_FALSE;
	nimln_(519);	{
		tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* cell_1;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		nimln_(520);		nimlf_(60, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)16));
		cell_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T5_));
		nimlf_(521, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");		{
			if (!((NI)((*cell_1).rc & ((NI)-16)) == ((NI)0))) goto LA8_;
			nimln_(522);			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			nimln_(525);			(*cell_1).rc = minuspercent___system_u813((*cell_1).rc, ((NI)16));
		}
LA6_: ;
		nimln_(527);		rememberCycle__system_u3482(result, cell_1, (*((TNimTypeV2**) (p_p0))));
	}
LA3_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u924)(tySequence__HE9bUKMf89b0tHZqiYlor7zg dest_p0) {
	NI colontmp_;
	colontmp_ = ((NI)0);
	{
		while (1) {
			NI T3_;
			T3_ = dest_p0.len;
			if (!(colontmp_ < T3_)) goto LA2;
			if (dest_p0.p->data[colontmp_].layerName.p && !(dest_p0.p->data[colontmp_].layerName.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(dest_p0.p->data[colontmp_].layerName.p);
}
			eqdestroy___niminiZplugin_u500(dest_p0.p->data[colontmp_].section.metadata.data);
			eqdestroy___libZstorie95md_u4652(dest_p0.p->data[colontmp_].section.blocks);
			if (dest_p0.p->data[colontmp_].section.title.p && !(dest_p0.p->data[colontmp_].section.title.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(dest_p0.p->data[colontmp_].section.title.p);
}
			if (dest_p0.p->data[colontmp_].section.id.p && !(dest_p0.p->data[colontmp_].section.id.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(dest_p0.p->data[colontmp_].section.id.p);
}
			colontmp_ += ((NI)1);
		} LA2: ;
	}
	if (dest_p0.p && !(dest_p0.p->cap & NIM_STRLIT_FLAG)) {
 alignedDealloc(dest_p0.p, NIM_ALIGNOF(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
}
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u3510)(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* dest_p0) {
	eqdestroy___niminiZplugin_u500((*dest_p0).frontMatter.data);
	eqdestroy___libZcanvas_u2909((*dest_p0).contentBuffers.data);
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicDyn((*dest_p0).executeCallback.ClE_0);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest_p0).executeCallback.ClE_0);
	}
LA4_: ;
	eqdestroy___niminiZcodegen_u251((*dest_p0).removedSections.data);
	eqdestroy___niminiZcodegen_u251((*dest_p0).hiddenSections.data);
	eqdestroy___niminiZcodegen_u251((*dest_p0).visitedSections.data);
	eqdestroy___libZcanvas_u3292((*dest_p0).links);
	eqdestroy___libZcanvas_u924((*dest_p0).sections);
}
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__libZcanvas_u9303)(void* dest_p0) {
	eqdestroy___libZcanvas_u3510(((tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw*) (dest_p0)));
}
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1) {
	NI result;
	nimfr_("+%", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");
	nimlf_(353, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");	nimln_(357);	result = ((NI) ((NU)((NU64)(((NU) (x_p0))) + (NU64)(((NU) (y_p1))))));
	popFrame();
	return result;
}
static N_INLINE(void, add__system_u3022)(tyObject_CellSeq__Y61EHKUy9bziu9aZLY53Z6TA* s_p0, void** c_p1, TNimTypeV2* t_p2) {
	void** colontmp_;
	TNimTypeV2* colontmp__2;
	nimfr_("add", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/cellseqs_v2.nim");
	nimlf_(28, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/cellseqs_v2.nim");	{
		if (!((*s_p0).cap <= (*s_p0).len)) goto LA3_;
		nimln_(29);		resize__system_u3030(s_p0);
	}
LA3_: ;
	nimln_(30);	colontmp_ = c_p1;
	colontmp__2 = t_p2;
	(*s_p0).d[(*s_p0).len].Field0 = colontmp_;
	(*s_p0).d[(*s_p0).len].Field1 = colontmp__2;
	nimln_(31);	(*s_p0).len = pluspercent___system_u793((*s_p0).len, ((NI)1));
	popFrame();
}
static N_INLINE(void, nimTraceRefDyn)(void* q_p0, void* env_p1) {
	void** p_1;
	nimfr_("nimTraceRefDyn", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");
	nimlf_(138, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");	p_1 = ((void**) (q_p0));
	nimln_(139);	{
		tyObject_GcEnv__P5mFx1YRqn2iTLyn6f3MWg* j_1;
		if (!!(((*p_1) == NIM_NIL))) goto LA3_;
		nimln_(140);		j_1 = ((tyObject_GcEnv__P5mFx1YRqn2iTLyn6f3MWg*) (env_p1));
		nimln_(141);		add__system_u3022((&(*j_1).traceStack), p_1, (*((TNimTypeV2**) ((*p_1)))));
	}
LA3_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, eqtrace___libZcanvas_u3522)(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* dest_p0, void* env_p1) {
	nimTraceRefDyn((&(*dest_p0).executeCallback.ClE_0), env_p1);
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZcanvas_u3591)(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw** dest_p0, tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* src_p1) {
	tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* colontmp_;
	colontmp_ = (*dest_p0);
	(*dest_p0) = src_p1;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicStatic(colontmp_, ((TNimTypeV2*) ((&NTIv2__eOoMeFnqsdnNk9ad7pb3oOw_))));
		if (!T3_) goto LA4_;
		eqdestroy___libZcanvas_u3510((&(*colontmp_)));
		nimRawDispose(colontmp_, ((NI)8));
	}
LA4_: ;
}
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0) {
	nimfr_("=destroy", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
	popFrame();
}
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2) {
	int result;
	result = memcmp(a_p0, b_p1, ((size_t) (size_p2)));
	return result;
}
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2) {
	NIM_BOOL result;
	int T1_;
	T1_ = (int)0;
	T1_ = nimCmpMem(a_p0, b_p1, size_p2);
	result = (T1_ == ((NI32)0));
	return result;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1) {
	NIM_BOOL result;
	NI alen_1;
	NI blen_1;
	nimfr_("eqStrings", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/strmantle.nim");
{	nimlf_(33, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/strmantle.nim");	result = NIM_FALSE;
	nimln_(34);	alen_1 = a_p0.len;
	nimln_(35);	blen_1 = b_p1.len;
	nimln_(36);	{
		if (!(alen_1 == blen_1)) goto LA3_;
		nimln_(37);		{
			if (!(alen_1 == ((NI)0))) goto LA7_;
			nimln_(32);			nimln_(37);			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA7_: ;
		nimln_(38);		nimln_(32);		nimln_(38);		result = equalMem__system_u1749(((void*) ((&a_p0.p->data[((NI)0)]))), ((void*) ((&b_p1.p->data[((NI)0)]))), (alen_1));
		goto BeforeRet_;
	}
LA3_: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NI, find__stdZenumutils_u55)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1) {
	NI result;
	nimfr_("find", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
{	nimlf_(1764, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	result = ((NI)0);
	{
		NimStringV2* i_1;
		NI i_2;
		i_1 = (NimStringV2*)0;
		nimlf_(18, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_2 = ((NI)0);
		{
			nimln_(19);			while (1) {
				NI TM__kUjodket9aV1BVUR0GC3cwA_15;
				if (!(i_2 < a_p0Len_0)) goto LA3;
				nimlf_(1765, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (i_2 < 0 || i_2 >= a_p0Len_0){ raiseIndexError2(i_2,a_p0Len_0-1); goto BeforeRet_;
				}
				i_1 = (&a_p0[i_2]);
				nimln_(1766);				{
					if (!eqStrings((*i_1), item_p1)) goto LA6_;
					goto BeforeRet_;
				}
LA6_: ;
				nimln_(1767);				if (nimAddInt(result, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_15)) { raiseOverflow(); goto BeforeRet_;
				};
				result = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_15);
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_2 += ((NI)1);
			} LA3: ;
		}
	}
	nimlf_(1768, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	result = ((NI)-1);
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NIM_BOOL, contains__stdZenumutils_u50)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1) {
	NIM_BOOL result;
	NI T1_;
	nimfr_("contains", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
{	nimln_(1782);	nimln_(1770);	nimln_(1782);	T1_ = (NI)0;
	T1_ = find__stdZenumutils_u55(a_p0, a_p0Len_0, item_p1);
	result = (((NI)0) <= T1_);
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}
static N_INLINE(void, copyMem__system_u1741)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
{	{
		NI TM__kUjodket9aV1BVUR0GC3cwA_26;
		if (!(((NI)0) < src_p1.len)) goto LA3_;
		if ((src_p1.len) < ((NI)0) || (src_p1.len) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(src_p1.len, ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
		}
		copyMem__system_u1741(((void*) ((&(*(*dest_p0).p).data[(*dest_p0).len]))), ((void*) ((&(*src_p1.p).data[((NI)0)]))), (src_p1.len));
		if (nimAddInt((*dest_p0).len, src_p1.len, &TM__kUjodket9aV1BVUR0GC3cwA_26)) { raiseOverflow(); goto BeforeRet_;
		};
		(*dest_p0).len = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_26);
		(*(*dest_p0).p).data[(*dest_p0).len] = 0;
	}
LA3_: ;
	}BeforeRet_: ;
}
static N_INLINE(NF, max__system_u1206)(NF x_p0, NF y_p1) {
	NF result;
	NF colontmpD_;
	NF colontmpD__2;
	colontmpD_ = (NF)0;
	colontmpD__2 = (NF)0;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (y_p1 <= x_p0);
		if (T3_) goto LA4_;
		T3_ = !((y_p1 == y_p1));
LA4_: ;
		if (!T3_) goto LA5_;
		colontmpD_ = x_p0;
		result = colontmpD_;
	}
	goto LA1_;
LA5_: ;
	{
		colontmpD__2 = y_p1;
		result = colontmpD__2;
	}
LA1_: ;
	return result;
}
static N_INLINE(void, pluseq___pureZstrutils_u2621)(NF* x_p0, NF y_p1) {
	nimfr_("+=", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");
	nimlf_(330, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");	(*x_p0) = ((NF)((*x_p0)) + (NF)(y_p1));
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___libZcanvas_u863)(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* dest_p0) {
	(*dest_p0).section.id.len = 0; (*dest_p0).section.id.p = NIM_NIL;
	(*dest_p0).section.title.len = 0; (*dest_p0).section.title.p = NIM_NIL;
	(*dest_p0).section.level = 0;
	(*dest_p0).section.blocks.len = 0; (*dest_p0).section.blocks.p = NIM_NIL;
	(*dest_p0).section.metadata.data.len = 0; (*dest_p0).section.metadata.data.p = NIM_NIL;
	(*dest_p0).section.metadata.counter = 0;
	(*dest_p0).x = 0;
	(*dest_p0).y = 0;
	(*dest_p0).width = 0;
	(*dest_p0).height = 0;
	(*dest_p0).index = 0;
	(*dest_p0).navigable = 0;
	(*dest_p0).actualVisualWidth = 0;
	(*dest_p0).actualVisualHeight = 0;
	(*dest_p0).zIndex = 0;
	(*dest_p0).layerName.len = 0; (*dest_p0).layerName.p = NIM_NIL;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u866)(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* dest_p0) {
	if ((*dest_p0).layerName.p && !((*dest_p0).layerName.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).layerName.p);
}
	eqdestroy___niminiZplugin_u500((*dest_p0).section.metadata.data);
	eqdestroy___libZstorie95md_u4652((*dest_p0).section.blocks);
	if ((*dest_p0).section.title.p && !((*dest_p0).section.title.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).section.title.p);
}
	if ((*dest_p0).section.id.p && !((*dest_p0).section.id.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).section.id.p);
}
}
N_LIB_PRIVATE N_NIMCALL(tySequence__HE9bUKMf89b0tHZqiYlor7zg, calculateSectionPositions__libZcanvas_u1485)(tySequence__b2TMramkfBG8lW2tXCmrbQ sections_p0) {
	tySequence__HE9bUKMf89b0tHZqiYlor7zg result;
	NF currentX_1;
	NF currentY_1;
	NF maxHeightInRow_1;
	NI sectionsInRow_1;
NIM_BOOL* nimErr_;
	nimfr_("calculateSectionPositions", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(509, "/workspaces/telestorie/lib/canvas.nim");	result.len = 0; result.p = (tySequence__HE9bUKMf89b0tHZqiYlor7zg_Content*) newSeqPayload(0, sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg), NIM_ALIGNOF(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
	nimln_(510);	currentX_1 = 0.0;
	nimln_(511);	currentY_1 = 0.0;
	nimln_(512);	maxHeightInRow_1 = 0.0;
	nimln_(513);	sectionsInRow_1 = ((NI)0);
	{
		tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ section_1;
		NI i_1;
		NI i_2;
		NI L_1;
		NI T3_;
		nimZeroMem((void*)(&section_1), sizeof(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ));
		i_1 = (NI)0;
		nimlf_(182, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_2 = ((NI)0);
		nimln_(183);		T3_ = sections_p0.len;
		L_1 = T3_;
		{
			nimln_(184);			while (1) {
				NimStringV2 layerName_1;
				tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg layout_1;
				tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ colontmpD_;
				NF sectionWidth_1;
				NF sectionHeight_1;
				NIM_BOOL isNavigable_1;
				NI zIndex_1;
				NimStringV2 blitTmp_1;
				tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg blitTmp_2;
				if (!(i_2 < L_1)) goto LA5;
				layerName_1.len = 0; layerName_1.p = NIM_NIL;
				nimZeroMem((void*)(&layout_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
				nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ));
				nimlf_(515, "/workspaces/telestorie/lib/canvas.nim");				i_1 = i_2;
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (i_2 < 0 || i_2 >= sections_p0.len){ raiseIndexError2(i_2,sections_p0.len-1); goto LA6_;
				}
				eqcopy___libZstorie95md_u4902((&section_1), (&sections_p0.p->data[i_2]));
				nimlf_(517, "/workspaces/telestorie/lib/canvas.nim");				sectionWidth_1 = gSectionWidth__libZcanvas_u42;
				nimln_(518);				{
					NIM_BOOL T9_;
					NimStringV2* T13_;
					NI T14_;
					T9_ = (NIM_BOOL)0;
					T9_ = hasKey__niminiZcodegen_u2028(section_1.metadata, TM__kUjodket9aV1BVUR0GC3cwA_7);
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
					if (!T9_) goto LA10_;
					nimln_(520);					T13_ = (NimStringV2*)0;
					T13_ = X5BX5D___libZstorie95md_u212((&section_1.metadata), TM__kUjodket9aV1BVUR0GC3cwA_8);
					if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
					T14_ = (NI)0;
					T14_ = nsuParseInt((*T13_));
					if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
					sectionWidth_1 = ((NF) (T14_));
					if (NIM_UNLIKELY(*nimErr_)) {
						LA12_:;
						{
							*nimErr_ = NIM_FALSE;
							nimln_(522);							raiseDefect();
							popCurrentException();
							LA16_:;
						}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
				}
LA10_: ;
				nimln_(525);				sectionHeight_1 = 20.0;
				nimln_(526);				{
					NIM_BOOL T20_;
					NimStringV2* T24_;
					NI T25_;
					T20_ = (NIM_BOOL)0;
					T20_ = hasKey__niminiZcodegen_u2028(section_1.metadata, TM__kUjodket9aV1BVUR0GC3cwA_10);
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
					if (!T20_) goto LA21_;
					nimln_(528);					T24_ = (NimStringV2*)0;
					T24_ = X5BX5D___libZstorie95md_u212((&section_1.metadata), TM__kUjodket9aV1BVUR0GC3cwA_11);
					if (NIM_UNLIKELY(*nimErr_)) goto LA23_;
					T25_ = (NI)0;
					T25_ = nsuParseInt((*T24_));
					if (NIM_UNLIKELY(*nimErr_)) goto LA23_;
					sectionHeight_1 = ((NF) (T25_));
					if (NIM_UNLIKELY(*nimErr_)) {
						LA23_:;
						{
							*nimErr_ = NIM_FALSE;
							nimln_(530);							raiseDefect();
							popCurrentException();
							LA27_:;
						}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
				}
LA21_: ;
				nimln_(533);				isNavigable_1 = NIM_TRUE;
				nimln_(534);				{
					NIM_BOOL T31_;
					NimStringV2 navValue_1;
					NimStringV2* T35_;
					NimStringV2 T36_;
					NIM_BOOL T37_;
					T31_ = (NIM_BOOL)0;
					T31_ = hasKey__niminiZcodegen_u2028(section_1.metadata, TM__kUjodket9aV1BVUR0GC3cwA_13);
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
					if (!T31_) goto LA32_;
					navValue_1.len = 0; navValue_1.p = NIM_NIL;
					nimln_(535);					T35_ = (NimStringV2*)0;
					T35_ = X5BX5D___libZstorie95md_u212((&section_1.metadata), TM__kUjodket9aV1BVUR0GC3cwA_14);
					if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
					T36_.len = 0; T36_.p = NIM_NIL;
					T36_ = nsuToLowerAsciiStr((*T35_));
					if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T36_); goto LA34_;}
					navValue_1 = T36_;
					nimln_(536);					T37_ = (NIM_BOOL)0;
					T37_ = contains__stdZenumutils_u50(TM__kUjodket9aV1BVUR0GC3cwA_16, 3, navValue_1);
					isNavigable_1 = !(T37_);
					{
						LA34_:;
					}
					{
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (navValue_1.p && !(navValue_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(navValue_1.p);
}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
				}
LA32_: ;
				nimlf_(539, "/workspaces/telestorie/lib/canvas.nim");				zIndex_1 = ((NI)0);
				nimln_(540);				layerName_1 = TM__kUjodket9aV1BVUR0GC3cwA_21;
				nimln_(541);				{
					NIM_BOOL T42_;
					NimStringV2* T46_;
					NI T47_;
					NimStringV2 T48_;
					NimStringV2* T49_;
					T42_ = (NIM_BOOL)0;
					T42_ = hasKey__niminiZcodegen_u2028(section_1.metadata, TM__kUjodket9aV1BVUR0GC3cwA_23);
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
					if (!T42_) goto LA43_;
					nimln_(543);					T46_ = (NimStringV2*)0;
					T46_ = X5BX5D___libZstorie95md_u212((&section_1.metadata), TM__kUjodket9aV1BVUR0GC3cwA_24);
					if (NIM_UNLIKELY(*nimErr_)) goto LA45_;
					T47_ = (NI)0;
					T47_ = nsuParseInt((*T46_));
					if (NIM_UNLIKELY(*nimErr_)) goto LA45_;
					zIndex_1 = T47_;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					nimlf_(544, "/workspaces/telestorie/lib/canvas.nim");					T48_.len = 0; T48_.p = NIM_NIL;
					T49_ = (NimStringV2*)0;
					T49_ = X5BX5D___libZstorie95md_u212((&section_1.metadata), TM__kUjodket9aV1BVUR0GC3cwA_27);
					if (NIM_UNLIKELY(*nimErr_)) goto LA45_;
					T48_ = rawNewString((*T49_).len + 1);
appendString((&T48_), TM__kUjodket9aV1BVUR0GC3cwA_25);
appendString((&T48_), (*T49_));
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqsink___system_u2716((&layerName_1), T48_);
					if (NIM_UNLIKELY(*nimErr_)) {
						LA45_:;
						{
							*nimErr_ = NIM_FALSE;
							nimlf_(546, "/workspaces/telestorie/lib/canvas.nim");							raiseDefect();
							popCurrentException();
							LA51_:;
						}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
				}
LA43_: ;
				nimln_(548);				nimZeroMem((void*)(&layout_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
				nimln_(549);				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqdup___libZstorie95md_u4905((&section_1), (&colontmpD_));
				layout_1.section = colontmpD_;
				layout_1.width = sectionWidth_1;
				layout_1.height = sectionHeight_1;
				layout_1.index = i_1;
				layout_1.navigable = isNavigable_1;
				layout_1.zIndex = zIndex_1;
				nimlf_(555, "/workspaces/telestorie/lib/canvas.nim");				blitTmp_1 = layerName_1;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqwasMoved___system_u2707((&layerName_1));
				layout_1.layerName = blitTmp_1;
				nimlf_(559, "/workspaces/telestorie/lib/canvas.nim");				{
					NIM_BOOL T55_;
					NimStringV2* T60_;
					NI T61_;
					NimStringV2* T62_;
					NI T63_;
					T55_ = (NIM_BOOL)0;
					T55_ = hasKey__niminiZcodegen_u2028(section_1.metadata, TM__kUjodket9aV1BVUR0GC3cwA_29);
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
					if (!(T55_)) goto LA56_;
					T55_ = hasKey__niminiZcodegen_u2028(section_1.metadata, TM__kUjodket9aV1BVUR0GC3cwA_31);
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
LA56_: ;
					if (!T55_) goto LA57_;
					nimln_(561);					T60_ = (NimStringV2*)0;
					T60_ = X5BX5D___libZstorie95md_u212((&section_1.metadata), TM__kUjodket9aV1BVUR0GC3cwA_32);
					if (NIM_UNLIKELY(*nimErr_)) goto LA59_;
					T61_ = (NI)0;
					T61_ = nsuParseInt((*T60_));
					if (NIM_UNLIKELY(*nimErr_)) goto LA59_;
					layout_1.x = ((NF) (T61_));
					nimln_(562);					T62_ = (NimStringV2*)0;
					T62_ = X5BX5D___libZstorie95md_u212((&section_1.metadata), TM__kUjodket9aV1BVUR0GC3cwA_33);
					if (NIM_UNLIKELY(*nimErr_)) goto LA59_;
					T63_ = (NI)0;
					T63_ = nsuParseInt((*T62_));
					if (NIM_UNLIKELY(*nimErr_)) goto LA59_;
					layout_1.y = ((NF) (T63_));
					if (NIM_UNLIKELY(*nimErr_)) {
						LA59_:;
						{
							NI TM__kUjodket9aV1BVUR0GC3cwA_34;
							*nimErr_ = NIM_FALSE;
							nimln_(565);							raiseDefect();
							layout_1.x = currentX_1;
							nimln_(566);							layout_1.y = currentY_1;
							nimln_(567);							if (nimAddInt(sectionsInRow_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_34)) { raiseOverflow(); goto LA65_;
							};
							sectionsInRow_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_34);
							popCurrentException();
							LA65_:;
						}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
				}
				goto LA53_;
LA57_: ;
				{
					NI TM__kUjodket9aV1BVUR0GC3cwA_35;
					nimln_(570);					layout_1.x = currentX_1;
					nimln_(571);					layout_1.y = currentY_1;
					nimln_(572);					if (nimAddInt(sectionsInRow_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_35)) { raiseOverflow(); goto LA6_;
					};
					sectionsInRow_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_35);
				}
LA53_: ;
				nimln_(574);				maxHeightInRow_1 = max__system_u1206(maxHeightInRow_1, sectionHeight_1);
				nimln_(576);				{
					if (!(((NI)3) <= sectionsInRow_1)) goto LA70_;
					nimln_(577);					currentX_1 = 0.0;
					nimln_(578);					pluseq___pureZstrutils_u2621((&currentY_1), ((NF)(maxHeightInRow_1) + (NF)(10.0)));
					nimln_(579);					maxHeightInRow_1 = 0.0;
					nimln_(580);					sectionsInRow_1 = ((NI)0);
				}
				goto LA68_;
LA70_: ;
				{
					nimln_(582);					pluseq___pureZstrutils_u2621((&currentX_1), ((NF)(sectionWidth_1) + (NF)(10.0)));
				}
LA68_: ;
				nimln_(584);				nimZeroMem((void*)(&blitTmp_2), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
				blitTmp_2 = layout_1;
				nimln_(254);				eqwasMoved___libZcanvas_u863((&layout_1));
				nimln_(584);				add__libZcanvas_u2231((&result), (&blitTmp_2));
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_2 += ((NI)1);
				nimln_(187);				{
					NI T75_;
					T75_ = sections_p0.len;
					if (!!((T75_ == L_1))) goto LA76_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_37);
					if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
				}
LA76_: ;
				{
					LA6_:;
				}
				{
					nimlf_(254, "/workspaces/telestorie/lib/canvas.nim");					eqdestroy___libZcanvas_u866((&layout_1));
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (layerName_1.p && !(layerName_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(layerName_1.p);
}
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA2_;
			} LA5: ;
		}
		{
			LA2_:;
		}
		{
			nimln_(934);			eqdestroy___libZstorie95md_u4899((&section_1));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, hideSection__libZcanvas_u661)(NimStringV2 sectionTitle_p0) {
NIM_BOOL* nimErr_;
	nimfr_("hideSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(224, "/workspaces/telestorie/lib/canvas.nim");	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(225);		goto BeforeRet_;
	}
LA3_: ;
	nimln_(226);	incl__niminiZcodegen_u488((&(*canvasState__libZcanvas_u117).hiddenSections), sectionTitle_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, markVisited__libZcanvas_u209)(NimStringV2 sectionTitle_p0) {
NIM_BOOL* nimErr_;
	nimfr_("markVisited", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimln_(211);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(212);		goto BeforeRet_;
	}
LA3_: ;
	nimln_(213);	incl__niminiZcodegen_u488((&(*canvasState__libZcanvas_u117).visitedSections), sectionTitle_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(214);	excl__libZcanvas_u252((&(*canvasState__libZcanvas_u117).hiddenSections), sectionTitle_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, initCanvas__libZcanvas_u2573)(tySequence__b2TMramkfBG8lW2tXCmrbQ sections_p0, NI currentIdx_p1, NIM_BOOL presentationMode_p2, tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ frontMatter_p3) {
	NIM_BOOL colontmpD_;
	tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ colontmpD__2;
	NimStringV2 colontmpD__3;
	tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* existingBuffer_1;
	tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q** existingAppState_1;
	tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw* existingStyleSheet_1;
	tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* T21_;
	NIM_BOOL hideSectionsDefault_1;
	NIM_BOOL T22_;
	NimStringV2* T24_;
	NimStringV2 T25_;
NIM_BOOL* nimErr_;
	nimfr_("initCanvas", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	colontmpD_ = (NIM_BOOL)0;
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Table__tTankCrtBQsxM32qYJ9aPPQ));
	colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
	nimln_(750);	existingBuffer_1 = ((tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw*) NIM_NIL);
	nimln_(751);	existingAppState_1 = ((tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q**) NIM_NIL);
	nimln_(752);	existingStyleSheet_1 = ((tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw*) NIM_NIL);
	nimln_(754);	{
		if (!!((canvasState__libZcanvas_u117 == 0))) goto LA4_;
		nimln_(756);		existingBuffer_1 = (*canvasState__libZcanvas_u117).buffer;
		nimln_(757);		existingAppState_1 = (*canvasState__libZcanvas_u117).appState;
		nimln_(758);		existingStyleSheet_1 = (*canvasState__libZcanvas_u117).styleSheet;
	}
LA4_: ;
	nimln_(761);	{
		NIM_BOOL T8_;
		NF minWidth_1;
		NimStringV2* T12_;
		NI T13_;
		T8_ = (NIM_BOOL)0;
		T8_ = hasKey__niminiZcodegen_u2028(frontMatter_p3, TM__kUjodket9aV1BVUR0GC3cwA_3);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T8_) goto LA9_;
		nimln_(763);		T12_ = (NimStringV2*)0;
		T12_ = X5BX5D___libZstorie95md_u212((&frontMatter_p3), TM__kUjodket9aV1BVUR0GC3cwA_4);
		if (NIM_UNLIKELY(*nimErr_)) goto LA11_;
		T13_ = (NI)0;
		T13_ = nsuParseInt((*T12_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA11_;
		minWidth_1 = ((NF) (T13_));
		nimln_(764);		{
			if (!(gSectionWidth__libZcanvas_u42 < minWidth_1)) goto LA16_;
			nimln_(765);			gSectionWidth__libZcanvas_u42 = minWidth_1;
		}
LA16_: ;
		if (NIM_UNLIKELY(*nimErr_)) {
			LA11_:;
			{
				*nimErr_ = NIM_FALSE;
				nimln_(767);				raiseDefect();
				popCurrentException();
				LA19_:;
			}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA9_: ;
	nimln_(769);	T21_ = NIM_NIL;
	T21_ = (tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw*) nimNewObj(sizeof(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw), NIM_ALIGNOF(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw));
	(*T21_).camera.x = 0.0;
	(*T21_).camera.y = 0.0;
	(*T21_).camera.targetX = 0.0;
	(*T21_).camera.targetY = 0.0;
	nimln_(771);	(*T21_).sections = calculateSectionPositions__libZcanvas_u1485(sections_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	(*T21_).links.len = 0; (*T21_).links.p = (tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content*) newSeqPayload(0, sizeof(tyObject_Link__6V5xLDIraXInP9am5HdL18g), NIM_ALIGNOF(tyObject_Link__6V5xLDIraXInP9am5HdL18g));
	(*T21_).focusedLinkIdx = ((NI)0);
	nimln_(774);	(*T21_).visitedSections = initHashSet__niminiZcodegen_u119(((NI)64));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(775);	(*T21_).hiddenSections = initHashSet__niminiZcodegen_u119(((NI)64));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(776);	(*T21_).removedSections = initHashSet__niminiZcodegen_u119(((NI)64));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	(*T21_).mouseEnabled = NIM_FALSE;
	nimln_(778);	colontmpD_ = presentationMode_p2;
	(*T21_).presentationMode = colontmpD_;
	(*T21_).lastRenderTime = 0.0;
	(*T21_).lastViewportWidth = ((NI)0);
	(*T21_).lastViewportHeight = ((NI)0);
	nimln_(782);	(*T21_).contentBuffers = initTable__libZcanvas_u2752(((NI)32));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(783);	nimlf_(281, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/collections/tables.nim");	colontmpD__2 = eqdup___niminiZplugin_u488(frontMatter_p3);
	(*T21_).frontMatter = colontmpD__2;
	nimZeroMem((void*)(&(*T21_).currentContentBounds), sizeof(tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw));
	nimZeroMem((void*)(&(*T21_).currentContentBufferBounds), sizeof(tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw));
	(*T21_).buffer = existingBuffer_1;
	(*T21_).appState = existingAppState_1;
	(*T21_).styleSheet = existingStyleSheet_1;
	nimlf_(769, "/workspaces/telestorie/lib/canvas.nim");	eqsink___libZcanvas_u3591(&canvasState__libZcanvas_u117, T21_);
	nimln_(793);	T22_ = (NIM_BOOL)0;
	T22_ = hasKey__niminiZcodegen_u2028(frontMatter_p3, TM__kUjodket9aV1BVUR0GC3cwA_39);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (!(T22_)) goto LA23_;
	nimln_(794);	T24_ = (NimStringV2*)0;
	T24_ = X5BX5D___libZstorie95md_u212((&frontMatter_p3), TM__kUjodket9aV1BVUR0GC3cwA_44);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T25_.len = 0; T25_.p = NIM_NIL;
	T25_ = nsuToLowerAsciiStr((*T24_));
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T25_); goto LA1_;}
	colontmpD__3 = T25_;
	T22_ = contains__stdZenumutils_u50(TM__kUjodket9aV1BVUR0GC3cwA_40, 3, colontmpD__3);
LA23_: ;
	hideSectionsDefault_1 = T22_;
	{
		tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* layout_1;
		NI i_1;
		NI L_1;
		NI T27_;
		layout_1 = (tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_1 = ((NI)0);
		nimln_(250);		T27_ = (*canvasState__libZcanvas_u117).sections.len;
		L_1 = T27_;
		{
			nimln_(251);			while (1) {
				NIM_BOOL shouldHide_1;
				if (!(i_1 < L_1)) goto LA29;
				nimlf_(796, "/workspaces/telestorie/lib/canvas.nim");				if (i_1 < 0 || i_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA1_;
				}
				layout_1 = (&(*canvasState__libZcanvas_u117).sections.p->data[i_1]);
				nimln_(798);				shouldHide_1 = hideSectionsDefault_1;
				nimln_(801);				{
					NIM_BOOL T32_;
					NimStringV2 hiddenValue_1;
					NimStringV2* T36_;
					NimStringV2 T37_;
					T32_ = (NIM_BOOL)0;
					T32_ = hasKey__niminiZcodegen_u2028((*layout_1).section.metadata, TM__kUjodket9aV1BVUR0GC3cwA_46);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					if (!T32_) goto LA33_;
					hiddenValue_1.len = 0; hiddenValue_1.p = NIM_NIL;
					nimln_(802);					T36_ = (NimStringV2*)0;
					T36_ = X5BX5D___libZstorie95md_u212((&(*layout_1).section.metadata), TM__kUjodket9aV1BVUR0GC3cwA_47);
					if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
					T37_.len = 0; T37_.p = NIM_NIL;
					T37_ = nsuToLowerAsciiStr((*T36_));
					if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T37_); goto LA35_;}
					hiddenValue_1 = T37_;
					nimln_(803);					shouldHide_1 = contains__stdZenumutils_u50(TM__kUjodket9aV1BVUR0GC3cwA_40, 3, hiddenValue_1);
					{
						LA35_:;
					}
					{
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (hiddenValue_1.p && !(hiddenValue_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(hiddenValue_1.p);
}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA33_: ;
				nimlf_(805, "/workspaces/telestorie/lib/canvas.nim");				{
					if (!shouldHide_1) goto LA42_;
					nimln_(806);					hideSection__libZcanvas_u661((*layout_1).section.title);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA42_: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_1 += ((NI)1);
				nimln_(254);				{
					NI T46_;
					T46_ = (*canvasState__libZcanvas_u117).sections.len;
					if (!!((T46_ == L_1))) goto LA47_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_49);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA47_: ;
			} LA29: ;
		}
	}
	nimlf_(809, "/workspaces/telestorie/lib/canvas.nim");	{
		if (!presentationMode_p2) goto LA51_;
		{
			tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* layout_2;
			NI i_2;
			NI L_2;
			NI T54_;
			layout_2 = (tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg*)0;
			nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");			i_2 = ((NI)0);
			nimln_(250);			T54_ = (*canvasState__libZcanvas_u117).sections.len;
			L_2 = T54_;
			{
				nimln_(251);				while (1) {
					if (!(i_2 < L_2)) goto LA56;
					nimlf_(810, "/workspaces/telestorie/lib/canvas.nim");					if (i_2 < 0 || i_2 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_2,(*canvasState__libZcanvas_u117).sections.len-1); goto LA1_;
					}
					layout_2 = (&(*canvasState__libZcanvas_u117).sections.p->data[i_2]);
					nimln_(811);					markVisited__libZcanvas_u209((*layout_2).section.title);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");					i_2 += ((NI)1);
					nimln_(254);					{
						NI T59_;
						T59_ = (*canvasState__libZcanvas_u117).sections.len;
						if (!!((T59_ == L_2))) goto LA60_;
						failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_50);
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					}
LA60_: ;
				} LA56: ;
			}
		}
	}
LA51_: ;
	nimlf_(814, "/workspaces/telestorie/lib/canvas.nim");	{
		NIM_BOOL T64_;
		NI T66_;
		T64_ = (NIM_BOOL)0;
		T64_ = (((NI)0) <= currentIdx_p1);
		if (!(T64_)) goto LA65_;
		T66_ = sections_p0.len;
		T64_ = (currentIdx_p1 < T66_);
LA65_: ;
		if (!T64_) goto LA67_;
		nimln_(815);		if (currentIdx_p1 < 0 || currentIdx_p1 >= sections_p0.len){ raiseIndexError2(currentIdx_p1,sections_p0.len-1); goto LA1_;
		}
		markVisited__libZcanvas_u209(sections_p0.p->data[currentIdx_p1].title);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA67_: ;
	{
		LA1_:;
	}
	{
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (colontmpD__3.p && !(colontmpD__3.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__3.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
static N_INLINE(void, nimIncRefCyclic)(void* p_p0, NIM_BOOL cyclic_p1) {
	tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* h_1;
	NI T1_;
	nimfr_("nimIncRefCyclic", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");
	nimlf_(47, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");	nimlf_(60, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");	T1_ = (NI)0;
	T1_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)16));
	h_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T1_));
	nimlf_(48, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/orc.nim");	(*h_1).rc = pluspercent___system_u793((*h_1).rc, ((NI)16));
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZcanvas_u3633)(tyProc__1HIi57XkOHWiA9beIRQnEiw* dest_p0, tyProc__1HIi57XkOHWiA9beIRQnEiw src_p1, NIM_BOOL cyclic_p2) {
	void* colontmp_;
	colontmp_ = (*dest_p0).ClE_0;
	{
		if (!src_p1.ClE_0) goto LA3_;
		nimIncRefCyclic(src_p1.ClE_0, cyclic_p2);
	}
LA3_: ;
	(*dest_p0).ClE_0 = src_p1.ClE_0;
	(*dest_p0).ClP_0 = src_p1.ClP_0;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = nimDecRefIsLastCyclicDyn(colontmp_);
		if (!T7_) goto LA8_;
		nimDestroyAndDispose(colontmp_);
	}
LA8_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, setExecuteCallback__libZcanvas_u3622)(tyProc__1HIi57XkOHWiA9beIRQnEiw callback_p0) {
	nimfr_("setExecuteCallback", "/workspaces/telestorie/lib/canvas.nim");
	nimlf_(831, "/workspaces/telestorie/lib/canvas.nim");	{
		if (!!((canvasState__libZcanvas_u117 == 0))) goto LA3_;
		nimln_(832);		eqcopy___libZcanvas_u3633((&(*canvasState__libZcanvas_u117).executeCallback), callback_p0, NIM_TRUE);
	}
LA3_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA, getDefaultStyleConfig__libZcanvas_u47)(void) {
	tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA result;
	nimfr_("getDefaultStyleConfig", "/workspaces/telestorie/lib/canvas.nim");
{	nimln_(91);	nimln_(89);	nimln_(91);	result = gDefaultStyleConfig__libZcanvas_u46;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_hideSection__libZcanvas_u7817)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
NIM_BOOL* nimErr_;
	nimfr_("nimini_hideSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(1780);	{
		NI T3_;
		T3_ = args_p1.len;
		if (!(T3_ == ((NI)0))) goto LA4_;
		nimln_(1781);		nimln_(1778);		nimln_(1781);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(1782);	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
	}
	hideSection__libZcanvas_u661((*args_p1.p->data[((NI)0)]).s);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1783);	nimln_(1778);	nimln_(1783);	result = valNil__niminiZruntime_u1028();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, removeSection__libZcanvas_u748)(NimStringV2 sectionTitle_p0) {
NIM_BOOL* nimErr_;
	nimfr_("removeSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimln_(236);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(237);		goto BeforeRet_;
	}
LA3_: ;
	nimln_(238);	incl__niminiZcodegen_u488((&(*canvasState__libZcanvas_u117).removedSections), sectionTitle_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_removeSection__libZcanvas_u7824)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
NIM_BOOL* nimErr_;
	nimfr_("nimini_removeSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(1787);	{
		NI T3_;
		T3_ = args_p1.len;
		if (!(T3_ == ((NI)0))) goto LA4_;
		nimln_(1788);		nimln_(1785);		nimln_(1788);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(1789);	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
	}
	removeSection__libZcanvas_u748((*args_p1.p->data[((NI)0)]).s);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1790);	nimln_(1785);	nimln_(1790);	result = valNil__niminiZruntime_u1028();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, restoreSection__libZcanvas_u776)(NimStringV2 sectionTitle_p0) {
NIM_BOOL* nimErr_;
	nimfr_("restoreSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimln_(242);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(243);		goto BeforeRet_;
	}
LA3_: ;
	nimln_(244);	excl__libZcanvas_u252((&(*canvasState__libZcanvas_u117).removedSections), sectionTitle_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_restoreSection__libZcanvas_u7835)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
NIM_BOOL* nimErr_;
	nimfr_("nimini_restoreSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(1797);	{
		NI T3_;
		T3_ = args_p1.len;
		if (!(T3_ == ((NI)0))) goto LA4_;
		nimln_(1798);		nimln_(1795);		nimln_(1798);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(1799);	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
	}
	restoreSection__libZcanvas_u776((*args_p1.p->data[((NI)0)]).s);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1800);	nimln_(1795);	nimln_(1800);	result = valNil__niminiZruntime_u1028();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isVisited__libZcanvas_u150)(NimStringV2 sectionTitle_p0) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
	nimfr_("isVisited", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimln_(205);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(206);		nimln_(203);		nimln_(206);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA3_: ;
	nimln_(207);	nimln_(203);	nimln_(207);	result = contains__niminiZcodegen_u1934((*canvasState__libZcanvas_u117).visitedSections, sectionTitle_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_isVisited__libZcanvas_u7842)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	NIM_BOOL T6_;
NIM_BOOL* nimErr_;
	nimfr_("nimini_isVisited", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(1804);	{
		NI T3_;
		T3_ = args_p1.len;
		if (!(T3_ == ((NI)0))) goto LA4_;
		nimln_(1805);		nimln_(1802);		nimln_(1805);		result = valBool__niminiZruntime_u1092(NIM_FALSE);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(1806);	nimln_(1802);	nimln_(1806);	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
	}
	T6_ = (NIM_BOOL)0;
	T6_ = isVisited__libZcanvas_u150((*args_p1.p->data[((NI)0)]).s);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = valBool__niminiZruntime_u1092(T6_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_markVisited__libZcanvas_u7849)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
NIM_BOOL* nimErr_;
	nimfr_("nimini_markVisited", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(1810);	{
		NI T3_;
		T3_ = args_p1.len;
		if (!(T3_ == ((NI)0))) goto LA4_;
		nimln_(1811);		nimln_(1808);		nimln_(1811);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(1812);	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
	}
	markVisited__libZcanvas_u209((*args_p1.p->data[((NI)0)]).s);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1813);	nimln_(1808);	nimln_(1813);	result = valNil__niminiZruntime_u1028();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, setViewport__libZcanvas_u3662)(NI width_p0, NI height_p1) {
	nimfr_("setViewport", "/workspaces/telestorie/lib/canvas.nim");
	nimln_(871);	gViewportWidth__libZcanvas_u118 = width_p0;
	nimln_(872);	gViewportHeight__libZcanvas_u119 = height_p1;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZcanvas_u869)(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* dest_p0, tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* src_p1) {
	eqcopy___system_u2710((&(*dest_p0).section.id), (*src_p1).section.id);
	eqcopy___system_u2710((&(*dest_p0).section.title), (*src_p1).section.title);
	(*dest_p0).section.level = (*src_p1).section.level;
	eqcopy___libZstorie95md_u4655((&(*dest_p0).section.blocks), (*src_p1).section.blocks);
	eqcopy___niminiZplugin_u503((&(*dest_p0).section.metadata.data), (*src_p1).section.metadata.data);
	(*dest_p0).section.metadata.counter = (*src_p1).section.metadata.counter;
	(*dest_p0).x = (*src_p1).x;
	(*dest_p0).y = (*src_p1).y;
	(*dest_p0).width = (*src_p1).width;
	(*dest_p0).height = (*src_p1).height;
	(*dest_p0).index = (*src_p1).index;
	(*dest_p0).navigable = (*src_p1).navigable;
	(*dest_p0).actualVisualWidth = (*src_p1).actualVisualWidth;
	(*dest_p0).actualVisualHeight = (*src_p1).actualVisualHeight;
	(*dest_p0).zIndex = (*src_p1).zIndex;
	eqcopy___system_u2710((&(*dest_p0).layerName), (*src_p1).layerName);
}
N_LIB_PRIVATE N_NIMCALL(void, centerOnSection__libZcanvas_u146)(NI sectionIdx_p0, NI viewportWidth_p1, NI viewportHeight_p2) {
	tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg section_1;
	NI colontmpD_;
	NI colontmpD__2;
	NI colontmpD__3;
	NI colontmpD__4;
	NI effectiveWidth_1;
	NI effectiveHeight_1;
	NF contentCenterX_1;
	NF contentCenterY_1;
NIM_BOOL* nimErr_;
	nimfr_("centerOnSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&section_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	colontmpD__3 = (NI)0;
	colontmpD__4 = (NI)0;
	nimln_(477);	{
		NIM_BOOL T4_;
		NIM_BOOL T5_;
		NI T8_;
		T4_ = (NIM_BOOL)0;
		T5_ = (NIM_BOOL)0;
		T5_ = (canvasState__libZcanvas_u117 == 0);
		if (T5_) goto LA6_;
		T5_ = (sectionIdx_p0 < ((NI)0));
LA6_: ;
		T4_ = T5_;
		if (T4_) goto LA7_;
		T8_ = (*canvasState__libZcanvas_u117).sections.len;
		T4_ = (T8_ <= sectionIdx_p0);
LA7_: ;
		if (!T4_) goto LA9_;
		nimln_(478);		nimln_(254);		eqdestroy___libZcanvas_u866((&section_1));
		goto BeforeRet_;
	}
LA9_: ;
	if (sectionIdx_p0 < 0 || sectionIdx_p0 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(sectionIdx_p0,(*canvasState__libZcanvas_u117).sections.len-1); goto LA1_;
	}
	eqcopy___libZcanvas_u869((&section_1), (&(*canvasState__libZcanvas_u117).sections.p->data[sectionIdx_p0]));
	nimln_(484);	{
		if (!(((NI)0) < section_1.actualVisualWidth)) goto LA13_;
		nimln_(485);		colontmpD_ = section_1.actualVisualWidth;
		effectiveWidth_1 = colontmpD_;
	}
	goto LA11_;
LA13_: ;
	{
		nimln_(487);		if ((((NI) (((NF)(section_1.width) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(section_1.width) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(section_1.width) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
		}
		colontmpD__2 = (((NI) (((NF)(section_1.width) + (NF)(0.5)))));
		effectiveWidth_1 = colontmpD__2;
	}
LA11_: ;
	nimln_(489);	{
		if (!(((NI)0) < section_1.actualVisualHeight)) goto LA18_;
		nimln_(490);		colontmpD__3 = section_1.actualVisualHeight;
		effectiveHeight_1 = colontmpD__3;
	}
	goto LA16_;
LA18_: ;
	{
		nimln_(492);		if ((((NI) (((NF)(section_1.height) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(section_1.height) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(section_1.height) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
		}
		colontmpD__4 = (((NI) (((NF)(section_1.height) + (NF)(0.5)))));
		effectiveHeight_1 = colontmpD__4;
	}
LA16_: ;
	nimln_(495);	contentCenterX_1 = ((NF)(section_1.x) + (NF)(((NF)(((NF) (effectiveWidth_1))) / (NF)(2.0))));
	nimln_(496);	(*canvasState__libZcanvas_u117).camera.targetX = ((NF)(contentCenterX_1) - (NF)(((NF)(((NF) (viewportWidth_p1))) / (NF)(2.0))));
	nimln_(499);	contentCenterY_1 = ((NF)(section_1.y) + (NF)(((NF)(((NF) (effectiveHeight_1))) / (NF)(2.0))));
	nimln_(500);	(*canvasState__libZcanvas_u117).camera.targetY = ((NF)(contentCenterY_1) - (NF)(((NF)(((NF) (viewportHeight_p2))) / (NF)(2.0))));
	{
		LA1_:;
	}
	{
		nimln_(254);		eqdestroy___libZcanvas_u866((&section_1));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(NI, getCurrentSectionIdx__libZcanvas_u32)(void) {
	NI result;
	nimfr_("getCurrentSectionIdx", "/workspaces/telestorie/lib/canvas.nim");
{	nimln_(44);	{
		if (!!((gSectionMgr__libZsection95manager_u585 == 0))) goto LA3_;
		nimln_(45);		nimln_(40);		nimln_(45);		result = (*gSectionMgr__libZsection95manager_u585).currentIndex;
		goto BeforeRet_;
	}
LA3_: ;
	nimln_(46);	nimln_(40);	nimln_(46);	result = ((NI)0);
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isRemoved__libZcanvas_u689)(NimStringV2 sectionTitle_p0) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
	nimfr_("isRemoved", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimln_(230);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(231);		nimln_(228);		nimln_(231);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA3_: ;
	nimln_(232);	nimln_(228);	nimln_(232);	result = contains__niminiZcodegen_u1934((*canvasState__libZcanvas_u117).removedSections, sectionTitle_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u6180)(tyTuple__GZW9aA9aWhw50AbgdGq4sF7w* dest_p0) {
	eqdestroy___libZcanvas_u3292((*dest_p0).Field0);
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, ansiToColor__libZcanvas_u3659)(NI code_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
NIM_BOOL* nimErr_;
	nimfr_("ansiToColor", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimln_(858);	switch (code_p0) {
	case ((NI)30):
	case ((NI)0):
	{
		nimln_(859);		nimln_(856);		nimln_(859);		result = black__srcZtypes_u45();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	case ((NI)31):
	{
		nimln_(860);		nimln_(856);		nimln_(860);		result = red__srcZtypes_u47();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	case ((NI)32):
	{
		nimln_(861);		nimln_(856);		nimln_(861);		result = green__srcZtypes_u49();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	case ((NI)33):
	{
		nimln_(862);		nimln_(856);		nimln_(862);		result = yellow__srcZtypes_u51();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	case ((NI)34):
	{
		nimln_(863);		nimln_(856);		nimln_(863);		result = blue__srcZtypes_u53();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	case ((NI)35):
	{
		nimln_(864);		nimln_(856);		nimln_(864);		result = magenta__srcZtypes_u55();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	case ((NI)36):
	{
		nimln_(865);		nimln_(856);		nimln_(865);		result = cyan__srcZtypes_u57();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	case ((NI)37):
	{
		nimln_(866);		nimln_(856);		nimln_(866);		result = white__srcZtypes_u59();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	default:
	{
		nimln_(867);		nimln_(856);		nimln_(867);		result = gray__srcZtypes_u42(((NU8)128));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	break;
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isHidden__libZcanvas_u602)(NimStringV2 sectionTitle_p0) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
	nimfr_("isHidden", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimln_(218);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(219);		nimln_(216);		nimln_(219);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA3_: ;
	nimln_(220);	nimln_(216);	nimln_(220);	result = contains__niminiZcodegen_u1934((*canvasState__libZcanvas_u117).hiddenSections, sectionTitle_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getSectionRawContent__libZcanvas_u4307)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* section_p0) {
	NimStringV2 result;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ lines_1;
	NIM_BOOL colontmpD_;
	NIM_BOOL colontmpD__2;
	NIM_BOOL colontmpD__3;
	NIM_BOOL colontmpD__4;
	NIM_BOOL contentBufferInserted_1;
	NIM_BOOL hideHeadingsDefault_1;
	NIM_BOOL showHeading_1;
NIM_BOOL* nimErr_;
	nimfr_("getSectionRawContent", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	lines_1.len = 0; lines_1.p = NIM_NIL;
	colontmpD_ = (NIM_BOOL)0;
	colontmpD__2 = (NIM_BOOL)0;
	colontmpD__3 = (NIM_BOOL)0;
	colontmpD__4 = (NIM_BOOL)0;
	nimln_(1115);	lines_1.len = 0; lines_1.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	nimln_(1116);	contentBufferInserted_1 = NIM_FALSE;
	nimln_(1119);	{
		NIM_BOOL T4_;
		NimStringV2 colontmpD__5;
		NimStringV2* T9_;
		T4_ = (NIM_BOOL)0;
		T4_ = !((canvasState__libZcanvas_u117 == 0));
		if (!(T4_)) goto LA5_;
		T4_ = hasKey__niminiZcodegen_u2028((*canvasState__libZcanvas_u117).frontMatter, TM__kUjodket9aV1BVUR0GC3cwA_95);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
LA5_: ;
		if (!T4_) goto LA6_;
		colontmpD__5.len = 0; colontmpD__5.p = NIM_NIL;
		nimln_(1120);		T9_ = (NimStringV2*)0;
		T9_ = X5BX5D___niminiZcodegen_u2098((&(*canvasState__libZcanvas_u117).frontMatter), TM__kUjodket9aV1BVUR0GC3cwA_96);
		if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
		colontmpD__5 = nsuToLowerAsciiStr((*T9_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
		colontmpD_ = contains__stdZenumutils_u50(TM__kUjodket9aV1BVUR0GC3cwA_40, 3, colontmpD__5);
		hideHeadingsDefault_1 = colontmpD_;
		{
			LA8_:;
		}
		{
			nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (colontmpD__5.p && !(colontmpD__5.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__5.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA2_;
LA6_: ;
	{
		nimlf_(1122, "/workspaces/telestorie/lib/canvas.nim");		colontmpD__2 = NIM_FALSE;
		hideHeadingsDefault_1 = colontmpD__2;
	}
LA2_: ;
	nimln_(1125);	{
		NIM_BOOL T15_;
		NimStringV2 colontmpD__6;
		NimStringV2* T19_;
		T15_ = (NIM_BOOL)0;
		T15_ = hasKey__niminiZcodegen_u2028((*section_p0).metadata, TM__kUjodket9aV1BVUR0GC3cwA_98);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T15_) goto LA16_;
		colontmpD__6.len = 0; colontmpD__6.p = NIM_NIL;
		nimln_(1127);		T19_ = (NimStringV2*)0;
		T19_ = X5BX5D___libZstorie95md_u212((&(*section_p0).metadata), TM__kUjodket9aV1BVUR0GC3cwA_99);
		if (NIM_UNLIKELY(*nimErr_)) goto LA18_;
		colontmpD__6 = nsuToLowerAsciiStr((*T19_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA18_;
		colontmpD__3 = contains__stdZenumutils_u50(TM__kUjodket9aV1BVUR0GC3cwA_40, 3, colontmpD__6);
		showHeading_1 = colontmpD__3;
		{
			LA18_:;
		}
		{
			nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (colontmpD__6.p && !(colontmpD__6.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__6.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA13_;
LA16_: ;
	{
		nimlf_(1130, "/workspaces/telestorie/lib/canvas.nim");		colontmpD__4 = !(hideHeadingsDefault_1);
		showHeading_1 = colontmpD__4;
	}
LA13_: ;
	{
		tyObject_ContentBlock__GydJzwYQBr9aX1JqGLPpSJg* blk_1;
		NI i_1;
		NI L_1;
		NI T24_;
		blk_1 = (tyObject_ContentBlock__GydJzwYQBr9aX1JqGLPpSJg*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_1 = ((NI)0);
		nimln_(250);		T24_ = (*section_p0).blocks.len;
		L_1 = T24_;
		{
			nimln_(251);			while (1) {
				if (!(i_1 < L_1)) goto LA26;
				nimlf_(1132, "/workspaces/telestorie/lib/canvas.nim");				if (i_1 < 0 || i_1 >= (*section_p0).blocks.len){ raiseIndexError2(i_1,(*section_p0).blocks.len-1); goto LA1_;
				}
				blk_1 = (&(*section_p0).blocks.p->data[i_1]);
				nimln_(1133);				switch ((*blk_1).kind) {
				case ((tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg)0):
				{
					NimStringV2 colontmpD__7;
					colontmpD__7.len = 0; colontmpD__7.p = NIM_NIL;
					nimln_(1135);					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (!(((1 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 					{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_101, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
					}
					colontmpD__7 = eqdup___system_u2713((*blk_1)._kind_1.text);
					nimlf_(1135, "/workspaces/telestorie/lib/canvas.nim");					add__stdZenumutils_u70((&lines_1), colontmpD__7);
				}
				break;
				case ((tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg)2):
				{
					nimln_(1138);					{
						NimStringV2 colontmpD__8;
						NimStringV2 T33_;
						if (!showHeading_1) goto LA31_;
						colontmpD__8.len = 0; colontmpD__8.p = NIM_NIL;
						nimln_(1139);						T33_.len = 0; T33_.p = NIM_NIL;
						if (!(((4 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 						{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_105, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
						}
						if (((*blk_1)._kind_3.level) < ((NI)0) || ((*blk_1)._kind_3.level) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI((*blk_1)._kind_3.level, ((NI)0), ((NI)IL64(9223372036854775807))); goto LA1_;
						}
						colontmpD__8 = nsuRepeatStr(TM__kUjodket9aV1BVUR0GC3cwA_103, ((*blk_1)._kind_3.level));
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
						if (!(((4 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 						{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_109, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
						}
						T33_ = rawNewString(colontmpD__8.len + (*blk_1)._kind_3.title.len + 1);
appendString((&T33_), colontmpD__8);
appendString((&T33_), TM__kUjodket9aV1BVUR0GC3cwA_107);
appendString((&T33_), (*blk_1)._kind_3.title);
						add__stdZenumutils_u70((&lines_1), T33_);
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (colontmpD__8.p && !(colontmpD__8.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__8.p);
}
					}
LA31_: ;
				}
				break;
				case ((tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg)1):
				{
					nimlf_(1145, "/workspaces/telestorie/lib/canvas.nim");					{
						NIM_BOOL T37_;
						NIM_BOOL T39_;
						NIM_BOOL T41_;
						T37_ = (NIM_BOOL)0;
						T37_ = !(contentBufferInserted_1);
						if (!(T37_)) goto LA38_;
						T39_ = (NIM_BOOL)0;
						if (!(((2 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 						{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_114, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
						}
						T39_ = contains__stdZenumutils_u50(TM__kUjodket9aV1BVUR0GC3cwA_110, 2, (*blk_1)._kind_2.codeBlock.lifecycle);
						if (T39_) goto LA40_;
						nimln_(1146);						T41_ = (NIM_BOOL)0;
						if (!(((2 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 						{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_115, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
						}
						T41_ = ((*blk_1)._kind_2.codeBlock.lifecycle.len == 0);
						if (!(T41_)) goto LA42_;
						if (!(((2 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 						{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_116, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
						}
						T41_ = !(((*blk_1)._kind_2.codeBlock.language.len == 0));
LA42_: ;
						T39_ = T41_;
LA40_: ;
						T37_ = T39_;
LA38_: ;
						if (!T37_) goto LA43_;
						nimln_(1147);						add__stdZenumutils_u70((&lines_1), TM__kUjodket9aV1BVUR0GC3cwA_118);
						nimln_(1148);						contentBufferInserted_1 = NIM_TRUE;
					}
LA43_: ;
				}
				break;
				case ((tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg)3):
				{
					NimStringV2 colontmpD__9;
					colontmpD__9.len = 0; colontmpD__9.p = NIM_NIL;
					nimln_(1152);					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (!(((8 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 					{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_120, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
					}
					colontmpD__9 = eqdup___system_u2713((*blk_1)._kind_4.content);
					nimlf_(1152, "/workspaces/telestorie/lib/canvas.nim");					add__stdZenumutils_u70((&lines_1), colontmpD__9);
				}
				break;
				case ((tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg)4):
				{
					NimStringV2 bufferKey_1;
					NimStringV2 T52_;
					bufferKey_1.len = 0; bufferKey_1.p = NIM_NIL;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (!(((16 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 					{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_122, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
					}
					eqcopy___system_u2710((&bufferKey_1), (*blk_1)._kind_5.ansiBufferKey);
					nimlf_(1158, "/workspaces/telestorie/lib/canvas.nim");					{
						NIM_BOOL T49_;
						NimStringV2 convertedContent_1;
						tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw ansiBuffer_1;
						tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw blitTmp_1;
						T49_ = (NIM_BOOL)0;
						T49_ = hasKey__libZansi95art95bindings_u295(gAnsiBuffers__libZcanvas_u31, bufferKey_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
						if (!!(T49_)) goto LA50_;
						convertedContent_1.len = 0; convertedContent_1.p = NIM_NIL;
						nimZeroMem((void*)(&ansiBuffer_1), sizeof(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw));
						nimln_(1160);						if (!(((16 &((NU8)1<<((NU)(((*blk_1).kind))&7U)))!=0))) 						{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_124, dollar___libZstorie95types_u57((*blk_1).kind)); goto LA1_;
						}
						convertedContent_1 = convertBracketNotationToAnsi__libZansi95parser_u374((*blk_1)._kind_5.ansiContent);
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
						nimln_(1161);						parseAnsiToBuffer__libZansi95parser_u183(convertedContent_1, ((NI)120), ((NI)1000), (&ansiBuffer_1));
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
						nimln_(1162);						nimZeroMem((void*)(&blitTmp_1), sizeof(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw));
						blitTmp_1 = ansiBuffer_1;
						X5BX5Deq___libZansi95art95bindings_u605((&gAnsiBuffers__libZcanvas_u31), bufferKey_1, (&blitTmp_1));
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (convertedContent_1.p && !(convertedContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(convertedContent_1.p);
}
					}
LA50_: ;
					nimlf_(1166, "/workspaces/telestorie/lib/canvas.nim");					T52_.len = 0; T52_.p = NIM_NIL;
					T52_ = rawNewString(bufferKey_1.len + 9);
appendString((&T52_), TM__kUjodket9aV1BVUR0GC3cwA_126);
appendString((&T52_), bufferKey_1);
appendString((&T52_), TM__kUjodket9aV1BVUR0GC3cwA_128);
					add__stdZenumutils_u70((&lines_1), T52_);
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (bufferKey_1.p && !(bufferKey_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(bufferKey_1.p);
}
				}
				break;
				default: __builtin_unreachable();
				}
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_1 += ((NI)1);
				nimln_(254);				{
					NI T55_;
					T55_ = (*section_p0).blocks.len;
					if (!!((T55_ == L_1))) goto LA56_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_129);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA56_: ;
			} LA26: ;
		}
	}
	nimlf_(1168, "/workspaces/telestorie/lib/canvas.nim");	nimln_(1110);	nimln_(1168);	result = nsuJoinSep(((lines_1).p) ? (lines_1.p->data) : NIM_NIL, lines_1.len, TM__kUjodket9aV1BVUR0GC3cwA_131);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqdestroy___system_u3785(lines_1);
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		eqdestroy___system_u3785(lines_1);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NI, find__stdZprivateZospaths2_u385)(NIM_CHAR* a_p0, NI a_p0Len_0, NIM_CHAR item_p1) {
	NI result;
	nimfr_("find", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
{	nimln_(1764);	result = ((NI)0);
	{
		NIM_CHAR i_1;
		NI i_2;
		i_1 = (NIM_CHAR)0;
		nimlf_(28, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_2 = ((NI)0);
		{
			nimln_(29);			while (1) {
				NI TM__kUjodket9aV1BVUR0GC3cwA_141;
				if (!(i_2 < a_p0Len_0)) goto LA3;
				nimlf_(1765, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (i_2 < 0 || i_2 >= a_p0Len_0){ raiseIndexError2(i_2,a_p0Len_0-1); goto BeforeRet_;
				}
				i_1 = a_p0[i_2];
				nimln_(1766);				{
					if (!((NU8)(i_1) == (NU8)(item_p1))) goto LA6_;
					goto BeforeRet_;
				}
LA6_: ;
				nimln_(1767);				if (nimAddInt(result, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_141)) { raiseOverflow(); goto BeforeRet_;
				};
				result = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_141);
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_2 += ((NI)1);
			} LA3: ;
		}
	}
	nimlf_(1768, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	result = ((NI)-1);
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NIM_BOOL, contains__stdZprivateZospaths2_u380)(NIM_CHAR* a_p0, NI a_p0Len_0, NIM_CHAR item_p1) {
	NIM_BOOL result;
	NI T1_;
	nimfr_("contains", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
{	nimln_(1782);	nimln_(1770);	nimln_(1782);	T1_ = (NI)0;
	T1_ = find__stdZprivateZospaths2_u385(a_p0, a_p0Len_0, item_p1);
	result = (((NI)0) <= T1_);
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = !(((*s_p0).p == ((NimStrPayload*) NIM_NIL)));
		if (!(T3_)) goto LA4_;
		T3_ = ((NI)((*(*s_p0).p).cap & ((NI)IL64(4611686018427387904))) == ((NI)IL64(4611686018427387904)));
LA4_: ;
		if (!T3_) goto LA5_;
		nimPrepareStrMutationImpl__system_u2459(s_p0);
	}
LA5_: ;
}
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1319)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1) {
	NimStringV2 result;
	NI a_1;
	NI L_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_143;
	NI TM__kUjodket9aV1BVUR0GC3cwA_144;
	NI TM__kUjodket9aV1BVUR0GC3cwA_145;
	nimfr_("[]", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");
{	result.len = 0; result.p = NIM_NIL;
	nimlf_(83, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");	a_1 = x_p1.a;
	nimln_(84);	nimln_(59);	if (nimSubInt(s_p0.len, x_p1.b, &TM__kUjodket9aV1BVUR0GC3cwA_143)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimSubInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_143), a_1, &TM__kUjodket9aV1BVUR0GC3cwA_144)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_144), ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_145)) { raiseOverflow(); goto BeforeRet_;
	};
	L_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_145);
	nimln_(85);	if ((L_1) < ((NI)0) || (L_1) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(L_1, ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
	}
	result = mnewString((L_1));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_2 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI TM__kUjodket9aV1BVUR0GC3cwA_146;
				NI TM__kUjodket9aV1BVUR0GC3cwA_147;
				if (!(i_2 < L_1)) goto LA3;
				nimlf_(86, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");				i_1 = i_2;
				if (i_1 < 0 || i_1 >= result.len){ raiseIndexError2(i_1,result.len-1); goto BeforeRet_;
				}
				nimPrepareStrMutationV2((&result));
				if (nimAddInt(i_1, a_1, &TM__kUjodket9aV1BVUR0GC3cwA_146)) { raiseOverflow(); goto BeforeRet_;
				};
				if ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_146) < 0 || (NI)(TM__kUjodket9aV1BVUR0GC3cwA_146) >= s_p0.len){ raiseIndexError2((NI)(TM__kUjodket9aV1BVUR0GC3cwA_146),s_p0.len-1); goto BeforeRet_;
				}
				result.p->data[i_1] = s_p0.p->data[(NI)(TM__kUjodket9aV1BVUR0GC3cwA_146)];
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_2, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_147)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_147);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZenumutils_u105)(NI a_p0, NI b_p1) {
	tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA result;
	nimfr_("..", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
	nimlf_(436, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	result.a = a_p0;
	result.b = b_p1;
	popFrame();
	return result;
}
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1291)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1) {
	NimStringV2 result;
	NI a_1;
	NI L_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_158;
	NI TM__kUjodket9aV1BVUR0GC3cwA_159;
	nimfr_("[]", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");
{	result.len = 0; result.p = NIM_NIL;
	nimlf_(83, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");	a_1 = x_p1.a;
	nimln_(84);	if (nimSubInt(x_p1.b, a_1, &TM__kUjodket9aV1BVUR0GC3cwA_158)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_158), ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_159)) { raiseOverflow(); goto BeforeRet_;
	};
	L_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_159);
	nimln_(85);	if ((L_1) < ((NI)0) || (L_1) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(L_1, ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
	}
	result = mnewString((L_1));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_2 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI TM__kUjodket9aV1BVUR0GC3cwA_160;
				NI TM__kUjodket9aV1BVUR0GC3cwA_161;
				if (!(i_2 < L_1)) goto LA3;
				nimlf_(86, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");				i_1 = i_2;
				if (i_1 < 0 || i_1 >= result.len){ raiseIndexError2(i_1,result.len-1); goto BeforeRet_;
				}
				nimPrepareStrMutationV2((&result));
				if (nimAddInt(i_1, a_1, &TM__kUjodket9aV1BVUR0GC3cwA_160)) { raiseOverflow(); goto BeforeRet_;
				};
				if ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_160) < 0 || (NI)(TM__kUjodket9aV1BVUR0GC3cwA_160) >= s_p0.len){ raiseIndexError2((NI)(TM__kUjodket9aV1BVUR0GC3cwA_160),s_p0.len-1); goto BeforeRet_;
				}
				result.p->data[i_1] = s_p0.p->data[(NI)(TM__kUjodket9aV1BVUR0GC3cwA_160)];
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_2, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_161)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_161);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZstrbasics_u48)(NI a_p0, NI b_p1) {
	tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA result;
	nimfr_("..", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
	nimlf_(436, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	result.a = a_p0;
	result.b = b_p1;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tySequence__4eQHGndY6XBYpFOH09apV8Q, parseLinks__libZcanvas_u1237)(NimStringV2 text_p0) {
	tySequence__4eQHGndY6XBYpFOH09apV8Q result;
	NI pos_1;
NIM_BOOL* nimErr_;
	nimfr_("parseLinks", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(392, "/workspaces/telestorie/lib/canvas.nim");	result.len = 0; result.p = (tySequence__4eQHGndY6XBYpFOH09apV8Q_Content*) newSeqPayload(0, sizeof(tyTuple__UV3llMMYFckfui8YMBuUZA), NIM_ALIGNOF(tyTuple__UV3llMMYFckfui8YMBuUZA));
	nimln_(393);	pos_1 = ((NI)0);
	{
		nimln_(395);		while (1) {
			NI linkStart_1;
			NI linkTextEnd_1;
			NI TM__kUjodket9aV1BVUR0GC3cwA_152;
			if (!(pos_1 < text_p0.len)) goto LA2;
			nimln_(396);			if ((pos_1) < ((NI)0) || (pos_1) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(pos_1, ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
			}
			linkStart_1 = nsuFindStr(text_p0, TM__kUjodket9aV1BVUR0GC3cwA_149, (pos_1), ((NI)-1));
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimln_(397);			{
				if (!(linkStart_1 < ((NI)0))) goto LA5_;
				nimln_(398);				goto LA1;
			}
LA5_: ;
			nimln_(400);			if (nimAddInt(linkStart_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_152)) { raiseOverflow(); goto BeforeRet_;
			};
			if (((NI)(TM__kUjodket9aV1BVUR0GC3cwA_152)) < ((NI)0) || ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_152)) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI((NI)(TM__kUjodket9aV1BVUR0GC3cwA_152), ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
			}
			linkTextEnd_1 = nsuFindStr(text_p0, TM__kUjodket9aV1BVUR0GC3cwA_151, ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_152)), ((NI)-1));
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimln_(401);			{
				if (!(linkTextEnd_1 < ((NI)0))) goto LA9_;
				nimln_(402);				goto LA1;
			}
LA9_: ;
			nimln_(404);			{
				NIM_BOOL T13_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_153;
				NI TM__kUjodket9aV1BVUR0GC3cwA_154;
				NI targetEnd_1;
				NI TM__kUjodket9aV1BVUR0GC3cwA_157;
				T13_ = (NIM_BOOL)0;
				if (nimAddInt(linkTextEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_153)) { raiseOverflow(); goto BeforeRet_;
				};
				T13_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_153) < text_p0.len);
				if (!(T13_)) goto LA14_;
				if (nimAddInt(linkTextEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_154)) { raiseOverflow(); goto BeforeRet_;
				};
				if ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_154) < 0 || (NI)(TM__kUjodket9aV1BVUR0GC3cwA_154) >= text_p0.len){ raiseIndexError2((NI)(TM__kUjodket9aV1BVUR0GC3cwA_154),text_p0.len-1); goto BeforeRet_;
				}
				T13_ = ((NU8)(text_p0.p->data[(NI)(TM__kUjodket9aV1BVUR0GC3cwA_154)]) == (NU8)(40));
LA14_: ;
				if (!T13_) goto LA15_;
				nimln_(405);				if (nimAddInt(linkTextEnd_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_157)) { raiseOverflow(); goto BeforeRet_;
				};
				if (((NI)(TM__kUjodket9aV1BVUR0GC3cwA_157)) < ((NI)0) || ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_157)) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI((NI)(TM__kUjodket9aV1BVUR0GC3cwA_157), ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
				}
				targetEnd_1 = nsuFindStr(text_p0, TM__kUjodket9aV1BVUR0GC3cwA_156, ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_157)), ((NI)-1));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(406);				{
					NimStringV2 linkText_1;
					NimStringV2 target_1;
					NI TM__kUjodket9aV1BVUR0GC3cwA_162;
					NI TM__kUjodket9aV1BVUR0GC3cwA_163;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T21_;
					NI TM__kUjodket9aV1BVUR0GC3cwA_164;
					NI TM__kUjodket9aV1BVUR0GC3cwA_165;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T22_;
					tyTuple__UV3llMMYFckfui8YMBuUZA T23_;
					NimStringV2 blitTmp_1;
					NimStringV2 blitTmp_2;
					NI TM__kUjodket9aV1BVUR0GC3cwA_166;
					if (!(((NI)0) <= targetEnd_1)) goto LA19_;
					linkText_1.len = 0; linkText_1.p = NIM_NIL;
					target_1.len = 0; target_1.p = NIM_NIL;
					nimln_(407);					if (nimAddInt(linkStart_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_162)) { raiseOverflow(); goto BeforeRet_;
					};
					nimlf_(53, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");					if (nimSubInt(linkTextEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_163)) { raiseOverflow(); goto BeforeRet_;
					};
					nimlf_(407, "/workspaces/telestorie/lib/canvas.nim");					T21_ = dotdot___stdZstrbasics_u48((NI)(TM__kUjodket9aV1BVUR0GC3cwA_162), (NI)(TM__kUjodket9aV1BVUR0GC3cwA_163));
					linkText_1 = X5BX5D___pureZstrutils_u1291(text_p0, T21_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					nimln_(408);					if (nimAddInt(linkTextEnd_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_164)) { raiseOverflow(); goto BeforeRet_;
					};
					nimlf_(53, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");					if (nimSubInt(targetEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_165)) { raiseOverflow(); goto BeforeRet_;
					};
					nimlf_(408, "/workspaces/telestorie/lib/canvas.nim");					T22_ = dotdot___stdZstrbasics_u48((NI)(TM__kUjodket9aV1BVUR0GC3cwA_164), (NI)(TM__kUjodket9aV1BVUR0GC3cwA_165));
					target_1 = X5BX5D___pureZstrutils_u1291(text_p0, T22_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					nimln_(409);					blitTmp_1 = linkText_1;
					T23_.Field0 = blitTmp_1;
					blitTmp_2 = target_1;
					T23_.Field1 = blitTmp_2;
					add__libZcanvas_u1302((&result), (&T23_));
					nimln_(410);					if (nimAddInt(targetEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_166)) { raiseOverflow(); goto BeforeRet_;
					};
					pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_166);
				}
				goto LA17_;
LA19_: ;
				{
					nimln_(412);					goto LA1;
				}
LA17_: ;
			}
			goto LA11_;
LA15_: ;
			{
				NI TM__kUjodket9aV1BVUR0GC3cwA_167;
				nimln_(414);				if (nimAddInt(linkTextEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_167)) { raiseOverflow(); goto BeforeRet_;
				};
				pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_167);
			}
LA11_: ;
		} LA2: ;
	} LA1: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, findSectionByReference__libZcanvas_u800)(NimStringV2 reference_p0, tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* Result) {
	NimStringV2 refStr_1;
	NimStringV2 lowerRef_1;
	NimStringV2 normalizedRef_1;
NIM_BOOL* nimErr_;
	nimfr_("findSectionByReference", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
	refStr_1.len = 0; refStr_1.p = NIM_NIL;
	lowerRef_1.len = 0; lowerRef_1.p = NIM_NIL;
	normalizedRef_1.len = 0; normalizedRef_1.p = NIM_NIL;
	nimln_(253);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA4_;
		nimln_(254);		nimln_(250);		nimln_(254);		nimZeroMem((void*)Result, sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (normalizedRef_1.p && !(normalizedRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedRef_1.p);
}
		if (lowerRef_1.p && !(lowerRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lowerRef_1.p);
}
		if (refStr_1.p && !(refStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(refStr_1.p);
}
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(1699);	eqcopy___system_u2710((&refStr_1), reference_p0);
	nimlf_(258, "/workspaces/telestorie/lib/canvas.nim");	{
		NIM_BOOL T8_;
		tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T12_;
		NimStringV2 T13_;
		T8_ = (NIM_BOOL)0;
		T8_ = (((NI)0) < refStr_1.len);
		if (!(T8_)) goto LA9_;
		if (((NI)0) < 0 || ((NI)0) >= refStr_1.len){ raiseIndexError2(((NI)0),refStr_1.len-1); goto LA1_;
		}
		T8_ = ((NU8)(refStr_1.p->data[((NI)0)]) == (NU8)(35));
LA9_: ;
		if (!T8_) goto LA10_;
		nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		nimlf_(259, "/workspaces/telestorie/lib/canvas.nim");		T12_ = dotdot___stdZenumutils_u105(((NI)1), ((NI)1));
		T13_.len = 0; T13_.p = NIM_NIL;
		T13_ = X5BX5D___pureZstrutils_u1319(refStr_1, T12_);
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T13_); goto LA1_;}
		nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		eqsink___system_u2716((&refStr_1), T13_);
	}
LA10_: ;
	nimlf_(261, "/workspaces/telestorie/lib/canvas.nim");	lowerRef_1 = nsuToLowerAsciiStr(refStr_1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(263);	normalizedRef_1 = nsuReplaceStr(lowerRef_1, TM__kUjodket9aV1BVUR0GC3cwA_173, TM__kUjodket9aV1BVUR0GC3cwA_175);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* layout_1;
		NI i_1;
		NI L_1;
		NI T15_;
		layout_1 = (tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_1 = ((NI)0);
		nimln_(250);		T15_ = (*canvasState__libZcanvas_u117).sections.len;
		L_1 = T15_;
		{
			nimln_(251);			while (1) {
				if (!(i_1 < L_1)) goto LA17;
				nimlf_(266, "/workspaces/telestorie/lib/canvas.nim");				if (i_1 < 0 || i_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA1_;
				}
				layout_1 = (&(*canvasState__libZcanvas_u117).sections.p->data[i_1]);
				nimln_(267);				{
					if (!eqStrings((*layout_1).section.title, refStr_1)) goto LA20_;
					nimln_(268);					nimln_(254);					eqcopy___libZcanvas_u869(Result, (&(*layout_1)));
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (normalizedRef_1.p && !(normalizedRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedRef_1.p);
}
					if (lowerRef_1.p && !(lowerRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lowerRef_1.p);
}
					if (refStr_1.p && !(refStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(refStr_1.p);
}
					goto BeforeRet_;
				}
LA20_: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_1 += ((NI)1);
				nimln_(254);				{
					NI T24_;
					T24_ = (*canvasState__libZcanvas_u117).sections.len;
					if (!!((T24_ == L_1))) goto LA25_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_176);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA25_: ;
			} LA17: ;
		}
	}
	{
		tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* layout_2;
		NI i_2;
		NI L_2;
		NI T28_;
		layout_2 = (tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg*)0;
		nimln_(249);		i_2 = ((NI)0);
		nimln_(250);		T28_ = (*canvasState__libZcanvas_u117).sections.len;
		L_2 = T28_;
		{
			nimln_(251);			while (1) {
				NimStringV2 normalizedId_1;
				if (!(i_2 < L_2)) goto LA30;
				normalizedId_1.len = 0; normalizedId_1.p = NIM_NIL;
				nimlf_(271, "/workspaces/telestorie/lib/canvas.nim");				if (i_2 < 0 || i_2 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_2,(*canvasState__libZcanvas_u117).sections.len-1); goto LA31_;
				}
				layout_2 = (&(*canvasState__libZcanvas_u117).sections.p->data[i_2]);
				nimln_(272);				{
					if (!eqStrings((*layout_2).section.id, refStr_1)) goto LA34_;
					nimln_(273);					nimln_(254);					eqcopy___libZcanvas_u869(Result, (&(*layout_2)));
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (normalizedId_1.p && !(normalizedId_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedId_1.p);
}
					if (normalizedRef_1.p && !(normalizedRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedRef_1.p);
}
					if (lowerRef_1.p && !(lowerRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lowerRef_1.p);
}
					if (refStr_1.p && !(refStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(refStr_1.p);
}
					goto BeforeRet_;
				}
LA34_: ;
				nimlf_(274, "/workspaces/telestorie/lib/canvas.nim");				normalizedId_1 = nsuReplaceStr((*layout_2).section.id, TM__kUjodket9aV1BVUR0GC3cwA_177, TM__kUjodket9aV1BVUR0GC3cwA_178);
				if (NIM_UNLIKELY(*nimErr_)) goto LA31_;
				nimln_(275);				{
					if (!eqStrings(normalizedId_1, normalizedRef_1)) goto LA38_;
					nimln_(276);					nimln_(254);					eqcopy___libZcanvas_u869(Result, (&(*layout_2)));
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (normalizedId_1.p && !(normalizedId_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedId_1.p);
}
					if (normalizedRef_1.p && !(normalizedRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedRef_1.p);
}
					if (lowerRef_1.p && !(lowerRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lowerRef_1.p);
}
					if (refStr_1.p && !(refStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(refStr_1.p);
}
					goto BeforeRet_;
				}
LA38_: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_2 += ((NI)1);
				nimln_(254);				{
					NI T42_;
					T42_ = (*canvasState__libZcanvas_u117).sections.len;
					if (!!((T42_ == L_2))) goto LA43_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_179);
					if (NIM_UNLIKELY(*nimErr_)) goto LA31_;
				}
LA43_: ;
				{
					LA31_:;
				}
				{
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (normalizedId_1.p && !(normalizedId_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedId_1.p);
}
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			} LA30: ;
		}
	}
	{
		tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* layout_3;
		NI i_3;
		NI L_3;
		NI T48_;
		layout_3 = (tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_3 = ((NI)0);
		nimln_(250);		T48_ = (*canvasState__libZcanvas_u117).sections.len;
		L_3 = T48_;
		{
			nimln_(251);			while (1) {
				NimStringV2 colontmpD_;
				if (!(i_3 < L_3)) goto LA50;
				colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
				nimlf_(279, "/workspaces/telestorie/lib/canvas.nim");				if (i_3 < 0 || i_3 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_3,(*canvasState__libZcanvas_u117).sections.len-1); goto LA51_;
				}
				layout_3 = (&(*canvasState__libZcanvas_u117).sections.p->data[i_3]);
				nimln_(280);				{
					colontmpD_ = nsuToLowerAsciiStr((*layout_3).section.title);
					if (NIM_UNLIKELY(*nimErr_)) goto LA51_;
					if (!eqStrings(colontmpD_, lowerRef_1)) goto LA54_;
					nimln_(281);					nimln_(254);					eqcopy___libZcanvas_u869(Result, (&(*layout_3)));
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
					if (normalizedRef_1.p && !(normalizedRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedRef_1.p);
}
					if (lowerRef_1.p && !(lowerRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lowerRef_1.p);
}
					if (refStr_1.p && !(refStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(refStr_1.p);
}
					goto BeforeRet_;
				}
LA54_: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_3 += ((NI)1);
				nimln_(254);				{
					NI T58_;
					T58_ = (*canvasState__libZcanvas_u117).sections.len;
					if (!!((T58_ == L_3))) goto LA59_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_180);
					if (NIM_UNLIKELY(*nimErr_)) goto LA51_;
				}
LA59_: ;
				{
					LA51_:;
				}
				{
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			} LA50: ;
		}
	}
	{
		tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* layout_4;
		NI i_4;
		NI L_4;
		NI T64_;
		layout_4 = (tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_4 = ((NI)0);
		nimln_(250);		T64_ = (*canvasState__libZcanvas_u117).sections.len;
		L_4 = T64_;
		{
			nimln_(251);			while (1) {
				NimStringV2 colontmpD__2;
				if (!(i_4 < L_4)) goto LA66;
				colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
				nimlf_(284, "/workspaces/telestorie/lib/canvas.nim");				if (i_4 < 0 || i_4 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_4,(*canvasState__libZcanvas_u117).sections.len-1); goto LA67_;
				}
				layout_4 = (&(*canvasState__libZcanvas_u117).sections.p->data[i_4]);
				nimln_(285);				{
					NIM_BOOL T70_;
					colontmpD__2 = nsuToLowerAsciiStr((*layout_4).section.title);
					if (NIM_UNLIKELY(*nimErr_)) goto LA67_;
					T70_ = (NIM_BOOL)0;
					T70_ = contains__pureZstrutils_u1900(colontmpD__2, lowerRef_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA67_;
					if (!T70_) goto LA71_;
					nimln_(286);					nimln_(254);					eqcopy___libZcanvas_u869(Result, (&(*layout_4)));
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
					if (normalizedRef_1.p && !(normalizedRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedRef_1.p);
}
					if (lowerRef_1.p && !(lowerRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lowerRef_1.p);
}
					if (refStr_1.p && !(refStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(refStr_1.p);
}
					goto BeforeRet_;
				}
LA71_: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_4 += ((NI)1);
				nimln_(254);				{
					NI T75_;
					T75_ = (*canvasState__libZcanvas_u117).sections.len;
					if (!!((T75_ == L_4))) goto LA76_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_181);
					if (NIM_UNLIKELY(*nimErr_)) goto LA67_;
				}
LA76_: ;
				{
					LA67_:;
				}
				{
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			} LA66: ;
		}
	}
	nimlf_(288, "/workspaces/telestorie/lib/canvas.nim");	nimln_(250);	nimln_(288);	nimZeroMem((void*)Result, sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
	nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	if (normalizedRef_1.p && !(normalizedRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedRef_1.p);
}
	if (lowerRef_1.p && !(lowerRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lowerRef_1.p);
}
	if (refStr_1.p && !(refStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(refStr_1.p);
}
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		if (normalizedRef_1.p && !(normalizedRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(normalizedRef_1.p);
}
		if (lowerRef_1.p && !(lowerRef_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lowerRef_1.p);
}
		if (refStr_1.p && !(refStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(refStr_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, filterRemovedSectionLinks__libZcanvas_u1327)(NimStringV2 content_p0) {
	NimStringV2 result;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ lines_1;
NIM_BOOL* nimErr_;
	nimfr_("filterRemovedSectionLinks", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	lines_1.len = 0; lines_1.p = NIM_NIL;
	nimlf_(418, "/workspaces/telestorie/lib/canvas.nim");	lines_1.len = 0; lines_1.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	{
		NimStringV2 line_1;
		NI first_1;
		NI last_1;
		NI eolpos_1;
		line_1.len = 0; line_1.p = NIM_NIL;
		nimlf_(684, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");		first_1 = ((NI)0);
		nimln_(685);		last_1 = ((NI)0);
		nimln_(686);		eolpos_1 = ((NI)0);
		{
			nimln_(687);			while (1) {
				NI colontmpD_;
				NI colontmpD__2;
				NI T27_;
				NimStringV2 T33_;
				colontmpD_ = (NI)0;
				colontmpD__2 = (NI)0;
				{
					nimln_(688);					while (1) {
						NIM_BOOL T8_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_132;
						T8_ = (NIM_BOOL)0;
						T8_ = (last_1 < content_p0.len);
						if (!(T8_)) goto LA9_;
						if (last_1 < 0 || last_1 >= content_p0.len){ raiseIndexError2(last_1,content_p0.len-1); goto LA3_;
						}
						T8_ = !((((NU8)(content_p0.p->data[last_1])) == ((NU8)(13)) || ((NU8)(content_p0.p->data[last_1])) == ((NU8)(10))));
LA9_: ;
						if (!T8_) goto LA7;
						if (nimAddInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_132)) { raiseOverflow(); goto LA3_;
						};
						last_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_132);
					} LA7: ;
				}
				nimln_(690);				eolpos_1 = last_1;
				nimln_(691);				{
					if (!(last_1 < content_p0.len)) goto LA12_;
					nimln_(692);					{
						NI TM__kUjodket9aV1BVUR0GC3cwA_133;
						if (last_1 < 0 || last_1 >= content_p0.len){ raiseIndexError2(last_1,content_p0.len-1); goto LA3_;
						}
						if (!((NU8)(content_p0.p->data[last_1]) == (NU8)(10))) goto LA16_;
						if (nimAddInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_133)) { raiseOverflow(); goto LA3_;
						};
						last_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_133);
					}
					goto LA14_;
LA16_: ;
					{
						NI TM__kUjodket9aV1BVUR0GC3cwA_134;
						nimln_(693);						if (last_1 < 0 || last_1 >= content_p0.len){ raiseIndexError2(last_1,content_p0.len-1); goto LA3_;
						}
						if (!((NU8)(content_p0.p->data[last_1]) == (NU8)(13))) goto LA19_;
						nimln_(694);						if (nimAddInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_134)) { raiseOverflow(); goto LA3_;
						};
						last_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_134);
						nimln_(695);						{
							NIM_BOOL T23_;
							NI TM__kUjodket9aV1BVUR0GC3cwA_135;
							T23_ = (NIM_BOOL)0;
							T23_ = (last_1 < content_p0.len);
							if (!(T23_)) goto LA24_;
							if (last_1 < 0 || last_1 >= content_p0.len){ raiseIndexError2(last_1,content_p0.len-1); goto LA3_;
							}
							T23_ = ((NU8)(content_p0.p->data[last_1]) == (NU8)(10));
LA24_: ;
							if (!T23_) goto LA25_;
							if (nimAddInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_135)) { raiseOverflow(); goto LA3_;
							};
							last_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_135);
						}
LA25_: ;
					}
					goto LA14_;
LA19_: ;
LA14_: ;
				}
LA12_: ;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(420, "/workspaces/telestorie/lib/canvas.nim");				T27_ = (NI)0;
				nimlf_(697, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");				{
					NI TM__kUjodket9aV1BVUR0GC3cwA_136;
					if (!NIM_FALSE) goto LA30_;
					if (nimSubInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_136)) { raiseOverflow(); goto LA3_;
					};
					colontmpD_ = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_136);
					T27_ = colontmpD_;
				}
				goto LA28_;
LA30_: ;
				{
					NI TM__kUjodket9aV1BVUR0GC3cwA_137;
					if (nimSubInt(eolpos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_137)) { raiseOverflow(); goto LA3_;
					};
					colontmpD__2 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_137);
					T27_ = colontmpD__2;
				}
LA28_: ;
				nimlf_(420, "/workspaces/telestorie/lib/canvas.nim");				T33_.len = 0; T33_.p = NIM_NIL;
				T33_ = substr__system_u8893(content_p0, first_1, T27_);
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&line_1), T33_);
				{
					NimStringV2 trimmed_1;
					NimStringV2 bullet_1;
					NimStringV2 restOfLine_1;
					tySequence__4eQHGndY6XBYpFOH09apV8Q parsedLinks_1;
					NimStringV2 blitTmp_3;
					trimmed_1.len = 0; trimmed_1.p = NIM_NIL;
					bullet_1.len = 0; bullet_1.p = NIM_NIL;
					restOfLine_1.len = 0; restOfLine_1.p = NIM_NIL;
					parsedLinks_1.len = 0; parsedLinks_1.p = NIM_NIL;
					nimlf_(421, "/workspaces/telestorie/lib/canvas.nim");					trimmed_1 = nsuStrip(line_1, NIM_TRUE, NIM_TRUE, TM__kUjodket9aV1BVUR0GC3cwA_138);
					if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
					nimln_(424);					bullet_1 = TM__kUjodket9aV1BVUR0GC3cwA_139;
					nimln_(425);					restOfLine_1 = TM__kUjodket9aV1BVUR0GC3cwA_140;
					nimln_(427);					{
						NIM_BOOL T38_;
						T38_ = (NIM_BOOL)0;
						T38_ = (((NI)0) < trimmed_1.len);
						if (!(T38_)) goto LA39_;
						if (((NI)0) < 0 || ((NI)0) >= trimmed_1.len){ raiseIndexError2(((NI)0),trimmed_1.len-1); goto LA35_;
						}
						T38_ = contains__stdZprivateZospaths2_u380(TM__kUjodket9aV1BVUR0GC3cwA_142, 3, trimmed_1.p->data[((NI)0)]);
LA39_: ;
						if (!T38_) goto LA40_;
						nimln_(428);						{
							NIM_BOOL T44_;
							NimStringV2 colontmpD__3;
							NimStringV2 T48_;
							tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T49_;
							NimStringV2 T50_;
							T44_ = (NIM_BOOL)0;
							T44_ = (((NI)1) < trimmed_1.len);
							if (!(T44_)) goto LA45_;
							if (((NI)1) < 0 || ((NI)1) >= trimmed_1.len){ raiseIndexError2(((NI)1),trimmed_1.len-1); goto LA35_;
							}
							T44_ = ((NU8)(trimmed_1.p->data[((NI)1)]) == (NU8)(32));
LA45_: ;
							if (!T44_) goto LA46_;
							colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
							nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							nimlf_(429, "/workspaces/telestorie/lib/canvas.nim");							if (((NI)0) < 0 || ((NI)0) >= trimmed_1.len){ raiseIndexError2(((NI)0),trimmed_1.len-1); goto LA35_;
							}
							T48_.len = 0; T48_.p = NIM_NIL;
							T48_ = nimCharToStr(trimmed_1.p->data[((NI)0)]);
							nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqsink___system_u2716((&bullet_1), T48_);
							nimlf_(430, "/workspaces/telestorie/lib/canvas.nim");							T49_ = dotdot___stdZenumutils_u105(((NI)2), ((NI)1));
							colontmpD__3 = X5BX5D___pureZstrutils_u1319(trimmed_1, T49_);
							if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
							T50_.len = 0; T50_.p = NIM_NIL;
							T50_ = nsuStrip(colontmpD__3, NIM_TRUE, NIM_TRUE, TM__kUjodket9aV1BVUR0GC3cwA_138);
							if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T50_); goto LA35_;}
							nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqsink___system_u2716((&restOfLine_1), T50_);
							nimln_(394);							if (colontmpD__3.p && !(colontmpD__3.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__3.p);
}
						}
						goto LA42_;
LA46_: ;
						{
							NimStringV2 blitTmp_1;
							nimlf_(432, "/workspaces/telestorie/lib/canvas.nim");							blitTmp_1 = line_1;
							nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqwasMoved___system_u2707((&line_1));
							nimlf_(432, "/workspaces/telestorie/lib/canvas.nim");							add__stdZenumutils_u70((&lines_1), blitTmp_1);
							nimlf_(220, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/std/envvars.nim");							eqdestroy___stdZenvvars_u83(parsedLinks_1);
							nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							if (restOfLine_1.p && !(restOfLine_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(restOfLine_1.p);
}
							if (bullet_1.p && !(bullet_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(bullet_1.p);
}
							if (trimmed_1.p && !(trimmed_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(trimmed_1.p);
}
							nimlf_(433, "/workspaces/telestorie/lib/canvas.nim");							goto LA34;
						}
LA42_: ;
					}
					goto LA36_;
LA40_: ;
					{
						NimStringV2 blitTmp_2;
						nimln_(435);						blitTmp_2 = line_1;
						nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						eqwasMoved___system_u2707((&line_1));
						nimlf_(435, "/workspaces/telestorie/lib/canvas.nim");						add__stdZenumutils_u70((&lines_1), blitTmp_2);
						nimlf_(220, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/std/envvars.nim");						eqdestroy___stdZenvvars_u83(parsedLinks_1);
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (restOfLine_1.p && !(restOfLine_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(restOfLine_1.p);
}
						if (bullet_1.p && !(bullet_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(bullet_1.p);
}
						if (trimmed_1.p && !(trimmed_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(trimmed_1.p);
}
						nimlf_(436, "/workspaces/telestorie/lib/canvas.nim");						goto LA34;
					}
LA36_: ;
					nimln_(439);					parsedLinks_1 = parseLinks__libZcanvas_u1237(restOfLine_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
					nimln_(440);					{
						NI T55_;
						NimStringV2 expectedLink_1;
						NimStringV2 T59_;
						T55_ = parsedLinks_1.len;
						if (!(T55_ == ((NI)1))) goto LA56_;
						expectedLink_1.len = 0; expectedLink_1.p = NIM_NIL;
						nimln_(442);						T59_.len = 0; T59_.p = NIM_NIL;
						if (((NI)0) < 0 || ((NI)0) >= parsedLinks_1.len){ raiseIndexError2(((NI)0),parsedLinks_1.len-1); goto LA58_;
						}
						if (((NI)0) < 0 || ((NI)0) >= parsedLinks_1.len){ raiseIndexError2(((NI)0),parsedLinks_1.len-1); goto LA58_;
						}
						T59_ = rawNewString(parsedLinks_1.p->data[((NI)0)].Field0.len + parsedLinks_1.p->data[((NI)0)].Field1.len + 4);
appendString((&T59_), TM__kUjodket9aV1BVUR0GC3cwA_168);
appendString((&T59_), parsedLinks_1.p->data[((NI)0)].Field0);
appendString((&T59_), TM__kUjodket9aV1BVUR0GC3cwA_170);
appendString((&T59_), parsedLinks_1.p->data[((NI)0)].Field1);
appendString((&T59_), TM__kUjodket9aV1BVUR0GC3cwA_171);
						expectedLink_1 = T59_;
						nimln_(443);						{
							tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg targetSection_1;
							if (!eqStrings(restOfLine_1, expectedLink_1)) goto LA62_;
							nimZeroMem((void*)(&targetSection_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
							nimln_(445);							if (((NI)0) < 0 || ((NI)0) >= parsedLinks_1.len){ raiseIndexError2(((NI)0),parsedLinks_1.len-1); goto LA64_;
							}
							findSectionByReference__libZcanvas_u800(parsedLinks_1.p->data[((NI)0)].Field1, (&targetSection_1));
							if (NIM_UNLIKELY(*nimErr_)) goto LA64_;
							nimln_(446);							{
								NIM_BOOL T67_;
								T67_ = (NIM_BOOL)0;
								T67_ = !((targetSection_1.section.id.len == 0));
								if (!(T67_)) goto LA68_;
								T67_ = isRemoved__libZcanvas_u689(targetSection_1.section.title);
								if (NIM_UNLIKELY(*nimErr_)) goto LA64_;
LA68_: ;
								if (!T67_) goto LA69_;
								nimln_(254);								eqdestroy___libZcanvas_u866((&targetSection_1));
								nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								if (expectedLink_1.p && !(expectedLink_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(expectedLink_1.p);
}
								nimlf_(220, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/std/envvars.nim");								eqdestroy___stdZenvvars_u83(parsedLinks_1);
								nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								if (restOfLine_1.p && !(restOfLine_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(restOfLine_1.p);
}
								if (bullet_1.p && !(bullet_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(bullet_1.p);
}
								if (trimmed_1.p && !(trimmed_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(trimmed_1.p);
}
								nimlf_(448, "/workspaces/telestorie/lib/canvas.nim");								goto LA34;
							}
LA69_: ;
							{
								LA64_:;
							}
							{
								nimln_(254);								eqdestroy___libZcanvas_u866((&targetSection_1));
							}
							if (NIM_UNLIKELY(*nimErr_)) goto LA58_;
						}
LA62_: ;
						{
							LA58_:;
						}
						{
							nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							if (expectedLink_1.p && !(expectedLink_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(expectedLink_1.p);
}
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
					}
LA56_: ;
					nimlf_(451, "/workspaces/telestorie/lib/canvas.nim");					blitTmp_3 = line_1;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqwasMoved___system_u2707((&line_1));
					nimlf_(451, "/workspaces/telestorie/lib/canvas.nim");					add__stdZenumutils_u70((&lines_1), blitTmp_3);
					{
						LA35_:;
					}
					{
						nimlf_(220, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/std/envvars.nim");						eqdestroy___stdZenvvars_u83(parsedLinks_1);
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (restOfLine_1.p && !(restOfLine_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(restOfLine_1.p);
}
						if (bullet_1.p && !(bullet_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(bullet_1.p);
}
						if (trimmed_1.p && !(trimmed_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(trimmed_1.p);
}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
				} LA34: ;
				nimlf_(700, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");				{
					if (!(eolpos_1 == last_1)) goto LA79_;
					nimln_(701);					goto LA4;
				}
LA79_: ;
				nimln_(703);				first_1 = last_1;
			}
		} LA4: ;
		{
			LA3_:;
		}
		{
			nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (line_1.p && !(line_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(line_1.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	nimlf_(453, "/workspaces/telestorie/lib/canvas.nim");	nimln_(416);	nimln_(453);	result = nsuJoinSep(((lines_1).p) ? (lines_1.p->data) : NIM_NIL, lines_1.len, TM__kUjodket9aV1BVUR0GC3cwA_182);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqdestroy___system_u3785(lines_1);
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		eqdestroy___system_u3785(lines_1);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(void, appendChar)(NimStringV2* dest_p0, NIM_CHAR c_p1) {
	NI TM__kUjodket9aV1BVUR0GC3cwA_199;
{	(*(*dest_p0).p).data[(*dest_p0).len] = c_p1;
	if (nimAddInt((*dest_p0).len, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_199)) { raiseOverflow(); goto BeforeRet_;
	};
	(*dest_p0).len = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_199);
	(*(*dest_p0).p).data[(*dest_p0).len] = 0;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, formatHeading__libZcanvas_u2520)(NimStringV2 text_p0) {
	NimStringV2 result;
	NimStringV2 cleaned_1;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ words_1;
	NimStringV2 T8_;
	NimStringV2 T9_;
	NimStringV2 T10_;
NIM_BOOL* nimErr_;
	nimfr_("formatHeading", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	cleaned_1.len = 0; cleaned_1.p = NIM_NIL;
	words_1.len = 0; words_1.p = NIM_NIL;
	nimln_(1699);	eqcopy___system_u2710((&cleaned_1), text_p0);
	{
		nimlf_(720, "/workspaces/telestorie/lib/canvas.nim");		while (1) {
			NIM_BOOL T4_;
			tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T6_;
			NimStringV2 T7_;
			T4_ = (NIM_BOOL)0;
			T4_ = (((NI)0) < cleaned_1.len);
			if (!(T4_)) goto LA5_;
			if (((NI)0) < 0 || ((NI)0) >= cleaned_1.len){ raiseIndexError2(((NI)0),cleaned_1.len-1); goto LA1_;
			}
			T4_ = ((NU8)(cleaned_1.p->data[((NI)0)]) == (NU8)(35));
LA5_: ;
			if (!T4_) goto LA3;
			nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			nimlf_(721, "/workspaces/telestorie/lib/canvas.nim");			T6_ = dotdot___stdZenumutils_u105(((NI)1), ((NI)1));
			T7_.len = 0; T7_.p = NIM_NIL;
			T7_ = X5BX5D___pureZstrutils_u1319(cleaned_1, T6_);
			if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T7_); goto LA1_;}
			nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			eqsink___system_u2716((&cleaned_1), T7_);
		} LA3: ;
	}
	nimlf_(722, "/workspaces/telestorie/lib/canvas.nim");	T8_.len = 0; T8_.p = NIM_NIL;
	T8_ = nsuStrip(cleaned_1, NIM_TRUE, NIM_TRUE, TM__kUjodket9aV1BVUR0GC3cwA_138);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T8_); goto LA1_;}
	nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqsink___system_u2716((&cleaned_1), T8_);
	nimlf_(724, "/workspaces/telestorie/lib/canvas.nim");	T9_.len = 0; T9_.p = NIM_NIL;
	T9_ = nsuReplaceStr(cleaned_1, TM__kUjodket9aV1BVUR0GC3cwA_193, TM__kUjodket9aV1BVUR0GC3cwA_194);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T9_); goto LA1_;}
	nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqsink___system_u2716((&cleaned_1), T9_);
	nimlf_(725, "/workspaces/telestorie/lib/canvas.nim");	T10_.len = 0; T10_.p = NIM_NIL;
	T10_ = nsuReplaceStr(cleaned_1, TM__kUjodket9aV1BVUR0GC3cwA_195, TM__kUjodket9aV1BVUR0GC3cwA_196);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T10_); goto LA1_;}
	nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqsink___system_u2716((&cleaned_1), T10_);
	nimlf_(728, "/workspaces/telestorie/lib/canvas.nim");	words_1.len = 0; words_1.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	{
		NimStringV2 word_1;
		NI lastX60gensym34__1;
		NI splitsX60gensym34__1;
		word_1.len = 0; word_1.p = NIM_NIL;
		nimlf_(390, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");		lastX60gensym34__1 = ((NI)0);
		nimln_(391);		splitsX60gensym34__1 = ((NI)-1);
		{
			nimln_(450);			while (1) {
				NI firstX60gensym34__1;
				NI TM__kUjodket9aV1BVUR0GC3cwA_198;
				NimStringV2 T23_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_200;
				NI TM__kUjodket9aV1BVUR0GC3cwA_201;
				nimln_(393);				if (!(lastX60gensym34__1 <= cleaned_1.len)) goto LA14;
				nimln_(394);				firstX60gensym34__1 = lastX60gensym34__1;
				{
					nimln_(395);					while (1) {
						NIM_BOOL T17_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_197;
						T17_ = (NIM_BOOL)0;
						T17_ = (lastX60gensym34__1 < cleaned_1.len);
						if (!(T17_)) goto LA18_;
						if (lastX60gensym34__1 < 0 || lastX60gensym34__1 >= cleaned_1.len){ raiseIndexError2(lastX60gensym34__1,cleaned_1.len-1); goto LA12_;
						}
						T17_ = !(((NU8)(cleaned_1.p->data[lastX60gensym34__1]) == (NU8)(32)));
LA18_: ;
						if (!T17_) goto LA16;
						nimln_(396);						if (nimAddInt(lastX60gensym34__1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_197)) { raiseOverflow(); goto LA12_;
						};
						lastX60gensym34__1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_197);
					} LA16: ;
				}
				nimln_(397);				{
					if (!(splitsX60gensym34__1 == ((NI)0))) goto LA21_;
					lastX60gensym34__1 = cleaned_1.len;
				}
LA21_: ;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(729, "/workspaces/telestorie/lib/canvas.nim");				nimlf_(398, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");				if (nimSubInt(lastX60gensym34__1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_198)) { raiseOverflow(); goto LA12_;
				};
				nimlf_(729, "/workspaces/telestorie/lib/canvas.nim");				T23_.len = 0; T23_.p = NIM_NIL;
				T23_ = substr__system_u8893(cleaned_1, firstX60gensym34__1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_198));
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&word_1), T23_);
				nimlf_(730, "/workspaces/telestorie/lib/canvas.nim");				{
					NimStringV2 colontmpD_;
					NimStringV2 colontmpD__2;
					NimStringV2 T28_;
					NIM_CHAR T29_;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T30_;
					if (!(((NI)0) < word_1.len)) goto LA26_;
					colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
					colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
					nimln_(731);					T28_.len = 0; T28_.p = NIM_NIL;
					if (((NI)0) < 0 || ((NI)0) >= word_1.len){ raiseIndexError2(((NI)0),word_1.len-1); goto LA12_;
					}
					T29_ = (NIM_CHAR)0;
					T29_ = nsuToUpperAsciiChar(word_1.p->data[((NI)0)]);
					if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
					T30_ = dotdot___stdZenumutils_u105(((NI)1), ((NI)1));
					colontmpD_ = X5BX5D___pureZstrutils_u1319(word_1, T30_);
					if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
					colontmpD__2 = nsuToLowerAsciiStr(colontmpD_);
					if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
					T28_ = rawNewString(colontmpD__2.len + 1);
appendChar((&T28_), T29_);
appendString((&T28_), colontmpD__2);
					add__stdZenumutils_u70((&words_1), T28_);
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
					if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
				}
LA26_: ;
				nimlf_(399, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");				{
					if (!(splitsX60gensym34__1 == ((NI)0))) goto LA33_;
					goto LA13;
				}
LA33_: ;
				nimln_(400);				if (nimSubInt(splitsX60gensym34__1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_200)) { raiseOverflow(); goto LA12_;
				};
				splitsX60gensym34__1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_200);
				nimln_(401);				if (nimAddInt(lastX60gensym34__1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_201)) { raiseOverflow(); goto LA12_;
				};
				lastX60gensym34__1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_201);
			} LA14: ;
		} LA13: ;
		{
			LA12_:;
		}
		{
			nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (word_1.p && !(word_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(word_1.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	nimlf_(732, "/workspaces/telestorie/lib/canvas.nim");	result = nsuJoinSep(((words_1).p) ? (words_1.p->data) : NIM_NIL, words_1.len, TM__kUjodket9aV1BVUR0GC3cwA_202);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		eqdestroy___system_u3785(words_1);
		nimln_(394);		if (cleaned_1.p && !(cleaned_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(cleaned_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, getVisualWidth__libZcanvas_u2348)(NimStringV2 text_p0) {
	NI result;
	NI i_1;
NIM_BOOL* nimErr_;
	nimfr_("getVisualWidth", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(635, "/workspaces/telestorie/lib/canvas.nim");	result = ((NI)0);
	nimln_(636);	i_1 = ((NI)0);
	{
		nimln_(637);		while (1) {
			NimStringV2 ch_1;
			NI b_1;
			NI charLen_1;
			NI T30_;
			NI TM__kUjodket9aV1BVUR0GC3cwA_212;
			NI TM__kUjodket9aV1BVUR0GC3cwA_213;
			if (!(i_1 < text_p0.len)) goto LA2;
			ch_1.len = 0; ch_1.p = NIM_NIL;
			nimln_(638);			if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
			}
			b_1 = ((NU8)(text_p0.p->data[i_1]));
			nimln_(639);			charLen_1 = ((NI)1);
			nimln_(640);			ch_1 = TM__kUjodket9aV1BVUR0GC3cwA_203;
			nimln_(642);			{
				NimStringV2 T7_;
				if (!((NI)(b_1 & ((NI)128)) == ((NI)0))) goto LA5_;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(643, "/workspaces/telestorie/lib/canvas.nim");				if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
				}
				T7_.len = 0; T7_.p = NIM_NIL;
				T7_ = nimCharToStr(text_p0.p->data[i_1]);
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), T7_);
			}
			goto LA3_;
LA5_: ;
			{
				NIM_BOOL T9_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_204;
				NI TM__kUjodket9aV1BVUR0GC3cwA_205;
				tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T13_;
				NimStringV2 T14_;
				nimlf_(644, "/workspaces/telestorie/lib/canvas.nim");				T9_ = (NIM_BOOL)0;
				T9_ = ((NI)(b_1 & ((NI)224)) == ((NI)192));
				if (!(T9_)) goto LA10_;
				if (nimAddInt(i_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_204)) { raiseOverflow(); goto BeforeRet_;
				};
				T9_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_204) < text_p0.len);
LA10_: ;
				if (!T9_) goto LA11_;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(645, "/workspaces/telestorie/lib/canvas.nim");				if (nimAddInt(i_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_205)) { raiseOverflow(); goto BeforeRet_;
				};
				T13_ = dotdot___stdZstrbasics_u48(i_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_205));
				T14_.len = 0; T14_.p = NIM_NIL;
				T14_ = X5BX5D___pureZstrutils_u1291(text_p0, T13_);
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T14_); goto BeforeRet_;}
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), T14_);
				nimlf_(646, "/workspaces/telestorie/lib/canvas.nim");				charLen_1 = ((NI)2);
			}
			goto LA3_;
LA11_: ;
			{
				NIM_BOOL T16_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_206;
				NI TM__kUjodket9aV1BVUR0GC3cwA_207;
				tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T20_;
				NimStringV2 T21_;
				nimln_(647);				T16_ = (NIM_BOOL)0;
				T16_ = ((NI)(b_1 & ((NI)240)) == ((NI)224));
				if (!(T16_)) goto LA17_;
				if (nimAddInt(i_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_206)) { raiseOverflow(); goto BeforeRet_;
				};
				T16_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_206) < text_p0.len);
LA17_: ;
				if (!T16_) goto LA18_;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(648, "/workspaces/telestorie/lib/canvas.nim");				if (nimAddInt(i_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_207)) { raiseOverflow(); goto BeforeRet_;
				};
				T20_ = dotdot___stdZstrbasics_u48(i_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_207));
				T21_.len = 0; T21_.p = NIM_NIL;
				T21_ = X5BX5D___pureZstrutils_u1291(text_p0, T20_);
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T21_); goto BeforeRet_;}
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), T21_);
				nimlf_(649, "/workspaces/telestorie/lib/canvas.nim");				charLen_1 = ((NI)3);
			}
			goto LA3_;
LA18_: ;
			{
				NIM_BOOL T23_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_208;
				NI TM__kUjodket9aV1BVUR0GC3cwA_209;
				tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T27_;
				NimStringV2 T28_;
				nimln_(650);				T23_ = (NIM_BOOL)0;
				T23_ = ((NI)(b_1 & ((NI)248)) == ((NI)240));
				if (!(T23_)) goto LA24_;
				if (nimAddInt(i_1, ((NI)3), &TM__kUjodket9aV1BVUR0GC3cwA_208)) { raiseOverflow(); goto BeforeRet_;
				};
				T23_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_208) < text_p0.len);
LA24_: ;
				if (!T23_) goto LA25_;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(651, "/workspaces/telestorie/lib/canvas.nim");				if (nimAddInt(i_1, ((NI)3), &TM__kUjodket9aV1BVUR0GC3cwA_209)) { raiseOverflow(); goto BeforeRet_;
				};
				T27_ = dotdot___stdZstrbasics_u48(i_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_209));
				T28_.len = 0; T28_.p = NIM_NIL;
				T28_ = X5BX5D___pureZstrutils_u1291(text_p0, T27_);
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T28_); goto BeforeRet_;}
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), T28_);
				nimlf_(652, "/workspaces/telestorie/lib/canvas.nim");				charLen_1 = ((NI)4);
			}
			goto LA3_;
LA25_: ;
			{
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), TM__kUjodket9aV1BVUR0GC3cwA_211);
			}
LA3_: ;
			nimlf_(656, "/workspaces/telestorie/lib/canvas.nim");			T30_ = (NI)0;
			T30_ = getCharDisplayWidth__srcZcharwidth_u1(ch_1);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			if (nimAddInt(result, T30_, &TM__kUjodket9aV1BVUR0GC3cwA_212)) { raiseOverflow(); goto BeforeRet_;
			};
			result = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_212);
			nimln_(657);			if (nimAddInt(i_1, charLen_1, &TM__kUjodket9aV1BVUR0GC3cwA_213)) { raiseOverflow(); goto BeforeRet_;
			};
			i_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_213);
			nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(ch_1.p);
}
		} LA2: ;
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, truncateToVisualWidth__libZcanvas_u2420)(NimStringV2 text_p0, NI maxVisualWidth_p1) {
	NimStringV2 result;
	NI visualWidth_1;
	NI i_1;
NIM_BOOL* nimErr_;
	nimfr_("truncateToVisualWidth", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(661, "/workspaces/telestorie/lib/canvas.nim");	result = TM__kUjodket9aV1BVUR0GC3cwA_214;
	nimln_(662);	visualWidth_1 = ((NI)0);
	nimln_(663);	i_1 = ((NI)0);
	{
		nimln_(665);		while (1) {
			NIM_BOOL T3_;
			NimStringV2 ch_1;
			NI b_1;
			NI charLen_1;
			NI charWidth_1;
			NI TM__kUjodket9aV1BVUR0GC3cwA_225;
			T3_ = (NIM_BOOL)0;
			T3_ = (i_1 < text_p0.len);
			if (!(T3_)) goto LA4_;
			T3_ = (visualWidth_1 < maxVisualWidth_p1);
LA4_: ;
			if (!T3_) goto LA2;
			ch_1.len = 0; ch_1.p = NIM_NIL;
			nimln_(666);			if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto LA5_;
			}
			b_1 = ((NU8)(text_p0.p->data[i_1]));
			nimln_(667);			charLen_1 = ((NI)1);
			nimln_(668);			ch_1 = TM__kUjodket9aV1BVUR0GC3cwA_215;
			nimln_(670);			{
				NimStringV2 T10_;
				if (!((NI)(b_1 & ((NI)128)) == ((NI)0))) goto LA8_;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(671, "/workspaces/telestorie/lib/canvas.nim");				if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto LA5_;
				}
				T10_.len = 0; T10_.p = NIM_NIL;
				T10_ = nimCharToStr(text_p0.p->data[i_1]);
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), T10_);
			}
			goto LA6_;
LA8_: ;
			{
				NIM_BOOL T12_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_216;
				NI TM__kUjodket9aV1BVUR0GC3cwA_217;
				tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T16_;
				NimStringV2 T17_;
				nimlf_(672, "/workspaces/telestorie/lib/canvas.nim");				T12_ = (NIM_BOOL)0;
				T12_ = ((NI)(b_1 & ((NI)224)) == ((NI)192));
				if (!(T12_)) goto LA13_;
				if (nimAddInt(i_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_216)) { raiseOverflow(); goto LA5_;
				};
				T12_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_216) < text_p0.len);
LA13_: ;
				if (!T12_) goto LA14_;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(673, "/workspaces/telestorie/lib/canvas.nim");				if (nimAddInt(i_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_217)) { raiseOverflow(); goto LA5_;
				};
				T16_ = dotdot___stdZstrbasics_u48(i_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_217));
				T17_.len = 0; T17_.p = NIM_NIL;
				T17_ = X5BX5D___pureZstrutils_u1291(text_p0, T16_);
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T17_); goto LA5_;}
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), T17_);
				nimlf_(674, "/workspaces/telestorie/lib/canvas.nim");				charLen_1 = ((NI)2);
			}
			goto LA6_;
LA14_: ;
			{
				NIM_BOOL T19_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_218;
				NI TM__kUjodket9aV1BVUR0GC3cwA_219;
				tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T23_;
				NimStringV2 T24_;
				nimln_(675);				T19_ = (NIM_BOOL)0;
				T19_ = ((NI)(b_1 & ((NI)240)) == ((NI)224));
				if (!(T19_)) goto LA20_;
				if (nimAddInt(i_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_218)) { raiseOverflow(); goto LA5_;
				};
				T19_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_218) < text_p0.len);
LA20_: ;
				if (!T19_) goto LA21_;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(676, "/workspaces/telestorie/lib/canvas.nim");				if (nimAddInt(i_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_219)) { raiseOverflow(); goto LA5_;
				};
				T23_ = dotdot___stdZstrbasics_u48(i_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_219));
				T24_.len = 0; T24_.p = NIM_NIL;
				T24_ = X5BX5D___pureZstrutils_u1291(text_p0, T23_);
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T24_); goto LA5_;}
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), T24_);
				nimlf_(677, "/workspaces/telestorie/lib/canvas.nim");				charLen_1 = ((NI)3);
			}
			goto LA6_;
LA21_: ;
			{
				NIM_BOOL T26_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_220;
				NI TM__kUjodket9aV1BVUR0GC3cwA_221;
				tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T30_;
				NimStringV2 T31_;
				nimln_(678);				T26_ = (NIM_BOOL)0;
				T26_ = ((NI)(b_1 & ((NI)248)) == ((NI)240));
				if (!(T26_)) goto LA27_;
				if (nimAddInt(i_1, ((NI)3), &TM__kUjodket9aV1BVUR0GC3cwA_220)) { raiseOverflow(); goto LA5_;
				};
				T26_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_220) < text_p0.len);
LA27_: ;
				if (!T26_) goto LA28_;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(679, "/workspaces/telestorie/lib/canvas.nim");				if (nimAddInt(i_1, ((NI)3), &TM__kUjodket9aV1BVUR0GC3cwA_221)) { raiseOverflow(); goto LA5_;
				};
				T30_ = dotdot___stdZstrbasics_u48(i_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_221));
				T31_.len = 0; T31_.p = NIM_NIL;
				T31_ = X5BX5D___pureZstrutils_u1291(text_p0, T30_);
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T31_); goto LA5_;}
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), T31_);
				nimlf_(680, "/workspaces/telestorie/lib/canvas.nim");				charLen_1 = ((NI)4);
			}
			goto LA6_;
LA28_: ;
			{
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&ch_1), TM__kUjodket9aV1BVUR0GC3cwA_222);
			}
LA6_: ;
			nimlf_(684, "/workspaces/telestorie/lib/canvas.nim");			charWidth_1 = getCharDisplayWidth__srcZcharwidth_u1(ch_1);
			if (NIM_UNLIKELY(*nimErr_)) goto LA5_;
			nimln_(685);			{
				NI TM__kUjodket9aV1BVUR0GC3cwA_223;
				NI TM__kUjodket9aV1BVUR0GC3cwA_224;
				if (nimAddInt(visualWidth_1, charWidth_1, &TM__kUjodket9aV1BVUR0GC3cwA_223)) { raiseOverflow(); goto LA5_;
				};
				if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_223) <= maxVisualWidth_p1)) goto LA35_;
				nimln_(686);				prepareAdd((&result), ch_1.len + 0);
appendString((&result), ch_1);
				nimln_(687);				if (nimAddInt(visualWidth_1, charWidth_1, &TM__kUjodket9aV1BVUR0GC3cwA_224)) { raiseOverflow(); goto LA5_;
				};
				visualWidth_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_224);
			}
			goto LA33_;
LA35_: ;
			{
				nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(ch_1.p);
}
				nimlf_(689, "/workspaces/telestorie/lib/canvas.nim");				goto LA1;
			}
LA33_: ;
			nimln_(691);			if (nimAddInt(i_1, charLen_1, &TM__kUjodket9aV1BVUR0GC3cwA_225)) { raiseOverflow(); goto LA5_;
			};
			i_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_225);
			{
				LA5_:;
			}
			{
				nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(ch_1.p);
}
			}
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		} LA2: ;
	} LA1: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasLinksOutsideBackticks__libZcanvas_u4788)(NimStringV2 text_p0) {
	NIM_BOOL result;
	NI pos_1;
	nimfr_("hasLinksOutsideBackticks", "/workspaces/telestorie/lib/canvas.nim");
{	result = (NIM_BOOL)0;
	nimlf_(1172, "/workspaces/telestorie/lib/canvas.nim");	pos_1 = ((NI)0);
	{
		nimln_(1173);		while (1) {
			if (!(pos_1 < text_p0.len)) goto LA2;
			{
				NI TM__kUjodket9aV1BVUR0GC3cwA_233;
				nimln_(1175);				{
					NI TM__kUjodket9aV1BVUR0GC3cwA_226;
					if (pos_1 < 0 || pos_1 >= text_p0.len){ raiseIndexError2(pos_1,text_p0.len-1); goto BeforeRet_;
					}
					if (!((NU8)(text_p0.p->data[pos_1]) == (NU8)(96))) goto LA6_;
					nimln_(1177);					if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_226)) { raiseOverflow(); goto BeforeRet_;
					};
					pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_226);
					{
						nimln_(1178);						while (1) {
							NIM_BOOL T10_;
							NI TM__kUjodket9aV1BVUR0GC3cwA_227;
							T10_ = (NIM_BOOL)0;
							T10_ = (pos_1 < text_p0.len);
							if (!(T10_)) goto LA11_;
							if (pos_1 < 0 || pos_1 >= text_p0.len){ raiseIndexError2(pos_1,text_p0.len-1); goto BeforeRet_;
							}
							T10_ = !(((NU8)(text_p0.p->data[pos_1]) == (NU8)(96)));
LA11_: ;
							if (!T10_) goto LA9;
							nimln_(1179);							if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_227)) { raiseOverflow(); goto BeforeRet_;
							};
							pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_227);
						} LA9: ;
					}
					nimln_(1180);					{
						NI TM__kUjodket9aV1BVUR0GC3cwA_228;
						if (!(pos_1 < text_p0.len)) goto LA14_;
						nimln_(1181);						if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_228)) { raiseOverflow(); goto BeforeRet_;
						};
						pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_228);
					}
LA14_: ;
					nimln_(1182);					goto LA3;
				}
LA6_: ;
				nimln_(1185);				{
					NI j_1;
					NI TM__kUjodket9aV1BVUR0GC3cwA_229;
					if (pos_1 < 0 || pos_1 >= text_p0.len){ raiseIndexError2(pos_1,text_p0.len-1); goto BeforeRet_;
					}
					if (!((NU8)(text_p0.p->data[pos_1]) == (NU8)(91))) goto LA18_;
					nimln_(1187);					if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_229)) { raiseOverflow(); goto BeforeRet_;
					};
					j_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_229);
					{
						nimln_(1188);						while (1) {
							NIM_BOOL T22_;
							NI TM__kUjodket9aV1BVUR0GC3cwA_230;
							T22_ = (NIM_BOOL)0;
							T22_ = (j_1 < text_p0.len);
							if (!(T22_)) goto LA23_;
							if (j_1 < 0 || j_1 >= text_p0.len){ raiseIndexError2(j_1,text_p0.len-1); goto BeforeRet_;
							}
							T22_ = !(((NU8)(text_p0.p->data[j_1]) == (NU8)(93)));
LA23_: ;
							if (!T22_) goto LA21;
							nimln_(1189);							if (nimAddInt(j_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_230)) { raiseOverflow(); goto BeforeRet_;
							};
							j_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_230);
						} LA21: ;
					}
					nimln_(1190);					{
						NIM_BOOL T26_;
						NIM_BOOL T27_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_231;
						NI TM__kUjodket9aV1BVUR0GC3cwA_232;
						T26_ = (NIM_BOOL)0;
						T27_ = (NIM_BOOL)0;
						if (nimAddInt(j_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_231)) { raiseOverflow(); goto BeforeRet_;
						};
						T27_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_231) < text_p0.len);
						if (!(T27_)) goto LA28_;
						if (j_1 < 0 || j_1 >= text_p0.len){ raiseIndexError2(j_1,text_p0.len-1); goto BeforeRet_;
						}
						T27_ = ((NU8)(text_p0.p->data[j_1]) == (NU8)(93));
LA28_: ;
						T26_ = T27_;
						if (!(T26_)) goto LA29_;
						if (nimAddInt(j_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_232)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_232) < 0 || (NI)(TM__kUjodket9aV1BVUR0GC3cwA_232) >= text_p0.len){ raiseIndexError2((NI)(TM__kUjodket9aV1BVUR0GC3cwA_232),text_p0.len-1); goto BeforeRet_;
						}
						T26_ = ((NU8)(text_p0.p->data[(NI)(TM__kUjodket9aV1BVUR0GC3cwA_232)]) == (NU8)(40));
LA29_: ;
						if (!T26_) goto LA30_;
						nimln_(1191);						nimln_(1170);						nimln_(1191);						result = NIM_TRUE;
						goto BeforeRet_;
					}
LA30_: ;
				}
LA18_: ;
				nimln_(1193);				if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_233)) { raiseOverflow(); goto BeforeRet_;
				};
				pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_233);
			} LA3: ;
		} LA2: ;
	}
	nimln_(1195);	nimln_(1170);	nimln_(1195);	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, renderInlineMarkdown__libZcanvas_u3665)(NimStringV2 text_p0, NI x_p1, NI y_p2, NI maxWidth_p3, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p4, tyObject_Style__UURjArTrf2wmcCbN5MncAQ baseStyle_p5) {
	NI result;
	NimStringV2 expandedText_1;
	NI currentX_1;
	NI pos_1;
	NIM_BOOL isBold_1;
	NIM_BOOL isItalic_1;
NIM_BOOL oldNimErrFin35_;
	NI TM__kUjodket9aV1BVUR0GC3cwA_276;
NIM_BOOL* nimErr_;
	nimfr_("renderInlineMarkdown", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	expandedText_1.len = 0; expandedText_1.p = NIM_NIL;
	nimln_(880);	expandedText_1 = text_p0;
	nimln_(881);	currentX_1 = x_p1;
	nimln_(882);	pos_1 = ((NI)0);
	nimln_(883);	isBold_1 = baseStyle_p5.bold;
	nimln_(884);	isItalic_1 = baseStyle_p5.italic;
	{
		nimln_(886);		while (1) {
			NIM_BOOL T3_;
			NI TM__kUjodket9aV1BVUR0GC3cwA_242;
			NimStringV2 colontmpD_;
			T3_ = (NIM_BOOL)0;
			T3_ = (pos_1 < expandedText_1.len);
			if (!(T3_)) goto LA4_;
			if (nimAddInt(x_p1, maxWidth_p3, &TM__kUjodket9aV1BVUR0GC3cwA_242)) { raiseOverflow(); goto BeforeRet_;
			};
			T3_ = (currentX_1 < (NI)(TM__kUjodket9aV1BVUR0GC3cwA_242));
LA4_: ;
			if (!T3_) goto LA2;
			colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
			nimln_(888);			{
				NI codeStart_1;
				NI TM__kUjodket9aV1BVUR0GC3cwA_243;
				NI codeEnd_1;
				if (pos_1 < 0 || pos_1 >= expandedText_1.len){ raiseIndexError2(pos_1,expandedText_1.len-1); goto LA5_;
				}
				if (!((NU8)(expandedText_1.p->data[pos_1]) == (NU8)(96))) goto LA8_;
				nimln_(890);				if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_243)) { raiseOverflow(); goto LA5_;
				};
				codeStart_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_243);
				nimln_(891);				codeEnd_1 = codeStart_1;
				{
					nimln_(892);					while (1) {
						NIM_BOOL T12_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_244;
						T12_ = (NIM_BOOL)0;
						T12_ = (codeEnd_1 < expandedText_1.len);
						if (!(T12_)) goto LA13_;
						if (codeEnd_1 < 0 || codeEnd_1 >= expandedText_1.len){ raiseIndexError2(codeEnd_1,expandedText_1.len-1); goto LA5_;
						}
						T12_ = !(((NU8)(expandedText_1.p->data[codeEnd_1]) == (NU8)(96)));
LA13_: ;
						if (!T12_) goto LA11;
						nimln_(893);						if (nimAddInt(codeEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_244)) { raiseOverflow(); goto LA5_;
						};
						codeEnd_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_244);
					} LA11: ;
				}
				nimln_(895);				{
					NimStringV2 codeContent_1;
					NI TM__kUjodket9aV1BVUR0GC3cwA_245;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T19_;
					if (!(codeEnd_1 < expandedText_1.len)) goto LA16_;
					codeContent_1.len = 0; codeContent_1.p = NIM_NIL;
					nimln_(897);					nimlf_(53, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");					if (nimSubInt(codeEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_245)) { raiseOverflow(); goto LA18_;
					};
					nimlf_(897, "/workspaces/telestorie/lib/canvas.nim");					T19_ = dotdot___stdZstrbasics_u48(codeStart_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_245));
					codeContent_1 = X5BX5D___pureZstrutils_u1291(expandedText_1, T19_);
					if (NIM_UNLIKELY(*nimErr_)) goto LA18_;
					nimln_(900);					{
						NIM_BOOL T22_;
						NIM_BOOL T23_;
						NimStringV2 varName_1;
						NimStringV2 colontmpD__2;
						NimStringV2 value_1;
						NimStringV2 textToRender_1;
						tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T29_;
						NIM_BOOL found_1;
						NimStringV2 T51_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_251;
						T22_ = (NIM_BOOL)0;
						T23_ = (NIM_BOOL)0;
						T23_ = (((NI)1) < codeContent_1.len);
						if (!(T23_)) goto LA24_;
						if (((NI)0) < 0 || ((NI)0) >= codeContent_1.len){ raiseIndexError2(((NI)0),codeContent_1.len-1); goto LA18_;
						}
						T23_ = ((NU8)(codeContent_1.p->data[((NI)0)]) == (NU8)(63));
LA24_: ;
						T22_ = T23_;
						if (!(T22_)) goto LA25_;
						if (((NI)1) < 0 || ((NI)1) >= codeContent_1.len){ raiseIndexError2(((NI)1),codeContent_1.len-1); goto LA18_;
						}
						T22_ = ((NU8)(codeContent_1.p->data[((NI)1)]) == (NU8)(32));
LA25_: ;
						if (!T22_) goto LA26_;
						varName_1.len = 0; varName_1.p = NIM_NIL;
						colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
						value_1.len = 0; value_1.p = NIM_NIL;
						textToRender_1.len = 0; textToRender_1.p = NIM_NIL;
						nimln_(901);						T29_ = dotdot___stdZenumutils_u105(((NI)2), ((NI)1));
						colontmpD__2 = X5BX5D___pureZstrutils_u1319(codeContent_1, T29_);
						if (NIM_UNLIKELY(*nimErr_)) goto LA28_;
						varName_1 = nsuStrip(colontmpD__2, NIM_TRUE, NIM_TRUE, TM__kUjodket9aV1BVUR0GC3cwA_138);
						if (NIM_UNLIKELY(*nimErr_)) goto LA28_;
						nimln_(902);						value_1 = TM__kUjodket9aV1BVUR0GC3cwA_246;
						nimln_(903);						found_1 = NIM_FALSE;
						nimln_(907);						{
							tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_1;
							tyObject_Env__YOkjv76lcCADUm0ClKJM5g* colontmpD__3;
							tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* nimVal_1;
							tyObject_Env__YOkjv76lcCADUm0ClKJM5g* T36_;
							tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T37_;
							if (!!((gNiminiEnv__libZcanvas_u14 == 0))) goto LA32_;
							env_1 = NIM_NIL;
							colontmpD__3 = NIM_NIL;
							nimVal_1 = NIM_NIL;
							nimln_(909);							nimlf_(189, "/workspaces/telestorie/nimini/runtime.nim");							T36_ = NIM_NIL;
							T36_ = eqdup___niminiZruntime_u2903(((tyObject_Env__YOkjv76lcCADUm0ClKJM5g*) (gNiminiEnv__libZcanvas_u14)), NIM_TRUE);
							if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u2896(T36_); goto LA35_;}
							colontmpD__3 = T36_;
							env_1 = colontmpD__3;
							nimlf_(910, "/workspaces/telestorie/lib/canvas.nim");							T37_ = NIM_NIL;
							T37_ = getVar__niminiZruntime_u3112(env_1, varName_1);
							if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T37_); goto LA35_;}
							nimVal_1 = T37_;
							nimln_(911);							switch ((*nimVal_1).kind) {
							case ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)4):
							{
								nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								eqcopy___system_u2710((&value_1), (*nimVal_1).s);
								nimlf_(914, "/workspaces/telestorie/lib/canvas.nim");								found_1 = NIM_TRUE;
							}
							break;
							case ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)1):
							{
								NimStringV2 T40_;
								nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								nimlf_(916, "/workspaces/telestorie/lib/canvas.nim");								T40_.len = 0; T40_.p = NIM_NIL;
								T40_ = dollar___systemZdollars_u14((*nimVal_1).i);
								if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T40_); goto LA35_;}
								nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								eqsink___system_u2716((&value_1), T40_);
								nimlf_(917, "/workspaces/telestorie/lib/canvas.nim");								found_1 = NIM_TRUE;
							}
							break;
							case ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)2):
							{
								NimStringV2 T42_;
								nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								nimlf_(919, "/workspaces/telestorie/lib/canvas.nim");								T42_.len = 0; T42_.p = NIM_NIL;
								T42_ = dollar___system_u4952((*nimVal_1).f);
								if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T42_); goto LA35_;}
								nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								eqsink___system_u2716((&value_1), T42_);
								nimlf_(920, "/workspaces/telestorie/lib/canvas.nim");								found_1 = NIM_TRUE;
							}
							break;
							case ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)3):
							{
								NimStringV2 T44_;
								nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								nimlf_(922, "/workspaces/telestorie/lib/canvas.nim");								T44_.len = 0; T44_.p = NIM_NIL;
								T44_ = nimBoolToStr((*nimVal_1).b);
								nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								eqsink___system_u2716((&value_1), T44_);
								nimlf_(923, "/workspaces/telestorie/lib/canvas.nim");								found_1 = NIM_TRUE;
							}
							break;
							default:
							{
							}
							break;
							}
							{
								LA35_:;
							}
							{
								oldNimErrFin35_ = *nimErr_; *nimErr_ = NIM_FALSE;
								nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");								eqdestroy___niminiZruntime_u92(nimVal_1);
								if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
								nimlf_(189, "/workspaces/telestorie/nimini/runtime.nim");								eqdestroy___niminiZruntime_u2896(env_1);
								if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
								*nimErr_ = oldNimErrFin35_;
							}
							if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
							if (NIM_UNLIKELY(*nimErr_)) {
								LA34_:;
								{
									*nimErr_ = NIM_FALSE;
									nimlf_(927, "/workspaces/telestorie/lib/canvas.nim");									raiseDefect();
									popCurrentException();
									LA49_:;
								}
							}
							if (NIM_UNLIKELY(*nimErr_)) goto LA28_;
						}
LA32_: ;
						T51_.len = 0; T51_.p = NIM_NIL;
						nimln_(930);						{
							if (!found_1) goto LA54_;
							textToRender_1 = value_1;
							nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqwasMoved___system_u2707((&value_1));
						}
						goto LA52_;
LA54_: ;
						{
							nimlf_(930, "/workspaces/telestorie/lib/canvas.nim");							textToRender_1 = codeContent_1;
							nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqwasMoved___system_u2707((&codeContent_1));
						}
LA52_: ;
						{
							NIM_CHAR ch_1;
							NI i_1;
							NI L_1;
							ch_1 = (NIM_CHAR)0;
							nimlf_(267, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");							i_1 = ((NI)0);
							nimln_(268);							L_1 = textToRender_1.len;
							{
								nimln_(269);								while (1) {
									NimStringV2 chStr_1;
									tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
									NI T65_;
									NI TM__kUjodket9aV1BVUR0GC3cwA_248;
									if (!(i_1 < L_1)) goto LA59;
									chStr_1.len = 0; chStr_1.p = NIM_NIL;
									nimlf_(931, "/workspaces/telestorie/lib/canvas.nim");									if (i_1 < 0 || i_1 >= textToRender_1.len){ raiseIndexError2(i_1,textToRender_1.len-1); goto LA60_;
									}
									ch_1 = textToRender_1.p->data[i_1];
									nimln_(932);									{
										NI TM__kUjodket9aV1BVUR0GC3cwA_247;
										if (nimAddInt(x_p1, maxWidth_p3, &TM__kUjodket9aV1BVUR0GC3cwA_247)) { raiseOverflow(); goto LA60_;
										};
										if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_247) <= currentX_1)) goto LA63_;
										nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");										if (chStr_1.p && !(chStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(chStr_1.p);
}
										nimlf_(933, "/workspaces/telestorie/lib/canvas.nim");										goto LA57;
									}
LA63_: ;
									nimln_(934);									style_1.fg = baseStyle_p5.fg;
									style_1.bg = baseStyle_p5.bg;
									style_1.bold = NIM_FALSE;
									style_1.underline = baseStyle_p5.underline;
									style_1.italic = NIM_FALSE;
									style_1.dim = baseStyle_p5.dim;
									nimln_(936);									chStr_1 = nimCharToStr(ch_1);
									nimln_(937);									writeText__backendsZterminalZtermbuffer_u230(buffer_p4, currentX_1, y_p2, chStr_1, style_1);
									if (NIM_UNLIKELY(*nimErr_)) goto LA60_;
									nimln_(938);									T65_ = (NI)0;
									T65_ = getCharDisplayWidth__srcZcharwidth_u1(chStr_1);
									if (NIM_UNLIKELY(*nimErr_)) goto LA60_;
									if (nimAddInt(currentX_1, T65_, &TM__kUjodket9aV1BVUR0GC3cwA_248)) { raiseOverflow(); goto LA60_;
									};
									currentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_248);
									nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");									i_1 += ((NI)1);
									nimln_(272);									{
										if (!!((textToRender_1.len == L_1))) goto LA68_;
										failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_250);
										if (NIM_UNLIKELY(*nimErr_)) goto LA60_;
									}
LA68_: ;
									{
										LA60_:;
									}
									{
										nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");										if (chStr_1.p && !(chStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(chStr_1.p);
}
									}
									if (NIM_UNLIKELY(*nimErr_)) goto LA28_;
								} LA59: ;
							}
						} LA57: ;
						nimlf_(939, "/workspaces/telestorie/lib/canvas.nim");						if (nimAddInt(codeEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_251)) { raiseOverflow(); goto LA28_;
						};
						pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_251);
						{
							LA28_:;
						}
						{
							nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							if (textToRender_1.p && !(textToRender_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(textToRender_1.p);
}
							if (value_1.p && !(value_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(value_1.p);
}
							if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
							if (varName_1.p && !(varName_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(varName_1.p);
}
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA18_;
					}
					goto LA20_;
LA26_: ;
					{
						NI TM__kUjodket9aV1BVUR0GC3cwA_255;
						{
							NIM_CHAR ch_2;
							NI i_2;
							NI L_2;
							ch_2 = (NIM_CHAR)0;
							nimlf_(267, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");							i_2 = ((NI)0);
							nimln_(268);							L_2 = codeContent_1.len;
							{
								nimln_(269);								while (1) {
									NimStringV2 chStr_2;
									tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_2;
									NI T83_;
									NI TM__kUjodket9aV1BVUR0GC3cwA_253;
									if (!(i_2 < L_2)) goto LA77;
									chStr_2.len = 0; chStr_2.p = NIM_NIL;
									nimlf_(942, "/workspaces/telestorie/lib/canvas.nim");									if (i_2 < 0 || i_2 >= codeContent_1.len){ raiseIndexError2(i_2,codeContent_1.len-1); goto LA78_;
									}
									ch_2 = codeContent_1.p->data[i_2];
									nimln_(943);									{
										NI TM__kUjodket9aV1BVUR0GC3cwA_252;
										if (nimAddInt(x_p1, maxWidth_p3, &TM__kUjodket9aV1BVUR0GC3cwA_252)) { raiseOverflow(); goto LA78_;
										};
										if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_252) <= currentX_1)) goto LA81_;
										nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");										if (chStr_2.p && !(chStr_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(chStr_2.p);
}
										nimlf_(944, "/workspaces/telestorie/lib/canvas.nim");										goto LA75;
									}
LA81_: ;
									nimln_(945);									style_2.fg = baseStyle_p5.fg;
									style_2.bg = baseStyle_p5.bg;
									style_2.bold = NIM_FALSE;
									style_2.underline = baseStyle_p5.underline;
									style_2.italic = NIM_FALSE;
									style_2.dim = baseStyle_p5.dim;
									nimln_(947);									chStr_2 = nimCharToStr(ch_2);
									nimln_(948);									writeText__backendsZterminalZtermbuffer_u230(buffer_p4, currentX_1, y_p2, chStr_2, style_2);
									if (NIM_UNLIKELY(*nimErr_)) goto LA78_;
									nimln_(949);									T83_ = (NI)0;
									T83_ = getCharDisplayWidth__srcZcharwidth_u1(chStr_2);
									if (NIM_UNLIKELY(*nimErr_)) goto LA78_;
									if (nimAddInt(currentX_1, T83_, &TM__kUjodket9aV1BVUR0GC3cwA_253)) { raiseOverflow(); goto LA78_;
									};
									currentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_253);
									nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");									i_2 += ((NI)1);
									nimln_(272);									{
										if (!!((codeContent_1.len == L_2))) goto LA86_;
										failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_254);
										if (NIM_UNLIKELY(*nimErr_)) goto LA78_;
									}
LA86_: ;
									{
										LA78_:;
									}
									{
										nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");										if (chStr_2.p && !(chStr_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(chStr_2.p);
}
									}
									if (NIM_UNLIKELY(*nimErr_)) goto LA18_;
								} LA77: ;
							}
						} LA75: ;
						nimlf_(950, "/workspaces/telestorie/lib/canvas.nim");						if (nimAddInt(codeEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_255)) { raiseOverflow(); goto LA18_;
						};
						pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_255);
					}
LA20_: ;
					{
						LA18_:;
					}
					{
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (codeContent_1.p && !(codeContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(codeContent_1.p);
}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA5_;
				}
				goto LA14_;
LA16_: ;
				{
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_3;
					NI TM__kUjodket9aV1BVUR0GC3cwA_258;
					NI TM__kUjodket9aV1BVUR0GC3cwA_259;
					nimlf_(953, "/workspaces/telestorie/lib/canvas.nim");					style_3.fg = baseStyle_p5.fg;
					style_3.bg = baseStyle_p5.bg;
					style_3.bold = isBold_1;
					style_3.underline = baseStyle_p5.underline;
					style_3.italic = isItalic_1;
					style_3.dim = baseStyle_p5.dim;
					nimln_(955);					writeText__backendsZterminalZtermbuffer_u230(buffer_p4, currentX_1, y_p2, TM__kUjodket9aV1BVUR0GC3cwA_257, style_3);
					if (NIM_UNLIKELY(*nimErr_)) goto LA5_;
					nimln_(956);					if (nimAddInt(currentX_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_258)) { raiseOverflow(); goto LA5_;
					};
					currentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_258);
					nimln_(957);					if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_259)) { raiseOverflow(); goto LA5_;
					};
					pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_259);
				}
LA14_: ;
			}
			goto LA6_;
LA8_: ;
			{
				NIM_BOOL T94_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_260;
				NI TM__kUjodket9aV1BVUR0GC3cwA_261;
				tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T96_;
				NimStringV2 T97_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_264;
				nimln_(959);				T94_ = (NIM_BOOL)0;
				if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_260)) { raiseOverflow(); goto LA5_;
				};
				T94_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_260) < expandedText_1.len);
				if (!(T94_)) goto LA95_;
				if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_261)) { raiseOverflow(); goto LA5_;
				};
				T96_ = dotdot___stdZstrbasics_u48(pos_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_261));
				T97_.len = 0; T97_.p = NIM_NIL;
				T97_ = X5BX5D___pureZstrutils_u1291(expandedText_1, T96_);
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T97_); goto LA5_;}
				colontmpD_ = T97_;
				T94_ = eqStrings(colontmpD_, TM__kUjodket9aV1BVUR0GC3cwA_263);
LA95_: ;
				if (!T94_) goto LA98_;
				nimln_(960);				isBold_1 = !(isBold_1);
				nimln_(961);				if (nimAddInt(pos_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_264)) { raiseOverflow(); goto LA5_;
				};
				pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_264);
			}
			goto LA6_;
LA98_: ;
			{
				NI TM__kUjodket9aV1BVUR0GC3cwA_265;
				nimln_(963);				if (pos_1 < 0 || pos_1 >= expandedText_1.len){ raiseIndexError2(pos_1,expandedText_1.len-1); goto LA5_;
				}
				if (!((NU8)(expandedText_1.p->data[pos_1]) == (NU8)(42))) goto LA101_;
				nimln_(964);				isItalic_1 = !(isItalic_1);
				nimln_(965);				if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_265)) { raiseOverflow(); goto LA5_;
				};
				pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_265);
			}
			goto LA6_;
LA101_: ;
			{
				NimStringV2 ch_3;
				NI b_1;
				NI charLen_1;
				tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_4;
				NI T131_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_274;
				NI TM__kUjodket9aV1BVUR0GC3cwA_275;
				ch_3.len = 0; ch_3.p = NIM_NIL;
				nimln_(968);				if (pos_1 < 0 || pos_1 >= expandedText_1.len){ raiseIndexError2(pos_1,expandedText_1.len-1); goto LA5_;
				}
				b_1 = ((NU8)(expandedText_1.p->data[pos_1]));
				nimln_(969);				charLen_1 = ((NI)1);
				nimln_(970);				ch_3 = TM__kUjodket9aV1BVUR0GC3cwA_266;
				nimln_(972);				{
					NimStringV2 T108_;
					if (!((NI)(b_1 & ((NI)128)) == ((NI)0))) goto LA106_;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					nimlf_(973, "/workspaces/telestorie/lib/canvas.nim");					if (pos_1 < 0 || pos_1 >= expandedText_1.len){ raiseIndexError2(pos_1,expandedText_1.len-1); goto LA5_;
					}
					T108_.len = 0; T108_.p = NIM_NIL;
					T108_ = nimCharToStr(expandedText_1.p->data[pos_1]);
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqsink___system_u2716((&ch_3), T108_);
				}
				goto LA104_;
LA106_: ;
				{
					NIM_BOOL T110_;
					NI TM__kUjodket9aV1BVUR0GC3cwA_267;
					NI TM__kUjodket9aV1BVUR0GC3cwA_268;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T114_;
					NimStringV2 T115_;
					nimlf_(974, "/workspaces/telestorie/lib/canvas.nim");					T110_ = (NIM_BOOL)0;
					T110_ = ((NI)(b_1 & ((NI)224)) == ((NI)192));
					if (!(T110_)) goto LA111_;
					if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_267)) { raiseOverflow(); goto LA5_;
					};
					T110_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_267) < expandedText_1.len);
LA111_: ;
					if (!T110_) goto LA112_;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					nimlf_(975, "/workspaces/telestorie/lib/canvas.nim");					if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_268)) { raiseOverflow(); goto LA5_;
					};
					T114_ = dotdot___stdZstrbasics_u48(pos_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_268));
					T115_.len = 0; T115_.p = NIM_NIL;
					T115_ = X5BX5D___pureZstrutils_u1291(expandedText_1, T114_);
					if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T115_); goto LA5_;}
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqsink___system_u2716((&ch_3), T115_);
					nimlf_(976, "/workspaces/telestorie/lib/canvas.nim");					charLen_1 = ((NI)2);
				}
				goto LA104_;
LA112_: ;
				{
					NIM_BOOL T117_;
					NI TM__kUjodket9aV1BVUR0GC3cwA_269;
					NI TM__kUjodket9aV1BVUR0GC3cwA_270;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T121_;
					NimStringV2 T122_;
					nimln_(977);					T117_ = (NIM_BOOL)0;
					T117_ = ((NI)(b_1 & ((NI)240)) == ((NI)224));
					if (!(T117_)) goto LA118_;
					if (nimAddInt(pos_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_269)) { raiseOverflow(); goto LA5_;
					};
					T117_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_269) < expandedText_1.len);
LA118_: ;
					if (!T117_) goto LA119_;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					nimlf_(978, "/workspaces/telestorie/lib/canvas.nim");					if (nimAddInt(pos_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_270)) { raiseOverflow(); goto LA5_;
					};
					T121_ = dotdot___stdZstrbasics_u48(pos_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_270));
					T122_.len = 0; T122_.p = NIM_NIL;
					T122_ = X5BX5D___pureZstrutils_u1291(expandedText_1, T121_);
					if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T122_); goto LA5_;}
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqsink___system_u2716((&ch_3), T122_);
					nimlf_(979, "/workspaces/telestorie/lib/canvas.nim");					charLen_1 = ((NI)3);
				}
				goto LA104_;
LA119_: ;
				{
					NIM_BOOL T124_;
					NI TM__kUjodket9aV1BVUR0GC3cwA_271;
					NI TM__kUjodket9aV1BVUR0GC3cwA_272;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T128_;
					NimStringV2 T129_;
					nimln_(980);					T124_ = (NIM_BOOL)0;
					T124_ = ((NI)(b_1 & ((NI)248)) == ((NI)240));
					if (!(T124_)) goto LA125_;
					if (nimAddInt(pos_1, ((NI)3), &TM__kUjodket9aV1BVUR0GC3cwA_271)) { raiseOverflow(); goto LA5_;
					};
					T124_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_271) < expandedText_1.len);
LA125_: ;
					if (!T124_) goto LA126_;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					nimlf_(981, "/workspaces/telestorie/lib/canvas.nim");					if (nimAddInt(pos_1, ((NI)3), &TM__kUjodket9aV1BVUR0GC3cwA_272)) { raiseOverflow(); goto LA5_;
					};
					T128_ = dotdot___stdZstrbasics_u48(pos_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_272));
					T129_.len = 0; T129_.p = NIM_NIL;
					T129_ = X5BX5D___pureZstrutils_u1291(expandedText_1, T128_);
					if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T129_); goto LA5_;}
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqsink___system_u2716((&ch_3), T129_);
					nimlf_(982, "/workspaces/telestorie/lib/canvas.nim");					charLen_1 = ((NI)4);
				}
				goto LA104_;
LA126_: ;
				{
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqsink___system_u2716((&ch_3), TM__kUjodket9aV1BVUR0GC3cwA_273);
				}
LA104_: ;
				nimlf_(986, "/workspaces/telestorie/lib/canvas.nim");				style_4.fg = baseStyle_p5.fg;
				style_4.bg = baseStyle_p5.bg;
				style_4.bold = isBold_1;
				style_4.underline = baseStyle_p5.underline;
				style_4.italic = isItalic_1;
				style_4.dim = baseStyle_p5.dim;
				nimln_(988);				writeText__backendsZterminalZtermbuffer_u230(buffer_p4, currentX_1, y_p2, ch_3, style_4);
				if (NIM_UNLIKELY(*nimErr_)) goto LA5_;
				nimln_(989);				T131_ = (NI)0;
				T131_ = getCharDisplayWidth__srcZcharwidth_u1(ch_3);
				if (NIM_UNLIKELY(*nimErr_)) goto LA5_;
				if (nimAddInt(currentX_1, T131_, &TM__kUjodket9aV1BVUR0GC3cwA_274)) { raiseOverflow(); goto LA5_;
				};
				currentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_274);
				nimln_(990);				if (nimAddInt(pos_1, charLen_1, &TM__kUjodket9aV1BVUR0GC3cwA_275)) { raiseOverflow(); goto LA5_;
				};
				pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_275);
				nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (ch_3.p && !(ch_3.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(ch_3.p);
}
			}
LA6_: ;
			{
				LA5_:;
			}
			{
				if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
			}
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		} LA2: ;
	}
	nimlf_(992, "/workspaces/telestorie/lib/canvas.nim");	nimln_(874);	nimln_(992);	if (nimSubInt(currentX_1, x_p1, &TM__kUjodket9aV1BVUR0GC3cwA_276)) { raiseOverflow(); goto BeforeRet_;
	};
	result = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_276);
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1) {
	NI TM__kUjodket9aV1BVUR0GC3cwA_289;
{	prepareAdd(s_p0, ((NI)1));
	(*(*s_p0).p).data[(*s_p0).len] = c_p1;
	if (nimAddInt((*s_p0).len, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_289)) { raiseOverflow(); goto BeforeRet_;
	};
	(*s_p0).len = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_289);
	(*(*s_p0).p).data[(*s_p0).len] = 0;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q, renderTextWithLinks__libZcanvas_u3854)(NimStringV2 text_p0, NI x_p1, NI y_p2, NI maxWidth_p3, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p4, NIM_BOOL isCurrent_p5, NI startLinkIdx_p6, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw styleSheet_p7, tyObject_Style__UURjArTrf2wmcCbN5MncAQ bodyStyle_p8) {
	tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q result;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD_;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__2;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__3;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__4;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ linkStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ linkFocusedStyle_1;
	NI currentX_1;
	NI pos_1;
	NI globalLinkIdx_1;
NIM_BOOL* nimErr_;
	nimfr_("renderTextWithLinks", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimZeroMem((void*)(&colontmpD__4), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimln_(1001);	result.len = 0; result.p = (tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content*) newSeqPayload(0, sizeof(tyObject_Link__6V5xLDIraXInP9am5HdL18g), NIM_ALIGNOF(tyObject_Link__6V5xLDIraXInP9am5HdL18g));
	nimln_(1006);	{
		NIM_BOOL T3_;
		tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA* T7_;
		T3_ = (NIM_BOOL)0;
		T3_ = hasKey__libZstorie95md_u2352(styleSheet_p7, TM__kUjodket9aV1BVUR0GC3cwA_235);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!T3_) goto LA4_;
		nimln_(1007);		T7_ = (tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA*)0;
		T7_ = X5BX5D___libZcanvas_u3979((&styleSheet_p7), TM__kUjodket9aV1BVUR0GC3cwA_236);
		if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
		colontmpD_ = toStyle__libZcanvas_u43((*T7_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
		linkStyle_1 = colontmpD_;
		{
			LA6_:;
		}
		{
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA1_;
LA4_: ;
	{
		nimln_(1009);		colontmpD__2.fg = ansiToColor__libZcanvas_u3659(((NI)34));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		colontmpD__2.bg = bodyStyle_p8.bg;
		colontmpD__2.bold = NIM_FALSE;
		colontmpD__2.underline = NIM_FALSE;
		colontmpD__2.italic = NIM_FALSE;
		colontmpD__2.dim = NIM_FALSE;
		linkStyle_1 = colontmpD__2;
	}
LA1_: ;
	nimln_(1011);	{
		NIM_BOOL T13_;
		tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA* T17_;
		T13_ = (NIM_BOOL)0;
		T13_ = hasKey__libZstorie95md_u2352(styleSheet_p7, TM__kUjodket9aV1BVUR0GC3cwA_238);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!T13_) goto LA14_;
		nimln_(1012);		T17_ = (tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA*)0;
		T17_ = X5BX5D___libZcanvas_u3979((&styleSheet_p7), TM__kUjodket9aV1BVUR0GC3cwA_239);
		if (NIM_UNLIKELY(*nimErr_)) goto LA16_;
		colontmpD__3 = toStyle__libZcanvas_u43((*T17_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA16_;
		linkFocusedStyle_1 = colontmpD__3;
		{
			LA16_:;
		}
		{
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA11_;
LA14_: ;
	{
		nimln_(1014);		colontmpD__4.fg = ansiToColor__libZcanvas_u3659(((NI)33));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		colontmpD__4.bg = bodyStyle_p8.bg;
		colontmpD__4.bold = NIM_TRUE;
		colontmpD__4.underline = NIM_FALSE;
		colontmpD__4.italic = NIM_FALSE;
		colontmpD__4.dim = NIM_FALSE;
		linkFocusedStyle_1 = colontmpD__4;
	}
LA11_: ;
	nimln_(1016);	currentX_1 = x_p1;
	nimln_(1017);	pos_1 = ((NI)0);
	nimln_(1018);	globalLinkIdx_1 = startLinkIdx_p6;
	{
		nimln_(1020);		while (1) {
			if (!(pos_1 < text_p0.len)) goto LA22;
			{
				NI linkStart_1;
				nimln_(1022);				{
					NI codeStart_1;
					NI codeEnd_1;
					NI TM__kUjodket9aV1BVUR0GC3cwA_240;
					if (pos_1 < 0 || pos_1 >= text_p0.len){ raiseIndexError2(pos_1,text_p0.len-1); goto BeforeRet_;
					}
					if (!((NU8)(text_p0.p->data[pos_1]) == (NU8)(96))) goto LA26_;
					nimln_(1024);					codeStart_1 = pos_1;
					nimln_(1025);					if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_240)) { raiseOverflow(); goto BeforeRet_;
					};
					codeEnd_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_240);
					{
						nimln_(1026);						while (1) {
							NIM_BOOL T30_;
							NI TM__kUjodket9aV1BVUR0GC3cwA_241;
							T30_ = (NIM_BOOL)0;
							T30_ = (codeEnd_1 < text_p0.len);
							if (!(T30_)) goto LA31_;
							if (codeEnd_1 < 0 || codeEnd_1 >= text_p0.len){ raiseIndexError2(codeEnd_1,text_p0.len-1); goto BeforeRet_;
							}
							T30_ = !(((NU8)(text_p0.p->data[codeEnd_1]) == (NU8)(96)));
LA31_: ;
							if (!T30_) goto LA29;
							nimln_(1027);							if (nimAddInt(codeEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_241)) { raiseOverflow(); goto BeforeRet_;
							};
							codeEnd_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_241);
						} LA29: ;
					}
					nimln_(1029);					{
						NimStringV2 codeContent_1;
						tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T37_;
						NI charsRendered_1;
						NI TM__kUjodket9aV1BVUR0GC3cwA_277;
						NI TM__kUjodket9aV1BVUR0GC3cwA_278;
						NI TM__kUjodket9aV1BVUR0GC3cwA_279;
						NI TM__kUjodket9aV1BVUR0GC3cwA_280;
						if (!(codeEnd_1 < text_p0.len)) goto LA34_;
						codeContent_1.len = 0; codeContent_1.p = NIM_NIL;
						nimln_(1031);						T37_ = dotdot___stdZstrbasics_u48(codeStart_1, codeEnd_1);
						codeContent_1 = X5BX5D___pureZstrutils_u1291(text_p0, T37_);
						if (NIM_UNLIKELY(*nimErr_)) goto LA36_;
						nimln_(1032);						nimln_(1033);						if (nimSubInt(currentX_1, x_p1, &TM__kUjodket9aV1BVUR0GC3cwA_277)) { raiseOverflow(); goto LA36_;
						};
						if (nimSubInt(maxWidth_p3, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_277), &TM__kUjodket9aV1BVUR0GC3cwA_278)) { raiseOverflow(); goto LA36_;
						};
						nimln_(1032);						charsRendered_1 = renderInlineMarkdown__libZcanvas_u3665(codeContent_1, currentX_1, y_p2, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_278), buffer_p4, bodyStyle_p8);
						if (NIM_UNLIKELY(*nimErr_)) goto LA36_;
						nimln_(1035);						if (nimAddInt(currentX_1, charsRendered_1, &TM__kUjodket9aV1BVUR0GC3cwA_279)) { raiseOverflow(); goto LA36_;
						};
						currentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_279);
						nimln_(1036);						if (nimAddInt(codeEnd_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_280)) { raiseOverflow(); goto LA36_;
						};
						pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_280);
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (codeContent_1.p && !(codeContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(codeContent_1.p);
}
						nimlf_(1037, "/workspaces/telestorie/lib/canvas.nim");						goto LA23;
						{
							LA36_:;
						}
						{
							nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							if (codeContent_1.p && !(codeContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(codeContent_1.p);
}
						}
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
LA34_: ;
				}
LA26_: ;
				nimlf_(1040, "/workspaces/telestorie/lib/canvas.nim");				if ((pos_1) < ((NI)0) || (pos_1) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(pos_1, ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
				}
				linkStart_1 = nsuFindStr(text_p0, TM__kUjodket9aV1BVUR0GC3cwA_281, (pos_1), ((NI)-1));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(1042);				{
					NIM_BOOL T42_;
					NimStringV2 linkText_1;
					NimStringV2 target_1;
					tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg targetSection_1;
					NI i_1;
					NI TM__kUjodket9aV1BVUR0GC3cwA_288;
					NI TM__kUjodket9aV1BVUR0GC3cwA_291;
					NIM_BOOL shouldRenderLink_1;
					NIM_BOOL T59_;
					NIM_BOOL T61_;
					NI TM__kUjodket9aV1BVUR0GC3cwA_300;
					T42_ = (NIM_BOOL)0;
					T42_ = (((NI)0) <= linkStart_1);
					if (!(T42_)) goto LA43_;
					T42_ = (linkStart_1 < text_p0.len);
LA43_: ;
					if (!T42_) goto LA44_;
					linkText_1.len = 0; linkText_1.p = NIM_NIL;
					target_1.len = 0; target_1.p = NIM_NIL;
					nimZeroMem((void*)(&targetSection_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
					nimln_(1045);					{
						NimStringV2 beforeLink_1;
						NI TM__kUjodket9aV1BVUR0GC3cwA_282;
						tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T50_;
						NI charsRendered_2;
						NI TM__kUjodket9aV1BVUR0GC3cwA_283;
						NI TM__kUjodket9aV1BVUR0GC3cwA_284;
						NI TM__kUjodket9aV1BVUR0GC3cwA_285;
						if (!(pos_1 < linkStart_1)) goto LA48_;
						beforeLink_1.len = 0; beforeLink_1.p = NIM_NIL;
						nimln_(1046);						nimlf_(53, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");						if (nimSubInt(linkStart_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_282)) { raiseOverflow(); goto BeforeRet_;
						};
						nimlf_(1046, "/workspaces/telestorie/lib/canvas.nim");						T50_ = dotdot___stdZstrbasics_u48(pos_1, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_282));
						beforeLink_1 = X5BX5D___pureZstrutils_u1291(text_p0, T50_);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						nimln_(1047);						nimln_(1048);						if (nimSubInt(currentX_1, x_p1, &TM__kUjodket9aV1BVUR0GC3cwA_283)) { raiseOverflow(); goto BeforeRet_;
						};
						if (nimSubInt(maxWidth_p3, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_283), &TM__kUjodket9aV1BVUR0GC3cwA_284)) { raiseOverflow(); goto BeforeRet_;
						};
						nimln_(1047);						charsRendered_2 = renderInlineMarkdown__libZcanvas_u3665(beforeLink_1, currentX_1, y_p2, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_284), buffer_p4, bodyStyle_p8);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						nimln_(1050);						if (nimAddInt(currentX_1, charsRendered_2, &TM__kUjodket9aV1BVUR0GC3cwA_285)) { raiseOverflow(); goto BeforeRet_;
						};
						currentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_285);
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (beforeLink_1.p && !(beforeLink_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(beforeLink_1.p);
}
					}
LA48_: ;
					nimlf_(1053, "/workspaces/telestorie/lib/canvas.nim");					linkText_1 = TM__kUjodket9aV1BVUR0GC3cwA_286;
					nimln_(1054);					target_1 = TM__kUjodket9aV1BVUR0GC3cwA_287;
					nimln_(1055);					if (nimAddInt(linkStart_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_288)) { raiseOverflow(); goto BeforeRet_;
					};
					i_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_288);
					{
						nimln_(1056);						while (1) {
							NIM_BOOL T53_;
							NI TM__kUjodket9aV1BVUR0GC3cwA_290;
							T53_ = (NIM_BOOL)0;
							T53_ = (i_1 < text_p0.len);
							if (!(T53_)) goto LA54_;
							if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
							}
							T53_ = !(((NU8)(text_p0.p->data[i_1]) == (NU8)(93)));
LA54_: ;
							if (!T53_) goto LA52;
							nimln_(1057);							if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
							}
							nimAddCharV1((&linkText_1), text_p0.p->data[i_1]);
							nimln_(1058);							if (nimAddInt(i_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_290)) { raiseOverflow(); goto BeforeRet_;
							};
							i_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_290);
						} LA52: ;
					}
					nimln_(1059);					if (nimAddInt(i_1, ((NI)2), &TM__kUjodket9aV1BVUR0GC3cwA_291)) { raiseOverflow(); goto BeforeRet_;
					};
					i_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_291);
					{
						nimln_(1060);						while (1) {
							NIM_BOOL T57_;
							NI TM__kUjodket9aV1BVUR0GC3cwA_292;
							T57_ = (NIM_BOOL)0;
							T57_ = (i_1 < text_p0.len);
							if (!(T57_)) goto LA58_;
							if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
							}
							T57_ = !(((NU8)(text_p0.p->data[i_1]) == (NU8)(41)));
LA58_: ;
							if (!T57_) goto LA56;
							nimln_(1061);							if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
							}
							nimAddCharV1((&target_1), text_p0.p->data[i_1]);
							nimln_(1062);							if (nimAddInt(i_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_292)) { raiseOverflow(); goto BeforeRet_;
							};
							i_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_292);
						} LA56: ;
					}
					nimln_(1065);					findSectionByReference__libZcanvas_u800(target_1, (&targetSection_1));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					nimln_(1066);					T59_ = (NIM_BOOL)0;
					T59_ = (targetSection_1.section.id.len == 0);
					if (T59_) goto LA60_;
					nimln_(1067);					T61_ = (NIM_BOOL)0;
					T61_ = isRemoved__libZcanvas_u689(targetSection_1.section.title);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					T59_ = !(T61_);
LA60_: ;
					shouldRenderLink_1 = T59_;
					nimln_(1069);					{
						NIM_BOOL T64_;
						tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__5;
						tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__6;
						NimStringV2 colontmpD__7;
						NI colontmpD__8;
						NIM_BOOL isFocused_1;
						tyObject_Style__UURjArTrf2wmcCbN5MncAQ styleToUse_1;
						tyObject_Link__6V5xLDIraXInP9am5HdL18g T73_;
						NimStringV2 blitTmp_1;
						NI TM__kUjodket9aV1BVUR0GC3cwA_296;
						T64_ = (NIM_BOOL)0;
						T64_ = shouldRenderLink_1;
						if (!(T64_)) goto LA65_;
						T64_ = isCurrent_p5;
LA65_: ;
						if (!T64_) goto LA66_;
						nimZeroMem((void*)(&colontmpD__5), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
						nimZeroMem((void*)(&colontmpD__6), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
						colontmpD__7.len = 0; colontmpD__7.p = NIM_NIL;
						colontmpD__8 = (NI)0;
						nimln_(1071);						isFocused_1 = (globalLinkIdx_1 == (*canvasState__libZcanvas_u117).focusedLinkIdx);
						nimln_(1072);						{
							if (!isFocused_1) goto LA70_;
							colontmpD__5 = linkFocusedStyle_1;
							styleToUse_1 = colontmpD__5;
						}
						goto LA68_;
LA70_: ;
						{
							colontmpD__6 = linkStyle_1;
							styleToUse_1 = colontmpD__6;
						}
LA68_: ;
						nimln_(1074);						nimln_(1075);						nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						colontmpD__7 = eqdup___system_u2713(linkText_1);
						T73_.text = colontmpD__7;
						nimlf_(1076, "/workspaces/telestorie/lib/canvas.nim");						blitTmp_1 = target_1;
						nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						eqwasMoved___system_u2707((&target_1));
						T73_.target = blitTmp_1;
						T73_.screenX = currentX_1;
						nimlf_(1078, "/workspaces/telestorie/lib/canvas.nim");						colontmpD__8 = y_p2;
						T73_.screenY = colontmpD__8;
						nimln_(1079);						T73_.width = getVisualWidth__libZcanvas_u2348(linkText_1);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						T73_.index = globalLinkIdx_1;
						nimln_(1074);						add__libZcanvas_u4252((&result), (&T73_));
						{
							NIM_CHAR ch_1;
							NI i_2;
							NI L_1;
							ch_1 = (NIM_CHAR)0;
							nimlf_(267, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");							i_2 = ((NI)0);
							nimln_(268);							L_1 = linkText_1.len;
							{
								nimln_(269);								while (1) {
									if (!(i_2 < L_1)) goto LA76;
									nimlf_(1084, "/workspaces/telestorie/lib/canvas.nim");									if (i_2 < 0 || i_2 >= linkText_1.len){ raiseIndexError2(i_2,linkText_1.len-1); goto BeforeRet_;
									}
									ch_1 = linkText_1.p->data[i_2];
									nimln_(1085);									{
										NI TM__kUjodket9aV1BVUR0GC3cwA_293;
										NimStringV2 chStr_1;
										NI T81_;
										NI TM__kUjodket9aV1BVUR0GC3cwA_294;
										if (nimAddInt(x_p1, maxWidth_p3, &TM__kUjodket9aV1BVUR0GC3cwA_293)) { raiseOverflow(); goto BeforeRet_;
										};
										if (!(currentX_1 < (NI)(TM__kUjodket9aV1BVUR0GC3cwA_293))) goto LA79_;
										chStr_1.len = 0; chStr_1.p = NIM_NIL;
										nimln_(1086);										chStr_1 = nimCharToStr(ch_1);
										nimln_(1087);										writeText__backendsZterminalZtermbuffer_u230(buffer_p4, currentX_1, y_p2, chStr_1, styleToUse_1);
										if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
										nimln_(1088);										T81_ = (NI)0;
										T81_ = getCharDisplayWidth__srcZcharwidth_u1(chStr_1);
										if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
										if (nimAddInt(currentX_1, T81_, &TM__kUjodket9aV1BVUR0GC3cwA_294)) { raiseOverflow(); goto BeforeRet_;
										};
										currentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_294);
										nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");										if (chStr_1.p && !(chStr_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(chStr_1.p);
}
									}
LA79_: ;
									nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");									i_2 += ((NI)1);
									nimln_(272);									{
										if (!!((linkText_1.len == L_1))) goto LA84_;
										failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_295);
										if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									}
LA84_: ;
								} LA76: ;
							}
						}
						nimlf_(1090, "/workspaces/telestorie/lib/canvas.nim");						if (nimAddInt(globalLinkIdx_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_296)) { raiseOverflow(); goto BeforeRet_;
						};
						globalLinkIdx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_296);
					}
					goto LA62_;
LA66_: ;
					{
						tyObject_Style__UURjArTrf2wmcCbN5MncAQ dimStyle_1;
						NI charsRendered_3;
						NI TM__kUjodket9aV1BVUR0GC3cwA_297;
						NI TM__kUjodket9aV1BVUR0GC3cwA_298;
						NI TM__kUjodket9aV1BVUR0GC3cwA_299;
						nimln_(1093);						dimStyle_1 = bodyStyle_p8;
						nimln_(1094);						dimStyle_1.dim = NIM_TRUE;
						nimln_(1095);						nimln_(1096);						if (nimSubInt(currentX_1, x_p1, &TM__kUjodket9aV1BVUR0GC3cwA_297)) { raiseOverflow(); goto BeforeRet_;
						};
						if (nimSubInt(maxWidth_p3, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_297), &TM__kUjodket9aV1BVUR0GC3cwA_298)) { raiseOverflow(); goto BeforeRet_;
						};
						nimln_(1095);						charsRendered_3 = renderInlineMarkdown__libZcanvas_u3665(linkText_1, currentX_1, y_p2, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_298), buffer_p4, dimStyle_1);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						nimln_(1098);						if (nimAddInt(currentX_1, charsRendered_3, &TM__kUjodket9aV1BVUR0GC3cwA_299)) { raiseOverflow(); goto BeforeRet_;
						};
						currentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_299);
					}
LA62_: ;
					nimln_(1100);					if (nimAddInt(i_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_300)) { raiseOverflow(); goto BeforeRet_;
					};
					pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_300);
					nimln_(254);					eqdestroy___libZcanvas_u866((&targetSection_1));
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (target_1.p && !(target_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(target_1.p);
}
					if (linkText_1.p && !(linkText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(linkText_1.p);
}
				}
				goto LA40_;
LA44_: ;
				{
					NimStringV2 remaining_1;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T89_;
					remaining_1.len = 0; remaining_1.p = NIM_NIL;
					nimlf_(1103, "/workspaces/telestorie/lib/canvas.nim");					T89_ = dotdot___stdZenumutils_u105(pos_1, ((NI)1));
					remaining_1 = X5BX5D___pureZstrutils_u1319(text_p0, T89_);
					if (NIM_UNLIKELY(*nimErr_)) goto LA88_;
					nimln_(1104);					{
						NI TM__kUjodket9aV1BVUR0GC3cwA_301;
						NI TM__kUjodket9aV1BVUR0GC3cwA_302;
						NI T94_;
						if (!(((NI)0) < remaining_1.len)) goto LA92_;
						nimln_(1105);						nimln_(1106);						if (nimSubInt(currentX_1, x_p1, &TM__kUjodket9aV1BVUR0GC3cwA_301)) { raiseOverflow(); goto LA88_;
						};
						if (nimSubInt(maxWidth_p3, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_301), &TM__kUjodket9aV1BVUR0GC3cwA_302)) { raiseOverflow(); goto LA88_;
						};
						nimln_(1105);						T94_ = (NI)0;
						T94_ = renderInlineMarkdown__libZcanvas_u3665(remaining_1, currentX_1, y_p2, (NI)(TM__kUjodket9aV1BVUR0GC3cwA_302), buffer_p4, bodyStyle_p8);
						if (NIM_UNLIKELY(*nimErr_)) goto LA88_;
						(void)(T94_);
					}
LA92_: ;
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (remaining_1.p && !(remaining_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(remaining_1.p);
}
					nimlf_(1108, "/workspaces/telestorie/lib/canvas.nim");					goto LA21;
					{
						LA88_:;
					}
					{
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (remaining_1.p && !(remaining_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(remaining_1.p);
}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA40_: ;
			} LA23: ;
		} LA22: ;
	} LA21: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u3358)(tyObject_Link__6V5xLDIraXInP9am5HdL18g* dest_p0) {
	if ((*dest_p0).target.p && !((*dest_p0).target.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).target.p);
}
	if ((*dest_p0).text.p && !((*dest_p0).text.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).text.p);
}
}
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___libZcanvas_u3355)(tyObject_Link__6V5xLDIraXInP9am5HdL18g* dest_p0) {
	(*dest_p0).text.len = 0; (*dest_p0).text.p = NIM_NIL;
	(*dest_p0).target.len = 0; (*dest_p0).target.p = NIM_NIL;
	(*dest_p0).screenX = 0;
	(*dest_p0).screenY = 0;
	(*dest_p0).width = 0;
	(*dest_p0).index = 0;
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZcanvas_u3361)(tyObject_Link__6V5xLDIraXInP9am5HdL18g* dest_p0, tyObject_Link__6V5xLDIraXInP9am5HdL18g* src_p1) {
	eqcopy___system_u2710((&(*dest_p0).text), (*src_p1).text);
	eqcopy___system_u2710((&(*dest_p0).target), (*src_p1).target);
	(*dest_p0).screenX = (*src_p1).screenX;
	(*dest_p0).screenY = (*src_p1).screenY;
	(*dest_p0).width = (*src_p1).width;
	(*dest_p0).index = (*src_p1).index;
}
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ, wrapText__libZcanvas_u2495)(NimStringV2 text_p0, NI maxWidth_p1) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ result;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ words_1;
	NimStringV2 currentLine_1;
NIM_BOOL* nimErr_;
	nimfr_("wrapText", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	words_1.len = 0; words_1.p = NIM_NIL;
	currentLine_1.len = 0; currentLine_1.p = NIM_NIL;
	nimlf_(695, "/workspaces/telestorie/lib/canvas.nim");	result.len = 0; result.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	nimln_(696);	words_1 = nsuSplitChar(text_p0, 32, ((NI)-1));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(697);	currentLine_1 = TM__kUjodket9aV1BVUR0GC3cwA_308;
	{
		NimStringV2* word_1;
		NI i_1;
		NI L_1;
		NI T2_;
		word_1 = (NimStringV2*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_1 = ((NI)0);
		nimln_(250);		T2_ = words_1.len;
		L_1 = T2_;
		{
			nimln_(251);			while (1) {
				NI colontmpD_;
				NI colontmpD__2;
				NI currentWidth_1;
				NI wordWidth_1;
				NI spaceWidth_1;
				if (!(i_1 < L_1)) goto LA4;
				colontmpD_ = (NI)0;
				colontmpD__2 = (NI)0;
				nimlf_(699, "/workspaces/telestorie/lib/canvas.nim");				if (i_1 < 0 || i_1 >= words_1.len){ raiseIndexError2(i_1,words_1.len-1); goto BeforeRet_;
				}
				word_1 = (&words_1.p->data[i_1]);
				nimln_(700);				currentWidth_1 = getVisualWidth__libZcanvas_u2348(currentLine_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(701);				wordWidth_1 = getVisualWidth__libZcanvas_u2348((*word_1));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(702);				{
					if (!(((NI)0) < currentLine_1.len)) goto LA7_;
					colontmpD_ = ((NI)1);
					spaceWidth_1 = colontmpD_;
				}
				goto LA5_;
LA7_: ;
				{
					colontmpD__2 = ((NI)0);
					spaceWidth_1 = colontmpD__2;
				}
LA5_: ;
				nimln_(704);				{
					NI TM__kUjodket9aV1BVUR0GC3cwA_309;
					NI TM__kUjodket9aV1BVUR0GC3cwA_310;
					if (nimAddInt(currentWidth_1, wordWidth_1, &TM__kUjodket9aV1BVUR0GC3cwA_309)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimAddInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_309), spaceWidth_1, &TM__kUjodket9aV1BVUR0GC3cwA_310)) { raiseOverflow(); goto BeforeRet_;
					};
					if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_310) <= maxWidth_p1)) goto LA12_;
					nimln_(705);					{
						if (!(((NI)0) < currentLine_1.len)) goto LA16_;
						nimln_(706);						prepareAdd((&currentLine_1), 1);
appendString((&currentLine_1), TM__kUjodket9aV1BVUR0GC3cwA_311);
					}
LA16_: ;
					nimln_(707);					prepareAdd((&currentLine_1), (*word_1).len + 0);
appendString((&currentLine_1), (*word_1));
				}
				goto LA10_;
LA12_: ;
				{
					nimln_(709);					{
						NimStringV2 blitTmp_1;
						if (!(((NI)0) < currentLine_1.len)) goto LA21_;
						nimln_(710);						blitTmp_1 = currentLine_1;
						nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						eqwasMoved___system_u2707((&currentLine_1));
						nimlf_(710, "/workspaces/telestorie/lib/canvas.nim");						add__stdZenumutils_u70((&result), blitTmp_1);
					}
LA21_: ;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqcopy___system_u2710((&currentLine_1), (*word_1));
				}
LA10_: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_1 += ((NI)1);
				nimln_(254);				{
					NI T25_;
					T25_ = words_1.len;
					if (!!((T25_ == L_1))) goto LA26_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_312);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA26_: ;
			} LA4: ;
		}
	}
	nimlf_(713, "/workspaces/telestorie/lib/canvas.nim");	{
		NimStringV2 blitTmp_2;
		if (!(((NI)0) < currentLine_1.len)) goto LA30_;
		nimln_(714);		blitTmp_2 = currentLine_1;
		nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		eqwasMoved___system_u2707((&currentLine_1));
		nimlf_(714, "/workspaces/telestorie/lib/canvas.nim");		add__stdZenumutils_u70((&result), blitTmp_2);
	}
LA30_: ;
	nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	if (currentLine_1.p && !(currentLine_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(currentLine_1.p);
}
	nimln_(2128);	eqdestroy___system_u3785(words_1);
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderSection__libZcanvas_u4813)(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg* layout_p0, NI screenX_p1, NI screenY_p2, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p3, NIM_BOOL isCurrent_p4, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw styleSheet_p5, tyTuple__GZW9aA9aWhw50AbgdGq4sF7w* Result) {
	tyTuple__hSHiEU6uEtL7soi1F4tKCg colontmpD_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg colontmpD__2;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__3;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__4;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__5;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__6;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__7;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__8;
	NimStringV2 rawContent_1;
	NimStringV2 processedContent_1;
	tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q T2_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg defaultBg_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ headingStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ bodyStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ placeholderStyle_1;
	NI maxVisualWidth_1;
	NI startContentY_1;
	NI layoutWidth_1;
	NI layoutHeight_1;
	NI contentY_1;
	NI contentX_1;
	NI maxContentWidth_1;
	NI currentLinkIdx_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_364;
NIM_BOOL* nimErr_;
	nimfr_("renderSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyTuple__GZW9aA9aWhw50AbgdGq4sF7w));
	nimZeroMem((void*)(&colontmpD_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimZeroMem((void*)(&colontmpD__4), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimZeroMem((void*)(&colontmpD__5), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimZeroMem((void*)(&colontmpD__6), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimZeroMem((void*)(&colontmpD__7), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	nimZeroMem((void*)(&colontmpD__8), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	rawContent_1.len = 0; rawContent_1.p = NIM_NIL;
	processedContent_1.len = 0; processedContent_1.p = NIM_NIL;
	nimlf_(772, "/workspaces/telestorie/lib/canvas.nim");	T2_.len = 0; T2_.p = NIM_NIL;
	T2_.len = 0; T2_.p = (tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content*) newSeqPayload(0, sizeof(tyObject_Link__6V5xLDIraXInP9am5HdL18g), NIM_ALIGNOF(tyObject_Link__6V5xLDIraXInP9am5HdL18g));
	eqsink___libZcanvas_u3301((&(*Result).Field0), T2_);
	nimln_(1203);	(*Result).Field1 = ((NI)0);
	nimln_(1204);	(*Result).Field2 = ((NI)0);
	nimln_(1207);	{
		NIM_BOOL T5_;
		T5_ = (NIM_BOOL)0;
		T5_ = isRemoved__libZcanvas_u689((*layout_p0).section.title);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T5_) goto LA6_;
		nimln_(1208);		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (processedContent_1.p && !(processedContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(processedContent_1.p);
}
		if (rawContent_1.p && !(rawContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(rawContent_1.p);
}
		goto BeforeRet_;
	}
LA6_: ;
	nimlf_(1212, "/workspaces/telestorie/lib/canvas.nim");	{
		NIM_BOOL T10_;
		tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA* T14_;
		T10_ = (NIM_BOOL)0;
		T10_ = hasKey__libZstorie95md_u2352(styleSheet_p5, TM__kUjodket9aV1BVUR0GC3cwA_78);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T10_) goto LA11_;
		nimln_(1213);		T14_ = (tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA*)0;
		T14_ = X5BX5D___libZcanvas_u3979((&styleSheet_p5), TM__kUjodket9aV1BVUR0GC3cwA_79);
		if (NIM_UNLIKELY(*nimErr_)) goto LA13_;
		colontmpD_ = (*T14_).bg;
		defaultBg_1 = colontmpD_;
		{
			LA13_:;
		}
		{
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA8_;
LA11_: ;
	{
		nimln_(1215);		colontmpD__2 = TM__kUjodket9aV1BVUR0GC3cwA_80;
		defaultBg_1 = colontmpD__2;
	}
LA8_: ;
	nimln_(1217);	{
		NIM_BOOL T20_;
		tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA* T24_;
		T20_ = (NIM_BOOL)0;
		T20_ = hasKey__libZstorie95md_u2352(styleSheet_p5, TM__kUjodket9aV1BVUR0GC3cwA_82);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T20_) goto LA21_;
		nimln_(1218);		T24_ = (tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA*)0;
		T24_ = X5BX5D___libZcanvas_u3979((&styleSheet_p5), TM__kUjodket9aV1BVUR0GC3cwA_83);
		if (NIM_UNLIKELY(*nimErr_)) goto LA23_;
		colontmpD__3 = toStyle__libZcanvas_u43((*T24_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA23_;
		headingStyle_1 = colontmpD__3;
		{
			LA23_:;
		}
		{
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA18_;
LA21_: ;
	{
		nimln_(1220);		colontmpD__4.fg = ansiToColor__libZcanvas_u3659(((NI)33));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmpD__4.bg = rgb__srcZtypes_u16(defaultBg_1.Field0, defaultBg_1.Field1, defaultBg_1.Field2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmpD__4.bold = NIM_TRUE;
		colontmpD__4.underline = NIM_FALSE;
		colontmpD__4.italic = NIM_FALSE;
		colontmpD__4.dim = NIM_FALSE;
		headingStyle_1 = colontmpD__4;
	}
LA18_: ;
	nimln_(1222);	{
		NIM_BOOL T30_;
		tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA* T34_;
		T30_ = (NIM_BOOL)0;
		T30_ = hasKey__libZstorie95md_u2352(styleSheet_p5, TM__kUjodket9aV1BVUR0GC3cwA_84);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T30_) goto LA31_;
		nimln_(1223);		T34_ = (tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA*)0;
		T34_ = X5BX5D___libZcanvas_u3979((&styleSheet_p5), TM__kUjodket9aV1BVUR0GC3cwA_85);
		if (NIM_UNLIKELY(*nimErr_)) goto LA33_;
		colontmpD__5 = toStyle__libZcanvas_u43((*T34_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA33_;
		bodyStyle_1 = colontmpD__5;
		{
			LA33_:;
		}
		{
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA28_;
LA31_: ;
	{
		nimln_(1225);		colontmpD__6.fg = ansiToColor__libZcanvas_u3659(((NI)37));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmpD__6.bg = rgb__srcZtypes_u16(defaultBg_1.Field0, defaultBg_1.Field1, defaultBg_1.Field2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmpD__6.bold = NIM_FALSE;
		colontmpD__6.underline = NIM_FALSE;
		colontmpD__6.italic = NIM_FALSE;
		colontmpD__6.dim = NIM_FALSE;
		bodyStyle_1 = colontmpD__6;
	}
LA28_: ;
	nimln_(1227);	{
		NIM_BOOL T40_;
		tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA* T44_;
		T40_ = (NIM_BOOL)0;
		T40_ = hasKey__libZstorie95md_u2352(styleSheet_p5, TM__kUjodket9aV1BVUR0GC3cwA_87);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T40_) goto LA41_;
		nimln_(1228);		T44_ = (tyObject_StyleConfig__9bjh0AGgwfTanQXGeML3y9aA*)0;
		T44_ = X5BX5D___libZcanvas_u3979((&styleSheet_p5), TM__kUjodket9aV1BVUR0GC3cwA_88);
		if (NIM_UNLIKELY(*nimErr_)) goto LA43_;
		colontmpD__7 = toStyle__libZcanvas_u43((*T44_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA43_;
		placeholderStyle_1 = colontmpD__7;
		{
			LA43_:;
		}
		{
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA38_;
LA41_: ;
	{
		nimln_(1230);		colontmpD__8.fg = ansiToColor__libZcanvas_u3659(((NI)30));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmpD__8.bg = rgb__srcZtypes_u16(defaultBg_1.Field0, defaultBg_1.Field1, defaultBg_1.Field2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmpD__8.bold = NIM_TRUE;
		colontmpD__8.underline = NIM_FALSE;
		colontmpD__8.italic = NIM_FALSE;
		colontmpD__8.dim = NIM_FALSE;
		placeholderStyle_1 = colontmpD__8;
	}
LA38_: ;
	nimln_(1233);	maxVisualWidth_1 = ((NI)0);
	nimln_(1234);	startContentY_1 = screenY_p2;
	nimln_(1237);	if ((((NI) (((NF)((*layout_p0).width) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)((*layout_p0).width) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)((*layout_p0).width) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	layoutWidth_1 = (((NI) (((NF)((*layout_p0).width) + (NF)(0.5)))));
	nimln_(1238);	if ((((NI) (((NF)((*layout_p0).height) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)((*layout_p0).height) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)((*layout_p0).height) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	layoutHeight_1 = (((NI) (((NF)((*layout_p0).height) + (NF)(0.5)))));
	nimln_(1241);	{
		NIM_BOOL T50_;
		NimStringV2 placeholder_1;
		NI centerX_1;
		NI TM__kUjodket9aV1BVUR0GC3cwA_91;
		NI TM__kUjodket9aV1BVUR0GC3cwA_92;
		NI centerY_1;
		NI TM__kUjodket9aV1BVUR0GC3cwA_93;
		T50_ = (NIM_BOOL)0;
		T50_ = isHidden__libZcanvas_u602((*layout_p0).section.title);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!(T50_)) goto LA51_;
		T50_ = !(isCurrent_p4);
LA51_: ;
		if (!T50_) goto LA52_;
		placeholder_1.len = 0; placeholder_1.p = NIM_NIL;
		nimln_(1242);		placeholder_1 = TM__kUjodket9aV1BVUR0GC3cwA_90;
		nimln_(1243);		if (nimSubInt(layoutWidth_1, placeholder_1.len, &TM__kUjodket9aV1BVUR0GC3cwA_91)) { raiseOverflow(); goto LA1_;
		};
		if (nimAddInt(screenX_p1, (NI)(((NI)(TM__kUjodket9aV1BVUR0GC3cwA_91)) / (((NI)2))), &TM__kUjodket9aV1BVUR0GC3cwA_92)) { raiseOverflow(); goto LA1_;
		};
		centerX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_92);
		nimln_(1244);		if (nimAddInt(screenY_p2, (NI)((layoutHeight_1) / (((NI)2))), &TM__kUjodket9aV1BVUR0GC3cwA_93)) { raiseOverflow(); goto LA1_;
		};
		centerY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_93);
		nimln_(1245);		writeText__backendsZterminalZtermbuffer_u230(buffer_p3, centerX_1, centerY_1, placeholder_1, placeholderStyle_1);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		nimln_(1246);		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (processedContent_1.p && !(processedContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(processedContent_1.p);
}
		if (rawContent_1.p && !(rawContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(rawContent_1.p);
}
		goto BeforeRet_;
	}
LA52_: ;
	nimlf_(1249, "/workspaces/telestorie/lib/canvas.nim");	rawContent_1 = getSectionRawContent__libZcanvas_u4307((&(*layout_p0).section));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1250);	processedContent_1 = filterRemovedSectionLinks__libZcanvas_u1327(rawContent_1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1252);	contentY_1 = screenY_p2;
	nimln_(1253);	contentX_1 = screenX_p1;
	nimln_(1254);	maxContentWidth_1 = layoutWidth_1;
	nimln_(1255);	currentLinkIdx_1 = ((NI)0);
	{
		NimStringV2 line_1;
		NI first_1;
		NI last_1;
		NI eolpos_1;
		line_1.len = 0; line_1.p = NIM_NIL;
		nimlf_(684, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");		first_1 = ((NI)0);
		nimln_(685);		last_1 = ((NI)0);
		nimln_(686);		eolpos_1 = ((NI)0);
		{
			nimln_(687);			while (1) {
				NI colontmpD__9;
				NI colontmpD__10;
				NI T79_;
				NimStringV2 T85_;
				colontmpD__9 = (NI)0;
				colontmpD__10 = (NI)0;
				{
					nimln_(688);					while (1) {
						NIM_BOOL T60_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_183;
						T60_ = (NIM_BOOL)0;
						T60_ = (last_1 < processedContent_1.len);
						if (!(T60_)) goto LA61_;
						if (last_1 < 0 || last_1 >= processedContent_1.len){ raiseIndexError2(last_1,processedContent_1.len-1); goto LA55_;
						}
						T60_ = !((((NU8)(processedContent_1.p->data[last_1])) == ((NU8)(13)) || ((NU8)(processedContent_1.p->data[last_1])) == ((NU8)(10))));
LA61_: ;
						if (!T60_) goto LA59;
						if (nimAddInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_183)) { raiseOverflow(); goto LA55_;
						};
						last_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_183);
					} LA59: ;
				}
				nimln_(690);				eolpos_1 = last_1;
				nimln_(691);				{
					if (!(last_1 < processedContent_1.len)) goto LA64_;
					nimln_(692);					{
						NI TM__kUjodket9aV1BVUR0GC3cwA_184;
						if (last_1 < 0 || last_1 >= processedContent_1.len){ raiseIndexError2(last_1,processedContent_1.len-1); goto LA55_;
						}
						if (!((NU8)(processedContent_1.p->data[last_1]) == (NU8)(10))) goto LA68_;
						if (nimAddInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_184)) { raiseOverflow(); goto LA55_;
						};
						last_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_184);
					}
					goto LA66_;
LA68_: ;
					{
						NI TM__kUjodket9aV1BVUR0GC3cwA_185;
						nimln_(693);						if (last_1 < 0 || last_1 >= processedContent_1.len){ raiseIndexError2(last_1,processedContent_1.len-1); goto LA55_;
						}
						if (!((NU8)(processedContent_1.p->data[last_1]) == (NU8)(13))) goto LA71_;
						nimln_(694);						if (nimAddInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_185)) { raiseOverflow(); goto LA55_;
						};
						last_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_185);
						nimln_(695);						{
							NIM_BOOL T75_;
							NI TM__kUjodket9aV1BVUR0GC3cwA_186;
							T75_ = (NIM_BOOL)0;
							T75_ = (last_1 < processedContent_1.len);
							if (!(T75_)) goto LA76_;
							if (last_1 < 0 || last_1 >= processedContent_1.len){ raiseIndexError2(last_1,processedContent_1.len-1); goto LA55_;
							}
							T75_ = ((NU8)(processedContent_1.p->data[last_1]) == (NU8)(10));
LA76_: ;
							if (!T75_) goto LA77_;
							if (nimAddInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_186)) { raiseOverflow(); goto LA55_;
							};
							last_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_186);
						}
LA77_: ;
					}
					goto LA66_;
LA71_: ;
LA66_: ;
				}
LA64_: ;
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				nimlf_(1258, "/workspaces/telestorie/lib/canvas.nim");				T79_ = (NI)0;
				nimlf_(697, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");				{
					NI TM__kUjodket9aV1BVUR0GC3cwA_187;
					if (!NIM_FALSE) goto LA82_;
					if (nimSubInt(last_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_187)) { raiseOverflow(); goto LA55_;
					};
					colontmpD__9 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_187);
					T79_ = colontmpD__9;
				}
				goto LA80_;
LA82_: ;
				{
					NI TM__kUjodket9aV1BVUR0GC3cwA_188;
					if (nimSubInt(eolpos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_188)) { raiseOverflow(); goto LA55_;
					};
					colontmpD__10 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_188);
					T79_ = colontmpD__10;
				}
LA80_: ;
				nimlf_(1258, "/workspaces/telestorie/lib/canvas.nim");				T85_.len = 0; T85_.p = NIM_NIL;
				T85_ = substr__system_u8893(processedContent_1, first_1, T79_);
				nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqsink___system_u2716((&line_1), T85_);
				{
					NimStringV2 colontmpD__11;
					NI TM__kUjodket9aV1BVUR0GC3cwA_363;
					colontmpD__11.len = 0; colontmpD__11.p = NIM_NIL;
					nimlf_(1259, "/workspaces/telestorie/lib/canvas.nim");					{
						NI TM__kUjodket9aV1BVUR0GC3cwA_189;
						if (nimAddInt(screenY_p2, layoutHeight_1, &TM__kUjodket9aV1BVUR0GC3cwA_189)) { raiseOverflow(); goto LA87_;
						};
						if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_189) <= contentY_1)) goto LA90_;
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (colontmpD__11.p && !(colontmpD__11.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__11.p);
}
						if (line_1.p && !(line_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(line_1.p);
}
						nimlf_(1260, "/workspaces/telestorie/lib/canvas.nim");						goto LA54;
					}
LA90_: ;
					nimln_(1263);					{
						colontmpD__11 = nsuStrip(line_1, NIM_TRUE, NIM_TRUE, TM__kUjodket9aV1BVUR0GC3cwA_138);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						if (!eqStrings(colontmpD__11, TM__kUjodket9aV1BVUR0GC3cwA_190)) goto LA94_;
						nimln_(1265);						{
							NIM_BOOL T98_;
							tySequence__sM4lkSb7zS6F7OVMvW9cffQ sectionBuffer_1;
							NI bufferStartY_1;
							tySequence__sM4lkSb7zS6F7OVMvW9cffQ* T103_;
							NI maxCellWidth_1;
							T98_ = (NIM_BOOL)0;
							T98_ = !((canvasState__libZcanvas_u117 == 0));
							if (!(T98_)) goto LA99_;
							T98_ = hasKey__libZcanvas_u5297((*canvasState__libZcanvas_u117).contentBuffers, (*layout_p0).section.title);
							if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
LA99_: ;
							if (!T98_) goto LA100_;
							sectionBuffer_1.len = 0; sectionBuffer_1.p = NIM_NIL;
							nimln_(1266);							bufferStartY_1 = contentY_1;
							nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							nimlf_(1267, "/workspaces/telestorie/lib/canvas.nim");							T103_ = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ*)0;
							T103_ = X5BX5D___libZcanvas_u5609((&(*canvasState__libZcanvas_u117).contentBuffers), (*layout_p0).section.title);
							if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
							nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqcopy___system_u3788((&sectionBuffer_1), (*T103_));
							nimlf_(1270, "/workspaces/telestorie/lib/canvas.nim");							maxCellWidth_1 = ((NI)0);
							nimln_(1273);							{
								tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw T108_;
								if (!isCurrent_p4) goto LA106_;
								nimln_(1274);								T108_.x = contentX_1;
								T108_.y = bufferStartY_1;
								T108_.width = maxContentWidth_1;
								T108_.height = ((NI)0);
								(*canvasState__libZcanvas_u117).currentContentBufferBounds = T108_;
							}
LA106_: ;
							{
								NimStringV2* bufferLine_1;
								NI i_1;
								NI L_1;
								NI T110_;
								bufferLine_1 = (NimStringV2*)0;
								nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");								i_1 = ((NI)0);
								nimln_(250);								T110_ = sectionBuffer_1.len;
								L_1 = T110_;
								{
									nimln_(251);									while (1) {
										NI layoutHeight_2;
										NI TM__kUjodket9aV1BVUR0GC3cwA_325;
										if (!(i_1 < L_1)) goto LA112;
										nimlf_(1281, "/workspaces/telestorie/lib/canvas.nim");										if (i_1 < 0 || i_1 >= sectionBuffer_1.len){ raiseIndexError2(i_1,sectionBuffer_1.len-1); goto LA102_;
										}
										bufferLine_1 = (&sectionBuffer_1.p->data[i_1]);
										nimln_(1282);										if ((((NI) (((NF)((*layout_p0).height) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)((*layout_p0).height) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)((*layout_p0).height) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA102_;
										}
										layoutHeight_2 = (((NI) (((NF)((*layout_p0).height) + (NF)(0.5)))));
										nimln_(1283);										{
											NI TM__kUjodket9aV1BVUR0GC3cwA_191;
											if (nimAddInt(screenY_p2, layoutHeight_2, &TM__kUjodket9aV1BVUR0GC3cwA_191)) { raiseOverflow(); goto LA102_;
											};
											if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_191) <= contentY_1)) goto LA115_;
											nimln_(1284);											goto LA109;
										}
LA115_: ;
										nimln_(1286);										{
											NIM_BOOL T119_;
											NimStringV2 formatted_1;
											NimStringV2 displayText_1;
											NimStringV2 T122_;
											NI renderedWidth_1;
											T119_ = (NIM_BOOL)0;
											T119_ = nsuStartsWith((*bufferLine_1), TM__kUjodket9aV1BVUR0GC3cwA_192);
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
											if (!T119_) goto LA120_;
											formatted_1.len = 0; formatted_1.p = NIM_NIL;
											displayText_1.len = 0; displayText_1.p = NIM_NIL;
											nimln_(1288);											formatted_1 = formatHeading__libZcanvas_u2520((*bufferLine_1));
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
											T122_.len = 0; T122_.p = NIM_NIL;
											nimln_(1289);											{
												NI T125_;
												T125_ = (NI)0;
												T125_ = getVisualWidth__libZcanvas_u2348(formatted_1);
												if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
												if (!(maxContentWidth_1 < T125_)) goto LA126_;
												nimln_(1290);												displayText_1 = truncateToVisualWidth__libZcanvas_u2420(formatted_1, maxContentWidth_1);
												if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
											}
											goto LA123_;
LA126_: ;
											{
												nimln_(1289);												nimln_(1292);												displayText_1 = formatted_1;
												nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");												eqwasMoved___system_u2707((&formatted_1));
											}
LA123_: ;
											nimlf_(1294, "/workspaces/telestorie/lib/canvas.nim");											renderedWidth_1 = getVisualWidth__libZcanvas_u2348(displayText_1);
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
											nimln_(1295);											{
												if (!(maxVisualWidth_1 < renderedWidth_1)) goto LA131_;
												nimln_(1296);												maxVisualWidth_1 = renderedWidth_1;
											}
LA131_: ;
											nimln_(1297);											{
												if (!(maxCellWidth_1 < renderedWidth_1)) goto LA135_;
												nimln_(1298);												maxCellWidth_1 = renderedWidth_1;
											}
LA135_: ;
											nimln_(1299);											writeText__backendsZterminalZtermbuffer_u230(buffer_p3, contentX_1, contentY_1, displayText_1, headingStyle_1);
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
											nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");											if (displayText_1.p && !(displayText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(displayText_1.p);
}
											if (formatted_1.p && !(formatted_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(formatted_1.p);
}
										}
										goto LA117_;
LA120_: ;
										{
											NIM_BOOL T138_;
											tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q links_1;
											NI T142_;
											NI TM__kUjodket9aV1BVUR0GC3cwA_303;
											NI maxLinkTextWidth_1;
											nimlf_(1300, "/workspaces/telestorie/lib/canvas.nim");											T138_ = (NIM_BOOL)0;
											T138_ = hasLinksOutsideBackticks__libZcanvas_u4788((*bufferLine_1));
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
											if (!T138_) goto LA139_;
											links_1.len = 0; links_1.p = NIM_NIL;
											nimln_(1302);											links_1 = renderTextWithLinks__libZcanvas_u3854((*bufferLine_1), contentX_1, contentY_1, maxContentWidth_1, buffer_p3, isCurrent_p4, currentLinkIdx_1, styleSheet_p5, bodyStyle_1);
											if (NIM_UNLIKELY(*nimErr_)) goto LA141_;
											nimln_(1304);											add__libZcanvas_u5709((&(*Result).Field0), ((links_1).p) ? (links_1.p->data) : NIM_NIL, links_1.len);
											nimln_(1305);											T142_ = links_1.len;
											if (nimAddInt(currentLinkIdx_1, T142_, &TM__kUjodket9aV1BVUR0GC3cwA_303)) { raiseOverflow(); goto LA141_;
											};
											currentLinkIdx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_303);
											nimln_(1307);											maxLinkTextWidth_1 = ((NI)0);
											{
												tyObject_Link__6V5xLDIraXInP9am5HdL18g* link_1;
												NI i_2;
												NI L_2;
												NI T144_;
												link_1 = (tyObject_Link__6V5xLDIraXInP9am5HdL18g*)0;
												nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");												i_2 = ((NI)0);
												nimln_(250);												T144_ = links_1.len;
												L_2 = T144_;
												{
													nimln_(251);													while (1) {
														NI linkTextWidth_1;
														if (!(i_2 < L_2)) goto LA146;
														nimlf_(1308, "/workspaces/telestorie/lib/canvas.nim");														if (i_2 < 0 || i_2 >= links_1.len){ raiseIndexError2(i_2,links_1.len-1); goto LA141_;
														}
														link_1 = (&links_1.p->data[i_2]);
														nimln_(1309);														linkTextWidth_1 = getVisualWidth__libZcanvas_u2348((*link_1).text);
														if (NIM_UNLIKELY(*nimErr_)) goto LA141_;
														nimln_(1310);														{
															if (!(maxLinkTextWidth_1 < linkTextWidth_1)) goto LA149_;
															nimln_(1311);															maxLinkTextWidth_1 = linkTextWidth_1;
														}
LA149_: ;
														nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");														i_2 += ((NI)1);
														nimln_(254);														{
															NI T153_;
															T153_ = links_1.len;
															if (!!((T153_ == L_2))) goto LA154_;
															failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_304);
															if (NIM_UNLIKELY(*nimErr_)) goto LA141_;
														}
LA154_: ;
													} LA146: ;
												}
											}
											nimlf_(1312, "/workspaces/telestorie/lib/canvas.nim");											{
												if (!(maxVisualWidth_1 < maxLinkTextWidth_1)) goto LA158_;
												nimln_(1313);												maxVisualWidth_1 = maxLinkTextWidth_1;
											}
LA158_: ;
											nimln_(1314);											{
												if (!(maxCellWidth_1 < maxLinkTextWidth_1)) goto LA162_;
												nimln_(1315);												maxCellWidth_1 = maxLinkTextWidth_1;
											}
LA162_: ;
											{
												LA141_:;
											}
											{
												nimln_(772);												eqdestroy___libZcanvas_u3292(links_1);
											}
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
										}
										goto LA117_;
LA139_: ;
										{
											NIM_BOOL T167_;
											tySequence__sM4lkSb7zS6F7OVMvW9cffQ wrapped_1;
											NI TM__kUjodket9aV1BVUR0GC3cwA_320;
											nimln_(1316);											T167_ = (NIM_BOOL)0;
											T167_ = contains__pureZstrutils_u1900((*bufferLine_1), TM__kUjodket9aV1BVUR0GC3cwA_305);
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
											if (T167_) goto LA168_;
											T167_ = contains__pureZstrutils_u1900((*bufferLine_1), TM__kUjodket9aV1BVUR0GC3cwA_307);
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
LA168_: ;
											if (!T167_) goto LA169_;
											wrapped_1.len = 0; wrapped_1.p = NIM_NIL;
											nimln_(1318);											wrapped_1 = wrapText__libZcanvas_u2495((*bufferLine_1), maxContentWidth_1);
											if (NIM_UNLIKELY(*nimErr_)) goto LA171_;
											{
												NimStringV2* wLine_1;
												NI i_3;
												NI L_3;
												NI T173_;
												wLine_1 = (NimStringV2*)0;
												nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");												i_3 = ((NI)0);
												nimln_(250);												T173_ = wrapped_1.len;
												L_3 = T173_;
												{
													nimln_(251);													while (1) {
														NimStringV2 textWithoutMarkdown_1;
														NimStringV2 colontmpD__12;
														NI T181_;
														NI lineWidth_1;
														NI TM__kUjodket9aV1BVUR0GC3cwA_318;
														if (!(i_3 < L_3)) goto LA175;
														textWithoutMarkdown_1.len = 0; textWithoutMarkdown_1.p = NIM_NIL;
														colontmpD__12.len = 0; colontmpD__12.p = NIM_NIL;
														nimlf_(1319, "/workspaces/telestorie/lib/canvas.nim");														if (i_3 < 0 || i_3 >= wrapped_1.len){ raiseIndexError2(i_3,wrapped_1.len-1); goto LA176_;
														}
														wLine_1 = (&wrapped_1.p->data[i_3]);
														nimln_(1320);														{
															NI TM__kUjodket9aV1BVUR0GC3cwA_313;
															if (nimAddInt(screenY_p2, layoutHeight_2, &TM__kUjodket9aV1BVUR0GC3cwA_313)) { raiseOverflow(); goto LA176_;
															};
															if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_313) <= contentY_1)) goto LA179_;
															nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");															if (colontmpD__12.p && !(colontmpD__12.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__12.p);
}
															if (textWithoutMarkdown_1.p && !(textWithoutMarkdown_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(textWithoutMarkdown_1.p);
}
															nimlf_(1321, "/workspaces/telestorie/lib/canvas.nim");															goto LA172;
														}
LA179_: ;
														nimln_(1322);														T181_ = (NI)0;
														T181_ = renderInlineMarkdown__libZcanvas_u3665((*wLine_1), contentX_1, contentY_1, maxContentWidth_1, buffer_p3, bodyStyle_1);
														if (NIM_UNLIKELY(*nimErr_)) goto LA176_;
														(void)(T181_);
														nimln_(1325);														colontmpD__12 = nsuReplaceStr((*wLine_1), TM__kUjodket9aV1BVUR0GC3cwA_314, TM__kUjodket9aV1BVUR0GC3cwA_315);
														if (NIM_UNLIKELY(*nimErr_)) goto LA176_;
														textWithoutMarkdown_1 = nsuReplaceStr(colontmpD__12, TM__kUjodket9aV1BVUR0GC3cwA_316, TM__kUjodket9aV1BVUR0GC3cwA_317);
														if (NIM_UNLIKELY(*nimErr_)) goto LA176_;
														nimln_(1326);														lineWidth_1 = getVisualWidth__libZcanvas_u2348(textWithoutMarkdown_1);
														if (NIM_UNLIKELY(*nimErr_)) goto LA176_;
														nimln_(1327);														{
															if (!(maxVisualWidth_1 < lineWidth_1)) goto LA184_;
															nimln_(1328);															maxVisualWidth_1 = lineWidth_1;
														}
LA184_: ;
														nimln_(1329);														{
															if (!(maxCellWidth_1 < lineWidth_1)) goto LA188_;
															nimln_(1330);															maxCellWidth_1 = lineWidth_1;
														}
LA188_: ;
														nimln_(1331);														if (nimAddInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_318)) { raiseOverflow(); goto LA176_;
														};
														contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_318);
														nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");														i_3 += ((NI)1);
														nimln_(254);														{
															NI T192_;
															T192_ = wrapped_1.len;
															if (!!((T192_ == L_3))) goto LA193_;
															failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_319);
															if (NIM_UNLIKELY(*nimErr_)) goto LA176_;
														}
LA193_: ;
														{
															LA176_:;
														}
														{
															nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");															if (colontmpD__12.p && !(colontmpD__12.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__12.p);
}
															if (textWithoutMarkdown_1.p && !(textWithoutMarkdown_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(textWithoutMarkdown_1.p);
}
														}
														if (NIM_UNLIKELY(*nimErr_)) goto LA171_;
													} LA175: ;
												}
											} LA172: ;
											nimlf_(1332, "/workspaces/telestorie/lib/canvas.nim");											if (nimSubInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_320)) { raiseOverflow(); goto LA171_;
											};
											contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_320);
											{
												LA171_:;
											}
											{
												nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");												eqdestroy___system_u3785(wrapped_1);
											}
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
										}
										goto LA117_;
LA169_: ;
										{
											tySequence__sM4lkSb7zS6F7OVMvW9cffQ wrapped_2;
											NI TM__kUjodket9aV1BVUR0GC3cwA_324;
											wrapped_2.len = 0; wrapped_2.p = NIM_NIL;
											nimlf_(1335, "/workspaces/telestorie/lib/canvas.nim");											wrapped_2 = wrapText__libZcanvas_u2495((*bufferLine_1), maxContentWidth_1);
											if (NIM_UNLIKELY(*nimErr_)) goto LA200_;
											{
												NimStringV2* wLine_2;
												NI i_4;
												NI L_4;
												NI T202_;
												wLine_2 = (NimStringV2*)0;
												nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");												i_4 = ((NI)0);
												nimln_(250);												T202_ = wrapped_2.len;
												L_4 = T202_;
												{
													nimln_(251);													while (1) {
														NI lineWidth_2;
														NI TM__kUjodket9aV1BVUR0GC3cwA_322;
														if (!(i_4 < L_4)) goto LA204;
														nimlf_(1336, "/workspaces/telestorie/lib/canvas.nim");														if (i_4 < 0 || i_4 >= wrapped_2.len){ raiseIndexError2(i_4,wrapped_2.len-1); goto LA200_;
														}
														wLine_2 = (&wrapped_2.p->data[i_4]);
														nimln_(1337);														{
															NI TM__kUjodket9aV1BVUR0GC3cwA_321;
															if (nimAddInt(screenY_p2, layoutHeight_2, &TM__kUjodket9aV1BVUR0GC3cwA_321)) { raiseOverflow(); goto LA200_;
															};
															if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_321) <= contentY_1)) goto LA207_;
															nimln_(1338);															goto LA201;
														}
LA207_: ;
														nimln_(1339);														writeText__backendsZterminalZtermbuffer_u230(buffer_p3, contentX_1, contentY_1, (*wLine_2), bodyStyle_1);
														if (NIM_UNLIKELY(*nimErr_)) goto LA200_;
														nimln_(1341);														lineWidth_2 = getVisualWidth__libZcanvas_u2348((*wLine_2));
														if (NIM_UNLIKELY(*nimErr_)) goto LA200_;
														nimln_(1342);														{
															if (!(maxVisualWidth_1 < lineWidth_2)) goto LA211_;
															nimln_(1343);															maxVisualWidth_1 = lineWidth_2;
														}
LA211_: ;
														nimln_(1344);														{
															if (!(maxCellWidth_1 < lineWidth_2)) goto LA215_;
															nimln_(1345);															maxCellWidth_1 = lineWidth_2;
														}
LA215_: ;
														nimln_(1346);														if (nimAddInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_322)) { raiseOverflow(); goto LA200_;
														};
														contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_322);
														nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");														i_4 += ((NI)1);
														nimln_(254);														{
															NI T219_;
															T219_ = wrapped_2.len;
															if (!!((T219_ == L_4))) goto LA220_;
															failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_323);
															if (NIM_UNLIKELY(*nimErr_)) goto LA200_;
														}
LA220_: ;
													} LA204: ;
												}
											} LA201: ;
											nimlf_(1347, "/workspaces/telestorie/lib/canvas.nim");											if (nimSubInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_324)) { raiseOverflow(); goto LA200_;
											};
											contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_324);
											{
												LA200_:;
											}
											{
												nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");												eqdestroy___system_u3785(wrapped_2);
											}
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
										}
LA117_: ;
										nimlf_(1349, "/workspaces/telestorie/lib/canvas.nim");										if (nimAddInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_325)) { raiseOverflow(); goto LA102_;
										};
										contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_325);
										nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");										i_1 += ((NI)1);
										nimln_(254);										{
											NI T226_;
											T226_ = sectionBuffer_1.len;
											if (!!((T226_ == L_1))) goto LA227_;
											failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_326);
											if (NIM_UNLIKELY(*nimErr_)) goto LA102_;
										}
LA227_: ;
									} LA112: ;
								}
							} LA109: ;
							nimlf_(1352, "/workspaces/telestorie/lib/canvas.nim");							{
								NI TM__kUjodket9aV1BVUR0GC3cwA_327;
								if (!isCurrent_p4) goto LA231_;
								nimln_(1353);								if (nimSubInt(contentY_1, bufferStartY_1, &TM__kUjodket9aV1BVUR0GC3cwA_327)) { raiseOverflow(); goto LA102_;
								};
								(*canvasState__libZcanvas_u117).currentContentBufferBounds.height = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_327);
								nimln_(1355);								(*canvasState__libZcanvas_u117).currentContentBufferBounds.width = maxCellWidth_1;
							}
LA231_: ;
							{
								LA102_:;
							}
							{
								nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								eqdestroy___system_u3785(sectionBuffer_1);
							}
							if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						}
LA100_: ;
						nimln_(394);						if (colontmpD__11.p && !(colontmpD__11.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__11.p);
}
						nimlf_(1358, "/workspaces/telestorie/lib/canvas.nim");						goto LA86;
					}
LA94_: ;
					nimln_(1361);					{
						NIM_BOOL T237_;
						NimStringV2 formatted_2;
						NimStringV2 displayText_2;
						NimStringV2 T240_;
						NI renderedWidth_2;
						T237_ = (NIM_BOOL)0;
						T237_ = nsuStartsWith(line_1, TM__kUjodket9aV1BVUR0GC3cwA_328);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						if (!T237_) goto LA238_;
						formatted_2.len = 0; formatted_2.p = NIM_NIL;
						displayText_2.len = 0; displayText_2.p = NIM_NIL;
						nimln_(1363);						formatted_2 = formatHeading__libZcanvas_u2520(line_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						T240_.len = 0; T240_.p = NIM_NIL;
						nimln_(1364);						{
							NI T243_;
							T243_ = (NI)0;
							T243_ = getVisualWidth__libZcanvas_u2348(formatted_2);
							if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
							if (!(maxContentWidth_1 < T243_)) goto LA244_;
							nimln_(1365);							displayText_2 = truncateToVisualWidth__libZcanvas_u2420(formatted_2, maxContentWidth_1);
							if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						}
						goto LA241_;
LA244_: ;
						{
							nimln_(1364);							nimln_(1367);							displayText_2 = formatted_2;
							nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqwasMoved___system_u2707((&formatted_2));
						}
LA241_: ;
						nimlf_(1369, "/workspaces/telestorie/lib/canvas.nim");						renderedWidth_2 = getVisualWidth__libZcanvas_u2348(displayText_2);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						nimln_(1370);						{
							if (!(maxVisualWidth_1 < renderedWidth_2)) goto LA249_;
							nimln_(1371);							maxVisualWidth_1 = renderedWidth_2;
						}
LA249_: ;
						nimln_(1372);						writeText__backendsZterminalZtermbuffer_u230(buffer_p3, contentX_1, contentY_1, displayText_2, headingStyle_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (displayText_2.p && !(displayText_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(displayText_2.p);
}
						if (formatted_2.p && !(formatted_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(formatted_2.p);
}
					}
					goto LA235_;
LA238_: ;
					{
						NIM_BOOL T252_;
						tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q links_2;
						NI T256_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_329;
						NI maxLinkTextWidth_2;
						nimlf_(1373, "/workspaces/telestorie/lib/canvas.nim");						T252_ = (NIM_BOOL)0;
						T252_ = hasLinksOutsideBackticks__libZcanvas_u4788(line_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						if (!T252_) goto LA253_;
						links_2.len = 0; links_2.p = NIM_NIL;
						nimln_(1375);						links_2 = renderTextWithLinks__libZcanvas_u3854(line_1, contentX_1, contentY_1, maxContentWidth_1, buffer_p3, isCurrent_p4, currentLinkIdx_1, styleSheet_p5, bodyStyle_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA255_;
						nimln_(1377);						add__libZcanvas_u5709((&(*Result).Field0), ((links_2).p) ? (links_2.p->data) : NIM_NIL, links_2.len);
						nimln_(1378);						T256_ = links_2.len;
						if (nimAddInt(currentLinkIdx_1, T256_, &TM__kUjodket9aV1BVUR0GC3cwA_329)) { raiseOverflow(); goto LA255_;
						};
						currentLinkIdx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_329);
						nimln_(1380);						maxLinkTextWidth_2 = ((NI)0);
						{
							tyObject_Link__6V5xLDIraXInP9am5HdL18g* link_2;
							NI i_5;
							NI L_5;
							NI T258_;
							link_2 = (tyObject_Link__6V5xLDIraXInP9am5HdL18g*)0;
							nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");							i_5 = ((NI)0);
							nimln_(250);							T258_ = links_2.len;
							L_5 = T258_;
							{
								nimln_(251);								while (1) {
									NI linkTextWidth_2;
									if (!(i_5 < L_5)) goto LA260;
									nimlf_(1381, "/workspaces/telestorie/lib/canvas.nim");									if (i_5 < 0 || i_5 >= links_2.len){ raiseIndexError2(i_5,links_2.len-1); goto LA255_;
									}
									link_2 = (&links_2.p->data[i_5]);
									nimln_(1382);									linkTextWidth_2 = getVisualWidth__libZcanvas_u2348((*link_2).text);
									if (NIM_UNLIKELY(*nimErr_)) goto LA255_;
									nimln_(1383);									{
										if (!(maxLinkTextWidth_2 < linkTextWidth_2)) goto LA263_;
										nimln_(1384);										maxLinkTextWidth_2 = linkTextWidth_2;
									}
LA263_: ;
									nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");									i_5 += ((NI)1);
									nimln_(254);									{
										NI T267_;
										T267_ = links_2.len;
										if (!!((T267_ == L_5))) goto LA268_;
										failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_330);
										if (NIM_UNLIKELY(*nimErr_)) goto LA255_;
									}
LA268_: ;
								} LA260: ;
							}
						}
						nimlf_(1385, "/workspaces/telestorie/lib/canvas.nim");						{
							if (!(maxVisualWidth_1 < maxLinkTextWidth_2)) goto LA272_;
							nimln_(1386);							maxVisualWidth_1 = maxLinkTextWidth_2;
						}
LA272_: ;
						{
							LA255_:;
						}
						{
							nimln_(772);							eqdestroy___libZcanvas_u3292(links_2);
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
					}
					goto LA235_;
LA253_: ;
					{
						NIM_BOOL T277_;
						NimStringV2 bufferKey_1;
						tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T282_;
						nimln_(1387);						T277_ = (NIM_BOOL)0;
						T277_ = nsuStartsWith(line_1, TM__kUjodket9aV1BVUR0GC3cwA_331);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						if (!(T277_)) goto LA278_;
						T277_ = nsuEndsWith(line_1, TM__kUjodket9aV1BVUR0GC3cwA_332);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
LA278_: ;
						if (!T277_) goto LA279_;
						bufferKey_1.len = 0; bufferKey_1.p = NIM_NIL;
						nimln_(1389);						T282_ = dotdot___stdZenumutils_u105(((NI)7), ((NI)3));
						bufferKey_1 = X5BX5D___pureZstrutils_u1319(line_1, T282_);
						if (NIM_UNLIKELY(*nimErr_)) goto LA281_;
						nimln_(1390);						{
							NIM_BOOL T285_;
							tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw ansiBuffer_1;
							tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* T289_;
							NI TM__kUjodket9aV1BVUR0GC3cwA_348;
							T285_ = (NIM_BOOL)0;
							T285_ = hasKey__libZansi95art95bindings_u295(gAnsiBuffers__libZcanvas_u31, bufferKey_1);
							if (NIM_UNLIKELY(*nimErr_)) goto LA281_;
							if (!T285_) goto LA286_;
							nimZeroMem((void*)(&ansiBuffer_1), sizeof(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw));
							nimlf_(27, "/workspaces/telestorie/src/layers.nim");							nimlf_(1391, "/workspaces/telestorie/lib/canvas.nim");							T289_ = (tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw*)0;
							T289_ = X5BX5D___libZansi95art95bindings_u1625((&gAnsiBuffers__libZcanvas_u31), bufferKey_1);
							if (NIM_UNLIKELY(*nimErr_)) goto LA288_;
							nimlf_(27, "/workspaces/telestorie/src/layers.nim");							eqcopy___srcZlayers_u19((&ansiBuffer_1), (&(*T289_)));
							{
								NI y_1;
								NI i_6;
								y_1 = (NI)0;
								nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");								i_6 = ((NI)0);
								{
									nimln_(129);									while (1) {
										NI TM__kUjodket9aV1BVUR0GC3cwA_346;
										NI TM__kUjodket9aV1BVUR0GC3cwA_347;
										if (!(i_6 < ansiBuffer_1.height)) goto LA292;
										nimlf_(1393, "/workspaces/telestorie/lib/canvas.nim");										y_1 = i_6;
										nimln_(1394);										{
											NI TM__kUjodket9aV1BVUR0GC3cwA_333;
											if (nimAddInt(screenY_p2, layoutHeight_1, &TM__kUjodket9aV1BVUR0GC3cwA_333)) { raiseOverflow(); goto LA288_;
											};
											if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_333) <= contentY_1)) goto LA295_;
											nimln_(1395);											goto LA290;
										}
LA295_: ;
										nimln_(1397);										{
											NIM_BOOL T299_;
											NI lineWidth_3;
											NI maxNonSpaceX_1;
											T299_ = (NIM_BOOL)0;
											T299_ = (((NI)0) <= contentY_1);
											if (!(T299_)) goto LA300_;
											T299_ = (contentY_1 < (*buffer_p3).height);
LA300_: ;
											if (!T299_) goto LA301_;
											nimln_(1398);											lineWidth_3 = ((NI)0);
											nimln_(1399);											maxNonSpaceX_1 = ((NI)0);
											{
												NI x_1;
												NI i_7;
												x_1 = (NI)0;
												nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");												i_7 = ((NI)0);
												{
													nimln_(129);													while (1) {
														NI idx_1;
														NI TM__kUjodket9aV1BVUR0GC3cwA_334;
														NI TM__kUjodket9aV1BVUR0GC3cwA_335;
														NI TM__kUjodket9aV1BVUR0GC3cwA_345;
														if (!(i_7 < ansiBuffer_1.width)) goto LA305;
														nimlf_(1400, "/workspaces/telestorie/lib/canvas.nim");														x_1 = i_7;
														nimln_(1401);														if (nimMulInt(y_1, ansiBuffer_1.width, &TM__kUjodket9aV1BVUR0GC3cwA_334)) { raiseOverflow(); goto LA288_;
														};
														if (nimAddInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_334), x_1, &TM__kUjodket9aV1BVUR0GC3cwA_335)) { raiseOverflow(); goto LA288_;
														};
														idx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_335);
														nimln_(1402);														{
															NI T308_;
															tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA cell_1;
															T308_ = ansiBuffer_1.cells.len;
															if (!(idx_1 < T308_)) goto LA309_;
															nimZeroMem((void*)(&cell_1), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
															nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");															if (idx_1 < 0 || idx_1 >= ansiBuffer_1.cells.len){ raiseIndexError2(idx_1,ansiBuffer_1.cells.len-1); goto LA288_;
															}
															eqcopy___backendsZterminalZtermbuffer_u110((&cell_1), (&ansiBuffer_1.cells.p->data[idx_1]));
															nimlf_(1406, "/workspaces/telestorie/lib/canvas.nim");															{
																NIM_BOOL T313_;
																NIM_BOOL T314_;
																NIM_BOOL T315_;
																T313_ = (NIM_BOOL)0;
																T314_ = (NIM_BOOL)0;
																T315_ = (NIM_BOOL)0;
																T315_ = !(eqStrings(cell_1.ch, TM__kUjodket9aV1BVUR0GC3cwA_336));
																if (T315_) goto LA316_;
																T315_ = !((cell_1.style.bg.r == ((NU8)0)));
LA316_: ;
																T314_ = T315_;
																if (T314_) goto LA317_;
																T314_ = !((cell_1.style.bg.g == ((NU8)0)));
LA317_: ;
																T313_ = T314_;
																if (T313_) goto LA318_;
																T313_ = !((cell_1.style.bg.b == ((NU8)0)));
LA318_: ;
																if (!T313_) goto LA319_;
																nimln_(1408);																{
																	NIM_BOOL T323_;
																	NI TM__kUjodket9aV1BVUR0GC3cwA_337;
																	NI TM__kUjodket9aV1BVUR0GC3cwA_338;
																	NI bufIdx_1;
																	NI TM__kUjodket9aV1BVUR0GC3cwA_339;
																	NI TM__kUjodket9aV1BVUR0GC3cwA_340;
																	NI TM__kUjodket9aV1BVUR0GC3cwA_341;
																	T323_ = (NIM_BOOL)0;
																	if (nimAddInt(contentX_1, x_1, &TM__kUjodket9aV1BVUR0GC3cwA_337)) { raiseOverflow(); goto LA288_;
																	};
																	T323_ = (((NI)0) <= (NI)(TM__kUjodket9aV1BVUR0GC3cwA_337));
																	if (!(T323_)) goto LA324_;
																	if (nimAddInt(contentX_1, x_1, &TM__kUjodket9aV1BVUR0GC3cwA_338)) { raiseOverflow(); goto LA288_;
																	};
																	T323_ = ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_338) < (*buffer_p3).width);
LA324_: ;
																	if (!T323_) goto LA325_;
																	nimln_(1409);																	if (nimMulInt(contentY_1, (*buffer_p3).width, &TM__kUjodket9aV1BVUR0GC3cwA_339)) { raiseOverflow(); goto LA288_;
																	};
																	if (nimAddInt(contentX_1, x_1, &TM__kUjodket9aV1BVUR0GC3cwA_340)) { raiseOverflow(); goto LA288_;
																	};
																	if (nimAddInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_339), (NI)(TM__kUjodket9aV1BVUR0GC3cwA_340), &TM__kUjodket9aV1BVUR0GC3cwA_341)) { raiseOverflow(); goto LA288_;
																	};
																	bufIdx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_341);
																	nimln_(1410);																	{
																		NIM_BOOL T329_;
																		NI T331_;
																		NI TM__kUjodket9aV1BVUR0GC3cwA_342;
																		T329_ = (NIM_BOOL)0;
																		T329_ = (((NI)0) <= bufIdx_1);
																		if (!(T329_)) goto LA330_;
																		T331_ = (*buffer_p3).cells.len;
																		T329_ = (bufIdx_1 < T331_);
LA330_: ;
																		if (!T329_) goto LA332_;
																		nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");																		if (bufIdx_1 < 0 || bufIdx_1 >= (*buffer_p3).cells.len){ raiseIndexError2(bufIdx_1,(*buffer_p3).cells.len-1); goto LA288_;
																		}
																		eqcopy___backendsZterminalZtermbuffer_u110((&(*buffer_p3).cells.p->data[bufIdx_1]), (&cell_1));
																		nimlf_(1412, "/workspaces/telestorie/lib/canvas.nim");																		if (nimAddInt(x_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_342)) { raiseOverflow(); goto LA288_;
																		};
																		lineWidth_3 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_342);
																		nimln_(1413);																		{
																			NI TM__kUjodket9aV1BVUR0GC3cwA_344;
																			if (!!(eqStrings(cell_1.ch, TM__kUjodket9aV1BVUR0GC3cwA_343))) goto LA336_;
																			nimln_(1414);																			if (nimAddInt(x_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_344)) { raiseOverflow(); goto LA288_;
																			};
																			maxNonSpaceX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_344);
																		}
LA336_: ;
																	}
LA332_: ;
																}
LA325_: ;
															}
LA319_: ;
															nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");															eqdestroy___backendsZterminalZtermbuffer_u107((&cell_1));
														}
LA309_: ;
														nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");														if (nimAddInt(i_7, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_345)) { raiseOverflow(); goto LA288_;
														};
														i_7 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_345);
													} LA305: ;
												}
											}
											nimlf_(1416, "/workspaces/telestorie/lib/canvas.nim");											{
												if (!(maxVisualWidth_1 < maxNonSpaceX_1)) goto LA340_;
												nimln_(1417);												maxVisualWidth_1 = maxNonSpaceX_1;
											}
LA340_: ;
										}
LA301_: ;
										nimln_(1418);										if (nimAddInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_346)) { raiseOverflow(); goto LA288_;
										};
										contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_346);
										nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");										if (nimAddInt(i_6, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_347)) { raiseOverflow(); goto LA288_;
										};
										i_6 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_347);
									} LA292: ;
								}
							} LA290: ;
							nimlf_(1419, "/workspaces/telestorie/lib/canvas.nim");							if (nimSubInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_348)) { raiseOverflow(); goto LA288_;
							};
							contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_348);
							{
								LA288_:;
							}
							{
								nimlf_(27, "/workspaces/telestorie/src/layers.nim");								eqdestroy___srcZlayers_u16((&ansiBuffer_1));
							}
							if (NIM_UNLIKELY(*nimErr_)) goto LA281_;
						}
LA286_: ;
						{
							LA281_:;
						}
						{
							nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							if (bufferKey_1.p && !(bufferKey_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(bufferKey_1.p);
}
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
					}
					goto LA235_;
LA279_: ;
					{
						NIM_BOOL T347_;
						tySequence__sM4lkSb7zS6F7OVMvW9cffQ wrapped_3;
						NI TM__kUjodket9aV1BVUR0GC3cwA_358;
						nimlf_(1420, "/workspaces/telestorie/lib/canvas.nim");						T347_ = (NIM_BOOL)0;
						T347_ = contains__pureZstrutils_u1900(line_1, TM__kUjodket9aV1BVUR0GC3cwA_349);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
						if (T347_) goto LA348_;
						T347_ = contains__pureZstrutils_u1900(line_1, TM__kUjodket9aV1BVUR0GC3cwA_350);
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
LA348_: ;
						if (!T347_) goto LA349_;
						wrapped_3.len = 0; wrapped_3.p = NIM_NIL;
						nimln_(1422);						wrapped_3 = wrapText__libZcanvas_u2495(line_1, maxContentWidth_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA351_;
						{
							NimStringV2* wLine_3;
							NI i_8;
							NI L_6;
							NI T353_;
							wLine_3 = (NimStringV2*)0;
							nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");							i_8 = ((NI)0);
							nimln_(250);							T353_ = wrapped_3.len;
							L_6 = T353_;
							{
								nimln_(251);								while (1) {
									NimStringV2 textWithoutMarkdown_2;
									NimStringV2 colontmpD__13;
									NI T361_;
									NI lineWidth_4;
									NI TM__kUjodket9aV1BVUR0GC3cwA_356;
									if (!(i_8 < L_6)) goto LA355;
									textWithoutMarkdown_2.len = 0; textWithoutMarkdown_2.p = NIM_NIL;
									colontmpD__13.len = 0; colontmpD__13.p = NIM_NIL;
									nimlf_(1423, "/workspaces/telestorie/lib/canvas.nim");									if (i_8 < 0 || i_8 >= wrapped_3.len){ raiseIndexError2(i_8,wrapped_3.len-1); goto LA356_;
									}
									wLine_3 = (&wrapped_3.p->data[i_8]);
									nimln_(1424);									{
										NI TM__kUjodket9aV1BVUR0GC3cwA_351;
										if (nimAddInt(screenY_p2, layoutHeight_1, &TM__kUjodket9aV1BVUR0GC3cwA_351)) { raiseOverflow(); goto LA356_;
										};
										if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_351) <= contentY_1)) goto LA359_;
										nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");										if (colontmpD__13.p && !(colontmpD__13.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__13.p);
}
										if (textWithoutMarkdown_2.p && !(textWithoutMarkdown_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(textWithoutMarkdown_2.p);
}
										nimlf_(1425, "/workspaces/telestorie/lib/canvas.nim");										goto LA352;
									}
LA359_: ;
									nimln_(1426);									T361_ = (NI)0;
									T361_ = renderInlineMarkdown__libZcanvas_u3665((*wLine_3), contentX_1, contentY_1, maxContentWidth_1, buffer_p3, bodyStyle_1);
									if (NIM_UNLIKELY(*nimErr_)) goto LA356_;
									(void)(T361_);
									nimln_(1429);									colontmpD__13 = nsuReplaceStr((*wLine_3), TM__kUjodket9aV1BVUR0GC3cwA_352, TM__kUjodket9aV1BVUR0GC3cwA_353);
									if (NIM_UNLIKELY(*nimErr_)) goto LA356_;
									textWithoutMarkdown_2 = nsuReplaceStr(colontmpD__13, TM__kUjodket9aV1BVUR0GC3cwA_354, TM__kUjodket9aV1BVUR0GC3cwA_355);
									if (NIM_UNLIKELY(*nimErr_)) goto LA356_;
									nimln_(1430);									lineWidth_4 = getVisualWidth__libZcanvas_u2348(textWithoutMarkdown_2);
									if (NIM_UNLIKELY(*nimErr_)) goto LA356_;
									nimln_(1431);									{
										if (!(maxVisualWidth_1 < lineWidth_4)) goto LA364_;
										nimln_(1432);										maxVisualWidth_1 = lineWidth_4;
									}
LA364_: ;
									nimln_(1433);									if (nimAddInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_356)) { raiseOverflow(); goto LA356_;
									};
									contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_356);
									nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");									i_8 += ((NI)1);
									nimln_(254);									{
										NI T368_;
										T368_ = wrapped_3.len;
										if (!!((T368_ == L_6))) goto LA369_;
										failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_357);
										if (NIM_UNLIKELY(*nimErr_)) goto LA356_;
									}
LA369_: ;
									{
										LA356_:;
									}
									{
										nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");										if (colontmpD__13.p && !(colontmpD__13.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__13.p);
}
										if (textWithoutMarkdown_2.p && !(textWithoutMarkdown_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(textWithoutMarkdown_2.p);
}
									}
									if (NIM_UNLIKELY(*nimErr_)) goto LA351_;
								} LA355: ;
							}
						} LA352: ;
						nimlf_(1434, "/workspaces/telestorie/lib/canvas.nim");						if (nimSubInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_358)) { raiseOverflow(); goto LA351_;
						};
						contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_358);
						{
							LA351_:;
						}
						{
							nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqdestroy___system_u3785(wrapped_3);
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
					}
					goto LA235_;
LA349_: ;
					{
						tySequence__sM4lkSb7zS6F7OVMvW9cffQ wrapped_4;
						NI TM__kUjodket9aV1BVUR0GC3cwA_362;
						wrapped_4.len = 0; wrapped_4.p = NIM_NIL;
						nimlf_(1437, "/workspaces/telestorie/lib/canvas.nim");						wrapped_4 = wrapText__libZcanvas_u2495(line_1, maxContentWidth_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA376_;
						{
							NimStringV2* wLine_4;
							NI i_9;
							NI L_7;
							NI T378_;
							wLine_4 = (NimStringV2*)0;
							nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");							i_9 = ((NI)0);
							nimln_(250);							T378_ = wrapped_4.len;
							L_7 = T378_;
							{
								nimln_(251);								while (1) {
									NI lineWidth_5;
									NI TM__kUjodket9aV1BVUR0GC3cwA_360;
									if (!(i_9 < L_7)) goto LA380;
									nimlf_(1438, "/workspaces/telestorie/lib/canvas.nim");									if (i_9 < 0 || i_9 >= wrapped_4.len){ raiseIndexError2(i_9,wrapped_4.len-1); goto LA376_;
									}
									wLine_4 = (&wrapped_4.p->data[i_9]);
									nimln_(1439);									{
										NI TM__kUjodket9aV1BVUR0GC3cwA_359;
										if (nimAddInt(screenY_p2, layoutHeight_1, &TM__kUjodket9aV1BVUR0GC3cwA_359)) { raiseOverflow(); goto LA376_;
										};
										if (!((NI)(TM__kUjodket9aV1BVUR0GC3cwA_359) <= contentY_1)) goto LA383_;
										nimln_(1440);										goto LA377;
									}
LA383_: ;
									nimln_(1441);									writeText__backendsZterminalZtermbuffer_u230(buffer_p3, contentX_1, contentY_1, (*wLine_4), bodyStyle_1);
									if (NIM_UNLIKELY(*nimErr_)) goto LA376_;
									nimln_(1443);									lineWidth_5 = getVisualWidth__libZcanvas_u2348((*wLine_4));
									if (NIM_UNLIKELY(*nimErr_)) goto LA376_;
									nimln_(1444);									{
										if (!(maxVisualWidth_1 < lineWidth_5)) goto LA387_;
										nimln_(1445);										maxVisualWidth_1 = lineWidth_5;
									}
LA387_: ;
									nimln_(1446);									if (nimAddInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_360)) { raiseOverflow(); goto LA376_;
									};
									contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_360);
									nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");									i_9 += ((NI)1);
									nimln_(254);									{
										NI T391_;
										T391_ = wrapped_4.len;
										if (!!((T391_ == L_7))) goto LA392_;
										failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_361);
										if (NIM_UNLIKELY(*nimErr_)) goto LA376_;
									}
LA392_: ;
								} LA380: ;
							}
						} LA377: ;
						nimlf_(1447, "/workspaces/telestorie/lib/canvas.nim");						if (nimSubInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_362)) { raiseOverflow(); goto LA376_;
						};
						contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_362);
						{
							LA376_:;
						}
						{
							nimlf_(2128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");							eqdestroy___system_u3785(wrapped_4);
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA87_;
					}
LA235_: ;
					nimlf_(1449, "/workspaces/telestorie/lib/canvas.nim");					if (nimAddInt(contentY_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_363)) { raiseOverflow(); goto LA87_;
					};
					contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_363);
					{
						LA87_:;
					}
					{
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (colontmpD__11.p && !(colontmpD__11.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__11.p);
}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA55_;
				} LA86: ;
				nimlf_(700, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/strutils.nim");				{
					if (!(eolpos_1 == last_1)) goto LA400_;
					nimln_(701);					goto LA56;
				}
LA400_: ;
				nimln_(703);				first_1 = last_1;
			}
		} LA56: ;
		{
			LA55_:;
		}
		{
			nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (line_1.p && !(line_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(line_1.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	} LA54: ;
	nimlf_(1452, "/workspaces/telestorie/lib/canvas.nim");	(*Result).Field1 = maxVisualWidth_1;
	nimln_(1453);	if (nimSubInt(contentY_1, startContentY_1, &TM__kUjodket9aV1BVUR0GC3cwA_364)) { raiseOverflow(); goto LA1_;
	};
	(*Result).Field2 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_364);
	{
		LA1_:;
	}
	{
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (processedContent_1.p && !(processedContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(processedContent_1.p);
}
		if (rawContent_1.p && !(rawContent_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(rawContent_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, canvasRender__libZcanvas_u6039)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI viewportWidth_p1, NI viewportHeight_p2, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw styleSheet_p3) {
	NI vw_1;
	NI vh_1;
	NIM_BOOL viewportChanged_1;
	NIM_BOOL T5_;
	NIM_BOOL needsRecenter_1;
	NIM_BOOL T7_;
	NIM_BOOL T8_;
	NI currentIdx_1;
	tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q T27_;
	NI cameraX_1;
	NI cameraY_1;
	NI renderedCount_1;
	NI removedCount_1;
	NI currentSectionIdx_1;
	NIM_BOOL shouldRecenterAfterRender_1;
NIM_BOOL* nimErr_;
	nimfr_("canvasRender", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(1458, "/workspaces/telestorie/lib/canvas.nim");	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(1459);		goto BeforeRet_;
	}
LA3_: ;
	nimln_(1463);	clearTransparent__backendsZterminalZtermbuffer_u340(buffer_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1466);	vw_1 = viewportWidth_p1;
	nimln_(1467);	vh_1 = viewportHeight_p2;
	nimln_(1469);	setViewport__libZcanvas_u3662(vw_1, vh_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1472);	T5_ = (NIM_BOOL)0;
	T5_ = !(((*canvasState__libZcanvas_u117).lastViewportWidth == vw_1));
	if (T5_) goto LA6_;
	nimln_(1473);	T5_ = !(((*canvasState__libZcanvas_u117).lastViewportHeight == vh_1));
LA6_: ;
	viewportChanged_1 = T5_;
	nimln_(1477);	T7_ = (NIM_BOOL)0;
	T8_ = (NIM_BOOL)0;
	T8_ = ((*canvasState__libZcanvas_u117).camera.targetX == 0.0);
	if (!(T8_)) goto LA9_;
	T8_ = ((*canvasState__libZcanvas_u117).camera.targetY == 0.0);
LA9_: ;
	T7_ = T8_;
	if (T7_) goto LA10_;
	T7_ = viewportChanged_1;
LA10_: ;
	needsRecenter_1 = T7_;
	nimln_(1478);	{
		NI T15_;
		if (!needsRecenter_1) goto LA13_;
		nimln_(1479);		T15_ = (NI)0;
		T15_ = getCurrentSectionIdx__libZcanvas_u32();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		centerOnSection__libZcanvas_u146(T15_, vw_1, vh_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(1481);		{
			if (!((*canvasState__libZcanvas_u117).lastViewportWidth == ((NI)0))) goto LA18_;
			nimln_(1482);			(*canvasState__libZcanvas_u117).camera.x = (*canvasState__libZcanvas_u117).camera.targetX;
			nimln_(1483);			(*canvasState__libZcanvas_u117).camera.y = (*canvasState__libZcanvas_u117).camera.targetY;
		}
LA18_: ;
		nimln_(1485);		(*canvasState__libZcanvas_u117).lastViewportWidth = vw_1;
		nimln_(1486);		(*canvasState__libZcanvas_u117).lastViewportHeight = vh_1;
	}
LA13_: ;
	nimln_(1489);	currentIdx_1 = getCurrentSectionIdx__libZcanvas_u32();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1490);	{
		NIM_BOOL T22_;
		NI T24_;
		tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg currentSection_1;
		T22_ = (NIM_BOOL)0;
		T22_ = (((NI)0) <= currentIdx_1);
		if (!(T22_)) goto LA23_;
		T24_ = (*canvasState__libZcanvas_u117).sections.len;
		T22_ = (currentIdx_1 < T24_);
LA23_: ;
		if (!T22_) goto LA25_;
		nimZeroMem((void*)(&currentSection_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
		nimln_(254);		if (currentIdx_1 < 0 || currentIdx_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(currentIdx_1,(*canvasState__libZcanvas_u117).sections.len-1); goto BeforeRet_;
		}
		eqcopy___libZcanvas_u869((&currentSection_1), (&(*canvasState__libZcanvas_u117).sections.p->data[currentIdx_1]));
		nimln_(1492);		markVisited__libZcanvas_u209(currentSection_1.section.title);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(254);		eqdestroy___libZcanvas_u866((&currentSection_1));
	}
LA25_: ;
	nimln_(772);	T27_.len = 0; T27_.p = NIM_NIL;
	T27_.len = 0; T27_.p = (tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content*) newSeqPayload(0, sizeof(tyObject_Link__6V5xLDIraXInP9am5HdL18g), NIM_ALIGNOF(tyObject_Link__6V5xLDIraXInP9am5HdL18g));
	eqsink___libZcanvas_u3301((&(*canvasState__libZcanvas_u117).links), T27_);
	nimln_(1500);	if ((((NI) (((NF)((*canvasState__libZcanvas_u117).camera.x) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)((*canvasState__libZcanvas_u117).camera.x) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)((*canvasState__libZcanvas_u117).camera.x) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
	}
	cameraX_1 = (((NI) (((NF)((*canvasState__libZcanvas_u117).camera.x) + (NF)(0.5)))));
	nimln_(1501);	if ((((NI) (((NF)((*canvasState__libZcanvas_u117).camera.y) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)((*canvasState__libZcanvas_u117).camera.y) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)((*canvasState__libZcanvas_u117).camera.y) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
	}
	cameraY_1 = (((NI) (((NF)((*canvasState__libZcanvas_u117).camera.y) + (NF)(0.5)))));
	nimln_(1503);	renderedCount_1 = ((NI)0);
	nimln_(1504);	removedCount_1 = ((NI)0);
	nimln_(1506);	currentSectionIdx_1 = getCurrentSectionIdx__libZcanvas_u32();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1507);	shouldRecenterAfterRender_1 = NIM_FALSE;
	{
		tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg layout_1;
		NI i_1;
		NI i_2;
		NI L_1;
		NI T30_;
		nimZeroMem((void*)(&layout_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
		i_1 = (NI)0;
		nimlf_(182, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_2 = ((NI)0);
		nimln_(183);		T30_ = (*canvasState__libZcanvas_u117).sections.len;
		L_1 = T30_;
		{
			nimln_(184);			while (1) {
				if (!(i_2 < L_1)) goto LA32;
				nimlf_(1510, "/workspaces/telestorie/lib/canvas.nim");				i_1 = i_2;
				nimln_(254);				if (i_2 < 0 || i_2 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_2,(*canvasState__libZcanvas_u117).sections.len-1); goto LA29_;
				}
				eqcopy___libZcanvas_u869((&layout_1), (&(*canvasState__libZcanvas_u117).sections.p->data[i_2]));
				{
					tyTuple__GZW9aA9aWhw50AbgdGq4sF7w tmpTuple_1;
					tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q links_1;
					NI screenX_1;
					NI TM__kUjodket9aV1BVUR0GC3cwA_74;
					NI screenY_1;
					NI TM__kUjodket9aV1BVUR0GC3cwA_75;
					NI TM__kUjodket9aV1BVUR0GC3cwA_76;
					NIM_BOOL isCurrent_1;
					NI T40_;
					tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* targetBuffer_1;
					NI visualWidth_1;
					NI visualHeight_1;
					NI previousWidth_1;
					NI previousHeight_1;
					nimZeroMem((void*)(&tmpTuple_1), sizeof(tyTuple__GZW9aA9aWhw50AbgdGq4sF7w));
					links_1.len = 0; links_1.p = NIM_NIL;
					nimln_(1511);					{
						NIM_BOOL T37_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_73;
						T37_ = (NIM_BOOL)0;
						T37_ = isRemoved__libZcanvas_u689(layout_1.section.title);
						if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
						if (!T37_) goto LA38_;
						nimln_(1512);						if (nimAddInt(removedCount_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_73)) { raiseOverflow(); goto LA34_;
						};
						removedCount_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_73);
						nimln_(772);						eqdestroy___libZcanvas_u3292(links_1);
						nimln_(1542);						eqdestroy___libZcanvas_u6180((&tmpTuple_1));
						nimln_(1513);						goto LA33;
					}
LA38_: ;
					nimln_(1518);					if ((((NI) (((NF)(layout_1.x) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.x) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.x) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA34_;
					}
					if (nimSubInt((((NI) (((NF)(layout_1.x) + (NF)(0.5))))), cameraX_1, &TM__kUjodket9aV1BVUR0GC3cwA_74)) { raiseOverflow(); goto LA34_;
					};
					screenX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_74);
					nimln_(1519);					if ((((NI) (((NF)(layout_1.y) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.y) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.y) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA34_;
					}
					if (nimSubInt((((NI) (((NF)(layout_1.y) + (NF)(0.5))))), cameraY_1, &TM__kUjodket9aV1BVUR0GC3cwA_75)) { raiseOverflow(); goto LA34_;
					};
					screenY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_75);
					nimln_(1528);					if (nimAddInt(renderedCount_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_76)) { raiseOverflow(); goto LA34_;
					};
					renderedCount_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_76);
					nimln_(1529);					T40_ = (NI)0;
					T40_ = getCurrentSectionIdx__libZcanvas_u32();
					if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
					isCurrent_1 = (layout_1.index == T40_);
					nimln_(1532);					targetBuffer_1 = buffer_p0;
					nimln_(1533);					{
						NIM_BOOL T43_;
						tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ* targetLayer_1;
						T43_ = (NIM_BOOL)0;
						T43_ = !((layout_1.layerName.len == 0));
						if (!(T43_)) goto LA44_;
						T43_ = !(((*canvasState__libZcanvas_u117).appState == 0));
LA44_: ;
						if (!T43_) goto LA45_;
						targetLayer_1 = NIM_NIL;
						nimln_(1535);						targetLayer_1 = getLayer__srcZlayers_u2166((*(*canvasState__libZcanvas_u117).appState), layout_1.layerName);
						if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
						nimln_(1536);						{
							tyObject_LayercolonObjectType___GgVqgNTBauiDGOm9bCEWiYQ* T51_;
							if (!(targetLayer_1 == 0)) goto LA49_;
							nimlf_(23, "/workspaces/telestorie/src/layers.nim");							nimlf_(1538, "/workspaces/telestorie/lib/canvas.nim");							T51_ = NIM_NIL;
							T51_ = addLayer__srcZlayers_u2140((*(*canvasState__libZcanvas_u117).appState), layout_1.layerName, layout_1.zIndex);
							if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___srcZlayers_u76(T51_); goto LA34_;}
							nimlf_(23, "/workspaces/telestorie/src/layers.nim");							eqsink___srcZlayers_u85(&targetLayer_1, T51_);
						}
LA49_: ;
						nimlf_(1539, "/workspaces/telestorie/lib/canvas.nim");						{
							if (!!((targetLayer_1 == 0))) goto LA54_;
							nimln_(1540);							targetBuffer_1 = (&(*targetLayer_1).buffer);
						}
LA54_: ;
						nimlf_(23, "/workspaces/telestorie/src/layers.nim");						eqdestroy___srcZlayers_u76(targetLayer_1);
					}
LA45_: ;
					nimlf_(1542, "/workspaces/telestorie/lib/canvas.nim");					renderSection__libZcanvas_u4813((&layout_1), screenX_1, screenY_1, targetBuffer_1, isCurrent_1, styleSheet_p3, (&tmpTuple_1));
					if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
					links_1 = tmpTuple_1.Field0;
					nimln_(772);					eqwasMoved___libZcanvas_u3289((&tmpTuple_1.Field0));
					nimln_(1542);					visualWidth_1 = tmpTuple_1.Field1;
					visualHeight_1 = tmpTuple_1.Field2;
					nimln_(1545);					if (i_1 < 0 || i_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA34_;
					}
					previousWidth_1 = (*canvasState__libZcanvas_u117).sections.p->data[i_1].actualVisualWidth;
					nimln_(1546);					if (i_1 < 0 || i_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA34_;
					}
					previousHeight_1 = (*canvasState__libZcanvas_u117).sections.p->data[i_1].actualVisualHeight;
					nimln_(1547);					if (i_1 < 0 || i_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA34_;
					}
					(*canvasState__libZcanvas_u117).sections.p->data[i_1].actualVisualWidth = visualWidth_1;
					nimln_(1548);					if (i_1 < 0 || i_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(i_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA34_;
					}
					(*canvasState__libZcanvas_u117).sections.p->data[i_1].actualVisualHeight = visualHeight_1;
					nimln_(1552);					{
						NI colontmpD_;
						tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw T60_;
						NIM_BOOL widthChanged_1;
						NIM_BOOL T61_;
						NIM_BOOL T62_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_365;
						NIM_BOOL heightChanged_1;
						NIM_BOOL T65_;
						NIM_BOOL T66_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_366;
						if (!isCurrent_1) goto LA58_;
						colontmpD_ = (NI)0;
						nimln_(772);						eqsink___libZcanvas_u3301((&(*canvasState__libZcanvas_u117).links), links_1);
						eqwasMoved___libZcanvas_u3289((&links_1));
						nimln_(1555);						T60_.x = screenX_1;
						T60_.y = screenY_1;
						nimln_(1558);						if ((((NI) (((NF)(layout_1.width) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.width) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.width) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA34_;
						}
						colontmpD_ = (((NI) (((NF)(layout_1.width) + (NF)(0.5)))));
						T60_.width = colontmpD_;
						T60_.height = visualHeight_1;
						(*canvasState__libZcanvas_u117).currentContentBounds = T60_;
						nimln_(1564);						T61_ = (NIM_BOOL)0;
						T62_ = (NIM_BOOL)0;
						T62_ = (previousWidth_1 == ((NI)0));
						if (!(T62_)) goto LA63_;
						T62_ = (((NI)0) < visualWidth_1);
LA63_: ;
						T61_ = T62_;
						if (T61_) goto LA64_;
						nimln_(1565);						if (nimSubInt(visualWidth_1, previousWidth_1, &TM__kUjodket9aV1BVUR0GC3cwA_365)) { raiseOverflow(); goto LA34_;
						};
						if ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_365) == (IL64(-9223372036854775807) - IL64(1))){ raiseOverflow(); goto LA34_;
						}
						T61_ = (((NI)2) < ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_365) > 0? ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_365)) : -((NI)(TM__kUjodket9aV1BVUR0GC3cwA_365))));
LA64_: ;
						widthChanged_1 = T61_;
						nimln_(1566);						T65_ = (NIM_BOOL)0;
						T66_ = (NIM_BOOL)0;
						T66_ = (previousHeight_1 == ((NI)0));
						if (!(T66_)) goto LA67_;
						T66_ = (((NI)0) < visualHeight_1);
LA67_: ;
						T65_ = T66_;
						if (T65_) goto LA68_;
						nimln_(1567);						if (nimSubInt(visualHeight_1, previousHeight_1, &TM__kUjodket9aV1BVUR0GC3cwA_366)) { raiseOverflow(); goto LA34_;
						};
						if ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_366) == (IL64(-9223372036854775807) - IL64(1))){ raiseOverflow(); goto LA34_;
						}
						T65_ = (((NI)2) < ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_366) > 0? ((NI)(TM__kUjodket9aV1BVUR0GC3cwA_366)) : -((NI)(TM__kUjodket9aV1BVUR0GC3cwA_366))));
LA68_: ;
						heightChanged_1 = T65_;
						nimln_(1569);						{
							NIM_BOOL T71_;
							T71_ = (NIM_BOOL)0;
							T71_ = widthChanged_1;
							if (T71_) goto LA72_;
							T71_ = heightChanged_1;
LA72_: ;
							if (!T71_) goto LA73_;
							nimln_(1571);							centerOnSection__libZcanvas_u146(layout_1.index, vw_1, vh_1);
							if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
						}
LA73_: ;
					}
LA58_: ;
					{
						LA34_:;
					}
					{
						nimln_(772);						eqdestroy___libZcanvas_u3292(links_1);
						nimln_(1542);						eqdestroy___libZcanvas_u6180((&tmpTuple_1));
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA29_;
				} LA33: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_2 += ((NI)1);
				nimln_(187);				{
					NI T79_;
					T79_ = (*canvasState__libZcanvas_u117).sections.len;
					if (!!((T79_ == L_1))) goto LA80_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_367);
					if (NIM_UNLIKELY(*nimErr_)) goto LA29_;
				}
LA80_: ;
			} LA32: ;
		}
		{
			LA29_:;
		}
		{
			nimlf_(254, "/workspaces/telestorie/lib/canvas.nim");			eqdestroy___libZcanvas_u866((&layout_1));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, canvasRender__libZcanvas_u7856)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
NIM_BOOL* nimErr_;
	nimfr_("canvasRender", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(1817);	{
		NIM_BOOL T3_;
		NIM_BOOL T4_;
		tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw styleSheet_1;
		tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw T10_;
		T3_ = (NIM_BOOL)0;
		T4_ = (NIM_BOOL)0;
		T4_ = !((canvasState__libZcanvas_u117 == 0));
		if (!(T4_)) goto LA5_;
		T4_ = !(((*canvasState__libZcanvas_u117).appState == 0));
LA5_: ;
		T3_ = T4_;
		if (!(T3_)) goto LA6_;
		T3_ = !(((*canvasState__libZcanvas_u117).buffer == 0));
LA6_: ;
		if (!T3_) goto LA7_;
		nimZeroMem((void*)(&styleSheet_1), sizeof(tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw));
		nimln_(1818);		gNiminiEnv__libZcanvas_u14 = ((void*) (env_p0));
		nimln_(1819);		{
			if (!!(((*canvasState__libZcanvas_u117).styleSheet == 0))) goto LA13_;
			nimlf_(281, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/collections/tables.nim");			eqcopy___libZstorie95themes_u2071((&styleSheet_1), (*(*canvasState__libZcanvas_u117).styleSheet));
		}
		goto LA11_;
LA13_: ;
		{
			nimlf_(1819, "/workspaces/telestorie/lib/canvas.nim");			nimln_(1820);			styleSheet_1 = initTable__libZstorie95themes_u2039(((NI)32));
			if (NIM_UNLIKELY(*nimErr_)) goto LA9_;
		}
LA11_: ;
		nimln_(1821);		canvasRender__libZcanvas_u6039((*canvasState__libZcanvas_u117).buffer, (*(*(*canvasState__libZcanvas_u117).appState)).termWidth, (*(*(*canvasState__libZcanvas_u117).appState)).termHeight, styleSheet_1);
		if (NIM_UNLIKELY(*nimErr_)) goto LA9_;
		{
			LA9_:;
		}
		{
			nimlf_(281, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/collections/tables.nim");			eqdestroy___libZstorie95themes_u2068((&styleSheet_1));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA7_: ;
	nimlf_(1822, "/workspaces/telestorie/lib/canvas.nim");	nimln_(1815);	nimln_(1822);	result = valNil__niminiZruntime_u1028();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NF, min__system_u1173)(NF x_p0, NF y_p1) {
	NF result;
	NF colontmpD_;
	NF colontmpD__2;
	colontmpD_ = (NF)0;
	colontmpD__2 = (NF)0;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (x_p0 <= y_p1);
		if (T3_) goto LA4_;
		T3_ = !((y_p1 == y_p1));
LA4_: ;
		if (!T3_) goto LA5_;
		colontmpD_ = x_p0;
		result = colontmpD_;
	}
	goto LA1_;
LA5_: ;
	{
		colontmpD__2 = y_p1;
		result = colontmpD__2;
	}
LA1_: ;
	return result;
}
static N_INLINE(NF, abs__pureZmath_u222)(NF x_p0) {
	NF result;
	result = (NF)0;
	result = fabs(x_p0);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, updateCamera__libZcanvas_u1447)(NF deltaTime_p0, NI viewportWidth_p1, NI viewportHeight_p2) {
	NF rawT_1;
	NF t_1;
	nimfr_("updateCamera", "/workspaces/telestorie/lib/canvas.nim");
{	nimln_(461);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(462);		goto BeforeRet_;
	}
LA3_: ;
	nimln_(464);	rawT_1 = min__system_u1173(1.0, ((NF)(deltaTime_p0) * (NF)(8.0)));
	nimln_(465);	t_1 = ((NF)(rawT_1) * (NF)(((NF)(2.0) - (NF)(rawT_1))));
	nimln_(466);	pluseq___pureZstrutils_u2621((&(*canvasState__libZcanvas_u117).camera.x), ((NF)(((NF)((*canvasState__libZcanvas_u117).camera.targetX) - (NF)((*canvasState__libZcanvas_u117).camera.x))) * (NF)(t_1)));
	nimln_(467);	pluseq___pureZstrutils_u2621((&(*canvasState__libZcanvas_u117).camera.y), ((NF)(((NF)((*canvasState__libZcanvas_u117).camera.targetY) - (NF)((*canvasState__libZcanvas_u117).camera.y))) * (NF)(t_1)));
	nimln_(470);	{
		NF T7_;
		T7_ = (NF)0;
		T7_ = abs__pureZmath_u222(((NF)((*canvasState__libZcanvas_u117).camera.targetX) - (NF)((*canvasState__libZcanvas_u117).camera.x)));
		if (!(T7_ < 0.5)) goto LA8_;
		nimln_(471);		(*canvasState__libZcanvas_u117).camera.x = (*canvasState__libZcanvas_u117).camera.targetX;
	}
LA8_: ;
	nimln_(472);	{
		NF T12_;
		T12_ = (NF)0;
		T12_ = abs__pureZmath_u222(((NF)((*canvasState__libZcanvas_u117).camera.targetY) - (NF)((*canvasState__libZcanvas_u117).camera.y)));
		if (!(T12_ < 0.5)) goto LA13_;
		nimln_(473);		(*canvasState__libZcanvas_u117).camera.y = (*canvasState__libZcanvas_u117).camera.targetY;
	}
LA13_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, canvasUpdate__libZcanvas_u6199)(NF deltaTime_p0) {
	NimStringV2 colontmpD_;
	NIM_BOOL mouseFocusEnabled_1;
	NIM_BOOL T6_;
	NimStringV2* T8_;
NIM_BOOL* nimErr_;
	nimfr_("canvasUpdate", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimln_(1575);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA4_;
		nimln_(1576);		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		goto BeforeRet_;
	}
LA4_: ;
	nimlf_(1578, "/workspaces/telestorie/lib/canvas.nim");	updateCamera__libZcanvas_u1447(deltaTime_p0, gViewportWidth__libZcanvas_u118, gViewportHeight__libZcanvas_u119);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1581);	T6_ = (NIM_BOOL)0;
	T6_ = hasKey__niminiZcodegen_u2028((*canvasState__libZcanvas_u117).frontMatter, TM__kUjodket9aV1BVUR0GC3cwA_373);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (!(T6_)) goto LA7_;
	nimln_(1582);	T8_ = (NimStringV2*)0;
	T8_ = X5BX5D___niminiZcodegen_u2098((&(*canvasState__libZcanvas_u117).frontMatter), TM__kUjodket9aV1BVUR0GC3cwA_374);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	colontmpD_ = nsuToLowerAsciiStr((*T8_));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T6_ = contains__stdZenumutils_u50(TM__kUjodket9aV1BVUR0GC3cwA_16, 3, colontmpD_);
LA7_: ;
	mouseFocusEnabled_1 = !(T6_);
	nimln_(1585);	{
		NIM_BOOL T11_;
		NIM_BOOL T12_;
		NI mouseX_1;
		NI mouseY_1;
		T11_ = (NIM_BOOL)0;
		T12_ = (NIM_BOOL)0;
		T12_ = mouseFocusEnabled_1;
		if (!(T12_)) goto LA13_;
		T12_ = !((*canvasState__libZcanvas_u117).presentationMode);
LA13_: ;
		T11_ = T12_;
		if (!(T11_)) goto LA14_;
		T11_ = !(((*canvasState__libZcanvas_u117).appState == 0));
LA14_: ;
		if (!T11_) goto LA15_;
		nimln_(1587);		mouseX_1 = (*(*(*canvasState__libZcanvas_u117).appState)).lastMouseX;
		nimln_(1588);		mouseY_1 = (*(*(*canvasState__libZcanvas_u117).appState)).lastMouseY;
		{
			tyObject_Link__6V5xLDIraXInP9am5HdL18g link_1;
			NI i_1;
			NI i_2;
			NI L_1;
			NI T19_;
			nimZeroMem((void*)(&link_1), sizeof(tyObject_Link__6V5xLDIraXInP9am5HdL18g));
			i_1 = (NI)0;
			nimlf_(182, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");			i_2 = ((NI)0);
			nimln_(183);			T19_ = (*canvasState__libZcanvas_u117).links.len;
			L_1 = T19_;
			{
				nimln_(184);				while (1) {
					if (!(i_2 < L_1)) goto LA21;
					nimlf_(1591, "/workspaces/telestorie/lib/canvas.nim");					i_1 = i_2;
					nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (i_2 < 0 || i_2 >= (*canvasState__libZcanvas_u117).links.len){ raiseIndexError2(i_2,(*canvasState__libZcanvas_u117).links.len-1); goto LA18_;
					}
					eqcopy___libZcanvas_u3361((&link_1), (&(*canvasState__libZcanvas_u117).links.p->data[i_2]));
					nimlf_(1592, "/workspaces/telestorie/lib/canvas.nim");					{
						NIM_BOOL T24_;
						NIM_BOOL T25_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_375;
						T24_ = (NIM_BOOL)0;
						T25_ = (NIM_BOOL)0;
						T25_ = (link_1.screenX <= mouseX_1);
						if (!(T25_)) goto LA26_;
						if (nimAddInt(link_1.screenX, link_1.width, &TM__kUjodket9aV1BVUR0GC3cwA_375)) { raiseOverflow(); goto LA18_;
						};
						T25_ = (mouseX_1 < (NI)(TM__kUjodket9aV1BVUR0GC3cwA_375));
LA26_: ;
						T24_ = T25_;
						if (!(T24_)) goto LA27_;
						nimln_(1593);						T24_ = (mouseY_1 == link_1.screenY);
LA27_: ;
						if (!T24_) goto LA28_;
						nimln_(1595);						{
							if (!!(((*canvasState__libZcanvas_u117).focusedLinkIdx == i_1))) goto LA32_;
							nimln_(1596);							(*canvasState__libZcanvas_u117).focusedLinkIdx = i_1;
						}
LA32_: ;
						nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						eqdestroy___libZcanvas_u3358((&link_1));
						nimlf_(1597, "/workspaces/telestorie/lib/canvas.nim");						goto LA17;
					}
LA28_: ;
					nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");					i_2 += ((NI)1);
					nimln_(187);					{
						NI T36_;
						T36_ = (*canvasState__libZcanvas_u117).links.len;
						if (!!((T36_ == L_1))) goto LA37_;
						failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_376);
						if (NIM_UNLIKELY(*nimErr_)) goto LA18_;
					}
LA37_: ;
				} LA21: ;
			}
			{
				LA18_:;
			}
			{
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				eqdestroy___libZcanvas_u3358((&link_1));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		} LA17: ;
	}
LA15_: ;
	{
		LA1_:;
	}
	{
		nimln_(394);		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, canvasUpdate__libZcanvas_u7889)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	NF colontmpD_;
	NF colontmpD__2;
	NF deltaTime_1;
NIM_BOOL* nimErr_;
	nimfr_("canvasUpdate", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	colontmpD_ = (NF)0;
	colontmpD__2 = (NF)0;
	nimlf_(1826, "/workspaces/telestorie/lib/canvas.nim");	{
		NI T3_;
		NF colontmpD__3;
		NF colontmpD__4;
		T3_ = args_p1.len;
		if (!(((NI)0) < T3_)) goto LA4_;
		colontmpD__3 = (NF)0;
		colontmpD__4 = (NF)0;
		nimln_(1827);		{
			if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
			}
			if (!((*args_p1.p->data[((NI)0)]).kind == ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)2))) goto LA8_;
			if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
			}
			colontmpD__3 = (*args_p1.p->data[((NI)0)]).f;
			colontmpD_ = colontmpD__3;
		}
		goto LA6_;
LA8_: ;
		{
			if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
			}
			colontmpD__4 = ((NF) ((*args_p1.p->data[((NI)0)]).i));
			colontmpD_ = colontmpD__4;
		}
LA6_: ;
		deltaTime_1 = colontmpD_;
	}
	goto LA1_;
LA4_: ;
	{
		nimln_(1829);		colontmpD__2 = 0.016;
		deltaTime_1 = colontmpD__2;
	}
LA1_: ;
	nimln_(1830);	canvasUpdate__libZcanvas_u6199(deltaTime_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1831);	nimln_(1824);	nimln_(1831);	result = valNil__niminiZruntime_u1028();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, canvasValueToInt__libZcanvas_u6506)(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* v_p0) {
	NI result;
	nimfr_("canvasValueToInt", "/workspaces/telestorie/lib/canvas.nim");
{	result = (NI)0;
	nimln_(1751);	switch ((*v_p0).kind) {
	case ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)1):
	{
		nimln_(1752);		nimln_(1750);		nimln_(1752);		result = (*v_p0).i;
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)2):
	{
		nimln_(1753);		nimln_(1750);		nimln_(1753);		if ((((NI) ((*v_p0).f))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) ((*v_p0).f))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) ((*v_p0).f)), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
		}
		result = (((NI) ((*v_p0).f)));
		goto BeforeRet_;
	}
	break;
	default:
	{
		nimln_(1754);		nimln_(1750);		nimln_(1754);		result = ((NI)0);
		goto BeforeRet_;
	}
	break;
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, getSectionLevel__libZcanvas_u2307)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* section_p0) {
	NI result;
	NimStringV2 title_1;
	NI level_1;
	NI pos_1;
	nimfr_("getSectionLevel", "/workspaces/telestorie/lib/canvas.nim");
{	title_1.len = 0; title_1.p = NIM_NIL;
	nimln_(593);	title_1 = (*section_p0).title;
	nimln_(594);	level_1 = ((NI)1);
	nimln_(595);	pos_1 = ((NI)0);
	{
		nimln_(596);		while (1) {
			NIM_BOOL T3_;
			NI TM__kUjodket9aV1BVUR0GC3cwA_384;
			NI TM__kUjodket9aV1BVUR0GC3cwA_385;
			T3_ = (NIM_BOOL)0;
			T3_ = (pos_1 < title_1.len);
			if (!(T3_)) goto LA4_;
			if (pos_1 < 0 || pos_1 >= title_1.len){ raiseIndexError2(pos_1,title_1.len-1); goto BeforeRet_;
			}
			T3_ = ((NU8)(title_1.p->data[pos_1]) == (NU8)(35));
LA4_: ;
			if (!T3_) goto LA2;
			nimln_(597);			if (nimAddInt(level_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_384)) { raiseOverflow(); goto BeforeRet_;
			};
			level_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_384);
			nimln_(598);			if (nimAddInt(pos_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_385)) { raiseOverflow(); goto BeforeRet_;
			};
			pos_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_385);
		} LA2: ;
	}
	nimln_(599);	nimln_(590);	nimln_(599);	result = level_1;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, getNextSectionAtLevel__libZcanvas_u2323)(NI currentIdx_p0, NI level_p1, NIM_BOOL forward_p2) {
	NI result;
	NI colontmpD_;
	NI colontmpD__2;
	NI step_1;
	NI idx_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_381;
NIM_BOOL* nimErr_;
	nimfr_("getNextSectionAtLevel", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	nimln_(606);	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (canvasState__libZcanvas_u117 == 0);
		if (T3_) goto LA4_;
		T3_ = (currentIdx_p0 < ((NI)0));
LA4_: ;
		if (!T3_) goto LA5_;
		nimln_(607);		nimln_(601);		nimln_(607);		result = ((NI)-1);
		goto BeforeRet_;
	}
LA5_: ;
	nimln_(609);	{
		if (!forward_p2) goto LA9_;
		colontmpD_ = ((NI)1);
		step_1 = colontmpD_;
	}
	goto LA7_;
LA9_: ;
	{
		colontmpD__2 = ((NI)-1);
		step_1 = colontmpD__2;
	}
LA7_: ;
	nimln_(610);	if (nimAddInt(currentIdx_p0, step_1, &TM__kUjodket9aV1BVUR0GC3cwA_381)) { raiseOverflow(); goto BeforeRet_;
	};
	idx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_381);
	{
		nimln_(612);		while (1) {
			NIM_BOOL T14_;
			NI T16_;
			T14_ = (NIM_BOOL)0;
			T14_ = (((NI)0) <= idx_1);
			if (!(T14_)) goto LA15_;
			T16_ = (*canvasState__libZcanvas_u117).sections.len;
			T14_ = (idx_1 < T16_);
LA15_: ;
			if (!T14_) goto LA13;
			{
				NI TM__kUjodket9aV1BVUR0GC3cwA_386;
				nimln_(614);				{
					NIM_BOOL T20_;
					NI TM__kUjodket9aV1BVUR0GC3cwA_382;
					T20_ = (NIM_BOOL)0;
					T20_ = (idx_1 == ((NI)0));
					if (!(T20_)) goto LA21_;
					if (((NI)0) < 0 || ((NI)0) >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(((NI)0),(*canvasState__libZcanvas_u117).sections.len-1); goto BeforeRet_;
					}
					T20_ = ((*canvasState__libZcanvas_u117).sections.p->data[((NI)0)].section.title.len == ((NI)0));
LA21_: ;
					if (!T20_) goto LA22_;
					nimln_(615);					if (nimAddInt(idx_1, step_1, &TM__kUjodket9aV1BVUR0GC3cwA_382)) { raiseOverflow(); goto BeforeRet_;
					};
					idx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_382);
					nimln_(616);					goto LA17;
				}
LA22_: ;
				nimln_(619);				{
					NI TM__kUjodket9aV1BVUR0GC3cwA_383;
					if (idx_1 < 0 || idx_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(idx_1,(*canvasState__libZcanvas_u117).sections.len-1); goto BeforeRet_;
					}
					if (!!((*canvasState__libZcanvas_u117).sections.p->data[idx_1].navigable)) goto LA26_;
					nimln_(620);					if (nimAddInt(idx_1, step_1, &TM__kUjodket9aV1BVUR0GC3cwA_383)) { raiseOverflow(); goto BeforeRet_;
					};
					idx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_383);
					nimln_(621);					goto LA17;
				}
LA26_: ;
				nimln_(623);				{
					NI T30_;
					if (idx_1 < 0 || idx_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(idx_1,(*canvasState__libZcanvas_u117).sections.len-1); goto BeforeRet_;
					}
					T30_ = (NI)0;
					T30_ = getSectionLevel__libZcanvas_u2307((&(*canvasState__libZcanvas_u117).sections.p->data[idx_1].section));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					if (!(T30_ == level_p1)) goto LA31_;
					nimln_(624);					nimln_(601);					nimln_(624);					result = idx_1;
					goto BeforeRet_;
				}
LA31_: ;
				nimln_(625);				if (nimAddInt(idx_1, step_1, &TM__kUjodket9aV1BVUR0GC3cwA_386)) { raiseOverflow(); goto BeforeRet_;
				};
				idx_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_386);
			} LA17: ;
		} LA13: ;
	}
	nimln_(627);	nimln_(601);	nimln_(627);	result = ((NI)-1);
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, executeLifecycleHooks__libZcanvas_u1094)(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ* section_p0, NimStringV2 lifecycle_p1) {
NIM_BOOL* nimErr_;
	nimfr_("executeLifecycleHooks", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimln_(338);	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (canvasState__libZcanvas_u117 == 0);
		if (T3_) goto LA4_;
		T3_ = ((*canvasState__libZcanvas_u117).executeCallback.ClP_0 == 0);
LA4_: ;
		if (!T3_) goto LA5_;
		nimln_(339);		goto BeforeRet_;
	}
LA5_: ;
	{
		tyObject_ContentBlock__GydJzwYQBr9aX1JqGLPpSJg* contentBlock_1;
		NI i_1;
		NI L_1;
		NI T8_;
		contentBlock_1 = (tyObject_ContentBlock__GydJzwYQBr9aX1JqGLPpSJg*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_1 = ((NI)0);
		nimln_(250);		T8_ = (*section_p0).blocks.len;
		L_1 = T8_;
		{
			nimln_(251);			while (1) {
				if (!(i_1 < L_1)) goto LA10;
				nimlf_(342, "/workspaces/telestorie/lib/canvas.nim");				if (i_1 < 0 || i_1 >= (*section_p0).blocks.len){ raiseIndexError2(i_1,(*section_p0).blocks.len-1); goto BeforeRet_;
				}
				contentBlock_1 = (&(*section_p0).blocks.p->data[i_1]);
				nimln_(343);				{
					tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA codeBlock_1;
					if (!((*contentBlock_1).kind == ((tyEnum_ContentBlockKind__sexMGjRLJGyT0WHEwkjKkg)1))) goto LA13_;
					nimZeroMem((void*)(&codeBlock_1), sizeof(tyObject_CodeBlock__2CQDyHJrvvarqbmdhrKliA));
					nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (!(((2 &((NU8)1<<((NU)(((*contentBlock_1).kind))&7U)))!=0))) 					{ raiseFieldErrorStr(TM__kUjodket9aV1BVUR0GC3cwA_387, dollar___libZstorie95types_u57((*contentBlock_1).kind)); goto LA15_;
					}
					eqcopy___libZstorie95md_u4512((&codeBlock_1), (&(*contentBlock_1)._kind_2.codeBlock));
					nimlf_(345, "/workspaces/telestorie/lib/canvas.nim");					{
						NIM_BOOL T20_;
						if (!eqStrings(codeBlock_1.lifecycle, lifecycle_p1)) goto LA18_;
						nimln_(347);						T20_ = (NIM_BOOL)0;
						T20_ = (*canvasState__libZcanvas_u117).executeCallback.ClE_0? (*canvasState__libZcanvas_u117).executeCallback.ClP_0((&codeBlock_1), lifecycle_p1, (*canvasState__libZcanvas_u117).executeCallback.ClE_0):((TM__kUjodket9aV1BVUR0GC3cwA_388)((*canvasState__libZcanvas_u117).executeCallback.ClP_0))((&codeBlock_1), lifecycle_p1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
						(void)(T20_);
					}
LA18_: ;
					{
						LA15_:;
					}
					{
						nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						eqdestroy___libZstorie95md_u4509((&codeBlock_1));
					}
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA13_: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_1 += ((NI)1);
				nimln_(254);				{
					NI T25_;
					T25_ = (*section_p0).blocks.len;
					if (!!((T25_ == L_1))) goto LA26_;
					failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_389);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA26_: ;
			} LA10: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, navigateToSection__libZcanvas_u1114)(NI sectionIdx_p0) {
	NI previousIdx_1;
NIM_BOOL* nimErr_;
	nimfr_("navigateToSection", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(351, "/workspaces/telestorie/lib/canvas.nim");	{
		NIM_BOOL T3_;
		NIM_BOOL T4_;
		NI T7_;
		T3_ = (NIM_BOOL)0;
		T4_ = (NIM_BOOL)0;
		T4_ = (canvasState__libZcanvas_u117 == 0);
		if (T4_) goto LA5_;
		T4_ = (sectionIdx_p0 < ((NI)0));
LA5_: ;
		T3_ = T4_;
		if (T3_) goto LA6_;
		T7_ = (*canvasState__libZcanvas_u117).sections.len;
		T3_ = (T7_ <= sectionIdx_p0);
LA6_: ;
		if (!T3_) goto LA8_;
		nimln_(352);		goto BeforeRet_;
	}
LA8_: ;
	nimln_(354);	previousIdx_1 = getCurrentSectionIdx__libZcanvas_u32();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(357);	{
		NIM_BOOL T12_;
		NIM_BOOL T13_;
		NI T15_;
		tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ previousSection_1;
		T12_ = (NIM_BOOL)0;
		T13_ = (NIM_BOOL)0;
		T13_ = (((NI)0) <= previousIdx_1);
		if (!(T13_)) goto LA14_;
		T15_ = (*canvasState__libZcanvas_u117).sections.len;
		T13_ = (previousIdx_1 < T15_);
LA14_: ;
		T12_ = T13_;
		if (!(T12_)) goto LA16_;
		T12_ = !((previousIdx_1 == sectionIdx_p0));
LA16_: ;
		if (!T12_) goto LA17_;
		nimZeroMem((void*)(&previousSection_1), sizeof(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ));
		nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (previousIdx_1 < 0 || previousIdx_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(previousIdx_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA19_;
		}
		eqcopy___libZstorie95md_u4902((&previousSection_1), (&(*canvasState__libZcanvas_u117).sections.p->data[previousIdx_1].section));
		nimlf_(359, "/workspaces/telestorie/lib/canvas.nim");		executeLifecycleHooks__libZcanvas_u1094((&previousSection_1), TM__kUjodket9aV1BVUR0GC3cwA_391);
		if (NIM_UNLIKELY(*nimErr_)) goto LA19_;
		nimln_(362);		{
			NIM_BOOL T22_;
			NimStringV2 removeValue_1;
			NimStringV2* T26_;
			T22_ = (NIM_BOOL)0;
			T22_ = hasKey__niminiZcodegen_u2028(previousSection_1.metadata, TM__kUjodket9aV1BVUR0GC3cwA_393);
			if (NIM_UNLIKELY(*nimErr_)) goto LA19_;
			if (!T22_) goto LA23_;
			removeValue_1.len = 0; removeValue_1.p = NIM_NIL;
			nimln_(363);			T26_ = (NimStringV2*)0;
			T26_ = X5BX5D___libZstorie95md_u212((&previousSection_1.metadata), TM__kUjodket9aV1BVUR0GC3cwA_394);
			if (NIM_UNLIKELY(*nimErr_)) goto LA25_;
			removeValue_1 = nsuToLowerAsciiStr((*T26_));
			if (NIM_UNLIKELY(*nimErr_)) goto LA25_;
			nimln_(364);			{
				NIM_BOOL T29_;
				T29_ = (NIM_BOOL)0;
				T29_ = eqStrings(removeValue_1, TM__kUjodket9aV1BVUR0GC3cwA_395);
				if (T29_) goto LA30_;
				T29_ = eqStrings(removeValue_1, TM__kUjodket9aV1BVUR0GC3cwA_396);
LA30_: ;
				if (!T29_) goto LA31_;
				nimln_(365);				removeSection__libZcanvas_u748(previousSection_1.title);
				if (NIM_UNLIKELY(*nimErr_)) goto LA25_;
			}
LA31_: ;
			{
				LA25_:;
			}
			{
				nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (removeValue_1.p && !(removeValue_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(removeValue_1.p);
}
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA19_;
		}
LA23_: ;
		{
			LA19_:;
		}
		{
			nimln_(934);			eqdestroy___libZstorie95md_u4899((&previousSection_1));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA17_: ;
	nimlf_(368, "/workspaces/telestorie/lib/canvas.nim");	{
		NIM_BOOL T39_;
		NIM_BOOL T40_;
		NI T43_;
		T39_ = (NIM_BOOL)0;
		T40_ = (NIM_BOOL)0;
		T40_ = !((gSectionMgr__libZsection95manager_u585 == 0));
		if (!(T40_)) goto LA41_;
		T40_ = (((NI)0) <= sectionIdx_p0);
LA41_: ;
		T39_ = T40_;
		if (!(T39_)) goto LA42_;
		T43_ = (*gSectionMgr__libZsection95manager_u585).sections.len;
		T39_ = (sectionIdx_p0 < T43_);
LA42_: ;
		if (!T39_) goto LA44_;
		nimln_(369);		(*gSectionMgr__libZsection95manager_u585).currentIndex = sectionIdx_p0;
	}
LA44_: ;
	nimln_(371);	(*canvasState__libZcanvas_u117).focusedLinkIdx = ((NI)0);
	nimln_(376);	{
		NIM_BOOL T48_;
		NI T50_;
		tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ newSection_1;
		T48_ = (NIM_BOOL)0;
		T48_ = (((NI)0) <= sectionIdx_p0);
		if (!(T48_)) goto LA49_;
		T50_ = (*canvasState__libZcanvas_u117).sections.len;
		T48_ = (sectionIdx_p0 < T50_);
LA49_: ;
		if (!T48_) goto LA51_;
		nimZeroMem((void*)(&newSection_1), sizeof(tyObject_Section__o3bVcR0ckrLfqUgDvZlqHQ));
		nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (sectionIdx_p0 < 0 || sectionIdx_p0 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(sectionIdx_p0,(*canvasState__libZcanvas_u117).sections.len-1); goto LA53_;
		}
		eqcopy___libZstorie95md_u4902((&newSection_1), (&(*canvasState__libZcanvas_u117).sections.p->data[sectionIdx_p0].section));
		nimlf_(378, "/workspaces/telestorie/lib/canvas.nim");		executeLifecycleHooks__libZcanvas_u1094((&newSection_1), TM__kUjodket9aV1BVUR0GC3cwA_397);
		if (NIM_UNLIKELY(*nimErr_)) goto LA53_;
		{
			LA53_:;
		}
		{
			nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			eqdestroy___libZstorie95md_u4899((&newSection_1));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA51_: ;
	nimlf_(383, "/workspaces/telestorie/lib/canvas.nim");	{
		NIM_BOOL T58_;
		T58_ = (NIM_BOOL)0;
		T58_ = (((NI)0) < gViewportWidth__libZcanvas_u118);
		if (!(T58_)) goto LA59_;
		T58_ = (((NI)0) < gViewportHeight__libZcanvas_u119);
LA59_: ;
		if (!T58_) goto LA60_;
		nimln_(384);		centerOnSection__libZcanvas_u146(sectionIdx_p0, gViewportWidth__libZcanvas_u118, gViewportHeight__libZcanvas_u119);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA60_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, canvasHandleKey__libZcanvas_u6414)(NI keyCode_p0, tySet_tyUInt8__k3HXouOuhqAKq0dx450lXQ mods_p1) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
	nimfr_("canvasHandleKey", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimln_(1602);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(1603);		nimln_(1599);		nimln_(1603);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA3_: ;
	nimln_(1615);	{
		NI currentIdx_1;
		if (!(*canvasState__libZcanvas_u117).presentationMode) goto LA7_;
		nimln_(1616);		currentIdx_1 = getCurrentSectionIdx__libZcanvas_u32();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(1617);		switch (keyCode_p0) {
		case ((NI)1002):
		{
			NI prevIdx_1;
			nimln_(1620);			prevIdx_1 = getNextSectionAtLevel__libZcanvas_u2323(currentIdx_1, ((NI)1), NIM_FALSE);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimln_(1621);			{
				if (!(((NI)0) <= prevIdx_1)) goto LA12_;
				nimln_(1622);				navigateToSection__libZcanvas_u1114(prevIdx_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(1623);				nimln_(1599);				nimln_(1623);				result = NIM_TRUE;
				goto BeforeRet_;
			}
LA12_: ;
		}
		break;
		case ((NI)1003):
		{
			NI nextIdx_1;
			nimln_(1627);			nextIdx_1 = getNextSectionAtLevel__libZcanvas_u2323(currentIdx_1, ((NI)1), NIM_TRUE);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimln_(1628);			{
				if (!(((NI)0) <= nextIdx_1)) goto LA17_;
				nimln_(1629);				navigateToSection__libZcanvas_u1114(nextIdx_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(1630);				nimln_(1599);				nimln_(1630);				result = NIM_TRUE;
				goto BeforeRet_;
			}
LA17_: ;
		}
		break;
		case ((NI)1000):
		{
			{
				NI level_1;
				NI res_1;
				level_1 = (NI)0;
				nimlf_(96, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				res_1 = ((NI)2);
				{
					nimln_(97);					while (1) {
						NI prevIdx_2;
						NI TM__kUjodket9aV1BVUR0GC3cwA_398;
						if (!(res_1 <= ((NI)6))) goto LA22;
						nimlf_(1635, "/workspaces/telestorie/lib/canvas.nim");						level_1 = ((NI) (res_1));
						nimln_(1636);						prevIdx_2 = getNextSectionAtLevel__libZcanvas_u2323(currentIdx_1, level_1, NIM_FALSE);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						nimln_(1637);						{
							if (!(((NI)0) <= prevIdx_2)) goto LA25_;
							nimln_(1638);							navigateToSection__libZcanvas_u1114(prevIdx_2);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							nimln_(1639);							nimln_(1599);							nimln_(1639);							result = NIM_TRUE;
							goto BeforeRet_;
						}
LA25_: ;
						nimlf_(102, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");						if (nimAddInt(res_1, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_398)) { raiseOverflow(); goto BeforeRet_;
						};
						res_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_398);
					} LA22: ;
				}
			}
			nimlf_(1640, "/workspaces/telestorie/lib/canvas.nim");			nimln_(1599);			nimln_(1640);			result = NIM_FALSE;
			goto BeforeRet_;
		}
		break;
		case ((NI)1001):
		{
			{
				NI level_2;
				NI res_2;
				level_2 = (NI)0;
				nimlf_(96, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				res_2 = ((NI)2);
				{
					nimln_(97);					while (1) {
						NI nextIdx_2;
						NI TM__kUjodket9aV1BVUR0GC3cwA_399;
						if (!(res_2 <= ((NI)6))) goto LA30;
						nimlf_(1644, "/workspaces/telestorie/lib/canvas.nim");						level_2 = ((NI) (res_2));
						nimln_(1645);						nextIdx_2 = getNextSectionAtLevel__libZcanvas_u2323(currentIdx_1, level_2, NIM_TRUE);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						nimln_(1646);						{
							if (!(((NI)0) <= nextIdx_2)) goto LA33_;
							nimln_(1647);							navigateToSection__libZcanvas_u1114(nextIdx_2);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							nimln_(1648);							nimln_(1599);							nimln_(1648);							result = NIM_TRUE;
							goto BeforeRet_;
						}
LA33_: ;
						nimlf_(102, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");						if (nimAddInt(res_2, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_399)) { raiseOverflow(); goto BeforeRet_;
						};
						res_2 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_399);
					} LA30: ;
				}
			}
			nimlf_(1649, "/workspaces/telestorie/lib/canvas.nim");			nimln_(1599);			nimln_(1649);			result = NIM_FALSE;
			goto BeforeRet_;
		}
		break;
		default:
		{
			nimln_(1652);			nimln_(1599);			nimln_(1652);			result = NIM_FALSE;
			goto BeforeRet_;
		}
		break;
		}
	}
	goto LA5_;
LA7_: ;
	{
		nimln_(1656);		switch (keyCode_p0) {
		case ((NI)9):
		case ((NI)1003):
		case ((NI)1001):
		{
			nimln_(1659);			{
				NI T40_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_400;
				NI T43_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_401;
				T40_ = (*canvasState__libZcanvas_u117).links.len;
				if (!(((NI)0) < T40_)) goto LA41_;
				nimln_(1660);				if (nimAddInt((*canvasState__libZcanvas_u117).focusedLinkIdx, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_400)) { raiseOverflow(); goto BeforeRet_;
				};
				T43_ = (*canvasState__libZcanvas_u117).links.len;
				if (T43_ == 0){ raiseDivByZero(); goto BeforeRet_;
				}
				if (nimModInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_400), T43_, &TM__kUjodket9aV1BVUR0GC3cwA_401)) { raiseOverflow(); goto BeforeRet_;
				};
				(*canvasState__libZcanvas_u117).focusedLinkIdx = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_401);
				nimln_(1661);				nimln_(1599);				nimln_(1661);				result = NIM_TRUE;
				goto BeforeRet_;
			}
LA41_: ;
		}
		break;
		case ((NI)1002):
		case ((NI)1000):
		{
			nimln_(1665);			{
				NI T47_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_402;
				NI T50_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_403;
				NI T51_;
				NI TM__kUjodket9aV1BVUR0GC3cwA_404;
				T47_ = (*canvasState__libZcanvas_u117).links.len;
				if (!(((NI)0) < T47_)) goto LA48_;
				nimln_(1666);				if (nimSubInt((*canvasState__libZcanvas_u117).focusedLinkIdx, ((NI)1), &TM__kUjodket9aV1BVUR0GC3cwA_402)) { raiseOverflow(); goto BeforeRet_;
				};
				T50_ = (*canvasState__libZcanvas_u117).links.len;
				if (nimAddInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_402), T50_, &TM__kUjodket9aV1BVUR0GC3cwA_403)) { raiseOverflow(); goto BeforeRet_;
				};
				T51_ = (*canvasState__libZcanvas_u117).links.len;
				if (T51_ == 0){ raiseDivByZero(); goto BeforeRet_;
				}
				if (nimModInt((NI)(TM__kUjodket9aV1BVUR0GC3cwA_403), T51_, &TM__kUjodket9aV1BVUR0GC3cwA_404)) { raiseOverflow(); goto BeforeRet_;
				};
				(*canvasState__libZcanvas_u117).focusedLinkIdx = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_404);
				nimln_(1667);				nimln_(1599);				nimln_(1667);				result = NIM_TRUE;
				goto BeforeRet_;
			}
LA48_: ;
		}
		break;
		case ((NI)13):
		{
			nimln_(1671);			{
				NIM_BOOL T55_;
				NI T56_;
				NI T58_;
				tyObject_Link__6V5xLDIraXInP9am5HdL18g link_1;
				tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg targetSection_1;
				T55_ = (NIM_BOOL)0;
				T56_ = (*canvasState__libZcanvas_u117).links.len;
				T55_ = (((NI)0) < T56_);
				if (!(T55_)) goto LA57_;
				T58_ = (*canvasState__libZcanvas_u117).links.len;
				T55_ = ((*canvasState__libZcanvas_u117).focusedLinkIdx < T58_);
LA57_: ;
				if (!T55_) goto LA59_;
				nimZeroMem((void*)(&link_1), sizeof(tyObject_Link__6V5xLDIraXInP9am5HdL18g));
				nimZeroMem((void*)(&targetSection_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if ((*canvasState__libZcanvas_u117).focusedLinkIdx < 0 || (*canvasState__libZcanvas_u117).focusedLinkIdx >= (*canvasState__libZcanvas_u117).links.len){ raiseIndexError2((*canvasState__libZcanvas_u117).focusedLinkIdx,(*canvasState__libZcanvas_u117).links.len-1); goto LA61_;
				}
				eqcopy___libZcanvas_u3361((&link_1), (&(*canvasState__libZcanvas_u117).links.p->data[(*canvasState__libZcanvas_u117).focusedLinkIdx]));
				nimlf_(1673, "/workspaces/telestorie/lib/canvas.nim");				findSectionByReference__libZcanvas_u800(link_1.target, (&targetSection_1));
				if (NIM_UNLIKELY(*nimErr_)) goto LA61_;
				nimln_(1674);				{
					NIM_BOOL T64_;
					T64_ = (NIM_BOOL)0;
					T64_ = !((targetSection_1.section.id.len == 0));
					if (!(T64_)) goto LA65_;
					T64_ = targetSection_1.navigable;
LA65_: ;
					if (!T64_) goto LA66_;
					nimln_(1675);					navigateToSection__libZcanvas_u1114(targetSection_1.index);
					if (NIM_UNLIKELY(*nimErr_)) goto LA61_;
					nimln_(1676);					nimln_(1599);					nimln_(1676);					result = NIM_TRUE;
					nimln_(254);					eqdestroy___libZcanvas_u866((&targetSection_1));
					nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqdestroy___libZcanvas_u3358((&link_1));
					goto BeforeRet_;
				}
LA66_: ;
				{
					LA61_:;
				}
				{
					nimlf_(254, "/workspaces/telestorie/lib/canvas.nim");					eqdestroy___libZcanvas_u866((&targetSection_1));
					nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqdestroy___libZcanvas_u3358((&link_1));
				}
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
LA59_: ;
		}
		break;
		case ((NI)49) ... ((NI)57):
		{
			NI linkNum_1;
			NI TM__kUjodket9aV1BVUR0GC3cwA_405;
			nimlf_(1680, "/workspaces/telestorie/lib/canvas.nim");			if (nimSubInt(keyCode_p0, ((NI)49), &TM__kUjodket9aV1BVUR0GC3cwA_405)) { raiseOverflow(); goto BeforeRet_;
			};
			linkNum_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_405);
			nimln_(1681);			{
				NI T73_;
				tyObject_Link__6V5xLDIraXInP9am5HdL18g link_2;
				tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg targetSection_2;
				T73_ = (*canvasState__libZcanvas_u117).links.len;
				if (!(linkNum_1 < T73_)) goto LA74_;
				nimZeroMem((void*)(&link_2), sizeof(tyObject_Link__6V5xLDIraXInP9am5HdL18g));
				nimZeroMem((void*)(&targetSection_2), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
				nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (linkNum_1 < 0 || linkNum_1 >= (*canvasState__libZcanvas_u117).links.len){ raiseIndexError2(linkNum_1,(*canvasState__libZcanvas_u117).links.len-1); goto LA76_;
				}
				eqcopy___libZcanvas_u3361((&link_2), (&(*canvasState__libZcanvas_u117).links.p->data[linkNum_1]));
				nimlf_(1683, "/workspaces/telestorie/lib/canvas.nim");				findSectionByReference__libZcanvas_u800(link_2.target, (&targetSection_2));
				if (NIM_UNLIKELY(*nimErr_)) goto LA76_;
				nimln_(1684);				{
					NIM_BOOL T79_;
					T79_ = (NIM_BOOL)0;
					T79_ = !((targetSection_2.section.id.len == 0));
					if (!(T79_)) goto LA80_;
					T79_ = targetSection_2.navigable;
LA80_: ;
					if (!T79_) goto LA81_;
					nimln_(1685);					navigateToSection__libZcanvas_u1114(targetSection_2.index);
					if (NIM_UNLIKELY(*nimErr_)) goto LA76_;
					nimln_(1686);					nimln_(1599);					nimln_(1686);					result = NIM_TRUE;
					nimln_(254);					eqdestroy___libZcanvas_u866((&targetSection_2));
					nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqdestroy___libZcanvas_u3358((&link_2));
					goto BeforeRet_;
				}
LA81_: ;
				{
					LA76_:;
				}
				{
					nimlf_(254, "/workspaces/telestorie/lib/canvas.nim");					eqdestroy___libZcanvas_u866((&targetSection_2));
					nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					eqdestroy___libZcanvas_u3358((&link_2));
				}
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
LA74_: ;
		}
		break;
		default:
		{
		}
		break;
		}
	}
LA5_: ;
	nimlf_(1691, "/workspaces/telestorie/lib/canvas.nim");	nimln_(1599);	nimln_(1691);	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, canvasHandleKey__libZcanvas_u7901)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	NI colontmpD_;
	NI colontmpD__2;
	NI keyCode_1;
	NI mods_1;
	tySet_tyUInt8__k3HXouOuhqAKq0dx450lXQ modSet_1;
	NIM_BOOL T24_;
NIM_BOOL* nimErr_;
	nimfr_("canvasHandleKey", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	nimln_(1836);	{
		NI T3_;
		T3_ = args_p1.len;
		if (!(T3_ == ((NI)0))) goto LA4_;
		nimln_(1837);		nimln_(1833);		nimln_(1837);		result = valBool__niminiZruntime_u1092(NIM_FALSE);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(1838);	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
	}
	keyCode_1 = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)0)]);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1839);	{
		NI T8_;
		T8_ = args_p1.len;
		if (!(((NI)1) < T8_)) goto LA9_;
		if (((NI)1) < 0 || ((NI)1) >= args_p1.len){ raiseIndexError2(((NI)1),args_p1.len-1); goto BeforeRet_;
		}
		colontmpD_ = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)1)]);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		mods_1 = colontmpD_;
	}
	goto LA6_;
LA9_: ;
	{
		colontmpD__2 = ((NI)0);
		mods_1 = colontmpD__2;
	}
LA6_: ;
	nimZeroMem((void*)modSet_1, sizeof(tySet_tyUInt8__k3HXouOuhqAKq0dx450lXQ));
	nimln_(1841);	nimZeroMem(modSet_1, sizeof(tySet_tyUInt8__k3HXouOuhqAKq0dx450lXQ));
	nimln_(1842);	{
		if (!!(((NI)(mods_1 & ((NI)1)) == ((NI)0)))) goto LA14_;
		modSet_1[(NU)((((NU8)0)))>>3] |=(1U<<((((NU8)0))&7U));
	}
LA14_: ;
	nimln_(1843);	{
		if (!!(((NI)(mods_1 & ((NI)2)) == ((NI)0)))) goto LA18_;
		modSet_1[(NU)((((NU8)1)))>>3] |=(1U<<((((NU8)1))&7U));
	}
LA18_: ;
	nimln_(1844);	{
		if (!!(((NI)(mods_1 & ((NI)4)) == ((NI)0)))) goto LA22_;
		modSet_1[(NU)((((NU8)2)))>>3] |=(1U<<((((NU8)2))&7U));
	}
LA22_: ;
	nimln_(1845);	nimln_(1833);	nimln_(1845);	T24_ = (NIM_BOOL)0;
	T24_ = canvasHandleKey__libZcanvas_u6414(keyCode_1, modSet_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = valBool__niminiZruntime_u1092(T24_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, canvasHandleMouse__libZcanvas_u6480)(NI mouseX_p0, NI mouseY_p1, NI button_p2, NIM_BOOL isDown_p3) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
	nimfr_("canvasHandleMouse", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimln_(1696);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(1697);		nimln_(1693);		nimln_(1697);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA3_: ;
	nimln_(1700);	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = !((button_p2 == ((NI)0)));
		if (T7_) goto LA8_;
		T7_ = isDown_p3;
LA8_: ;
		if (!T7_) goto LA9_;
		nimln_(1701);		nimln_(1693);		nimln_(1701);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA9_: ;
	nimln_(1704);	{
		NI currentIdx_1;
		NI halfWidth_1;
		if (!(*canvasState__libZcanvas_u117).presentationMode) goto LA13_;
		nimln_(1705);		currentIdx_1 = getCurrentSectionIdx__libZcanvas_u32();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(1707);		halfWidth_1 = (NI)((gViewportWidth__libZcanvas_u118) / (((NI)2)));
		nimln_(1709);		{
			NI prevIdx_1;
			if (!(mouseX_p0 < halfWidth_1)) goto LA17_;
			nimln_(1711);			prevIdx_1 = getNextSectionAtLevel__libZcanvas_u2323(currentIdx_1, ((NI)1), NIM_FALSE);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimln_(1712);			{
				if (!(((NI)0) <= prevIdx_1)) goto LA21_;
				nimln_(1713);				navigateToSection__libZcanvas_u1114(prevIdx_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(1714);				nimln_(1693);				nimln_(1714);				result = NIM_TRUE;
				goto BeforeRet_;
			}
LA21_: ;
		}
		goto LA15_;
LA17_: ;
		{
			NI nextIdx_1;
			nimln_(1717);			nextIdx_1 = getNextSectionAtLevel__libZcanvas_u2323(currentIdx_1, ((NI)1), NIM_TRUE);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimln_(1718);			{
				if (!(((NI)0) <= nextIdx_1)) goto LA26_;
				nimln_(1719);				navigateToSection__libZcanvas_u1114(nextIdx_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(1720);				nimln_(1693);				nimln_(1720);				result = NIM_TRUE;
				goto BeforeRet_;
			}
LA26_: ;
		}
LA15_: ;
		nimln_(1722);		nimln_(1693);		nimln_(1722);		result = NIM_FALSE;
		goto BeforeRet_;
	}
	goto LA11_;
LA13_: ;
	{
		{
			tyObject_Link__6V5xLDIraXInP9am5HdL18g* link_1;
			NI i_1;
			NI L_1;
			NI T30_;
			link_1 = (tyObject_Link__6V5xLDIraXInP9am5HdL18g*)0;
			nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");			i_1 = ((NI)0);
			nimln_(250);			T30_ = (*canvasState__libZcanvas_u117).links.len;
			L_1 = T30_;
			{
				nimln_(251);				while (1) {
					if (!(i_1 < L_1)) goto LA32;
					nimlf_(1727, "/workspaces/telestorie/lib/canvas.nim");					if (i_1 < 0 || i_1 >= (*canvasState__libZcanvas_u117).links.len){ raiseIndexError2(i_1,(*canvasState__libZcanvas_u117).links.len-1); goto BeforeRet_;
					}
					link_1 = (&(*canvasState__libZcanvas_u117).links.p->data[i_1]);
					nimln_(1728);					{
						NIM_BOOL T35_;
						NIM_BOOL T36_;
						NI TM__kUjodket9aV1BVUR0GC3cwA_410;
						tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg targetSection_1;
						T35_ = (NIM_BOOL)0;
						T36_ = (NIM_BOOL)0;
						T36_ = ((*link_1).screenX <= mouseX_p0);
						if (!(T36_)) goto LA37_;
						if (nimAddInt((*link_1).screenX, (*link_1).width, &TM__kUjodket9aV1BVUR0GC3cwA_410)) { raiseOverflow(); goto BeforeRet_;
						};
						T36_ = (mouseX_p0 < (NI)(TM__kUjodket9aV1BVUR0GC3cwA_410));
LA37_: ;
						T35_ = T36_;
						if (!(T35_)) goto LA38_;
						nimln_(1729);						T35_ = (mouseY_p1 == (*link_1).screenY);
LA38_: ;
						if (!T35_) goto LA39_;
						nimZeroMem((void*)(&targetSection_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
						nimln_(1731);						findSectionByReference__libZcanvas_u800((*link_1).target, (&targetSection_1));
						if (NIM_UNLIKELY(*nimErr_)) goto LA41_;
						nimln_(1732);						{
							NIM_BOOL T44_;
							T44_ = (NIM_BOOL)0;
							T44_ = !((targetSection_1.section.id.len == 0));
							if (!(T44_)) goto LA45_;
							T44_ = targetSection_1.navigable;
LA45_: ;
							if (!T44_) goto LA46_;
							nimln_(1733);							navigateToSection__libZcanvas_u1114(targetSection_1.index);
							if (NIM_UNLIKELY(*nimErr_)) goto LA41_;
							nimln_(1734);							nimln_(1693);							nimln_(1734);							result = NIM_TRUE;
							nimln_(254);							eqdestroy___libZcanvas_u866((&targetSection_1));
							goto BeforeRet_;
						}
LA46_: ;
						{
							LA41_:;
						}
						{
							eqdestroy___libZcanvas_u866((&targetSection_1));
						}
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
LA39_: ;
					nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");					i_1 += ((NI)1);
					nimln_(254);					{
						NI T52_;
						T52_ = (*canvasState__libZcanvas_u117).links.len;
						if (!!((T52_ == L_1))) goto LA53_;
						failedAssertImpl__stdZassertions_u234(TM__kUjodket9aV1BVUR0GC3cwA_411);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
LA53_: ;
				} LA32: ;
			}
		}
	}
LA11_: ;
	nimlf_(1736, "/workspaces/telestorie/lib/canvas.nim");	nimln_(1693);	nimln_(1736);	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, canvasHandleMouse__libZcanvas_u7926)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	NIM_BOOL colontmpD_;
	NIM_BOOL colontmpD__2;
	NI x_1;
	NI y_1;
	NI button_1;
	NIM_BOOL isDown_1;
	NIM_BOOL T12_;
NIM_BOOL* nimErr_;
	nimfr_("canvasHandleMouse", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	colontmpD_ = (NIM_BOOL)0;
	colontmpD__2 = (NIM_BOOL)0;
	nimln_(1850);	{
		NI T3_;
		T3_ = args_p1.len;
		if (!(T3_ < ((NI)4))) goto LA4_;
		nimln_(1851);		nimln_(1847);		nimln_(1851);		result = valBool__niminiZruntime_u1092(NIM_FALSE);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(1852);	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
	}
	x_1 = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)0)]);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1853);	if (((NI)1) < 0 || ((NI)1) >= args_p1.len){ raiseIndexError2(((NI)1),args_p1.len-1); goto BeforeRet_;
	}
	y_1 = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)1)]);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1854);	if (((NI)2) < 0 || ((NI)2) >= args_p1.len){ raiseIndexError2(((NI)2),args_p1.len-1); goto BeforeRet_;
	}
	button_1 = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)2)]);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1855);	{
		if (((NI)3) < 0 || ((NI)3) >= args_p1.len){ raiseIndexError2(((NI)3),args_p1.len-1); goto BeforeRet_;
		}
		if (!((*args_p1.p->data[((NI)3)]).kind == ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)3))) goto LA8_;
		if (((NI)3) < 0 || ((NI)3) >= args_p1.len){ raiseIndexError2(((NI)3),args_p1.len-1); goto BeforeRet_;
		}
		colontmpD_ = (*args_p1.p->data[((NI)3)]).b;
		isDown_1 = colontmpD_;
	}
	goto LA6_;
LA8_: ;
	{
		NI T11_;
		if (((NI)3) < 0 || ((NI)3) >= args_p1.len){ raiseIndexError2(((NI)3),args_p1.len-1); goto BeforeRet_;
		}
		T11_ = (NI)0;
		T11_ = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)3)]);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		colontmpD__2 = !((T11_ == ((NI)0)));
		isDown_1 = colontmpD__2;
	}
LA6_: ;
	nimln_(1856);	nimln_(1847);	nimln_(1856);	T12_ = (NIM_BOOL)0;
	T12_ = canvasHandleMouse__libZcanvas_u6480(x_1, y_1, button_1, isDown_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = valBool__niminiZruntime_u1092(T12_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, getContentBounds__libZcanvas_u8201)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	tyObject_Table__Kkv168EwyeC2mcswHBvZ1A colontmpD_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T6_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T7_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T8_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T9_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
	nimfr_("getContentBounds", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A));
	nimln_(1883);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA4_;
		nimln_(1884);		nimln_(1879);		nimln_(1884);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimlf_(1886, "/workspaces/telestorie/lib/canvas.nim");	nimlf_(135, "/workspaces/telestorie/nimini/runtime.nim");	colontmpD_ = initTable__niminiZruntime_u1225(((NI)32));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(1886, "/workspaces/telestorie/lib/canvas.nim");	result = valMap__niminiZruntime_u1210(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1887);	T6_ = NIM_NIL;
	T6_ = valInt__niminiZruntime_u1086((*canvasState__libZcanvas_u117).currentContentBounds.x);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T6_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_416, T6_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1888);	T7_ = NIM_NIL;
	T7_ = valInt__niminiZruntime_u1086((*canvasState__libZcanvas_u117).currentContentBounds.y);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T7_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_417, T7_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1889);	T8_ = NIM_NIL;
	T8_ = valInt__niminiZruntime_u1086((*canvasState__libZcanvas_u117).currentContentBounds.width);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T8_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_418, T8_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1890);	T9_ = NIM_NIL;
	T9_ = valInt__niminiZruntime_u1086((*canvasState__libZcanvas_u117).currentContentBounds.height);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T9_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_419, T9_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, screenToContent__libZcanvas_u8376)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	tyObject_Table__Kkv168EwyeC2mcswHBvZ1A colontmpD_;
	NI screenX_1;
	NI screenY_1;
	tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw bounds_1;
	NI contentX_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_424;
	NI contentY_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_425;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T19_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T20_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
	nimfr_("screenToContent", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A));
	nimlf_(1896, "/workspaces/telestorie/lib/canvas.nim");	{
		NIM_BOOL T4_;
		NI T5_;
		T4_ = (NIM_BOOL)0;
		T5_ = args_p1.len;
		T4_ = (T5_ < ((NI)2));
		if (T4_) goto LA6_;
		T4_ = (canvasState__libZcanvas_u117 == 0);
LA6_: ;
		if (!T4_) goto LA7_;
		nimln_(1897);		nimln_(1892);		nimln_(1897);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA7_: ;
	nimlf_(1899, "/workspaces/telestorie/lib/canvas.nim");	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto LA1_;
	}
	screenX_1 = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)0)]);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1900);	if (((NI)1) < 0 || ((NI)1) >= args_p1.len){ raiseIndexError2(((NI)1),args_p1.len-1); goto LA1_;
	}
	screenY_1 = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)1)]);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimZeroMem((void*)(&bounds_1), sizeof(tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw));
	nimln_(1901);	bounds_1 = (*canvasState__libZcanvas_u117).currentContentBounds;
	nimln_(1903);	if (nimSubInt(screenX_1, bounds_1.x, &TM__kUjodket9aV1BVUR0GC3cwA_424)) { raiseOverflow(); goto LA1_;
	};
	contentX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_424);
	nimln_(1904);	if (nimSubInt(screenY_1, bounds_1.y, &TM__kUjodket9aV1BVUR0GC3cwA_425)) { raiseOverflow(); goto LA1_;
	};
	contentY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_425);
	nimln_(1907);	{
		NIM_BOOL T11_;
		NIM_BOOL T12_;
		NIM_BOOL T13_;
		nimln_(1908);		T11_ = (NIM_BOOL)0;
		nimln_(1907);		T12_ = (NIM_BOOL)0;
		T13_ = (NIM_BOOL)0;
		T13_ = (contentX_1 < ((NI)0));
		if (T13_) goto LA14_;
		T13_ = (contentY_1 < ((NI)0));
LA14_: ;
		T12_ = T13_;
		if (T12_) goto LA15_;
		nimln_(1908);		T12_ = (bounds_1.width <= contentX_1);
LA15_: ;
		T11_ = T12_;
		if (T11_) goto LA16_;
		T11_ = (bounds_1.height <= contentY_1);
LA16_: ;
		if (!T11_) goto LA17_;
		nimln_(1909);		nimln_(1892);		nimln_(1909);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA17_: ;
	nimlf_(1911, "/workspaces/telestorie/lib/canvas.nim");	nimlf_(135, "/workspaces/telestorie/nimini/runtime.nim");	colontmpD_ = initTable__niminiZruntime_u1225(((NI)32));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(1911, "/workspaces/telestorie/lib/canvas.nim");	result = valMap__niminiZruntime_u1210(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1912);	T19_ = NIM_NIL;
	T19_ = valInt__niminiZruntime_u1086(contentX_1);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T19_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_426, T19_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1913);	T20_ = NIM_NIL;
	T20_ = valInt__niminiZruntime_u1086(contentY_1);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T20_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_427, T20_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NIM_BOOL, nimDivInt)(NI a_p0, NI b_p1, NI* res_p2) {
	NIM_BOOL result;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (a_p0 == ((NI)(IL64(-9223372036854775807) - IL64(1))));
		if (!(T3_)) goto LA4_;
		T3_ = (b_p1 == ((NI)-1));
LA4_: ;
		if (!T3_) goto LA5_;
		result = NIM_TRUE;
	}
	goto LA1_;
LA5_: ;
	{
		result = NIM_FALSE;
		(*res_p2) = (NI)(a_p0 / b_p1);
	}
LA1_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, eventToGrid__libZcanvas_u8475)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* eventVal_1;
	NI colontmpD_;
	NI colontmpD__2;
	tyObject_Table__Kkv168EwyeC2mcswHBvZ1A colontmpD__3;
NIM_BOOL oldNimErrFin7_;
NIM_BOOL oldNimErrFin17_;
	NI cellWidth_1;
	NI cellHeight_1;
	NI bufferX_1;
	NI bufferY_1;
NIM_BOOL oldNimErrFin47_;
	NI gridX_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_448;
	NI gridY_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_449;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T53_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T54_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T55_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
	nimfr_("eventToGrid", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	eventVal_1 = NIM_NIL;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A));
	nimlf_(1920, "/workspaces/telestorie/lib/canvas.nim");	{
		NI T4_;
		tyObject_Table__Kkv168EwyeC2mcswHBvZ1A colontmpD__4;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T8_;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T9_;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T10_;
		T4_ = args_p1.len;
		if (!(T4_ < ((NI)2))) goto LA5_;
		nimZeroMem((void*)(&colontmpD__4), sizeof(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A));
		nimln_(1922);		nimlf_(135, "/workspaces/telestorie/nimini/runtime.nim");		colontmpD__4 = initTable__niminiZruntime_u1225(((NI)32));
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
		nimlf_(1922, "/workspaces/telestorie/lib/canvas.nim");		result = valMap__niminiZruntime_u1210(colontmpD__4);
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
		nimln_(1923);		T8_ = NIM_NIL;
		T8_ = valInt__niminiZruntime_u1086(((NI)-1));
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T8_); goto LA7_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_432, T8_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
		nimln_(1924);		T9_ = NIM_NIL;
		T9_ = valInt__niminiZruntime_u1086(((NI)-1));
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T9_); goto LA7_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_433, T9_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
		nimln_(1925);		T10_ = NIM_NIL;
		T10_ = valBool__niminiZruntime_u1092(NIM_FALSE);
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T10_); goto LA7_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_435, T10_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
		nimln_(1926);		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD__4));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		eqdestroy___niminiZruntime_u1010((&colontmpD__3));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		eqdestroy___niminiZruntime_u92(eventVal_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
		{
			LA7_:;
		}
		{
			oldNimErrFin7_ = *nimErr_; *nimErr_ = NIM_FALSE;
			nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");			eqdestroy___niminiZruntime_u1010((&colontmpD__4));
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			*nimErr_ = oldNimErrFin7_;
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA5_: ;
	nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto LA1_;
	}
	eqcopy___niminiZruntime_u95(&eventVal_1, args_p1.p->data[((NI)0)], NIM_FALSE);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(1930, "/workspaces/telestorie/lib/canvas.nim");	{
		tyObject_Table__Kkv168EwyeC2mcswHBvZ1A colontmpD__5;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T18_;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T19_;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T20_;
		if (!!(((*eventVal_1).kind == ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)6)))) goto LA15_;
		nimZeroMem((void*)(&colontmpD__5), sizeof(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A));
		nimln_(1931);		nimlf_(135, "/workspaces/telestorie/nimini/runtime.nim");		colontmpD__5 = initTable__niminiZruntime_u1225(((NI)32));
		if (NIM_UNLIKELY(*nimErr_)) goto LA17_;
		nimlf_(1931, "/workspaces/telestorie/lib/canvas.nim");		result = valMap__niminiZruntime_u1210(colontmpD__5);
		if (NIM_UNLIKELY(*nimErr_)) goto LA17_;
		nimln_(1932);		T18_ = NIM_NIL;
		T18_ = valInt__niminiZruntime_u1086(((NI)-1));
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T18_); goto LA17_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_436, T18_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA17_;
		nimln_(1933);		T19_ = NIM_NIL;
		T19_ = valInt__niminiZruntime_u1086(((NI)-1));
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T19_); goto LA17_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_437, T19_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA17_;
		nimln_(1934);		T20_ = NIM_NIL;
		T20_ = valBool__niminiZruntime_u1092(NIM_FALSE);
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T20_); goto LA17_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_438, T20_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA17_;
		nimln_(1935);		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD__5));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		eqdestroy___niminiZruntime_u1010((&colontmpD__3));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		eqdestroy___niminiZruntime_u92(eventVal_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
		{
			LA17_:;
		}
		{
			oldNimErrFin17_ = *nimErr_; *nimErr_ = NIM_FALSE;
			nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");			eqdestroy___niminiZruntime_u1010((&colontmpD__5));
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			*nimErr_ = oldNimErrFin17_;
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA15_: ;
	nimlf_(1938, "/workspaces/telestorie/lib/canvas.nim");	if (((NI)1) < 0 || ((NI)1) >= args_p1.len){ raiseIndexError2(((NI)1),args_p1.len-1); goto LA1_;
	}
	cellWidth_1 = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)1)]);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1939);	{
		NI T25_;
		T25_ = args_p1.len;
		if (!(((NI)3) <= T25_)) goto LA26_;
		if (((NI)2) < 0 || ((NI)2) >= args_p1.len){ raiseIndexError2(((NI)2),args_p1.len-1); goto LA1_;
		}
		colontmpD_ = canvasValueToInt__libZcanvas_u6506(args_p1.p->data[((NI)2)]);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		cellHeight_1 = colontmpD_;
	}
	goto LA23_;
LA26_: ;
	{
		colontmpD__2 = ((NI)1);
		cellHeight_1 = colontmpD__2;
	}
LA23_: ;
	nimln_(1942);	bufferX_1 = ((NI)-1);
	nimln_(1943);	bufferY_1 = ((NI)-1);
	nimln_(1945);	{
		NIM_BOOL T31_;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A** T34_;
		T31_ = (NIM_BOOL)0;
		T31_ = hasKey__niminiZruntime_u1333((*eventVal_1).map, TM__kUjodket9aV1BVUR0GC3cwA_440);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T31_) goto LA32_;
		nimln_(1946);		T34_ = (tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A**)0;
		T34_ = X5BX5D___niminiZruntime_u1596((&(*eventVal_1).map), TM__kUjodket9aV1BVUR0GC3cwA_441);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		bufferX_1 = canvasValueToInt__libZcanvas_u6506((*T34_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA32_: ;
	nimln_(1947);	{
		NIM_BOOL T37_;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A** T40_;
		T37_ = (NIM_BOOL)0;
		T37_ = hasKey__niminiZruntime_u1333((*eventVal_1).map, TM__kUjodket9aV1BVUR0GC3cwA_443);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!T37_) goto LA38_;
		nimln_(1948);		T40_ = (tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A**)0;
		T40_ = X5BX5D___niminiZruntime_u1596((&(*eventVal_1).map), TM__kUjodket9aV1BVUR0GC3cwA_444);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		bufferY_1 = canvasValueToInt__libZcanvas_u6506((*T40_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA38_: ;
	nimln_(1951);	{
		NIM_BOOL T43_;
		tyObject_Table__Kkv168EwyeC2mcswHBvZ1A colontmpD__6;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T48_;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T49_;
		tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T50_;
		T43_ = (NIM_BOOL)0;
		T43_ = (bufferX_1 < ((NI)0));
		if (T43_) goto LA44_;
		T43_ = (bufferY_1 < ((NI)0));
LA44_: ;
		if (!T43_) goto LA45_;
		nimZeroMem((void*)(&colontmpD__6), sizeof(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A));
		nimln_(1952);		nimlf_(135, "/workspaces/telestorie/nimini/runtime.nim");		colontmpD__6 = initTable__niminiZruntime_u1225(((NI)32));
		if (NIM_UNLIKELY(*nimErr_)) goto LA47_;
		nimlf_(1952, "/workspaces/telestorie/lib/canvas.nim");		result = valMap__niminiZruntime_u1210(colontmpD__6);
		if (NIM_UNLIKELY(*nimErr_)) goto LA47_;
		nimln_(1953);		T48_ = NIM_NIL;
		T48_ = valInt__niminiZruntime_u1086(((NI)-1));
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T48_); goto LA47_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_445, T48_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA47_;
		nimln_(1954);		T49_ = NIM_NIL;
		T49_ = valInt__niminiZruntime_u1086(((NI)-1));
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T49_); goto LA47_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_446, T49_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA47_;
		nimln_(1955);		T50_ = NIM_NIL;
		T50_ = valBool__niminiZruntime_u1092(NIM_FALSE);
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T50_); goto LA47_;}
		X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_447, T50_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA47_;
		nimln_(1956);		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD__6));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		eqdestroy___niminiZruntime_u1010((&colontmpD__3));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		eqdestroy___niminiZruntime_u92(eventVal_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
		{
			LA47_:;
		}
		{
			oldNimErrFin47_ = *nimErr_; *nimErr_ = NIM_FALSE;
			nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");			eqdestroy___niminiZruntime_u1010((&colontmpD__6));
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			*nimErr_ = oldNimErrFin47_;
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA45_: ;
	nimlf_(1959, "/workspaces/telestorie/lib/canvas.nim");	if (cellWidth_1 == 0){ raiseDivByZero(); goto LA1_;
	}
	if (nimDivInt(bufferX_1, cellWidth_1, &TM__kUjodket9aV1BVUR0GC3cwA_448)) { raiseOverflow(); goto LA1_;
	};
	gridX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_448);
	nimln_(1960);	if (cellHeight_1 == 0){ raiseDivByZero(); goto LA1_;
	}
	if (nimDivInt(bufferY_1, cellHeight_1, &TM__kUjodket9aV1BVUR0GC3cwA_449)) { raiseOverflow(); goto LA1_;
	};
	gridY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_449);
	nimln_(1962);	nimlf_(135, "/workspaces/telestorie/nimini/runtime.nim");	colontmpD__3 = initTable__niminiZruntime_u1225(((NI)32));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(1962, "/workspaces/telestorie/lib/canvas.nim");	result = valMap__niminiZruntime_u1210(colontmpD__3);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1963);	T53_ = NIM_NIL;
	T53_ = valInt__niminiZruntime_u1086(gridX_1);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T53_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_450, T53_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1964);	T54_ = NIM_NIL;
	T54_ = valInt__niminiZruntime_u1086(gridY_1);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T54_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_451, T54_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1965);	T55_ = NIM_NIL;
	T55_ = valBool__niminiZruntime_u1092(NIM_TRUE);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T55_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_452, T55_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD__3));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		eqdestroy___niminiZruntime_u92(eventVal_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_contentWrite__libZcanvas_u6509)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
NIM_BOOL* nimErr_;
	nimfr_("nimini_contentWrite", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimlf_(1761, "/workspaces/telestorie/lib/canvas.nim");	{
		NIM_BOOL T3_;
		NI T4_;
		NI currentIdx_1;
		T3_ = (NIM_BOOL)0;
		T4_ = args_p1.len;
		T3_ = (((NI)0) < T4_);
		if (!(T3_)) goto LA5_;
		if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto BeforeRet_;
		}
		T3_ = ((*args_p1.p->data[((NI)0)]).kind == ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)4));
LA5_: ;
		if (!T3_) goto LA6_;
		nimln_(1762);		currentIdx_1 = getCurrentSectionIdx__libZcanvas_u32();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(1763);		{
			NIM_BOOL T10_;
			NIM_BOOL T11_;
			NI T14_;
			NimStringV2 sectionTitle_1;
			NimStringV2 colontmpD_;
			tySequence__sM4lkSb7zS6F7OVMvW9cffQ* T24_;
			T10_ = (NIM_BOOL)0;
			T11_ = (NIM_BOOL)0;
			T11_ = !((canvasState__libZcanvas_u117 == 0));
			if (!(T11_)) goto LA12_;
			T11_ = (((NI)0) <= currentIdx_1);
LA12_: ;
			T10_ = T11_;
			if (!(T10_)) goto LA13_;
			T14_ = (*canvasState__libZcanvas_u117).sections.len;
			T10_ = (currentIdx_1 < T14_);
LA13_: ;
			if (!T10_) goto LA15_;
			sectionTitle_1.len = 0; sectionTitle_1.p = NIM_NIL;
			colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
			nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (currentIdx_1 < 0 || currentIdx_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(currentIdx_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA17_;
			}
			eqcopy___system_u2710((&sectionTitle_1), (*canvasState__libZcanvas_u117).sections.p->data[currentIdx_1].section.title);
			nimlf_(1765, "/workspaces/telestorie/lib/canvas.nim");			{
				NIM_BOOL T20_;
				tySequence__sM4lkSb7zS6F7OVMvW9cffQ T23_;
				T20_ = (NIM_BOOL)0;
				T20_ = hasKey__libZcanvas_u5297((*canvasState__libZcanvas_u117).contentBuffers, sectionTitle_1);
				if (NIM_UNLIKELY(*nimErr_)) goto LA17_;
				if (!!(T20_)) goto LA21_;
				nimln_(1766);				T23_.len = 0; T23_.p = NIM_NIL;
				T23_.len = 0; T23_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
				X5BX5Deq___libZcanvas_u6609((&(*canvasState__libZcanvas_u117).contentBuffers), sectionTitle_1, T23_);
				if (NIM_UNLIKELY(*nimErr_)) goto LA17_;
			}
LA21_: ;
			nimln_(1767);			T24_ = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ*)0;
			T24_ = X5BX5D___libZcanvas_u5609((&(*canvasState__libZcanvas_u117).contentBuffers), sectionTitle_1);
			if (NIM_UNLIKELY(*nimErr_)) goto LA17_;
			nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto LA17_;
			}
			colontmpD_ = eqdup___system_u2713((*args_p1.p->data[((NI)0)]).s);
			nimlf_(1767, "/workspaces/telestorie/lib/canvas.nim");			add__stdZenumutils_u70((&(*T24_)), colontmpD_);
			{
				LA17_:;
			}
			{
				nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (sectionTitle_1.p && !(sectionTitle_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(sectionTitle_1.p);
}
			}
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
LA15_: ;
	}
LA6_: ;
	nimlf_(1768, "/workspaces/telestorie/lib/canvas.nim");	nimln_(1758);	nimln_(1768);	result = valNil__niminiZruntime_u1028();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_contentClear__libZcanvas_u7759)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	NI currentIdx_1;
NIM_BOOL* nimErr_;
	nimfr_("nimini_contentClear", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(1772);	currentIdx_1 = getCurrentSectionIdx__libZcanvas_u32();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(1773);	{
		NIM_BOOL T3_;
		NIM_BOOL T4_;
		NI T7_;
		NimStringV2 sectionTitle_1;
		tySequence__sM4lkSb7zS6F7OVMvW9cffQ T10_;
		T3_ = (NIM_BOOL)0;
		T4_ = (NIM_BOOL)0;
		T4_ = !((canvasState__libZcanvas_u117 == 0));
		if (!(T4_)) goto LA5_;
		T4_ = (((NI)0) <= currentIdx_1);
LA5_: ;
		T3_ = T4_;
		if (!(T3_)) goto LA6_;
		T7_ = (*canvasState__libZcanvas_u117).sections.len;
		T3_ = (currentIdx_1 < T7_);
LA6_: ;
		if (!T3_) goto LA8_;
		sectionTitle_1.len = 0; sectionTitle_1.p = NIM_NIL;
		nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (currentIdx_1 < 0 || currentIdx_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(currentIdx_1,(*canvasState__libZcanvas_u117).sections.len-1); goto BeforeRet_;
		}
		eqcopy___system_u2710((&sectionTitle_1), (*canvasState__libZcanvas_u117).sections.p->data[currentIdx_1].section.title);
		nimlf_(1775, "/workspaces/telestorie/lib/canvas.nim");		T10_.len = 0; T10_.p = NIM_NIL;
		T10_.len = 0; T10_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
		X5BX5Deq___libZcanvas_u6609((&(*canvasState__libZcanvas_u117).contentBuffers), sectionTitle_1, T10_);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (sectionTitle_1.p && !(sectionTitle_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(sectionTitle_1.p);
}
	}
LA8_: ;
	nimlf_(1776, "/workspaces/telestorie/lib/canvas.nim");	nimln_(1770);	nimln_(1776);	result = valNil__niminiZruntime_u1028();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, getSectionMetrics__libZcanvas_u1054)(tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw* Result) {
	tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg layout_1;
	NI colontmpD_;
	NI colontmpD__2;
	NI colontmpD__3;
	NI colontmpD__4;
	NI colontmpD__5;
	NI colontmpD__6;
	NI currentIdx_1;
	NI cameraX_1;
	NI cameraY_1;
	NI screenX_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_465;
	NI screenY_1;
	NI TM__kUjodket9aV1BVUR0GC3cwA_466;
	NI width_1;
	NI height_1;
NIM_BOOL* nimErr_;
	nimfr_("getSectionMetrics", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw));
	nimZeroMem((void*)(&layout_1), sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	colontmpD__3 = (NI)0;
	colontmpD__4 = (NI)0;
	colontmpD__5 = (NI)0;
	colontmpD__6 = (NI)0;
	nimln_(305);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA4_;
		nimln_(306);		nimln_(300);		nimln_(306);		nimZeroMem((void*)Result, sizeof(tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw));
		nimln_(254);		eqdestroy___libZcanvas_u866((&layout_1));
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(308);	currentIdx_1 = getCurrentSectionIdx__libZcanvas_u32();
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(309);	{
		NIM_BOOL T8_;
		NI T10_;
		T8_ = (NIM_BOOL)0;
		T8_ = (currentIdx_1 < ((NI)0));
		if (T8_) goto LA9_;
		T10_ = (*canvasState__libZcanvas_u117).sections.len;
		T8_ = (T10_ <= currentIdx_1);
LA9_: ;
		if (!T8_) goto LA11_;
		nimln_(310);		nimln_(300);		nimln_(310);		nimZeroMem((void*)Result, sizeof(tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw));
		nimln_(254);		eqdestroy___libZcanvas_u866((&layout_1));
		goto BeforeRet_;
	}
LA11_: ;
	if (currentIdx_1 < 0 || currentIdx_1 >= (*canvasState__libZcanvas_u117).sections.len){ raiseIndexError2(currentIdx_1,(*canvasState__libZcanvas_u117).sections.len-1); goto LA1_;
	}
	eqcopy___libZcanvas_u869((&layout_1), (&(*canvasState__libZcanvas_u117).sections.p->data[currentIdx_1]));
	nimln_(315);	if ((((NI) (((NF)((*canvasState__libZcanvas_u117).camera.x) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)((*canvasState__libZcanvas_u117).camera.x) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)((*canvasState__libZcanvas_u117).camera.x) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	cameraX_1 = (((NI) (((NF)((*canvasState__libZcanvas_u117).camera.x) + (NF)(0.5)))));
	nimln_(316);	if ((((NI) (((NF)((*canvasState__libZcanvas_u117).camera.y) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)((*canvasState__libZcanvas_u117).camera.y) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)((*canvasState__libZcanvas_u117).camera.y) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	cameraY_1 = (((NI) (((NF)((*canvasState__libZcanvas_u117).camera.y) + (NF)(0.5)))));
	nimln_(320);	if ((((NI) (((NF)(layout_1.x) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.x) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.x) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	if (nimSubInt((((NI) (((NF)(layout_1.x) + (NF)(0.5))))), cameraX_1, &TM__kUjodket9aV1BVUR0GC3cwA_465)) { raiseOverflow(); goto LA1_;
	};
	screenX_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_465);
	nimln_(321);	if ((((NI) (((NF)(layout_1.y) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.y) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.y) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	if (nimSubInt((((NI) (((NF)(layout_1.y) + (NF)(0.5))))), cameraY_1, &TM__kUjodket9aV1BVUR0GC3cwA_466)) { raiseOverflow(); goto LA1_;
	};
	screenY_1 = (NI)(TM__kUjodket9aV1BVUR0GC3cwA_466);
	nimln_(324);	{
		if (!(((NI)0) < layout_1.actualVisualWidth)) goto LA15_;
		colontmpD_ = layout_1.actualVisualWidth;
		width_1 = colontmpD_;
	}
	goto LA13_;
LA15_: ;
	{
		if ((((NI) (((NF)(layout_1.width) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.width) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.width) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
		}
		colontmpD__2 = (((NI) (((NF)(layout_1.width) + (NF)(0.5)))));
		width_1 = colontmpD__2;
	}
LA13_: ;
	nimln_(325);	{
		if (!(((NI)0) < layout_1.actualVisualHeight)) goto LA20_;
		colontmpD__3 = layout_1.actualVisualHeight;
		height_1 = colontmpD__3;
	}
	goto LA18_;
LA20_: ;
	{
		if ((((NI) (((NF)(layout_1.height) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.height) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.height) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
		}
		colontmpD__4 = (((NI) (((NF)(layout_1.height) + (NF)(0.5)))));
		height_1 = colontmpD__4;
	}
LA18_: ;
	nimln_(327);	nimln_(300);	nimln_(327);	(*Result).x = screenX_1;
	(*Result).y = screenY_1;
	(*Result).width = width_1;
	(*Result).height = height_1;
	nimln_(332);	if ((((NI) (((NF)(layout_1.x) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.x) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.x) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	colontmpD__5 = (((NI) (((NF)(layout_1.x) + (NF)(0.5)))));
	(*Result).worldX = colontmpD__5;
	nimln_(333);	if ((((NI) (((NF)(layout_1.y) + (NF)(0.5))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(layout_1.y) + (NF)(0.5))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(layout_1.y) + (NF)(0.5)))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	colontmpD__6 = (((NI) (((NF)(layout_1.y) + (NF)(0.5)))));
	(*Result).worldY = colontmpD__6;
	nimln_(254);	eqdestroy___libZcanvas_u866((&layout_1));
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		eqdestroy___libZcanvas_u866((&layout_1));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, nimini_getSectionMetrics__libZcanvas_u7941)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	tyObject_Table__Kkv168EwyeC2mcswHBvZ1A colontmpD_;
	tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw metrics_1;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T16_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T17_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T18_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T19_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T20_;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* T21_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
	nimfr_("nimini_getSectionMetrics", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Table__Kkv168EwyeC2mcswHBvZ1A));
	nimln_(1862);	{
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA4_;
		nimln_(1863);		nimln_(1858);		nimln_(1863);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA4_: ;
	nimZeroMem((void*)(&metrics_1), sizeof(tyObject_SectionMetrics__9cXe15zZ3eJYkMFWk7TWKSw));
	nimlf_(1865, "/workspaces/telestorie/lib/canvas.nim");	getSectionMetrics__libZcanvas_u1054((&metrics_1));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1868);	{
		NIM_BOOL T8_;
		NIM_BOOL T9_;
		NIM_BOOL T10_;
		T8_ = (NIM_BOOL)0;
		T9_ = (NIM_BOOL)0;
		T10_ = (NIM_BOOL)0;
		T10_ = (metrics_1.x == ((NI)0));
		if (!(T10_)) goto LA11_;
		T10_ = (metrics_1.y == ((NI)0));
LA11_: ;
		T9_ = T10_;
		if (!(T9_)) goto LA12_;
		T9_ = (metrics_1.width == ((NI)0));
LA12_: ;
		T8_ = T9_;
		if (!(T8_)) goto LA13_;
		T8_ = (metrics_1.height == ((NI)0));
LA13_: ;
		if (!T8_) goto LA14_;
		nimln_(1869);		nimln_(1858);		nimln_(1869);		result = valNil__niminiZruntime_u1028();
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
LA14_: ;
	nimlf_(1871, "/workspaces/telestorie/lib/canvas.nim");	nimlf_(135, "/workspaces/telestorie/nimini/runtime.nim");	colontmpD_ = initTable__niminiZruntime_u1225(((NI)32));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(1871, "/workspaces/telestorie/lib/canvas.nim");	result = valMap__niminiZruntime_u1210(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1872);	T16_ = NIM_NIL;
	T16_ = valInt__niminiZruntime_u1086(metrics_1.x);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T16_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_467, T16_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1873);	T17_ = NIM_NIL;
	T17_ = valInt__niminiZruntime_u1086(metrics_1.y);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T17_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_468, T17_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1874);	T18_ = NIM_NIL;
	T18_ = valInt__niminiZruntime_u1086(metrics_1.width);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T18_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_469, T18_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1875);	T19_ = NIM_NIL;
	T19_ = valInt__niminiZruntime_u1086(metrics_1.height);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T19_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_470, T19_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1876);	T20_ = NIM_NIL;
	T20_ = valInt__niminiZruntime_u1086(metrics_1.worldX);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T20_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_472, T20_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1877);	T21_ = NIM_NIL;
	T21_ = valInt__niminiZruntime_u1086(metrics_1.worldY);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___niminiZruntime_u92(T21_); goto LA1_;}
	X5BX5Deq___niminiZruntime_u1726((&(*result).map), TM__kUjodket9aV1BVUR0GC3cwA_474, T21_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		nimlf_(68, "/workspaces/telestorie/nimini/runtime.nim");		eqdestroy___niminiZruntime_u1010((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, registerCanvasBindings__libZcanvas_u9198)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q** appState_p1, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw* styleSheet_p2) {
	tyProc__uEHdpYdtD80h7sXcarWpbg T6_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T7_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T8_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T9_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T10_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T11_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T12_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T13_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T14_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T15_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T16_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T17_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T18_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T19_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T20_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T21_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T22_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T23_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T24_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T25_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T26_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T27_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T28_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T29_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T30_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T31_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T32_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T33_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T34_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T35_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T36_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T37_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T38_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T39_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T40_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T41_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T42_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T43_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T44_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T45_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T46_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T47_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T48_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T49_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T50_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T51_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T52_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T53_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T54_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T55_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T56_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T57_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T58_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T59_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T60_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T61_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T62_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T63_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T64_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T65_;
NIM_BOOL* nimErr_;
	nimfr_("registerCanvasBindings", "/workspaces/telestorie/lib/canvas.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(1976, "/workspaces/telestorie/lib/canvas.nim");	{
		tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* T5_;
		if (!(canvasState__libZcanvas_u117 == 0)) goto LA3_;
		nimln_(769);		T5_ = NIM_NIL;
		T5_ = (tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw*) nimNewObj(sizeof(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw), NIM_ALIGNOF(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw));
		(*T5_).camera.x = 0.0;
		(*T5_).camera.y = 0.0;
		(*T5_).camera.targetX = 0.0;
		(*T5_).camera.targetY = 0.0;
		(*T5_).sections.len = 0; (*T5_).sections.p = (tySequence__HE9bUKMf89b0tHZqiYlor7zg_Content*) newSeqPayload(0, sizeof(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg), NIM_ALIGNOF(tyObject_SectionLayout__P8A39crV2fWwIc4iS1r65Bg));
		(*T5_).links.len = 0; (*T5_).links.p = (tySequence__4J12Tw3uyR4p9bUQ9cuaoi2Q_Content*) newSeqPayload(0, sizeof(tyObject_Link__6V5xLDIraXInP9am5HdL18g), NIM_ALIGNOF(tyObject_Link__6V5xLDIraXInP9am5HdL18g));
		(*T5_).focusedLinkIdx = ((NI)0);
		nimln_(1982);		(*T5_).visitedSections = initHashSet__niminiZcodegen_u119(((NI)64));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(1983);		(*T5_).hiddenSections = initHashSet__niminiZcodegen_u119(((NI)64));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(1984);		(*T5_).removedSections = initHashSet__niminiZcodegen_u119(((NI)64));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*T5_).mouseEnabled = NIM_FALSE;
		(*T5_).presentationMode = NIM_FALSE;
		(*T5_).lastRenderTime = 0.0;
		(*T5_).lastViewportWidth = ((NI)0);
		(*T5_).lastViewportHeight = ((NI)0);
		nimln_(1990);		(*T5_).contentBuffers = initTable__libZcanvas_u2752(((NI)32));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(1991);		(*T5_).frontMatter = initTable__niminiZplugin_u343(((NI)32));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimZeroMem((void*)(&(*T5_).currentContentBounds), sizeof(tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw));
		nimZeroMem((void*)(&(*T5_).currentContentBufferBounds), sizeof(tyObject_ContentBounds__K6OljJox6uSWVvAMd7NWLw));
		(*T5_).buffer = ((tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw*) NIM_NIL);
		(*T5_).appState = ((tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q**) NIM_NIL);
		(*T5_).styleSheet = ((tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw*) NIM_NIL);
		nimln_(769);		eqsink___libZcanvas_u3591(&canvasState__libZcanvas_u117, T5_);
	}
LA3_: ;
	nimln_(2000);	(*canvasState__libZcanvas_u117).buffer = buffer_p0;
	nimln_(2001);	(*canvasState__libZcanvas_u117).appState = appState_p1;
	nimln_(2002);	(*canvasState__libZcanvas_u117).styleSheet = styleSheet_p2;
	nimlf_(53, "/workspaces/telestorie/nimini/lang/nim_extensions.nim");	nimZeroMem((void*)(&T6_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T6_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_53) (nimini_hideSection__libZcanvas_u7817)); T6_.ClE_0 = NIM_NIL;
	T7_.len = 0; T7_.p = NIM_NIL;
	T7_.len = 0; T7_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T8_.len = 0; T8_.p = NIM_NIL;
	T8_.len = 0; T8_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T9_.len = 0; T9_.p = NIM_NIL;
	T9_.len = 0; T9_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_52, T6_, T7_, T8_, T9_, TM__kUjodket9aV1BVUR0GC3cwA_54);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T10_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T10_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_57) (nimini_removeSection__libZcanvas_u7824)); T10_.ClE_0 = NIM_NIL;
	T11_.len = 0; T11_.p = NIM_NIL;
	T11_.len = 0; T11_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T12_.len = 0; T12_.p = NIM_NIL;
	T12_.len = 0; T12_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T13_.len = 0; T13_.p = NIM_NIL;
	T13_.len = 0; T13_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_56, T10_, T11_, T12_, T13_, TM__kUjodket9aV1BVUR0GC3cwA_58);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T14_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T14_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_61) (nimini_restoreSection__libZcanvas_u7835)); T14_.ClE_0 = NIM_NIL;
	T15_.len = 0; T15_.p = NIM_NIL;
	T15_.len = 0; T15_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T16_.len = 0; T16_.p = NIM_NIL;
	T16_.len = 0; T16_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T17_.len = 0; T17_.p = NIM_NIL;
	T17_.len = 0; T17_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_60, T14_, T15_, T16_, T17_, TM__kUjodket9aV1BVUR0GC3cwA_62);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T18_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T18_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_65) (nimini_isVisited__libZcanvas_u7842)); T18_.ClE_0 = NIM_NIL;
	T19_.len = 0; T19_.p = NIM_NIL;
	T19_.len = 0; T19_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T20_.len = 0; T20_.p = NIM_NIL;
	T20_.len = 0; T20_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T21_.len = 0; T21_.p = NIM_NIL;
	T21_.len = 0; T21_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_64, T18_, T19_, T20_, T21_, TM__kUjodket9aV1BVUR0GC3cwA_66);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T22_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T22_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_69) (nimini_markVisited__libZcanvas_u7849)); T22_.ClE_0 = NIM_NIL;
	T23_.len = 0; T23_.p = NIM_NIL;
	T23_.len = 0; T23_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T24_.len = 0; T24_.p = NIM_NIL;
	T24_.len = 0; T24_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T25_.len = 0; T25_.p = NIM_NIL;
	T25_.len = 0; T25_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_68, T22_, T23_, T24_, T25_, TM__kUjodket9aV1BVUR0GC3cwA_70);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T26_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T26_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_368) (canvasRender__libZcanvas_u7856)); T26_.ClE_0 = NIM_NIL;
	T27_.len = 0; T27_.p = NIM_NIL;
	T27_.len = 0; T27_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T28_.len = 0; T28_.p = NIM_NIL;
	T28_.len = 0; T28_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T29_.len = 0; T29_.p = NIM_NIL;
	T29_.len = 0; T29_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_72, T26_, T27_, T28_, T29_, TM__kUjodket9aV1BVUR0GC3cwA_369);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T30_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T30_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_377) (canvasUpdate__libZcanvas_u7889)); T30_.ClE_0 = NIM_NIL;
	T31_.len = 0; T31_.p = NIM_NIL;
	T31_.len = 0; T31_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T32_.len = 0; T32_.p = NIM_NIL;
	T32_.len = 0; T32_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T33_.len = 0; T33_.p = NIM_NIL;
	T33_.len = 0; T33_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_371, T30_, T31_, T32_, T33_, TM__kUjodket9aV1BVUR0GC3cwA_378);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T34_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T34_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_406) (canvasHandleKey__libZcanvas_u7901)); T34_.ClE_0 = NIM_NIL;
	T35_.len = 0; T35_.p = NIM_NIL;
	T35_.len = 0; T35_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T36_.len = 0; T36_.p = NIM_NIL;
	T36_.len = 0; T36_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T37_.len = 0; T37_.p = NIM_NIL;
	T37_.len = 0; T37_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_380, T34_, T35_, T36_, T37_, TM__kUjodket9aV1BVUR0GC3cwA_407);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T38_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T38_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_412) (canvasHandleMouse__libZcanvas_u7926)); T38_.ClE_0 = NIM_NIL;
	T39_.len = 0; T39_.p = NIM_NIL;
	T39_.len = 0; T39_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T40_.len = 0; T40_.p = NIM_NIL;
	T40_.len = 0; T40_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T41_.len = 0; T41_.p = NIM_NIL;
	T41_.len = 0; T41_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_409, T38_, T39_, T40_, T41_, TM__kUjodket9aV1BVUR0GC3cwA_413);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T42_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T42_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_420) (getContentBounds__libZcanvas_u8201)); T42_.ClE_0 = NIM_NIL;
	T43_.len = 0; T43_.p = NIM_NIL;
	T43_.len = 0; T43_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T44_.len = 0; T44_.p = NIM_NIL;
	T44_.len = 0; T44_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T45_.len = 0; T45_.p = NIM_NIL;
	T45_.len = 0; T45_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_415, T42_, T43_, T44_, T45_, TM__kUjodket9aV1BVUR0GC3cwA_421);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T46_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T46_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_428) (screenToContent__libZcanvas_u8376)); T46_.ClE_0 = NIM_NIL;
	T47_.len = 0; T47_.p = NIM_NIL;
	T47_.len = 0; T47_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T48_.len = 0; T48_.p = NIM_NIL;
	T48_.len = 0; T48_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T49_.len = 0; T49_.p = NIM_NIL;
	T49_.len = 0; T49_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_423, T46_, T47_, T48_, T49_, TM__kUjodket9aV1BVUR0GC3cwA_429);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimlf_(2005, "/workspaces/telestorie/lib/canvas.nim");	nimZeroMem((void*)(&T50_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T50_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_453) (eventToGrid__libZcanvas_u8475)); T50_.ClE_0 = NIM_NIL;
	T51_.len = 0; T51_.p = NIM_NIL;
	T51_.len = 0; T51_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T52_.len = 0; T52_.p = NIM_NIL;
	T52_.len = 0; T52_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T53_.len = 0; T53_.p = NIM_NIL;
	T53_.len = 0; T53_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_431, T50_, T51_, T52_, T53_, TM__kUjodket9aV1BVUR0GC3cwA_454);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(2013);	nimZeroMem((void*)(&T54_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T54_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_457) (nimini_contentWrite__libZcanvas_u6509)); T54_.ClE_0 = NIM_NIL;
	T55_.len = 0; T55_.p = NIM_NIL;
	T55_.len = 0; T55_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T56_.len = 0; T56_.p = NIM_NIL;
	T56_.len = 0; T56_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T57_.len = 0; T57_.p = NIM_NIL;
	T57_.len = 0; T57_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_456, T54_, T55_, T56_, T57_, TM__kUjodket9aV1BVUR0GC3cwA_458);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(2014);	nimZeroMem((void*)(&T58_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T58_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_461) (nimini_contentClear__libZcanvas_u7759)); T58_.ClE_0 = NIM_NIL;
	T59_.len = 0; T59_.p = NIM_NIL;
	T59_.len = 0; T59_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T60_.len = 0; T60_.p = NIM_NIL;
	T60_.len = 0; T60_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T61_.len = 0; T61_.p = NIM_NIL;
	T61_.len = 0; T61_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_460, T58_, T59_, T60_, T61_, TM__kUjodket9aV1BVUR0GC3cwA_462);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(2015);	nimZeroMem((void*)(&T62_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T62_.ClP_0 = ((TM__kUjodket9aV1BVUR0GC3cwA_475) (nimini_getSectionMetrics__libZcanvas_u7941)); T62_.ClE_0 = NIM_NIL;
	T63_.len = 0; T63_.p = NIM_NIL;
	T63_.len = 0; T63_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T64_.len = 0; T64_.p = NIM_NIL;
	T64_.len = 0; T64_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	T65_.len = 0; T65_.p = NIM_NIL;
	T65_.len = 0; T65_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__kUjodket9aV1BVUR0GC3cwA_464, T62_, T63_, T64_, T65_, TM__kUjodket9aV1BVUR0GC3cwA_476);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, initCanvasModule__libZcanvas_u120)(tyObject_AppStatecolonObjectType___jrSyZ9aZLwUQnIb5lEtzv8Q** appState_p0, tyObject_SectionManager__3O1n9bPakZR219aHHa6w8a4w* sectionMgr_p1, tyObject_Table__wdMFxA8VBzcKe9cq9c9a9cPqMw* styleSheet_p2) {
	nimfr_("initCanvasModule", "/workspaces/telestorie/lib/canvas.nim");
	nimln_(190);	{
		if (!!((canvasState__libZcanvas_u117 == 0))) goto LA3_;
		nimln_(191);		(*canvasState__libZcanvas_u117).appState = appState_p0;
		nimln_(192);		(*canvasState__libZcanvas_u117).styleSheet = styleSheet_p2;
	}
LA3_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZcanvas_u3580)(tyObject_CanvasStatecolonObjectType___eOoMeFnqsdnNk9ad7pb3oOw* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicStatic(dest_p0, ((TNimTypeV2*) ((&NTIv2__eOoMeFnqsdnNk9ad7pb3oOw_))));
		if (!T3_) goto LA4_;
		eqdestroy___libZcanvas_u3510((&(*dest_p0)));
		nimRawDispose(dest_p0, ((NI)8));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, atmlibatscanvasdotnim_Init000)(void) {
{
	tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw T1_;
NIM_BOOL* nimErr_;
	nimfr_("canvas", "/workspaces/telestorie/lib/canvas.nim");
nimErr_ = nimErrorFlag();
	nimln_(31);	nimZeroMem((void*)(&T1_), sizeof(tyObject_Table__BFhZ6rbZsooPSOzyjb7nDw));
	T1_ = initTable__libZansi95art95bindings_u24(((NI)32));
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZansi95art95bindings_u171(&T1_); goto BeforeRet_;}
	gAnsiBuffers__libZcanvas_u31 = T1_;
	BeforeRet_: ;
	nimTestErrorFlag();
	popFrame();
}
}

