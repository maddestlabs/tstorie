/* Generated by Nim Compiler v2.2.6 */
/* Compiled for: Linux, amd64, gcc */
/* Command for C compiler:
   gcc -c  -w -fmax-errors=3 -fno-strict-aliasing -pthread -I/workspaces/telestorie/lib   -I/home/codespace/.choosenim/toolchains/nim-2.2.6/lib -I/workspaces/telestorie -o /workspaces/telestorie/nimcache_sdl3_test/@mlib@stext_editor.nim.c.o /workspaces/telestorie/nimcache_sdl3_test/@mlib@stext_editor.nim.c */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(proc, file) \
  TFrame FR_; \
  FR_.procname = proc; FR_.filename = file; FR_.line = 0; FR_.len = 0; nimFrame(&FR_);

#define nimln_(n) \
  FR_.line = n;

#define nimlf_(n, file) \
  FR_.line = n; FR_.filename = file;

typedef struct tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q;
typedef struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ;
typedef struct tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA;
typedef struct tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ;
typedef struct tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw;
typedef struct tySequence__TtMbAhpjw87rFOFlPjxZaw tySequence__TtMbAhpjw87rFOFlPjxZaw;
typedef struct tySequence__TtMbAhpjw87rFOFlPjxZaw_Content tySequence__TtMbAhpjw87rFOFlPjxZaw_Content;
typedef struct tySequence__48JTohSgTy339bRxHzUD8KA tySequence__48JTohSgTy339bRxHzUD8KA;
typedef struct tySequence__48JTohSgTy339bRxHzUD8KA_Content tySequence__48JTohSgTy339bRxHzUD8KA_Content;
typedef struct tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ tySequence__sM4lkSb7zS6F7OVMvW9cffQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content;
typedef struct tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA;
typedef struct tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng;
typedef struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ tyObject_Style__UURjArTrf2wmcCbN5MncAQ;
typedef struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ;
typedef struct tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw;
typedef struct tySequence__iEoNTfSuEpSv8aQiyfWQQw tySequence__iEoNTfSuEpSv8aQiyfWQQw;
typedef struct tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content;
typedef struct tySequence__shxop0zPIs5Ec3k71aCLuQ tySequence__shxop0zPIs5Ec3k71aCLuQ;
typedef struct tySequence__shxop0zPIs5Ec3k71aCLuQ_Content tySequence__shxop0zPIs5Ec3k71aCLuQ_Content;
struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ {
	NI rc;
	NI rootIdx;
};
struct tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ {
	NI line;
	NI col;
};
struct tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw {
	NIM_BOOL active;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ start;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ end_0;
};
struct tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q {
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ cursor;
	tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw selection;
	NI scrollX;
	NI scrollY;
	NI desiredCol;
	NI tabWidth;
	NIM_BOOL insertMode;
};
struct tySequence__TtMbAhpjw87rFOFlPjxZaw {
  NI len; tySequence__TtMbAhpjw87rFOFlPjxZaw_Content* p;
};
struct tySequence__48JTohSgTy339bRxHzUD8KA {
  NI len; tySequence__48JTohSgTy339bRxHzUD8KA_Content* p;
};
struct tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA {
	tySequence__48JTohSgTy339bRxHzUD8KA text;
	NI gapStart;
	NI gapEnd;
};
struct tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA {
	tySequence__TtMbAhpjw87rFOFlPjxZaw lines;
	NIM_BOOL modified;
};
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ {
  NI len; tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content* p;
};
struct tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA {
	NI a;
	NI b;
};
struct tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng {
	NIM_BOOL showLineNumbers;
	NI lineNumberWidth;
	NIM_BOOL showScrollbar;
	NIM_BOOL highlightCurrentLine;
	NIM_BOOL wrapLines;
	NIM_BOOL useSoftTabs;
};
struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ {
	NU8 r;
	NU8 g;
	NU8 b;
};
struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ bg;
	NIM_BOOL bold;
	NIM_BOOL underline;
	NIM_BOOL italic;
	NIM_BOOL dim;
};
struct tySequence__iEoNTfSuEpSv8aQiyfWQQw {
  NI len; tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content* p;
};
struct tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ Field0;
	tySequence__iEoNTfSuEpSv8aQiyfWQQw Field1;
};
struct tySequence__shxop0zPIs5Ec3k71aCLuQ {
  NI len; tySequence__shxop0zPIs5Ec3k71aCLuQ_Content* p;
};
struct tySequence__TtMbAhpjw87rFOFlPjxZaw_Content { NI cap; tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA data[SEQ_DECL_SIZE]; };
struct tySequence__48JTohSgTy339bRxHzUD8KA_Content { NI cap; NI32 data[SEQ_DECL_SIZE]; };
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content { NI cap; NimStringV2 data[SEQ_DECL_SIZE]; };
struct tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content { NI cap; tySequence__shxop0zPIs5Ec3k71aCLuQ data[SEQ_DECL_SIZE]; };
struct tySequence__shxop0zPIs5Ec3k71aCLuQ_Content { NI cap; NIM_BOOL data[SEQ_DECL_SIZE]; };
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p_p0);
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1);
static N_INLINE(void, nimFrame)(TFrame* s_p0);
N_LIB_PRIVATE N_NOINLINE(void, callDepthLimitReached__system_u4643)(void);
static N_INLINE(void, popFrame)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u256)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u274)(tySequence__TtMbAhpjw87rFOFlPjxZaw dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZunicode_u714)(tySequence__48JTohSgTy339bRxHzUD8KA dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, alignedDealloc)(void* p_p0, NI align_p1);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u918)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u881)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u430)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA** dest_p0, tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*, newEditorBuffer__libZtext95editor_u208)(NimStringV2 content_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u421)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u283)(tySequence__TtMbAhpjw87rFOFlPjxZaw* dest_p0, tySequence__TtMbAhpjw87rFOFlPjxZaw src_p1);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap_p0, NI elemSize_p1, NI elemAlign_p2);
N_LIB_PRIVATE N_NIMCALL(void, add__libZtext95editor_u218)(tySequence__TtMbAhpjw87rFOFlPjxZaw* x_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* y_p1);
N_LIB_PRIVATE N_NIMCALL(void, newEditorLine__libZtext95editor_u39)(NimStringV2 text_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* Result);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pureZunicode_u723)(tySequence__48JTohSgTy339bRxHzUD8KA* dest_p0, tySequence__48JTohSgTy339bRxHzUD8KA src_p1);
static N_INLINE(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u7824)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u4497)(NIM_CHAR* s_p0, NI s_p0Len_0);
N_LIB_PRIVATE N_NOINLINE(void, raiseIndexError4)(NI l1_p0, NI h1_p1, NI h2_p2);
N_LIB_PRIVATE N_NOINLINE(void, raiseIndexError2)(NI i_p0, NI n_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2716)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s_p0, NI addLen_p1);
N_LIB_PRIVATE N_NOINLINE(void, raiseOverflow)(void);
N_LIB_PRIVATE N_NIMCALL(void, failedAssertImpl__stdZassertions_u234)(NimStringV2 msg_p0);
N_LIB_PRIVATE N_NOCONV(void, deallocShared)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*, newEditorBuffer__libZtext95editor_u482)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ lines_p0);
static N_INLINE(void, nimIncRef)(void* p_p0);
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, toString__libZtext95editor_u54)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0);
N_LIB_PRIVATE N_NIMCALL(void, add__pureZunicode_u4534)(tySequence__48JTohSgTy339bRxHzUD8KA* x_p0, NI32 y_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___pureZunicode_u666)(tySequence__48JTohSgTy339bRxHzUD8KA runes_p0);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, copyMem__system_u1741)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NOINLINE(void, raiseRangeErrorI)(NI64 i_p0, NI64 a_p1, NI64 b_p2);
N_LIB_PRIVATE N_NIMCALL(void, add__stdZenumutils_u70)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* x_p0, NimStringV2 y_p1);
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0);
N_LIB_PRIVATE N_NIMCALL(void, clampCursor__libZtext95editor_u989)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(NI, lineCount__libZtext95editor_u507)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0);
N_LIB_PRIVATE N_NIMCALL(NI, lineLength__libZtext95editor_u572)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI lineIdx_p1);
N_LIB_PRIVATE N_NIMCALL(NI, len__libZtext95editor_u48)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0);
N_LIB_PRIVATE N_NIMCALL(void, insertRune__libZtext95editor_u644)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2, NI32 r_p3);
N_LIB_PRIVATE N_NIMCALL(void, insertRune__libZtext95editor_u183)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1, NI32 r_p2);
N_LIB_PRIVATE N_NIMCALL(void, moveGapTo__libZtext95editor_u106)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI pos_p1);
N_LIB_PRIVATE N_NIMCALL(void, ensureGapSize__libZtext95editor_u138)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI minSize_p1);
N_LIB_PRIVATE N_NIMCALL(tySequence__48JTohSgTy339bRxHzUD8KA, newSeq__pureZunicode_u4516)(NI len_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___pureZunicode_u711)(tySequence__48JTohSgTy339bRxHzUD8KA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, insertChar__libZtext95editor_u633)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2, NIM_CHAR ch_p3);
N_LIB_PRIVATE N_NIMCALL(void, deleteCharBackward__libZtext95editor_u677)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2);
N_LIB_PRIVATE N_NIMCALL(void, deleteRuneBackward__libZtext95editor_u201)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1);
N_LIB_PRIVATE N_NIMCALL(void, deleteNewline__libZtext95editor_u794)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u348)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space_p0);
N_LIB_PRIVATE N_NIMCALL(void, delete__libZtext95editor_u802)(tySequence__TtMbAhpjw87rFOFlPjxZaw* x_p0, NI i_p1);
N_LIB_PRIVATE N_NIMCALL(void, deleteChar__libZtext95editor_u670)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2);
N_LIB_PRIVATE N_NIMCALL(void, deleteRune__libZtext95editor_u191)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1);
N_LIB_PRIVATE N_NIMCALL(void, insertNewline__libZtext95editor_u684)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2);
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1291)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1);
N_NIMCALL(NimStringV2, mnewString)(NI len_p0);
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimPrepareStrMutationImpl__system_u2459)(NimStringV2* s_p0);
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZstrbasics_u48)(NI a_p0, NI b_p1);
N_LIB_PRIVATE N_NIMCALL(void, insert__libZtext95editor_u743)(tySequence__TtMbAhpjw87rFOFlPjxZaw* x_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* item_p1, NI i_p2);
N_LIB_PRIVATE N_NOINLINE(void, raiseDivByZero)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Style__UURjArTrf2wmcCbN5MncAQ, tuiGetStyle__libZtui95helpers_u17)(NimStringV2 name_p0);
N_LIB_PRIVATE N_NIMCALL(void, drawBoxSingle__libZtui95helpers_u194)(NI layer_p0, NI x_p1, NI y_p2, NI w_p3, NI h_p4, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p5);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___systemZdollars_u14)(NI xX60gensym0__p0);
N_LIB_PRIVATE N_NIMCALL(void, tuiDraw__libZtui95helpers_u118)(NI layer_p0, NI x_p1, NI y_p2, NimStringV2 text_p3, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p4);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getLine__libZtext95editor_u513)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI lineIdx_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___pureZunicode_u663)(NI32 rune_p0);
N_LIB_PRIVATE N_NIMCALL(void, generateMinimap__libZtext95editor_u1105)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI width_p1, NI height_p2, NI scrollY_p3, NI viewportHeight_p4, tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw* selection_p5, tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw* Result);
N_LIB_PRIVATE N_NIMCALL(void, add__niminiZruntime_u5425)(tySequence__shxop0zPIs5Ec3k71aCLuQ* x_p0, NIM_BOOL y_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__libZtext95editor_u1181)(tySequence__iEoNTfSuEpSv8aQiyfWQQw* x_p0, tySequence__shxop0zPIs5Ec3k71aCLuQ y_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2710)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___niminiZruntime_u160)(tySequence__shxop0zPIs5Ec3k71aCLuQ* dest_p0, tySequence__shxop0zPIs5Ec3k71aCLuQ src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___niminiZruntime_u157)(tySequence__shxop0zPIs5Ec3k71aCLuQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u1370)(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u3785)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u1211)(tySequence__iEoNTfSuEpSv8aQiyfWQQw dest_p0);
static N_INLINE(NIM_BOOL, contains__stdZenumutils_u50)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1);
static N_INLINE(NI, find__stdZenumutils_u55)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1);
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2);
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorLeft__libZtext95editor_u1020)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorUp__libZtext95editor_u1008)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorRight__libZtext95editor_u1030)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorDown__libZtext95editor_u1014)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToBufferStart__libZtext95editor_u1045)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToLineStart__libZtext95editor_u1041)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToBufferEnd__libZtext95editor_u1047)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToLineEnd__libZtext95editor_u1043)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, backspaceAtCursor__libZtext95editor_u1071)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, deleteAtCursor__libZtext95editor_u1068)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, insertNewlineAtCursor__libZtext95editor_u1082)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, insertTabAtCursor__libZtext95editor_u1088)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NIM_BOOL useSoftTabs_p1);
N_LIB_PRIVATE N_NIMCALL(void, insertCharAtCursor__libZtext95editor_u1049)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NIM_CHAR ch_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, pointInRect__libZtui95helpers_u410)(NI px_p0, NI py_p1, NI rx_p2, NI ry_p3, NI rw_p4, NI rh_p5);
N_LIB_PRIVATE N_NIMCALL(void, moveCursor__libZtext95editor_u992)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI line_p1, NI col_p2);
static const struct {
  NI cap; NIM_CHAR data[0+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_2 = { 0 | NIM_STRLIT_FLAG, "" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_3 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_4 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_5 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const struct {
  NI cap; NIM_CHAR data[152+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_7 = { 152 | NIM_STRLIT_FLAG, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim(272, 11) `len(a) == L` the length of the string changed while iterating over it" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_8 = {152, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_7};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_9 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const struct {
  NI cap; NIM_CHAR data[149+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_10 = { 149 | NIM_STRLIT_FLAG, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim(254, 11) `len(a) == L` the length of the seq changed while iterating over it" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_11 = {149, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_10};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_12 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const struct {
  NI cap; NIM_CHAR data[149+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_17 = { 149 | NIM_STRLIT_FLAG, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim(187, 11) `len(a) == L` the length of the seq changed while iterating over it" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_18 = {149, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_17};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_19 = {149, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_10};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_20 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_51 = {149, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_10};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_63 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_69 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const struct {
  NI cap; NIM_CHAR data[17+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_98 = { 17 | NIM_STRLIT_FLAG, "editor.background" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_99 = {17, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_98};
static const struct {
  NI cap; NIM_CHAR data[13+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_100 = { 13 | NIM_STRLIT_FLAG, "editor.border" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_101 = {13, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_100};
static const struct {
  NI cap; NIM_CHAR data[13+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_102 = { 13 | NIM_STRLIT_FLAG, "editor.cursor" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_103 = {13, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_102};
static const struct {
  NI cap; NIM_CHAR data[17+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_104 = { 17 | NIM_STRLIT_FLAG, "editor.linenumber" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_105 = {17, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_104};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_106 = { 24 | NIM_STRLIT_FLAG, "editor.linenumber.active" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_107 = {24, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_106};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_124 = { 1 | NIM_STRLIT_FLAG, " " };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_125 = {1, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_124};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_138 = {1, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_124};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_147 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_158 = {1, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_124};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_159 = { 3 | NIM_STRLIT_FLAG, "\342\240\202" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_160 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_159};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_161 = { 3 | NIM_STRLIT_FLAG, "\342\240\206" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_162 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_161};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_163 = { 3 | NIM_STRLIT_FLAG, "\342\240\207" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_164 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_163};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_165 = { 3 | NIM_STRLIT_FLAG, "\342\240\277" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_166 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_165};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_170 = { 7 | NIM_STRLIT_FLAG, "default" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_171 = {7, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_170};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_185 = { 3 | NIM_STRLIT_FLAG, "\342\226\210" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_186 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_185};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_187 = { 4 | NIM_STRLIT_FLAG, "info" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_188 = {4, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_187};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_193 = { 6 | NIM_STRLIT_FLAG, "border" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_194 = {6, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_193};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_195 = {7, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_170};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_212 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_185};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_213 = {4, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_187};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_216 = { 4 | NIM_STRLIT_FLAG, "ctrl" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_217 = {4, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_216};
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_218 = { 5 | NIM_STRLIT_FLAG, "shift" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_219 = {5, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_218};
extern NIM_THREADVAR TFrame* framePtr__system_u2743;
extern NIM_THREADVAR NIM_BOOL nimInErrorMode__system_u4425;
static N_INLINE(void, nimFrame)(TFrame* s_p0) {
	{
		if (!(framePtr__system_u2743 == ((TFrame*) NIM_NIL))) goto LA3_;
		(*s_p0).calldepth = ((NI16)0);
	}
	goto LA1_;
LA3_: ;
	{
		(*s_p0).calldepth = (NI16)((*framePtr__system_u2743).calldepth + ((NI16)1));
	}
LA1_: ;
	(*s_p0).prev = framePtr__system_u2743;
	framePtr__system_u2743 = s_p0;
	{
		if (!((*s_p0).calldepth == ((NI16)2000))) goto LA8_;
		callDepthLimitReached__system_u4643();
	}
LA8_: ;
}
static N_INLINE(void, popFrame)(void) {
	framePtr__system_u2743 = (*framePtr__system_u2743).prev;
}
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1) {
	NI result;
	nimfr_("-%", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");
	nimlf_(364, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");	nimln_(368);	result = ((NI) ((NU)((NU64)(((NU) (x_p0))) - (NU64)(((NU) (y_p1))))));
	popFrame();
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p_p0) {
	NIM_BOOL result;
	nimfr_("nimDecRefIsLast", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");
	nimlf_(219, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");	result = NIM_FALSE;
	nimln_(220);	{
		tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* cell_1;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		nimln_(221);		nimln_(60);		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)16));
		cell_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T5_));
		nimln_(235);		{
			if (!((NI)((NI64)((*cell_1).rc) >> (NU64)(((NI)4))) == ((NI)0))) goto LA8_;
			nimln_(236);			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			nimln_(86);			(*cell_1).rc = minuspercent___system_u813((*cell_1).rc, ((NI)16));
		}
LA6_: ;
	}
LA3_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u274)(tySequence__TtMbAhpjw87rFOFlPjxZaw dest_p0) {
	NI colontmp_;
	colontmp_ = ((NI)0);
	{
		while (1) {
			NI T3_;
			T3_ = dest_p0.len;
			if (!(colontmp_ < T3_)) goto LA2;
			eqdestroy___pureZunicode_u714(dest_p0.p->data[colontmp_].text);
			colontmp_ += ((NI)1);
		} LA2: ;
	}
	if (dest_p0.p && !(dest_p0.p->cap & NIM_STRLIT_FLAG)) {
 alignedDealloc(dest_p0.p, NIM_ALIGNOF(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
}
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u256)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* dest_p0) {
	eqdestroy___libZtext95editor_u274((*dest_p0).lines);
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u881)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest_p0).buffer);
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u256((&(*(*dest_p0).buffer)));
		nimRawDispose((*dest_p0).buffer, ((NI)8));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u918)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast(dest_p0);
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u881((&(*dest_p0)));
		nimRawDispose(dest_p0, ((NI)8));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u430)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA** dest_p0, tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* src_p1) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest_p0));
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u256((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)8));
	}
LA4_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u421)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast(dest_p0);
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u256((&(*dest_p0)));
		nimRawDispose(dest_p0, ((NI)8));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u283)(tySequence__TtMbAhpjw87rFOFlPjxZaw* dest_p0, tySequence__TtMbAhpjw87rFOFlPjxZaw src_p1) {
	if ((*dest_p0).p != src_p1.p) {	eqdestroy___libZtext95editor_u274((*dest_p0));
	}
(*dest_p0).len = src_p1.len; (*dest_p0).p = src_p1.p;
}
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4425);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u7824)(NimStringV2 s_p0) {
	tySequence__48JTohSgTy339bRxHzUD8KA result;
NIM_BOOL* nimErr_;
	nimfr_("toRunes", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	nimlf_(1381, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");	nimln_(25);	if ((s_p0.len-1)-((NI)0) != -1 && (((NI)0) < 0 || ((NI)0) >= s_p0.len || (s_p0.len-1) < 0 || (s_p0.len-1) >= s_p0.len)){ raiseIndexError4(((NI)0), (s_p0.len-1), s_p0.len); goto BeforeRet_;
	}
	nimln_(1381);	result = toRunes__pureZunicode_u4497((((s_p0).p) ? ((NIM_CHAR*)s_p0.p->data+(((NI)0))) : NIM_NIL), ((s_p0.len-1))-(((NI)0))+1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, newEditorLine__libZtext95editor_u39)(NimStringV2 text_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* Result) {
	tySequence__48JTohSgTy339bRxHzUD8KA T1_;
	NI T2_;
	NI T3_;
NIM_BOOL* nimErr_;
	nimfr_("newEditorLine", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	nimln_(310);	nimlf_(85, "/workspaces/telestorie/lib/text_editor.nim");	T1_.len = 0; T1_.p = NIM_NIL;
	T1_ = toRunes__pureZunicode_u7824(text_p0);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___pureZunicode_u714(T1_); goto BeforeRet_;}
	nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");	eqsink___pureZunicode_u723((&(*Result).text), T1_);
	nimlf_(86, "/workspaces/telestorie/lib/text_editor.nim");	T2_ = (*Result).text.len;
	(*Result).gapStart = T2_;
	nimln_(87);	T3_ = (*Result).text.len;
	(*Result).gapEnd = T3_;
	}BeforeRet_: ;
	popFrame();
}
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_6;
{	prepareAdd(s_p0, ((NI)1));
	(*(*s_p0).p).data[(*s_p0).len] = c_p1;
	if (nimAddInt((*s_p0).len, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_6)) { raiseOverflow(); goto BeforeRet_;
	};
	(*s_p0).len = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_6);
	(*(*s_p0).p).data[(*s_p0).len] = 0;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*, newEditorBuffer__libZtext95editor_u208)(NimStringV2 content_p0) {
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* result;
	tySequence__TtMbAhpjw87rFOFlPjxZaw T1_;
NIM_BOOL* nimErr_;
	nimfr_("newEditorBuffer", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(187);	eqdestroy___libZtext95editor_u421(result);
	result = (tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*) nimNewObj(sizeof(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA), NIM_ALIGNOF(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA));
	T1_.len = 0; T1_.p = NIM_NIL;
	T1_.len = 0; T1_.p = (tySequence__TtMbAhpjw87rFOFlPjxZaw_Content*) newSeqPayload(0, sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA), NIM_ALIGNOF(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	eqsink___libZtext95editor_u283((&(*result).lines), T1_);
	nimln_(189);	(*result).modified = NIM_FALSE;
	nimln_(191);	{
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T6_;
		if (!(content_p0.len == ((NI)0))) goto LA4_;
		nimln_(192);		nimZeroMem((void*)(&T6_), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
		newEditorLine__libZtext95editor_u39(TM__ju9cg9cywhFyBl2l4t4KQoNA_3, (&T6_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		add__libZtext95editor_u218((&(*result).lines), (&T6_));
	}
	goto LA2_;
LA4_: ;
	{
		NimStringV2 currentLine_1;
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T21_;
		currentLine_1.len = 0; currentLine_1.p = NIM_NIL;
		nimln_(195);		currentLine_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_4;
		{
			NIM_CHAR ch_1;
			NI i_1;
			NI L_1;
			ch_1 = (NIM_CHAR)0;
			nimlf_(267, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");			i_1 = ((NI)0);
			nimln_(268);			L_1 = content_p0.len;
			{
				nimln_(269);				while (1) {
					if (!(i_1 < L_1)) goto LA10;
					nimlf_(196, "/workspaces/telestorie/lib/text_editor.nim");					if (i_1 < 0 || i_1 >= content_p0.len){ raiseIndexError2(i_1,content_p0.len-1); goto BeforeRet_;
					}
					ch_1 = content_p0.p->data[i_1];
					nimln_(197);					{
						tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T15_;
						if (!((NU8)(ch_1) == (NU8)(10))) goto LA13_;
						nimln_(198);						nimZeroMem((void*)(&T15_), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
						newEditorLine__libZtext95editor_u39(currentLine_1, (&T15_));
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						add__libZtext95editor_u218((&(*result).lines), (&T15_));
						nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						eqsink___system_u2716((&currentLine_1), TM__ju9cg9cywhFyBl2l4t4KQoNA_5);
					}
					goto LA11_;
LA13_: ;
					{
						nimlf_(201, "/workspaces/telestorie/lib/text_editor.nim");						nimAddCharV1((&currentLine_1), ch_1);
					}
LA11_: ;
					nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");					i_1 += ((NI)1);
					nimln_(272);					{
						if (!!((content_p0.len == L_1))) goto LA19_;
						failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_8);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
LA19_: ;
				} LA10: ;
			}
		}
		nimlf_(204, "/workspaces/telestorie/lib/text_editor.nim");		nimZeroMem((void*)(&T21_), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
		newEditorLine__libZtext95editor_u39(currentLine_1, (&T21_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		add__libZtext95editor_u218((&(*result).lines), (&T21_));
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (currentLine_1.p && !(currentLine_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(currentLine_1.p);
}
	}
LA2_: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*, newEditorState__libZtext95editor_u872)(NimStringV2 content_p0) {
	tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* result;
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* T1_;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ T2_;
	tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw T3_;
NIM_BOOL* nimErr_;
	nimfr_("newEditorState", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimlf_(322, "/workspaces/telestorie/lib/text_editor.nim");	eqdestroy___libZtext95editor_u918(result);
	result = (tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*) nimNewObj(sizeof(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q), NIM_ALIGNOF(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q));
	nimln_(187);	nimln_(323);	T1_ = NIM_NIL;
	T1_ = newEditorBuffer__libZtext95editor_u208(content_p0);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u421(T1_); goto BeforeRet_;}
	nimln_(187);	eqsink___libZtext95editor_u430(&(*result).buffer, T1_);
	nimln_(324);	T2_.line = ((NI)0);
	T2_.col = ((NI)0);
	(*result).cursor = T2_;
	nimln_(325);	nimZeroMem((void*)(&T3_), sizeof(tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw));
	T3_.active = NIM_FALSE;
	(*result).selection = T3_;
	nimln_(326);	(*result).scrollX = ((NI)0);
	nimln_(327);	(*result).scrollY = ((NI)0);
	nimln_(328);	(*result).desiredCol = ((NI)0);
	nimln_(329);	(*result).tabWidth = ((NI)4);
	nimln_(330);	(*result).insertMode = NIM_TRUE;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*, newEditorBuffer__libZtext95editor_u482)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ lines_p0) {
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* result;
	tySequence__TtMbAhpjw87rFOFlPjxZaw T1_;
NIM_BOOL* nimErr_;
	nimfr_("newEditorBuffer", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimln_(187);	eqdestroy___libZtext95editor_u421(result);
	nimln_(208);	result = (tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*) nimNewObj(sizeof(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA), NIM_ALIGNOF(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA));
	nimln_(187);	T1_.len = 0; T1_.p = NIM_NIL;
	T1_.len = 0; T1_.p = (tySequence__TtMbAhpjw87rFOFlPjxZaw_Content*) newSeqPayload(0, sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA), NIM_ALIGNOF(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	eqsink___libZtext95editor_u283((&(*result).lines), T1_);
	nimln_(210);	(*result).modified = NIM_FALSE;
	nimln_(212);	{
		NI T4_;
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T7_;
		T4_ = lines_p0.len;
		if (!(T4_ == ((NI)0))) goto LA5_;
		nimln_(213);		nimZeroMem((void*)(&T7_), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
		newEditorLine__libZtext95editor_u39(TM__ju9cg9cywhFyBl2l4t4KQoNA_9, (&T7_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		add__libZtext95editor_u218((&(*result).lines), (&T7_));
	}
	goto LA2_;
LA5_: ;
	{
		{
			NimStringV2* line_1;
			NI i_1;
			NI L_1;
			NI T10_;
			line_1 = (NimStringV2*)0;
			nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");			i_1 = ((NI)0);
			nimln_(250);			T10_ = lines_p0.len;
			L_1 = T10_;
			{
				nimln_(251);				while (1) {
					tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T13_;
					if (!(i_1 < L_1)) goto LA12;
					nimlf_(215, "/workspaces/telestorie/lib/text_editor.nim");					if (i_1 < 0 || i_1 >= lines_p0.len){ raiseIndexError2(i_1,lines_p0.len-1); goto BeforeRet_;
					}
					line_1 = (&lines_p0.p->data[i_1]);
					nimln_(216);					nimZeroMem((void*)(&T13_), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
					newEditorLine__libZtext95editor_u39((*line_1), (&T13_));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					add__libZtext95editor_u218((&(*result).lines), (&T13_));
					nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");					i_1 += ((NI)1);
					nimln_(254);					{
						NI T16_;
						T16_ = lines_p0.len;
						if (!!((T16_ == L_1))) goto LA17_;
						failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_11);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
LA17_: ;
				} LA12: ;
			}
		}
	}
LA2_: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*, newEditorState__libZtext95editor_u983)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ lines_p0) {
	tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* result;
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* T1_;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ T2_;
	tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw T3_;
NIM_BOOL* nimErr_;
	nimfr_("newEditorState", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimlf_(322, "/workspaces/telestorie/lib/text_editor.nim");	eqdestroy___libZtext95editor_u918(result);
	nimln_(334);	result = (tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*) nimNewObj(sizeof(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q), NIM_ALIGNOF(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q));
	nimln_(187);	nimln_(335);	T1_ = NIM_NIL;
	T1_ = newEditorBuffer__libZtext95editor_u482(lines_p0);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u421(T1_); goto BeforeRet_;}
	nimln_(187);	eqsink___libZtext95editor_u430(&(*result).buffer, T1_);
	nimln_(336);	T2_.line = ((NI)0);
	T2_.col = ((NI)0);
	(*result).cursor = T2_;
	nimln_(337);	nimZeroMem((void*)(&T3_), sizeof(tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw));
	T3_.active = NIM_FALSE;
	(*result).selection = T3_;
	nimln_(338);	(*result).scrollX = ((NI)0);
	nimln_(339);	(*result).scrollY = ((NI)0);
	nimln_(340);	(*result).desiredCol = ((NI)0);
	nimln_(341);	(*result).tabWidth = ((NI)4);
	nimln_(342);	(*result).insertMode = NIM_TRUE;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u927)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q** dest_p0, tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* src_p1) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest_p0));
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u881((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)8));
	}
LA4_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___libZtext95editor_u915)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q** dest_p0) {
	(*dest_p0) = 0;
}
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1) {
	NI result;
	nimfr_("+%", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");
	nimlf_(353, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arithmetics.nim");	nimln_(357);	result = ((NI) ((NU)((NU64)(((NU) (x_p0))) + (NU64)(((NU) (y_p1))))));
	popFrame();
	return result;
}
static N_INLINE(void, nimIncRef)(void* p_p0) {
	NI T1_;
	NI T2_;
	nimfr_("nimIncRef", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");
	nimlf_(88, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/arc.nim");	nimln_(60);	T1_ = (NI)0;
	T1_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)16));
	nimln_(88);	nimln_(60);	T2_ = (NI)0;
	T2_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)16));
	nimln_(88);	(*((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T1_))).rc = pluspercent___system_u793((*((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T2_))).rc, ((NI)16));
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*, eqdup___libZtext95editor_u924)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* src_p0) {
	tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* result;
	result = src_p0;
	{
		if (!src_p0) goto LA3_;
		nimIncRef(src_p0);
	}
LA3_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZtext95editor_u921)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q** dest_p0, tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* src_p1) {
	{
		if (!src_p1) goto LA3_;
		nimIncRef(src_p1);
	}
LA3_: ;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = nimDecRefIsLast((*dest_p0));
		if (!T7_) goto LA8_;
		eqdestroy___libZtext95editor_u881((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)8));
	}
LA8_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, toString__libZtext95editor_u54)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0) {
	NimStringV2 result;
	tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
NIM_BOOL* nimErr_;
	nimfr_("toString", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	runes_1.len = 0; runes_1.p = NIM_NIL;
	nimlf_(95, "/workspaces/telestorie/lib/text_editor.nim");	runes_1.len = 0; runes_1.p = (tySequence__48JTohSgTy339bRxHzUD8KA_Content*) newSeqPayload(0, sizeof(NI32), NIM_ALIGNOF(NI32));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_2 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI32 colontmpD_;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_13;
				if (!(i_2 < (*line_p0).gapStart)) goto LA3;
				colontmpD_ = (NI32)0;
				nimlf_(96, "/workspaces/telestorie/lib/text_editor.nim");				i_1 = i_2;
				nimln_(97);				if (i_1 < 0 || i_1 >= (*line_p0).text.len){ raiseIndexError2(i_1,(*line_p0).text.len-1); goto BeforeRet_;
				}
				colontmpD_ = (*line_p0).text.p->data[i_1];
				add__pureZunicode_u4534((&runes_1), colontmpD_);
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_13)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_13);
			} LA3: ;
		}
	}
	{
		NI i_3;
		NI colontmp_;
		NI T5_;
		NI i_4;
		i_3 = (NI)0;
		colontmp_ = (NI)0;
		nimln_(126);		nimlf_(98, "/workspaces/telestorie/lib/text_editor.nim");		T5_ = (*line_p0).text.len;
		colontmp_ = T5_;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_4 = (*line_p0).gapEnd;
		{
			nimln_(129);			while (1) {
				NI32 colontmpD__2;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_14;
				if (!(i_4 < colontmp_)) goto LA7;
				colontmpD__2 = (NI32)0;
				nimlf_(98, "/workspaces/telestorie/lib/text_editor.nim");				i_3 = i_4;
				nimln_(99);				if (i_3 < 0 || i_3 >= (*line_p0).text.len){ raiseIndexError2(i_3,(*line_p0).text.len-1); goto BeforeRet_;
				}
				colontmpD__2 = (*line_p0).text.p->data[i_3];
				add__pureZunicode_u4534((&runes_1), colontmpD__2);
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_14)) { raiseOverflow(); goto BeforeRet_;
				};
				i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_14);
			} LA7: ;
		}
	}
	nimlf_(100, "/workspaces/telestorie/lib/text_editor.nim");	result = dollar___pureZunicode_u666(runes_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");	eqdestroy___pureZunicode_u714(runes_1);
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}
static N_INLINE(void, copyMem__system_u1741)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
{	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_15;
		if (!(((NI)0) < src_p1.len)) goto LA3_;
		if ((src_p1.len) < ((NI)0) || (src_p1.len) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(src_p1.len, ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
		}
		copyMem__system_u1741(((void*) ((&(*(*dest_p0).p).data[(*dest_p0).len]))), ((void*) ((&(*src_p1.p).data[((NI)0)]))), (src_p1.len));
		if (nimAddInt((*dest_p0).len, src_p1.len, &TM__ju9cg9cywhFyBl2l4t4KQoNA_15)) { raiseOverflow(); goto BeforeRet_;
		};
		(*dest_p0).len = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_15);
		(*(*dest_p0).p).data[(*dest_p0).len] = 0;
	}
LA3_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getText__libZtext95editor_u579)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
	nimfr_("getText", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(242, "/workspaces/telestorie/lib/text_editor.nim");	result = TM__ju9cg9cywhFyBl2l4t4KQoNA_12;
	{
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA line_1;
		NI i_1;
		NI i_2;
		NI L_1;
		NI T2_;
		nimZeroMem((void*)(&line_1), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
		i_1 = (NI)0;
		nimlf_(182, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_2 = ((NI)0);
		nimln_(183);		T2_ = (*buffer_p0).lines.len;
		L_1 = T2_;
		{
			nimln_(184);			while (1) {
				NimStringV2 colontmpD_;
				if (!(i_2 < L_1)) goto LA4;
				colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
				nimlf_(243, "/workspaces/telestorie/lib/text_editor.nim");				i_1 = i_2;
				if (i_2 < 0 || i_2 >= (*buffer_p0).lines.len){ raiseIndexError2(i_2,(*buffer_p0).lines.len-1); goto BeforeRet_;
				}
				line_1 = (*buffer_p0).lines.p->data[i_2];
				nimln_(244);				colontmpD_ = toString__libZtext95editor_u54((&line_1));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				prepareAdd((&result), colontmpD_.len + 0);
appendString((&result), colontmpD_);
				nimln_(245);				{
					NI T7_;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_16;
					T7_ = (*buffer_p0).lines.len;
					if (nimSubInt(T7_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_16)) { raiseOverflow(); goto BeforeRet_;
					};
					if (!(i_1 < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_16))) goto LA8_;
					nimln_(246);					nimAddCharV1((&result), 10);
				}
LA8_: ;
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_2 += ((NI)1);
				nimln_(187);				{
					NI T12_;
					T12_ = (*buffer_p0).lines.len;
					if (!!((T12_ == L_1))) goto LA13_;
					failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_18);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA13_: ;
				nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
			} LA4: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0) {
	nimfr_("=destroy", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ, getLines__libZtext95editor_u520)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ result;
NIM_BOOL* nimErr_;
	nimfr_("getLines", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(230, "/workspaces/telestorie/lib/text_editor.nim");	result.len = 0; result.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	{
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_1;
		NI i_1;
		NI L_1;
		NI T2_;
		line_1 = (tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_1 = ((NI)0);
		nimln_(250);		T2_ = (*buffer_p0).lines.len;
		L_1 = T2_;
		{
			nimln_(251);			while (1) {
				NimStringV2 T5_;
				if (!(i_1 < L_1)) goto LA4;
				nimlf_(231, "/workspaces/telestorie/lib/text_editor.nim");				if (i_1 < 0 || i_1 >= (*buffer_p0).lines.len){ raiseIndexError2(i_1,(*buffer_p0).lines.len-1); goto BeforeRet_;
				}
				line_1 = (&(*buffer_p0).lines.p->data[i_1]);
				nimln_(232);				T5_.len = 0; T5_.p = NIM_NIL;
				T5_ = toString__libZtext95editor_u54((&(*line_1)));
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T5_); goto BeforeRet_;}
				add__stdZenumutils_u70((&result), T5_);
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_1 += ((NI)1);
				nimln_(254);				{
					NI T8_;
					T8_ = (*buffer_p0).lines.len;
					if (!!((T8_ == L_1))) goto LA9_;
					failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_19);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA9_: ;
			} LA4: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getLine__libZtext95editor_u513)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI lineIdx_p1) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
	nimfr_("getLine", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	nimlf_(224, "/workspaces/telestorie/lib/text_editor.nim");	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (lineIdx_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= lineIdx_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		nimln_(225);		nimln_(222);		nimln_(225);		result = TM__ju9cg9cywhFyBl2l4t4KQoNA_20;
		goto BeforeRet_;
	}
LA6_: ;
	nimln_(222);	nimln_(226);	if (lineIdx_p1 < 0 || lineIdx_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(lineIdx_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	result = toString__libZtext95editor_u54((&(*buffer_p0).lines.p->data[lineIdx_p1]));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, lineCount__libZtext95editor_u507)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0) {
	NI result;
	NI T1_;
	nimfr_("lineCount", "/workspaces/telestorie/lib/text_editor.nim");
	nimln_(219);	nimln_(220);	T1_ = (*buffer_p0).lines.len;
	result = T1_;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, len__libZtext95editor_u48)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0) {
	NI result;
	NI T1_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_22;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_23;
	nimfr_("len", "/workspaces/telestorie/lib/text_editor.nim");
{	result = (NI)0;
	nimln_(91);	T1_ = (*line_p0).text.len;
	if (nimSubInt((*line_p0).gapEnd, (*line_p0).gapStart, &TM__ju9cg9cywhFyBl2l4t4KQoNA_22)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimSubInt(T1_, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_22), &TM__ju9cg9cywhFyBl2l4t4KQoNA_23)) { raiseOverflow(); goto BeforeRet_;
	};
	result = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_23);
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, lineLength__libZtext95editor_u572)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI lineIdx_p1) {
	NI result;
NIM_BOOL* nimErr_;
	nimfr_("lineLength", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	nimln_(235);	nimln_(236);	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (lineIdx_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= lineIdx_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		nimln_(237);		nimln_(234);		nimln_(237);		result = ((NI)0);
		goto BeforeRet_;
	}
LA6_: ;
	nimln_(238);	if (lineIdx_p1 < 0 || lineIdx_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(lineIdx_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	result = len__libZtext95editor_u48((&(*buffer_p0).lines.p->data[lineIdx_p1]));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, clampCursor__libZtext95editor_u989)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI lineLen_1;
NIM_BOOL* nimErr_;
	nimfr_("clampCursor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(346);	{
		if (!((*state_p0).cursor.line < ((NI)0))) goto LA3_;
		nimln_(347);		(*state_p0).cursor.line = ((NI)0);
	}
	goto LA1_;
LA3_: ;
	{
		NI T6_;
		NI T9_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_21;
		nimln_(348);		T6_ = (NI)0;
		T6_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!(T6_ <= (*state_p0).cursor.line)) goto LA7_;
		nimln_(349);		T9_ = (NI)0;
		T9_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T9_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_21)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_21);
	}
	goto LA1_;
LA7_: ;
LA1_: ;
	nimln_(351);	lineLen_1 = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(352);	{
		if (!((*state_p0).cursor.col < ((NI)0))) goto LA12_;
		nimln_(353);		(*state_p0).cursor.col = ((NI)0);
	}
	goto LA10_;
LA12_: ;
	{
		nimln_(354);		if (!(lineLen_1 < (*state_p0).cursor.col)) goto LA15_;
		nimln_(355);		(*state_p0).cursor.col = lineLen_1;
	}
	goto LA10_;
LA15_: ;
LA10_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursor__libZtext95editor_u992)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI line_p1, NI col_p2) {
NIM_BOOL* nimErr_;
	nimfr_("moveCursor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(359);	(*state_p0).cursor.line = line_p1;
	nimln_(360);	(*state_p0).cursor.col = col_p2;
	nimln_(361);	clampCursor__libZtext95editor_u989(state_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(362);	(*state_p0).desiredCol = (*state_p0).cursor.col;
	nimln_(363);	(*state_p0).selection.active = NIM_FALSE;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveGapTo__libZtext95editor_u106)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI pos_p1) {
	nimfr_("moveGapTo", "/workspaces/telestorie/lib/text_editor.nim");
{	nimln_(114);	{
		if (!(pos_p1 == (*line_p0).gapStart)) goto LA3_;
		nimln_(115);		goto BeforeRet_;
	}
LA3_: ;
	nimln_(117);	{
		NI moveCount_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_24;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_31;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_32;
		if (!(pos_p1 < (*line_p0).gapStart)) goto LA7_;
		nimln_(119);		if (nimSubInt((*line_p0).gapStart, pos_p1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_24)) { raiseOverflow(); goto BeforeRet_;
		};
		moveCount_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_24);
		{
			NI i_1;
			NI colontmp_;
			NI TM__ju9cg9cywhFyBl2l4t4KQoNA_25;
			NI res_1;
			i_1 = (NI)0;
			colontmp_ = (NI)0;
			nimlf_(6, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");			nimlf_(120, "/workspaces/telestorie/lib/text_editor.nim");			if (nimSubInt(moveCount_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_25)) { raiseOverflow(); goto BeforeRet_;
			};
			colontmp_ = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_25);
			nimlf_(33, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");			res_1 = colontmp_;
			{
				nimln_(34);				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_26;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_27;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_28;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_29;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_30;
					if (!(((NI)0) <= res_1)) goto LA11;
					nimlf_(120, "/workspaces/telestorie/lib/text_editor.nim");					i_1 = ((NI) (res_1));
					nimln_(121);					if (nimSubInt((*line_p0).gapEnd, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_26)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_26), i_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_27)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_27) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_27) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_27),(*line_p0).text.len-1); goto BeforeRet_;
					}
					if (nimSubInt((*line_p0).gapStart, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_28)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_28), i_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_29)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_29) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_29) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_29),(*line_p0).text.len-1); goto BeforeRet_;
					}
					(*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_27)] = (*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_29)];
					nimlf_(39, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					if (nimSubInt(res_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_30)) { raiseOverflow(); goto BeforeRet_;
					};
					res_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_30);
				} LA11: ;
			}
		}
		nimlf_(122, "/workspaces/telestorie/lib/text_editor.nim");		if (nimSubInt((*line_p0).gapEnd, moveCount_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_31)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapEnd = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_31);
		nimln_(123);		if (nimSubInt((*line_p0).gapStart, moveCount_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_32)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapStart = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_32);
	}
	goto LA5_;
LA7_: ;
	{
		NI moveCount_2;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_33;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_37;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_38;
		nimln_(126);		if (nimSubInt(pos_p1, (*line_p0).gapStart, &TM__ju9cg9cywhFyBl2l4t4KQoNA_33)) { raiseOverflow(); goto BeforeRet_;
		};
		moveCount_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_33);
		{
			NI i_2;
			NI i_3;
			i_2 = (NI)0;
			nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");			i_3 = ((NI)0);
			{
				nimln_(129);				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_34;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_35;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_36;
					if (!(i_3 < moveCount_2)) goto LA15;
					nimlf_(127, "/workspaces/telestorie/lib/text_editor.nim");					i_2 = i_3;
					nimln_(128);					if (nimAddInt((*line_p0).gapStart, i_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_34)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_34) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_34) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_34),(*line_p0).text.len-1); goto BeforeRet_;
					}
					if (nimAddInt((*line_p0).gapEnd, i_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_35)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_35) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_35) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_35),(*line_p0).text.len-1); goto BeforeRet_;
					}
					(*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_34)] = (*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_35)];
					nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					if (nimAddInt(i_3, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_36)) { raiseOverflow(); goto BeforeRet_;
					};
					i_3 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_36);
				} LA15: ;
			}
		}
		nimlf_(129, "/workspaces/telestorie/lib/text_editor.nim");		if (nimAddInt((*line_p0).gapStart, moveCount_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_37)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapStart = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_37);
		nimln_(130);		if (nimAddInt((*line_p0).gapEnd, moveCount_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_38)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapEnd = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_38);
	}
LA5_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, ensureGapSize__libZtext95editor_u138)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI minSize_p1) {
	tySequence__48JTohSgTy339bRxHzUD8KA newText_1;
	NI currentGapSize_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_39;
	NI growBy_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_40;
	NI newSize_1;
	NI T6_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_41;
	NI afterStart_1;
	NI afterCount_1;
	NI T10_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_43;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_48;
NIM_BOOL* nimErr_;
	nimfr_("ensureGapSize", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	newText_1.len = 0; newText_1.p = NIM_NIL;
	nimln_(134);	if (nimSubInt((*line_p0).gapEnd, (*line_p0).gapStart, &TM__ju9cg9cywhFyBl2l4t4KQoNA_39)) { raiseOverflow(); goto LA1_;
	};
	currentGapSize_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_39);
	nimln_(135);	{
		if (!(minSize_p1 <= currentGapSize_1)) goto LA4_;
		nimln_(136);		nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");		eqdestroy___pureZunicode_u714(newText_1);
		goto BeforeRet_;
	}
LA4_: ;
	nimlf_(139, "/workspaces/telestorie/lib/text_editor.nim");	if (nimSubInt(minSize_p1, currentGapSize_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_40)) { raiseOverflow(); goto LA1_;
	};
	growBy_1 = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_40) >= ((NI)32)) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_40) : ((NI)32));
	nimln_(140);	T6_ = (*line_p0).text.len;
	if (nimAddInt(T6_, growBy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_41)) { raiseOverflow(); goto LA1_;
	};
	newSize_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_41);
	nimln_(141);	if ((newSize_1) < ((NI)0) || (newSize_1) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(newSize_1, ((NI)0), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	newText_1 = newSeq__pureZunicode_u4516((newSize_1));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_2 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_42;
				if (!(i_2 < (*line_p0).gapStart)) goto LA9;
				nimlf_(144, "/workspaces/telestorie/lib/text_editor.nim");				i_1 = i_2;
				nimln_(145);				if (i_1 < 0 || i_1 >= newText_1.len){ raiseIndexError2(i_1,newText_1.len-1); goto LA1_;
				}
				if (i_1 < 0 || i_1 >= (*line_p0).text.len){ raiseIndexError2(i_1,(*line_p0).text.len-1); goto LA1_;
				}
				newText_1.p->data[i_1] = (*line_p0).text.p->data[i_1];
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_42)) { raiseOverflow(); goto LA1_;
				};
				i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_42);
			} LA9: ;
		}
	}
	nimlf_(148, "/workspaces/telestorie/lib/text_editor.nim");	afterStart_1 = (*line_p0).gapEnd;
	nimln_(149);	T10_ = (*line_p0).text.len;
	if (nimSubInt(T10_, (*line_p0).gapEnd, &TM__ju9cg9cywhFyBl2l4t4KQoNA_43)) { raiseOverflow(); goto LA1_;
	};
	afterCount_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_43);
	{
		NI i_3;
		NI i_4;
		i_3 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_4 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_44;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_45;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_46;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_47;
				if (!(i_4 < afterCount_1)) goto LA13;
				nimlf_(150, "/workspaces/telestorie/lib/text_editor.nim");				i_3 = i_4;
				nimln_(151);				if (nimAddInt((*line_p0).gapStart, growBy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_44)) { raiseOverflow(); goto LA1_;
				};
				if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_44), i_3, &TM__ju9cg9cywhFyBl2l4t4KQoNA_45)) { raiseOverflow(); goto LA1_;
				};
				if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_45) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_45) >= newText_1.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_45),newText_1.len-1); goto LA1_;
				}
				if (nimAddInt(afterStart_1, i_3, &TM__ju9cg9cywhFyBl2l4t4KQoNA_46)) { raiseOverflow(); goto LA1_;
				};
				if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_46) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_46) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_46),(*line_p0).text.len-1); goto LA1_;
				}
				newText_1.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_45)] = (*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_46)];
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_47)) { raiseOverflow(); goto LA1_;
				};
				i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_47);
			} LA13: ;
		}
	}
	nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");	eqsink___pureZunicode_u723((&(*line_p0).text), newText_1);
	eqwasMoved___pureZunicode_u711((&newText_1));
	nimlf_(154, "/workspaces/telestorie/lib/text_editor.nim");	if (nimAddInt((*line_p0).gapStart, growBy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_48)) { raiseOverflow(); goto LA1_;
	};
	(*line_p0).gapEnd = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_48);
	{
		LA1_:;
	}
	{
		nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");		eqdestroy___pureZunicode_u714(newText_1);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, insertRune__libZtext95editor_u183)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1, NI32 r_p2) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_49;
NIM_BOOL* nimErr_;
	nimfr_("insertRune", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(158, "/workspaces/telestorie/lib/text_editor.nim");	moveGapTo__libZtext95editor_u106(line_p0, col_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(159);	ensureGapSize__libZtext95editor_u138(line_p0, ((NI)1));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(160);	if ((*line_p0).gapStart < 0 || (*line_p0).gapStart >= (*line_p0).text.len){ raiseIndexError2((*line_p0).gapStart,(*line_p0).text.len-1); goto BeforeRet_;
	}
	(*line_p0).text.p->data[(*line_p0).gapStart] = r_p2;
	nimln_(161);	if (nimAddInt((*line_p0).gapStart, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_49)) { raiseOverflow(); goto BeforeRet_;
	};
	(*line_p0).gapStart = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_49);
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, insertRune__libZtext95editor_u644)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2, NI32 r_p3) {
NIM_BOOL* nimErr_;
	nimfr_("insertRune", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(257);	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (line_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= line_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		nimln_(258);		goto BeforeRet_;
	}
LA6_: ;
	nimln_(259);	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	insertRune__libZtext95editor_u183((&(*buffer_p0).lines.p->data[line_p1]), col_p2, r_p3);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(260);	(*buffer_p0).modified = NIM_TRUE;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, insertTextAtCursor__libZtext95editor_u1056)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NimStringV2 text_p1) {
	tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
NIM_BOOL* nimErr_;
	nimfr_("insertTextAtCursor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	runes_1.len = 0; runes_1.p = NIM_NIL;
	nimln_(441);	runes_1 = toRunes__pureZunicode_u7824(text_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI32* r_1;
		NI i_1;
		NI L_1;
		NI T2_;
		r_1 = (NI32*)0;
		nimlf_(249, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_1 = ((NI)0);
		nimln_(250);		T2_ = runes_1.len;
		L_1 = T2_;
		{
			nimln_(251);			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_50;
				if (!(i_1 < L_1)) goto LA4;
				nimlf_(442, "/workspaces/telestorie/lib/text_editor.nim");				if (i_1 < 0 || i_1 >= runes_1.len){ raiseIndexError2(i_1,runes_1.len-1); goto BeforeRet_;
				}
				r_1 = (&runes_1.p->data[i_1]);
				nimln_(443);				insertRune__libZtext95editor_u644((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col, (*r_1));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(444);				if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_50)) { raiseOverflow(); goto BeforeRet_;
				};
				(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_50);
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_1 += ((NI)1);
				nimln_(254);				{
					NI T7_;
					T7_ = runes_1.len;
					if (!!((T7_ == L_1))) goto LA8_;
					failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_51);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA8_: ;
			} LA4: ;
		}
	}
	nimlf_(445, "/workspaces/telestorie/lib/text_editor.nim");	(*state_p0).desiredCol = (*state_p0).cursor.col;
	nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");	eqdestroy___pureZunicode_u714(runes_1);
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, insertChar__libZtext95editor_u633)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2, NIM_CHAR ch_p3) {
NIM_BOOL* nimErr_;
	nimfr_("insertChar", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(250, "/workspaces/telestorie/lib/text_editor.nim");	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (line_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= line_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		nimln_(251);		goto BeforeRet_;
	}
LA6_: ;
	nimln_(252);	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	if ((((NU8)(ch_p3))) < ((NI32)(-2147483647 -1)) || (((NU8)(ch_p3))) > ((NI32)2147483647)){ raiseRangeErrorI(((NU8)(ch_p3)), ((NI32)(-2147483647 -1)), ((NI32)2147483647)); goto BeforeRet_;
	}
	insertRune__libZtext95editor_u183((&(*buffer_p0).lines.p->data[line_p1]), col_p2, ((NI32) (((NU8)(ch_p3)))));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(253);	(*buffer_p0).modified = NIM_TRUE;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, insertCharAtCursor__libZtext95editor_u1049)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NIM_CHAR ch_p1) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_52;
NIM_BOOL* nimErr_;
	nimfr_("insertCharAtCursor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(435);	insertChar__libZtext95editor_u633((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col, ch_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(436);	if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_52)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_52);
	nimln_(437);	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, deleteRuneBackward__libZtext95editor_u201)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1) {
NIM_BOOL* nimErr_;
	nimfr_("deleteRuneBackward", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(174);	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (col_p1 <= ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (NI)0;
		T5_ = len__libZtext95editor_u48((&(*line_p0)));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T3_ = (T5_ < col_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		nimln_(175);		goto BeforeRet_;
	}
LA6_: ;
	nimln_(177);	moveGapTo__libZtext95editor_u106(line_p0, col_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(178);	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_53;
		if (!(((NI)0) < (*line_p0).gapStart)) goto LA10_;
		nimln_(179);		if (nimSubInt((*line_p0).gapStart, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_53)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapStart = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_53);
	}
LA10_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, deleteCharBackward__libZtext95editor_u677)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2) {
NIM_BOOL* nimErr_;
	nimfr_("deleteCharBackward", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(283);	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (line_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= line_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		nimln_(284);		goto BeforeRet_;
	}
LA6_: ;
	nimln_(285);	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	deleteRuneBackward__libZtext95editor_u201((&(*buffer_p0).lines.p->data[line_p1]), col_p2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(286);	(*buffer_p0).modified = NIM_TRUE;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u348)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* src_p1) {
	if ((*dest_p0).text.p != (*src_p1).text.p) {	eqdestroy___pureZunicode_u714((*dest_p0).text);
	}
(*dest_p0).text.len = (*src_p1).text.len; (*dest_p0).text.p = (*src_p1).text.p;
	(*dest_p0).gapStart = (*src_p1).gapStart;
	(*dest_p0).gapEnd = (*src_p1).gapEnd;
}
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___libZtext95editor_u336)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0) {
	(*dest_p0).text.len = 0; (*dest_p0).text.p = NIM_NIL;
	(*dest_p0).gapStart = 0;
	(*dest_p0).gapEnd = 0;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u339)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0) {
	eqdestroy___pureZunicode_u714((*dest_p0).text);
}
N_LIB_PRIVATE N_NIMCALL(void, deleteNewline__libZtext95editor_u794)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1) {
	NimStringV2 currentText_1;
	NimStringV2 nextText_1;
	NimStringV2 colontmpD_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_57;
	NimStringV2 T9_;
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T10_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_58;
NIM_BOOL* nimErr_;
	nimfr_("deleteNewline", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	currentText_1.len = 0; currentText_1.p = NIM_NIL;
	nextText_1.len = 0; nextText_1.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimln_(306);	{
		NIM_BOOL T4_;
		NI T6_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_56;
		T4_ = (NIM_BOOL)0;
		T4_ = (line_p1 < ((NI)0));
		if (T4_) goto LA5_;
		T6_ = (*buffer_p0).lines.len;
		if (nimSubInt(T6_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_56)) { raiseOverflow(); goto LA1_;
		};
		T4_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_56) <= line_p1);
LA5_: ;
		if (!T4_) goto LA7_;
		nimln_(307);		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		if (nextText_1.p && !(nextText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(nextText_1.p);
}
		if (currentText_1.p && !(currentText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(currentText_1.p);
}
		goto BeforeRet_;
	}
LA7_: ;
	nimlf_(309, "/workspaces/telestorie/lib/text_editor.nim");	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto LA1_;
	}
	currentText_1 = toString__libZtext95editor_u54((&(*buffer_p0).lines.p->data[line_p1]));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(310);	if (nimAddInt(line_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_57)) { raiseOverflow(); goto LA1_;
	};
	if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_57) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_57) >= (*buffer_p0).lines.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_57),(*buffer_p0).lines.len-1); goto LA1_;
	}
	nextText_1 = toString__libZtext95editor_u54((&(*buffer_p0).lines.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_57)]));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto LA1_;
	}
	nimlf_(312, "/workspaces/telestorie/lib/text_editor.nim");	T9_.len = 0; T9_.p = NIM_NIL;
	T9_ = rawNewString(currentText_1.len + nextText_1.len + 0);
appendString((&T9_), currentText_1);
appendString((&T9_), nextText_1);
	colontmpD_ = T9_;
	nimZeroMem((void*)(&T10_), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	newEditorLine__libZtext95editor_u39(colontmpD_, (&T10_));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqsink___libZtext95editor_u348((&(*buffer_p0).lines.p->data[line_p1]), (&T10_));
	nimlf_(313, "/workspaces/telestorie/lib/text_editor.nim");	if (nimAddInt(line_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_58)) { raiseOverflow(); goto LA1_;
	};
	if (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_58)) < ((NI)0) || ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_58)) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_58), ((NI)0), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	delete__libZtext95editor_u802((&(*buffer_p0).lines), ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_58)));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(314);	(*buffer_p0).modified = NIM_TRUE;
	{
		LA1_:;
	}
	{
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		if (nextText_1.p && !(nextText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(nextText_1.p);
}
		if (currentText_1.p && !(currentText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(currentText_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, backspaceAtCursor__libZtext95editor_u1071)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
NIM_BOOL* nimErr_;
	nimfr_("backspaceAtCursor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(459, "/workspaces/telestorie/lib/text_editor.nim");	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_54;
		if (!(((NI)0) < (*state_p0).cursor.col)) goto LA3_;
		nimln_(460);		deleteCharBackward__libZtext95editor_u677((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(461);		if (nimSubInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_54)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_54);
		nimln_(462);		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA3_: ;
	{
		NI prevLineLen_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_55;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_59;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_60;
		nimln_(463);		if (!(((NI)0) < (*state_p0).cursor.line)) goto LA6_;
		nimln_(465);		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_55)) { raiseOverflow(); goto BeforeRet_;
		};
		prevLineLen_1 = lineLength__libZtext95editor_u572((*state_p0).buffer, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_55));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(466);		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_59)) { raiseOverflow(); goto BeforeRet_;
		};
		deleteNewline__libZtext95editor_u794((*state_p0).buffer, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_59));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(467);		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_60)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_60);
		nimln_(468);		(*state_p0).cursor.col = prevLineLen_1;
		nimln_(469);		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA6_: ;
LA1_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, deleteRune__libZtext95editor_u191)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1) {
NIM_BOOL* nimErr_;
	nimfr_("deleteRune", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(165);	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (col_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (NI)0;
		T5_ = len__libZtext95editor_u48((&(*line_p0)));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T3_ = (T5_ <= col_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		nimln_(166);		goto BeforeRet_;
	}
LA6_: ;
	nimln_(168);	moveGapTo__libZtext95editor_u106(line_p0, col_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(169);	{
		NI T10_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_61;
		T10_ = (*line_p0).text.len;
		if (!((*line_p0).gapEnd < T10_)) goto LA11_;
		nimln_(170);		if (nimAddInt((*line_p0).gapEnd, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_61)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapEnd = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_61);
	}
LA11_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, deleteChar__libZtext95editor_u670)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2) {
NIM_BOOL* nimErr_;
	nimfr_("deleteChar", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(276);	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (line_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= line_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		nimln_(277);		goto BeforeRet_;
	}
LA6_: ;
	nimln_(278);	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	deleteRune__libZtext95editor_u191((&(*buffer_p0).lines.p->data[line_p1]), col_p2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(279);	(*buffer_p0).modified = NIM_TRUE;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, deleteAtCursor__libZtext95editor_u1068)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI lineLen_1;
NIM_BOOL* nimErr_;
	nimfr_("deleteAtCursor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(449);	lineLen_1 = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(451);	{
		if (!((*state_p0).cursor.col < lineLen_1)) goto LA3_;
		nimln_(452);		deleteChar__libZtext95editor_u670((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA1_;
LA3_: ;
	{
		NI T6_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_62;
		nimln_(453);		T6_ = (NI)0;
		T6_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T6_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_62)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((*state_p0).cursor.line < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_62))) goto LA7_;
		nimln_(455);		deleteNewline__libZtext95editor_u794((*state_p0).buffer, (*state_p0).cursor.line);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA1_;
LA7_: ;
LA1_: ;
	}BeforeRet_: ;
	popFrame();
}
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = !(((*s_p0).p == ((NimStrPayload*) NIM_NIL)));
		if (!(T3_)) goto LA4_;
		T3_ = ((NI)((*(*s_p0).p).cap & ((NI)IL64(4611686018427387904))) == ((NI)IL64(4611686018427387904)));
LA4_: ;
		if (!T3_) goto LA5_;
		nimPrepareStrMutationImpl__system_u2459(s_p0);
	}
LA5_: ;
}
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1291)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1) {
	NimStringV2 result;
	NI a_1;
	NI L_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_64;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_65;
	nimfr_("[]", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");
{	result.len = 0; result.p = NIM_NIL;
	nimlf_(83, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");	a_1 = x_p1.a;
	nimln_(84);	if (nimSubInt(x_p1.b, a_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_64)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_64), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_65)) { raiseOverflow(); goto BeforeRet_;
	};
	L_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_65);
	nimln_(85);	if ((L_1) < ((NI)0) || (L_1) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(L_1, ((NI)0), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
	}
	result = mnewString((L_1));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_2 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_66;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_67;
				if (!(i_2 < L_1)) goto LA3;
				nimlf_(86, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");				i_1 = i_2;
				if (i_1 < 0 || i_1 >= result.len){ raiseIndexError2(i_1,result.len-1); goto BeforeRet_;
				}
				nimPrepareStrMutationV2((&result));
				if (nimAddInt(i_1, a_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_66)) { raiseOverflow(); goto BeforeRet_;
				};
				if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_66) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_66) >= s_p0.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_66),s_p0.len-1); goto BeforeRet_;
				}
				result.p->data[i_1] = s_p0.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_66)];
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_67)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_67);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZstrbasics_u48)(NI a_p0, NI b_p1) {
	tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA result;
	nimfr_("..", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
	nimlf_(436, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	result.a = a_p0;
	result.b = b_p1;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, insertNewline__libZtext95editor_u684)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2) {
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA currentLine_1;
	NimStringV2 lineText_1;
	NimStringV2 beforeText_1;
	NimStringV2 afterText_1;
	NimStringV2 T9_;
	NimStringV2 T16_;
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T23_;
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T24_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_71;
NIM_BOOL* nimErr_;
	nimfr_("insertNewline", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&currentLine_1), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	lineText_1.len = 0; lineText_1.p = NIM_NIL;
	beforeText_1.len = 0; beforeText_1.p = NIM_NIL;
	afterText_1.len = 0; afterText_1.p = NIM_NIL;
	nimlf_(290, "/workspaces/telestorie/lib/text_editor.nim");	{
		NIM_BOOL T4_;
		NI T6_;
		T4_ = (NIM_BOOL)0;
		T4_ = (line_p1 < ((NI)0));
		if (T4_) goto LA5_;
		T6_ = (*buffer_p0).lines.len;
		T4_ = (T6_ <= line_p1);
LA5_: ;
		if (!T4_) goto LA7_;
		nimln_(291);		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (afterText_1.p && !(afterText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(afterText_1.p);
}
		if (beforeText_1.p && !(beforeText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(beforeText_1.p);
}
		if (lineText_1.p && !(lineText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lineText_1.p);
}
		goto BeforeRet_;
	}
LA7_: ;
	nimlf_(293, "/workspaces/telestorie/lib/text_editor.nim");	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto LA1_;
	}
	currentLine_1 = (*buffer_p0).lines.p->data[line_p1];
	nimln_(294);	lineText_1 = toString__libZtext95editor_u54((&currentLine_1));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T9_.len = 0; T9_.p = NIM_NIL;
	nimln_(297);	{
		if (!(col_p2 <= ((NI)0))) goto LA12_;
		beforeText_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_63;
	}
	goto LA10_;
LA12_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_68;
		tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T15_;
		nimlf_(53, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");		nimlf_(297, "/workspaces/telestorie/lib/text_editor.nim");		if (nimSubInt(((col_p2 <= lineText_1.len) ? col_p2 : lineText_1.len), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_68)) { raiseOverflow(); goto LA1_;
		};
		T15_ = dotdot___stdZstrbasics_u48(((NI)0), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_68));
		beforeText_1 = X5BX5D___pureZstrutils_u1291(lineText_1, T15_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA10_: ;
	T16_.len = 0; T16_.p = NIM_NIL;
	nimln_(298);	{
		if (!(lineText_1.len <= col_p2)) goto LA19_;
		afterText_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_69;
	}
	goto LA17_;
LA19_: ;
	{
		NI colontmpD_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_70;
		tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T22_;
		colontmpD_ = (NI)0;
		colontmpD_ = col_p2;
		nimlf_(53, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/indices.nim");		nimlf_(298, "/workspaces/telestorie/lib/text_editor.nim");		if (nimSubInt(lineText_1.len, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_70)) { raiseOverflow(); goto LA1_;
		};
		T22_ = dotdot___stdZstrbasics_u48(colontmpD_, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_70));
		afterText_1 = X5BX5D___pureZstrutils_u1291(lineText_1, T22_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA17_: ;
	nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto LA1_;
	}
	nimlf_(300, "/workspaces/telestorie/lib/text_editor.nim");	nimZeroMem((void*)(&T23_), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	newEditorLine__libZtext95editor_u39(beforeText_1, (&T23_));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimlf_(934, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	eqsink___libZtext95editor_u348((&(*buffer_p0).lines.p->data[line_p1]), (&T23_));
	nimlf_(301, "/workspaces/telestorie/lib/text_editor.nim");	nimZeroMem((void*)(&T24_), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	newEditorLine__libZtext95editor_u39(afterText_1, (&T24_));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (nimAddInt(line_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_71)) { raiseOverflow(); goto LA1_;
	};
	if (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_71)) < ((NI)0) || ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_71)) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_71), ((NI)0), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	insert__libZtext95editor_u743((&(*buffer_p0).lines), (&T24_), ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_71)));
	nimln_(302);	(*buffer_p0).modified = NIM_TRUE;
	{
		LA1_:;
	}
	{
		nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");		if (afterText_1.p && !(afterText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(afterText_1.p);
}
		if (beforeText_1.p && !(beforeText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(beforeText_1.p);
}
		if (lineText_1.p && !(lineText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lineText_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, insertNewlineAtCursor__libZtext95editor_u1082)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_72;
NIM_BOOL* nimErr_;
	nimfr_("insertNewlineAtCursor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimlf_(473, "/workspaces/telestorie/lib/text_editor.nim");	insertNewline__libZtext95editor_u684((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(474);	if (nimAddInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_72)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_72);
	nimln_(475);	(*state_p0).cursor.col = ((NI)0);
	nimln_(476);	(*state_p0).desiredCol = ((NI)0);
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, insertTabAtCursor__libZtext95editor_u1088)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NIM_BOOL useSoftTabs_p1) {
NIM_BOOL* nimErr_;
	nimfr_("insertTabAtCursor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(480);	{
		NI spaces_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_73;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_74;
		if (!useSoftTabs_p1) goto LA3_;
		nimln_(481);		if ((*state_p0).tabWidth == 0){ raiseDivByZero(); goto BeforeRet_;
		}
		if (nimModInt((*state_p0).cursor.col, (*state_p0).tabWidth, &TM__ju9cg9cywhFyBl2l4t4KQoNA_73)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimSubInt((*state_p0).tabWidth, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_73), &TM__ju9cg9cywhFyBl2l4t4KQoNA_74)) { raiseOverflow(); goto BeforeRet_;
		};
		spaces_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_74);
		{
			NI i_1;
			NI i_2;
			i_1 = (NI)0;
			nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");			i_2 = ((NI)0);
			{
				nimln_(129);				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_75;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_76;
					if (!(i_2 < spaces_1)) goto LA7;
					nimlf_(482, "/workspaces/telestorie/lib/text_editor.nim");					i_1 = i_2;
					nimln_(483);					insertChar__libZtext95editor_u633((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col, 32);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					nimln_(484);					if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_75)) { raiseOverflow(); goto BeforeRet_;
					};
					(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_75);
					nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_76)) { raiseOverflow(); goto BeforeRet_;
					};
					i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_76);
				} LA7: ;
			}
		}
	}
	goto LA1_;
LA3_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_77;
		nimlf_(486, "/workspaces/telestorie/lib/text_editor.nim");		insertChar__libZtext95editor_u633((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col, 9);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(487);		if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_77)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_77);
	}
LA1_: ;
	nimln_(488);	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorRelative__libZtext95editor_u996)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI deltaLine_p1, NI deltaCol_p2) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_78;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_79;
NIM_BOOL* nimErr_;
	nimfr_("moveCursorRelative", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(367);	if (nimAddInt((*state_p0).cursor.line, deltaLine_p1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_78)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_78);
	nimln_(368);	if (nimAddInt((*state_p0).cursor.col, deltaCol_p2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_79)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_79);
	nimln_(369);	clampCursor__libZtext95editor_u989(state_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(370);	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorUp__libZtext95editor_u1008)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
NIM_BOOL* nimErr_;
	nimfr_("moveCursorUp", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(374);	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_80;
		NI T5_;
		if (!(((NI)0) < (*state_p0).cursor.line)) goto LA3_;
		nimln_(375);		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_80)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_80);
		nimln_(376);		T5_ = (NI)0;
		T5_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*state_p0).cursor.col = (((*state_p0).desiredCol <= T5_) ? (*state_p0).desiredCol : T5_);
	}
LA3_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorDown__libZtext95editor_u1014)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
NIM_BOOL* nimErr_;
	nimfr_("moveCursorDown", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(380);	{
		NI T3_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_81;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_82;
		NI T6_;
		T3_ = (NI)0;
		T3_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T3_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_81)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((*state_p0).cursor.line < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_81))) goto LA4_;
		nimln_(381);		if (nimAddInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_82)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_82);
		nimln_(382);		T6_ = (NI)0;
		T6_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*state_p0).cursor.col = (((*state_p0).desiredCol <= T6_) ? (*state_p0).desiredCol : T6_);
	}
LA4_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorLeft__libZtext95editor_u1020)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
NIM_BOOL* nimErr_;
	nimfr_("moveCursorLeft", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(386);	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_83;
		if (!(((NI)0) < (*state_p0).cursor.col)) goto LA3_;
		nimln_(387);		if (nimSubInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_83)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_83);
		nimln_(388);		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA3_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_84;
		NI T8_;
		nimln_(389);		if (!(((NI)0) < (*state_p0).cursor.line)) goto LA6_;
		nimln_(391);		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_84)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_84);
		nimln_(392);		T8_ = (NI)0;
		T8_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*state_p0).cursor.col = T8_;
		nimln_(393);		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA6_: ;
LA1_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorRight__libZtext95editor_u1030)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI lineLen_1;
NIM_BOOL* nimErr_;
	nimfr_("moveCursorRight", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(397);	lineLen_1 = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(398);	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_85;
		if (!((*state_p0).cursor.col < lineLen_1)) goto LA3_;
		nimln_(399);		if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_85)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_85);
		nimln_(400);		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA3_: ;
	{
		NI T6_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_86;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_87;
		nimln_(401);		T6_ = (NI)0;
		T6_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T6_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_86)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((*state_p0).cursor.line < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_86))) goto LA7_;
		nimln_(403);		if (nimAddInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_87)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_87);
		nimln_(404);		(*state_p0).cursor.col = ((NI)0);
		nimln_(405);		(*state_p0).desiredCol = ((NI)0);
	}
	goto LA1_;
LA7_: ;
LA1_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToLineStart__libZtext95editor_u1041)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	nimfr_("moveCursorToLineStart", "/workspaces/telestorie/lib/text_editor.nim");
	nimln_(409);	(*state_p0).cursor.col = ((NI)0);
	nimln_(410);	(*state_p0).desiredCol = ((NI)0);
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToLineEnd__libZtext95editor_u1043)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI T1_;
NIM_BOOL* nimErr_;
	nimfr_("moveCursorToLineEnd", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(414);	T1_ = (NI)0;
	T1_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*state_p0).cursor.col = T1_;
	nimln_(415);	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToBufferStart__libZtext95editor_u1045)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	nimfr_("moveCursorToBufferStart", "/workspaces/telestorie/lib/text_editor.nim");
	nimln_(419);	(*state_p0).cursor.line = ((NI)0);
	nimln_(420);	(*state_p0).cursor.col = ((NI)0);
	nimln_(421);	(*state_p0).desiredCol = ((NI)0);
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToBufferEnd__libZtext95editor_u1047)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI T1_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_88;
	NI T2_;
NIM_BOOL* nimErr_;
	nimfr_("moveCursorToBufferEnd", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(425);	T1_ = (NI)0;
	T1_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(T1_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_88)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_88);
	nimln_(426);	T2_ = (NI)0;
	T2_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*state_p0).cursor.col = T2_;
	nimln_(427);	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, updateEditorScroll__libZtext95editor_u1616)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI viewportHeight_p1, NI viewportWidth_p2) {
	NI contentHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_89;
	NI contentWidth_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_90;
	NI maxScrollY_1;
	NI T15_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_97;
NIM_BOOL* nimErr_;
	nimfr_("updateEditorScroll", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimln_(990);	if (nimSubInt(viewportHeight_p1, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_89)) { raiseOverflow(); goto BeforeRet_;
	};
	contentHeight_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_89);
	nimln_(991);	if (nimSubInt(viewportWidth_p2, ((NI)4), &TM__ju9cg9cywhFyBl2l4t4KQoNA_90)) { raiseOverflow(); goto BeforeRet_;
	};
	contentWidth_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_90);
	nimln_(994);	{
		if (!((*state_p0).cursor.line < (*state_p0).scrollY)) goto LA3_;
		nimln_(995);		(*state_p0).scrollY = (*state_p0).cursor.line;
	}
	goto LA1_;
LA3_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_91;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_92;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_93;
		nimln_(996);		if (nimAddInt((*state_p0).scrollY, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_91)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_91) <= (*state_p0).cursor.line)) goto LA6_;
		nimln_(997);		if (nimSubInt((*state_p0).cursor.line, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_92)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_92), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_93)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).scrollY = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_93);
	}
	goto LA1_;
LA6_: ;
LA1_: ;
	nimln_(1000);	{
		if (!((*state_p0).cursor.col < (*state_p0).scrollX)) goto LA10_;
		nimln_(1001);		(*state_p0).scrollX = (*state_p0).cursor.col;
	}
	goto LA8_;
LA10_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_94;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_95;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_96;
		nimln_(1002);		if (nimAddInt((*state_p0).scrollX, contentWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_94)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_94) <= (*state_p0).cursor.col)) goto LA13_;
		nimln_(1003);		if (nimSubInt((*state_p0).cursor.col, contentWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_95)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_95), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_96)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).scrollX = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_96);
	}
	goto LA8_;
LA13_: ;
LA8_: ;
	nimln_(1006);	T15_ = (NI)0;
	T15_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(T15_, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_97)) { raiseOverflow(); goto BeforeRet_;
	};
	maxScrollY_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_97)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_97));
	nimln_(1007);	{
		if (!((*state_p0).scrollY < ((NI)0))) goto LA18_;
		nimln_(1008);		(*state_p0).scrollY = ((NI)0);
	}
	goto LA16_;
LA18_: ;
	{
		nimln_(1009);		if (!(maxScrollY_1 < (*state_p0).scrollY)) goto LA21_;
		nimln_(1010);		(*state_p0).scrollY = maxScrollY_1;
	}
	goto LA16_;
LA21_: ;
LA16_: ;
	nimln_(1013);	{
		if (!((*state_p0).scrollX < ((NI)0))) goto LA25_;
		nimln_(1014);		(*state_p0).scrollX = ((NI)0);
	}
LA25_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, generateMinimap__libZtext95editor_u1105)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI width_p1, NI height_p2, NI scrollY_p3, NI viewportHeight_p4, tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw* selection_p5, tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw* Result) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ content_1;
	tySequence__iEoNTfSuEpSv8aQiyfWQQw selectionMask_1;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmp_;
	tySequence__iEoNTfSuEpSv8aQiyfWQQw colontmp__2;
	NI linesPerBrailleRow_1;
	NI charsPerBrailleCol_1;
	NI totalMinimapLines_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_141;
	NI minimapStartLine_1;
	NI minimapEndLine_1;
	NI selStartLine_1;
	NI selEndLine_1;
	NI selStartCol_1;
	NI selEndCol_1;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ blitTmp_3;
	tySequence__iEoNTfSuEpSv8aQiyfWQQw blitTmp_4;
NIM_BOOL* nimErr_;
	nimfr_("generateMinimap", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw));
	content_1.len = 0; content_1.p = NIM_NIL;
	selectionMask_1.len = 0; selectionMask_1.p = NIM_NIL;
	colontmp_.len = 0; colontmp_.p = NIM_NIL;
	colontmp__2.len = 0; colontmp__2.p = NIM_NIL;
	nimln_(501);	content_1.len = 0; content_1.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	nimln_(502);	selectionMask_1.len = 0; selectionMask_1.p = (tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content*) newSeqPayload(0, sizeof(tySequence__shxop0zPIs5Ec3k71aCLuQ), NIM_ALIGNOF(tySequence__shxop0zPIs5Ec3k71aCLuQ));
	nimln_(508);	linesPerBrailleRow_1 = ((NI)4);
	nimln_(509);	charsPerBrailleCol_1 = ((NI)2);
	nimln_(512);	if (nimMulInt(height_p2, linesPerBrailleRow_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_141)) { raiseOverflow(); goto LA1_;
	};
	totalMinimapLines_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_141);
	nimln_(513);	minimapStartLine_1 = ((NI)0);
	nimln_(514);	minimapEndLine_1 = lineCount__libZtext95editor_u507(buffer_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(518);	{
		NIM_BOOL T4_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_142;
		NI T6_;
		NI centerLine_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_143;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_144;
		NI T9_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_145;
		T4_ = (NIM_BOOL)0;
		T4_ = (((NI)0) < viewportHeight_p4);
		if (!(T4_)) goto LA5_;
		if (nimMulInt(totalMinimapLines_1, ((NI)3), &TM__ju9cg9cywhFyBl2l4t4KQoNA_142)) { raiseOverflow(); goto LA1_;
		};
		T6_ = (NI)0;
		T6_ = lineCount__libZtext95editor_u507(buffer_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		T4_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_142) < T6_);
LA5_: ;
		if (!T4_) goto LA7_;
		nimln_(520);		if (nimAddInt(scrollY_p3, (NI)((viewportHeight_p4) / (((NI)2))), &TM__ju9cg9cywhFyBl2l4t4KQoNA_143)) { raiseOverflow(); goto LA1_;
		};
		centerLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_143);
		nimln_(521);		if (nimSubInt(centerLine_1, (NI)((totalMinimapLines_1) / (((NI)2))), &TM__ju9cg9cywhFyBl2l4t4KQoNA_144)) { raiseOverflow(); goto LA1_;
		};
		minimapStartLine_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_144)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_144));
		nimln_(522);		T9_ = (NI)0;
		T9_ = lineCount__libZtext95editor_u507(buffer_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (nimAddInt(minimapStartLine_1, totalMinimapLines_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_145)) { raiseOverflow(); goto LA1_;
		};
		minimapEndLine_1 = ((T9_ <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_145)) ? T9_ : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_145));
		nimln_(524);		{
			NI T12_;
			NI TM__ju9cg9cywhFyBl2l4t4KQoNA_146;
			T12_ = (NI)0;
			T12_ = lineCount__libZtext95editor_u507(buffer_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			if (!(minimapEndLine_1 == T12_)) goto LA13_;
			nimln_(525);			if (nimSubInt(minimapEndLine_1, totalMinimapLines_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_146)) { raiseOverflow(); goto LA1_;
			};
			minimapStartLine_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_146)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_146));
		}
LA13_: ;
	}
LA7_: ;
	selStartLine_1 = (NI)0;
	selEndLine_1 = (NI)0;
	selStartCol_1 = (NI)0;
	selEndCol_1 = (NI)0;
	nimln_(529);	{
		if (!(*selection_p5).active) goto LA17_;
		nimln_(530);		selStartLine_1 = (((*selection_p5).start.line <= (*selection_p5).end_0.line) ? (*selection_p5).start.line : (*selection_p5).end_0.line);
		nimln_(531);		selEndLine_1 = (((*selection_p5).start.line >= (*selection_p5).end_0.line) ? (*selection_p5).start.line : (*selection_p5).end_0.line);
		nimln_(533);		{
			if (!((*selection_p5).start.line == (*selection_p5).end_0.line)) goto LA21_;
			nimln_(534);			selStartCol_1 = (((*selection_p5).start.col <= (*selection_p5).end_0.col) ? (*selection_p5).start.col : (*selection_p5).end_0.col);
			nimln_(535);			selEndCol_1 = (((*selection_p5).start.col >= (*selection_p5).end_0.col) ? (*selection_p5).start.col : (*selection_p5).end_0.col);
		}
		goto LA19_;
LA21_: ;
		{
			nimln_(536);			if (!((*selection_p5).start.line < (*selection_p5).end_0.line)) goto LA24_;
			nimln_(537);			selStartCol_1 = (*selection_p5).start.col;
			nimln_(538);			selEndCol_1 = (*selection_p5).end_0.col;
		}
		goto LA19_;
LA24_: ;
		{
			nimln_(540);			selStartCol_1 = (*selection_p5).end_0.col;
			nimln_(541);			selEndCol_1 = (*selection_p5).start.col;
		}
LA19_: ;
	}
LA17_: ;
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_1 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NimStringV2 minimapLine_1;
				tySequence__shxop0zPIs5Ec3k71aCLuQ selectionRow_1;
				NimStringV2 blitTmp_1;
				tySequence__shxop0zPIs5Ec3k71aCLuQ blitTmp_2;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_168;
				if (!(i_1 < height_p2)) goto LA29;
				minimapLine_1.len = 0; minimapLine_1.p = NIM_NIL;
				selectionRow_1.len = 0; selectionRow_1.p = NIM_NIL;
				nimlf_(543, "/workspaces/telestorie/lib/text_editor.nim");				row_1 = i_1;
				nimln_(544);				minimapLine_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_147;
				nimln_(545);				selectionRow_1.len = 0; selectionRow_1.p = (tySequence__shxop0zPIs5Ec3k71aCLuQ_Content*) newSeqPayload(0, sizeof(NIM_BOOL), NIM_ALIGNOF(NIM_BOOL));
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					i_2 = ((NI)0);
					{
						nimln_(129);						while (1) {
							NimStringV2 brailleChar_1;
							NI startLine_1;
							NI TM__ju9cg9cywhFyBl2l4t4KQoNA_148;
							NI TM__ju9cg9cywhFyBl2l4t4KQoNA_149;
							NI endLine_1;
							NI TM__ju9cg9cywhFyBl2l4t4KQoNA_150;
							NI density_1;
							NIM_BOOL isSelected_1;
							NimStringV2 T89_;
							NI TM__ju9cg9cywhFyBl2l4t4KQoNA_167;
							if (!(i_2 < width_p1)) goto LA33;
							brailleChar_1.len = 0; brailleChar_1.p = NIM_NIL;
							nimlf_(547, "/workspaces/telestorie/lib/text_editor.nim");							col_1 = i_2;
							nimln_(548);							if (nimMulInt(row_1, linesPerBrailleRow_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_148)) { raiseOverflow(); goto LA30_;
							};
							if (nimAddInt(minimapStartLine_1, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_148), &TM__ju9cg9cywhFyBl2l4t4KQoNA_149)) { raiseOverflow(); goto LA30_;
							};
							startLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_149);
							nimln_(549);							if (nimAddInt(startLine_1, linesPerBrailleRow_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_150)) { raiseOverflow(); goto LA30_;
							};
							endLine_1 = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_150) <= minimapEndLine_1) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_150) : minimapEndLine_1);
							nimln_(552);							density_1 = ((NI)0);
							{
								NI lineIdx_1;
								NI i_3;
								lineIdx_1 = (NI)0;
								nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");								i_3 = startLine_1;
								{
									nimln_(129);									while (1) {
										NI TM__ju9cg9cywhFyBl2l4t4KQoNA_153;
										if (!(i_3 < endLine_1)) goto LA36;
										nimlf_(553, "/workspaces/telestorie/lib/text_editor.nim");										lineIdx_1 = i_3;
										nimln_(554);										{
											NI T39_;
											NI lineLen_1;
											T39_ = (NI)0;
											T39_ = lineCount__libZtext95editor_u507(buffer_p0);
											if (NIM_UNLIKELY(*nimErr_)) goto LA30_;
											if (!(lineIdx_1 < T39_)) goto LA40_;
											nimln_(555);											lineLen_1 = lineLength__libZtext95editor_u572(buffer_p0, lineIdx_1);
											if (NIM_UNLIKELY(*nimErr_)) goto LA30_;
											nimln_(556);											{
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_151;
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_152;
												if (nimMulInt(col_1, charsPerBrailleCol_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_151)) { raiseOverflow(); goto LA30_;
												};
												if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_151) < lineLen_1)) goto LA44_;
												nimln_(557);												if (nimAddInt(density_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_152)) { raiseOverflow(); goto LA30_;
												};
												density_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_152);
											}
LA44_: ;
										}
LA40_: ;
										nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");										if (nimAddInt(i_3, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_153)) { raiseOverflow(); goto LA30_;
										};
										i_3 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_153);
									} LA36: ;
								}
							}
							nimlf_(560, "/workspaces/telestorie/lib/text_editor.nim");							isSelected_1 = NIM_FALSE;
							nimln_(561);							{
								if (!(*selection_p5).active) goto LA48_;
								{
									NI lineIdx_2;
									NI i_4;
									lineIdx_2 = (NI)0;
									nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");									i_4 = startLine_1;
									{
										nimln_(129);										while (1) {
											NI TM__ju9cg9cywhFyBl2l4t4KQoNA_157;
											if (!(i_4 < endLine_1)) goto LA52;
											nimlf_(562, "/workspaces/telestorie/lib/text_editor.nim");											lineIdx_2 = i_4;
											nimln_(563);											{
												NIM_BOOL T55_;
												NIM_BOOL T56_;
												NI T59_;
												NI colStart_1;
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_154;
												NI colEnd_1;
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_155;
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_156;
												T55_ = (NIM_BOOL)0;
												T56_ = (NIM_BOOL)0;
												T56_ = (selStartLine_1 <= lineIdx_2);
												if (!(T56_)) goto LA57_;
												T56_ = (lineIdx_2 <= selEndLine_1);
LA57_: ;
												T55_ = T56_;
												if (!(T55_)) goto LA58_;
												T59_ = (NI)0;
												T59_ = lineCount__libZtext95editor_u507(buffer_p0);
												if (NIM_UNLIKELY(*nimErr_)) goto LA30_;
												T55_ = (lineIdx_2 < T59_);
LA58_: ;
												if (!T55_) goto LA60_;
												nimln_(564);												if (nimMulInt(col_1, charsPerBrailleCol_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_154)) { raiseOverflow(); goto LA30_;
												};
												colStart_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_154);
												nimln_(565);												if (nimAddInt(col_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_155)) { raiseOverflow(); goto LA30_;
												};
												if (nimMulInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_155), charsPerBrailleCol_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_156)) { raiseOverflow(); goto LA30_;
												};
												colEnd_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_156);
												nimln_(568);												{
													NIM_BOOL T64_;
													T64_ = (NIM_BOOL)0;
													T64_ = (lineIdx_2 == selStartLine_1);
													if (!(T64_)) goto LA65_;
													T64_ = (lineIdx_2 == selEndLine_1);
LA65_: ;
													if (!T64_) goto LA66_;
													nimln_(570);													{
														NIM_BOOL T70_;
														T70_ = (NIM_BOOL)0;
														T70_ = (selStartCol_1 < colEnd_1);
														if (!(T70_)) goto LA71_;
														T70_ = (colStart_1 < selEndCol_1);
LA71_: ;
														if (!T70_) goto LA72_;
														nimln_(571);														isSelected_1 = NIM_TRUE;
														nimln_(572);														goto LA50;
													}
LA72_: ;
												}
												goto LA62_;
LA66_: ;
												{
													nimln_(573);													if (!(lineIdx_2 == selStartLine_1)) goto LA75_;
													nimln_(575);													{
														if (!(selStartCol_1 < colEnd_1)) goto LA79_;
														nimln_(576);														isSelected_1 = NIM_TRUE;
														nimln_(577);														goto LA50;
													}
LA79_: ;
												}
												goto LA62_;
LA75_: ;
												{
													nimln_(578);													if (!(lineIdx_2 == selEndLine_1)) goto LA82_;
													nimln_(580);													{
														if (!(colStart_1 < selEndCol_1)) goto LA86_;
														nimln_(581);														isSelected_1 = NIM_TRUE;
														nimln_(582);														goto LA50;
													}
LA86_: ;
												}
												goto LA62_;
LA82_: ;
												{
													nimln_(585);													isSelected_1 = NIM_TRUE;
													nimln_(586);													goto LA50;
												}
LA62_: ;
											}
LA60_: ;
											nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");											if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_157)) { raiseOverflow(); goto LA30_;
											};
											i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_157);
										} LA52: ;
									}
								} LA50: ;
							}
LA48_: ;
							T89_.len = 0; T89_.p = NIM_NIL;
							nimlf_(589, "/workspaces/telestorie/lib/text_editor.nim");							{
								if (!(density_1 == ((NI)0))) goto LA92_;
								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_158;
							}
							goto LA90_;
LA92_: ;
							{
								nimln_(590);								if (!(density_1 == ((NI)1))) goto LA95_;
								nimln_(589);								nimln_(590);								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_160;
							}
							goto LA90_;
LA95_: ;
							{
								nimln_(591);								if (!(density_1 == ((NI)2))) goto LA98_;
								nimln_(589);								nimln_(591);								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_162;
							}
							goto LA90_;
LA98_: ;
							{
								nimln_(592);								if (!(density_1 == ((NI)3))) goto LA101_;
								nimln_(589);								nimln_(592);								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_164;
							}
							goto LA90_;
LA101_: ;
							{
								nimln_(589);								nimln_(593);								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_166;
							}
LA90_: ;
							nimln_(595);							prepareAdd((&minimapLine_1), brailleChar_1.len + 0);
appendString((&minimapLine_1), brailleChar_1);
							nimln_(596);							add__niminiZruntime_u5425((&selectionRow_1), isSelected_1);
							nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");							if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_167)) { raiseOverflow(); goto LA30_;
							};
							i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_167);
						} LA33: ;
					}
				}
				nimlf_(598, "/workspaces/telestorie/lib/text_editor.nim");				blitTmp_1 = minimapLine_1;
				add__stdZenumutils_u70((&content_1), blitTmp_1);
				nimln_(599);				blitTmp_2 = selectionRow_1;
				add__libZtext95editor_u1181((&selectionMask_1), blitTmp_2);
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_168)) { raiseOverflow(); goto LA30_;
				};
				i_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_168);
				{
					LA30_:;
				}
				{
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			} LA29: ;
		}
	}
	nimlf_(601, "/workspaces/telestorie/lib/text_editor.nim");	colontmp_ = content_1;
	colontmp__2 = selectionMask_1;
	blitTmp_3 = colontmp_;
	(*Result).Field0 = blitTmp_3;
	blitTmp_4 = colontmp__2;
	(*Result).Field1 = blitTmp_4;
	{
		LA1_:;
	}
	{
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u1370)(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw* dest_p0) {
	eqdestroy___system_u3785((*dest_p0).Field0);
	eqdestroy___libZtext95editor_u1211((*dest_p0).Field1);
}
N_LIB_PRIVATE N_NIMCALL(void, drawEditor__libZtext95editor_u1389)(NI layer_p0, NI x_p1, NI y_p2, NI w_p3, NI h_p4, tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p5, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p6) {
	NI colontmpD_;
	NI colontmpD__2;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ bgStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ borderStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ cursorStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ lineNumStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ lineNumActiveStyle_1;
	NI lineNumWidth_1;
	NI minimapWidth_1;
	NI contentX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_108;
	NI contentW_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_109;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_110;
	NI contentHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_111;
	NI visibleStartLine_1;
	NI visibleEndLine_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_112;
	NI T6_;
	NI contentWidthChars_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_119;
NIM_BOOL* nimErr_;
	nimfr_("drawEditor", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	nimln_(613);	bgStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_99);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(614);	borderStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_101);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(615);	cursorStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_103);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(616);	lineNumStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_105);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(617);	lineNumActiveStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_107);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(620);	{
		if (!config_p6.showLineNumbers) goto LA3_;
		colontmpD_ = config_p6.lineNumberWidth;
		lineNumWidth_1 = colontmpD_;
	}
	goto LA1_;
LA3_: ;
	{
		colontmpD__2 = ((NI)0);
		lineNumWidth_1 = colontmpD__2;
	}
LA1_: ;
	nimln_(621);	minimapWidth_1 = ((NI)14);
	nimln_(622);	if (nimAddInt(x_p1, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_108)) { raiseOverflow(); goto BeforeRet_;
	};
	contentX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_108);
	nimln_(623);	if (nimSubInt(w_p3, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_109)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_109), minimapWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_110)) { raiseOverflow(); goto BeforeRet_;
	};
	contentW_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_110);
	nimln_(626);	drawBoxSingle__libZtui95helpers_u194(layer_p0, x_p1, y_p2, w_p3, h_p4, borderStyle_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(629);	if (nimSubInt(h_p4, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_111)) { raiseOverflow(); goto BeforeRet_;
	};
	contentHeight_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_111);
	nimln_(630);	visibleStartLine_1 = (*state_p5).scrollY;
	nimln_(631);	if (nimAddInt((*state_p5).scrollY, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_112)) { raiseOverflow(); goto BeforeRet_;
	};
	T6_ = (NI)0;
	T6_ = lineCount__libZtext95editor_u507((*state_p5).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	visibleEndLine_1 = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_112) <= T6_) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_112) : T6_);
	nimln_(634);	{
		NIM_BOOL T9_;
		T9_ = (NIM_BOOL)0;
		T9_ = config_p6.showLineNumbers;
		if (!(T9_)) goto LA10_;
		T9_ = (((NI)0) < lineNumWidth_1);
LA10_: ;
		if (!T9_) goto LA11_;
		{
			NI i_1;
			NI i_2;
			i_1 = (NI)0;
			nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");			i_2 = visibleStartLine_1;
			{
				nimln_(129);				while (1) {
					NimStringV2 lineNum_1;
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__3;
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__4;
					NI screenY_1;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_113;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_114;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_115;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_116;
					NIM_BOOL isCurrentLine_1;
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_117;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_118;
					if (!(i_2 < visibleEndLine_1)) goto LA15;
					lineNum_1.len = 0; lineNum_1.p = NIM_NIL;
					nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
					nimZeroMem((void*)(&colontmpD__4), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
					nimlf_(635, "/workspaces/telestorie/lib/text_editor.nim");					i_1 = i_2;
					nimln_(636);					if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_113)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimSubInt(i_1, visibleStartLine_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_114)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_113), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_114), &TM__ju9cg9cywhFyBl2l4t4KQoNA_115)) { raiseOverflow(); goto BeforeRet_;
					};
					screenY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_115);
					nimln_(637);					if (nimAddInt(i_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_116)) { raiseOverflow(); goto BeforeRet_;
					};
					lineNum_1 = dollar___systemZdollars_u14((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_116));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					nimln_(638);					isCurrentLine_1 = (i_1 == (*state_p5).cursor.line);
					nimln_(639);					{
						if (!isCurrentLine_1) goto LA18_;
						colontmpD__3 = lineNumActiveStyle_1;
						style_1 = colontmpD__3;
					}
					goto LA16_;
LA18_: ;
					{
						colontmpD__4 = lineNumStyle_1;
						style_1 = colontmpD__4;
					}
LA16_: ;
					nimln_(640);					if (nimAddInt(x_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_117)) { raiseOverflow(); goto BeforeRet_;
					};
					tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_117), screenY_1, lineNum_1, style_1);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_118)) { raiseOverflow(); goto BeforeRet_;
					};
					i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_118);
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (lineNum_1.p && !(lineNum_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lineNum_1.p);
}
				} LA15: ;
			}
		}
	}
LA11_: ;
	nimlf_(643, "/workspaces/telestorie/lib/text_editor.nim");	if (nimSubInt(contentW_1, ((NI)4), &TM__ju9cg9cywhFyBl2l4t4KQoNA_119)) { raiseOverflow(); goto BeforeRet_;
	};
	contentWidthChars_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_119);
	{
		NI i_3;
		NI i_4;
		i_3 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_4 = visibleStartLine_1;
		{
			nimln_(129);			while (1) {
				NimStringV2 lineText_1;
				tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
				NI screenY_2;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_120;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_121;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_122;
				NI runeCount_1;
				NI T24_;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_130;
				if (!(i_4 < visibleEndLine_1)) goto LA23;
				lineText_1.len = 0; lineText_1.p = NIM_NIL;
				runes_1.len = 0; runes_1.p = NIM_NIL;
				nimlf_(644, "/workspaces/telestorie/lib/text_editor.nim");				i_3 = i_4;
				nimln_(645);				if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_120)) { raiseOverflow(); goto BeforeRet_;
				};
				if (nimSubInt(i_3, visibleStartLine_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_121)) { raiseOverflow(); goto BeforeRet_;
				};
				if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_120), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_121), &TM__ju9cg9cywhFyBl2l4t4KQoNA_122)) { raiseOverflow(); goto BeforeRet_;
				};
				screenY_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_122);
				nimln_(646);				lineText_1 = getLine__libZtext95editor_u513((*state_p5).buffer, i_3);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(647);				runes_1 = toRunes__pureZunicode_u7824(lineText_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimln_(648);				T24_ = runes_1.len;
				runeCount_1 = T24_;
				nimln_(651);				{
					NIM_BOOL T27_;
					NI endCol_1;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_123;
					NI selStartCol_1;
					NI selEndCol_1;
					T27_ = (NIM_BOOL)0;
					T27_ = ((*state_p5).scrollX < runeCount_1);
					if (T27_) goto LA28_;
					T27_ = (runeCount_1 == ((NI)0));
LA28_: ;
					if (!T27_) goto LA29_;
					nimln_(652);					if (nimAddInt((*state_p5).scrollX, contentWidthChars_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_123)) { raiseOverflow(); goto BeforeRet_;
					};
					endCol_1 = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_123) <= runeCount_1) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_123) : runeCount_1);
					nimln_(655);					selStartCol_1 = ((NI)-1);
					nimln_(656);					selEndCol_1 = ((NI)-1);
					nimln_(658);					{
						NI colontmpD__5;
						NI colontmpD__6;
						NI colontmpD__7;
						NI colontmpD__8;
						NI colontmpD__9;
						NI colontmpD__10;
						tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ selStart_1;
						tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ selEnd_1;
						NI minLine_1;
						NI maxLine_1;
						NI minCol_1;
						NI maxCol_1;
						if (!(*state_p5).selection.active) goto LA33_;
						colontmpD__5 = (NI)0;
						colontmpD__6 = (NI)0;
						colontmpD__7 = (NI)0;
						colontmpD__8 = (NI)0;
						colontmpD__9 = (NI)0;
						colontmpD__10 = (NI)0;
						nimln_(659);						selStart_1 = (*state_p5).selection.start;
						nimln_(660);						selEnd_1 = (*state_p5).selection.end_0;
						nimln_(661);						minLine_1 = ((selStart_1.line <= selEnd_1.line) ? selStart_1.line : selEnd_1.line);
						nimln_(662);						maxLine_1 = ((selStart_1.line >= selEnd_1.line) ? selStart_1.line : selEnd_1.line);
						nimln_(663);						{
							if (!(selStart_1.line < selEnd_1.line)) goto LA37_;
							colontmpD__5 = selStart_1.col;
							minCol_1 = colontmpD__5;
						}
						goto LA35_;
LA37_: ;
						{
							if (!(selEnd_1.line < selStart_1.line)) goto LA40_;
							colontmpD__6 = selEnd_1.col;
							minCol_1 = colontmpD__6;
						}
						goto LA35_;
LA40_: ;
						{
							colontmpD__7 = ((selStart_1.col <= selEnd_1.col) ? selStart_1.col : selEnd_1.col);
							minCol_1 = colontmpD__7;
						}
LA35_: ;
						nimln_(664);						{
							if (!(selStart_1.line < selEnd_1.line)) goto LA45_;
							colontmpD__8 = selEnd_1.col;
							maxCol_1 = colontmpD__8;
						}
						goto LA43_;
LA45_: ;
						{
							if (!(selEnd_1.line < selStart_1.line)) goto LA48_;
							colontmpD__9 = selStart_1.col;
							maxCol_1 = colontmpD__9;
						}
						goto LA43_;
LA48_: ;
						{
							colontmpD__10 = ((selStart_1.col >= selEnd_1.col) ? selStart_1.col : selEnd_1.col);
							maxCol_1 = colontmpD__10;
						}
LA43_: ;
						nimln_(666);						{
							NIM_BOOL T53_;
							T53_ = (NIM_BOOL)0;
							T53_ = (minLine_1 <= i_3);
							if (!(T53_)) goto LA54_;
							T53_ = (i_3 <= maxLine_1);
LA54_: ;
							if (!T53_) goto LA55_;
							nimln_(667);							{
								NIM_BOOL T59_;
								T59_ = (NIM_BOOL)0;
								T59_ = (i_3 == minLine_1);
								if (!(T59_)) goto LA60_;
								T59_ = (i_3 == maxLine_1);
LA60_: ;
								if (!T59_) goto LA61_;
								nimln_(669);								selStartCol_1 = ((minCol_1 >= (*state_p5).scrollX) ? minCol_1 : (*state_p5).scrollX);
								nimln_(670);								selEndCol_1 = ((maxCol_1 <= endCol_1) ? maxCol_1 : endCol_1);
							}
							goto LA57_;
LA61_: ;
							{
								nimln_(671);								if (!(i_3 == minLine_1)) goto LA64_;
								nimln_(673);								selStartCol_1 = ((minCol_1 >= (*state_p5).scrollX) ? minCol_1 : (*state_p5).scrollX);
								nimln_(674);								selEndCol_1 = endCol_1;
							}
							goto LA57_;
LA64_: ;
							{
								nimln_(675);								if (!(i_3 == maxLine_1)) goto LA67_;
								nimln_(677);								selStartCol_1 = (*state_p5).scrollX;
								nimln_(678);								selEndCol_1 = ((maxCol_1 <= endCol_1) ? maxCol_1 : endCol_1);
							}
							goto LA57_;
LA67_: ;
							{
								nimln_(681);								selStartCol_1 = (*state_p5).scrollX;
								nimln_(682);								selEndCol_1 = endCol_1;
							}
LA57_: ;
						}
LA55_: ;
					}
LA33_: ;
					{
						NI j_1;
						NI i_5;
						j_1 = (NI)0;
						nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");						i_5 = (*state_p5).scrollX;
						{
							nimln_(129);							while (1) {
								NimStringV2 ch_1;
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__11;
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__12;
								NimStringV2 T73_;
								NIM_BOOL isSelected_1;
								NIM_BOOL T79_;
								NIM_BOOL T80_;
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_2;
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_126;
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_127;
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_128;
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_129;
								if (!(i_5 < endCol_1)) goto LA72;
								ch_1.len = 0; ch_1.p = NIM_NIL;
								nimZeroMem((void*)(&colontmpD__11), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
								nimZeroMem((void*)(&colontmpD__12), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
								nimlf_(685, "/workspaces/telestorie/lib/text_editor.nim");								j_1 = i_5;
								T73_.len = 0; T73_.p = NIM_NIL;
								nimln_(686);								{
									if (!(j_1 < runeCount_1)) goto LA76_;
									if (j_1 < 0 || j_1 >= runes_1.len){ raiseIndexError2(j_1,runes_1.len-1); goto BeforeRet_;
									}
									ch_1 = dollar___pureZunicode_u663(runes_1.p->data[j_1]);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								}
								goto LA74_;
LA76_: ;
								{
									ch_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_125;
								}
LA74_: ;
								nimln_(687);								T79_ = (NIM_BOOL)0;
								T80_ = (NIM_BOOL)0;
								T80_ = (((NI)0) <= selStartCol_1);
								if (!(T80_)) goto LA81_;
								T80_ = (selStartCol_1 <= j_1);
LA81_: ;
								T79_ = T80_;
								if (!(T79_)) goto LA82_;
								T79_ = (j_1 < selEndCol_1);
LA82_: ;
								isSelected_1 = T79_;
								nimln_(688);								{
									tyObject_Style__UURjArTrf2wmcCbN5MncAQ invStyle_1;
									tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tempColor_1;
									if (!isSelected_1) goto LA85_;
									nimln_(690);									invStyle_1 = bgStyle_1;
									nimln_(691);									tempColor_1 = invStyle_1.fg;
									nimln_(692);									invStyle_1.fg = invStyle_1.bg;
									nimln_(693);									invStyle_1.bg = tempColor_1;
									colontmpD__11 = invStyle_1;
									style_2 = colontmpD__11;
								}
								goto LA83_;
LA85_: ;
								{
									nimln_(696);									colontmpD__12 = bgStyle_1;
									style_2 = colontmpD__12;
								}
LA83_: ;
								nimln_(698);								if (nimAddInt(contentX_1, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_126)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimSubInt(j_1, (*state_p5).scrollX, &TM__ju9cg9cywhFyBl2l4t4KQoNA_127)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_126), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_127), &TM__ju9cg9cywhFyBl2l4t4KQoNA_128)) { raiseOverflow(); goto BeforeRet_;
								};
								tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_128), screenY_2, ch_1, style_2);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");								if (nimAddInt(i_5, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_129)) { raiseOverflow(); goto BeforeRet_;
								};
								i_5 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_129);
								nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");								if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(ch_1.p);
}
							} LA72: ;
						}
					}
				}
LA29_: ;
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_130)) { raiseOverflow(); goto BeforeRet_;
				};
				i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_130);
				nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");				eqdestroy___pureZunicode_u714(runes_1);
				nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (lineText_1.p && !(lineText_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lineText_1.p);
}
			} LA23: ;
		}
	}
	nimlf_(702, "/workspaces/telestorie/lib/text_editor.nim");	{
		NIM_BOOL T90_;
		NI cursorScreenY_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_131;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_132;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_133;
		NI cursorScreenX_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_134;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_135;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_136;
		T90_ = (NIM_BOOL)0;
		T90_ = (visibleStartLine_1 <= (*state_p5).cursor.line);
		if (!(T90_)) goto LA91_;
		T90_ = ((*state_p5).cursor.line < visibleEndLine_1);
LA91_: ;
		if (!T90_) goto LA92_;
		nimln_(703);		if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_131)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimSubInt((*state_p5).cursor.line, visibleStartLine_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_132)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_131), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_132), &TM__ju9cg9cywhFyBl2l4t4KQoNA_133)) { raiseOverflow(); goto BeforeRet_;
		};
		cursorScreenY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_133);
		nimln_(704);		if (nimAddInt(contentX_1, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_134)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimSubInt((*state_p5).cursor.col, (*state_p5).scrollX, &TM__ju9cg9cywhFyBl2l4t4KQoNA_135)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_134), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_135), &TM__ju9cg9cywhFyBl2l4t4KQoNA_136)) { raiseOverflow(); goto BeforeRet_;
		};
		cursorScreenX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_136);
		nimln_(706);		{
			NIM_BOOL T96_;
			NI TM__ju9cg9cywhFyBl2l4t4KQoNA_137;
			NimStringV2 lineText_2;
			tySequence__48JTohSgTy339bRxHzUD8KA runes_2;
			NimStringV2 cursorChar_1;
			NimStringV2 T100_;
			tyObject_Style__UURjArTrf2wmcCbN5MncAQ invertedStyle_1;
			tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tempColor_2;
			T96_ = (NIM_BOOL)0;
			T96_ = ((*state_p5).scrollX <= (*state_p5).cursor.col);
			if (!(T96_)) goto LA97_;
			if (nimAddInt((*state_p5).scrollX, contentWidthChars_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_137)) { raiseOverflow(); goto BeforeRet_;
			};
			T96_ = ((*state_p5).cursor.col < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_137));
LA97_: ;
			if (!T96_) goto LA98_;
			lineText_2.len = 0; lineText_2.p = NIM_NIL;
			runes_2.len = 0; runes_2.p = NIM_NIL;
			cursorChar_1.len = 0; cursorChar_1.p = NIM_NIL;
			nimln_(708);			lineText_2 = getLine__libZtext95editor_u513((*state_p5).buffer, (*state_p5).cursor.line);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimln_(709);			runes_2 = toRunes__pureZunicode_u7824(lineText_2);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			T100_.len = 0; T100_.p = NIM_NIL;
			nimln_(710);			{
				NI T103_;
				T103_ = runes_2.len;
				if (!((*state_p5).cursor.col < T103_)) goto LA104_;
				nimln_(711);				if ((*state_p5).cursor.col < 0 || (*state_p5).cursor.col >= runes_2.len){ raiseIndexError2((*state_p5).cursor.col,runes_2.len-1); goto BeforeRet_;
				}
				cursorChar_1 = dollar___pureZunicode_u663(runes_2.p->data[(*state_p5).cursor.col]);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			goto LA101_;
LA104_: ;
			{
				nimln_(710);				nimln_(713);				cursorChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_138;
			}
LA101_: ;
			nimln_(716);			invertedStyle_1 = bgStyle_1;
			nimln_(717);			tempColor_2 = invertedStyle_1.fg;
			nimln_(718);			invertedStyle_1.fg = invertedStyle_1.bg;
			nimln_(719);			invertedStyle_1.bg = tempColor_2;
			nimln_(721);			tuiDraw__libZtui95helpers_u118(layer_p0, cursorScreenX_1, cursorScreenY_1, cursorChar_1, invertedStyle_1);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (cursorChar_1.p && !(cursorChar_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(cursorChar_1.p);
}
			nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");			eqdestroy___pureZunicode_u714(runes_2);
			nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");			if (lineText_2.p && !(lineText_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(lineText_2.p);
}
		}
LA98_: ;
	}
LA92_: ;
	nimlf_(724, "/workspaces/telestorie/lib/text_editor.nim");	{
		NIM_BOOL T109_;
		NI T111_;
		tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw minimapData_1;
		NI colontmpD__13;
		NI colontmpD__14;
		NI minimapX_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_139;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_140;
		NI minimapH_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_169;
		tyObject_Style__UURjArTrf2wmcCbN5MncAQ defaultStyle_1;
		NI maxScrollY_1;
		NI T139_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_177;
		NI minimapStartY_1;
		NI minimapVisibleHeight_1;
		NI T145_;
		T109_ = (NIM_BOOL)0;
		T109_ = config_p6.showScrollbar;
		if (!(T109_)) goto LA110_;
		T111_ = (NI)0;
		T111_ = lineCount__libZtext95editor_u507((*state_p5).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T109_ = (contentHeight_1 < T111_);
LA110_: ;
		if (!T109_) goto LA112_;
		nimZeroMem((void*)(&minimapData_1), sizeof(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw));
		colontmpD__13 = (NI)0;
		colontmpD__14 = (NI)0;
		nimln_(725);		if (nimAddInt(x_p1, w_p3, &TM__ju9cg9cywhFyBl2l4t4KQoNA_139)) { raiseOverflow(); goto LA114_;
		};
		if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_139), minimapWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_140)) { raiseOverflow(); goto LA114_;
		};
		minimapX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_140);
		nimln_(726);		minimapH_1 = contentHeight_1;
		nimln_(727);		if (nimSubInt(minimapWidth_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_169)) { raiseOverflow(); goto LA114_;
		};
		generateMinimap__libZtext95editor_u1105((*state_p5).buffer, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_169), minimapH_1, (*state_p5).scrollY, contentHeight_1, (&(*state_p5).selection), (&minimapData_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
		nimln_(730);		defaultStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_171);
		if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
		{
			NI i_6;
			NI colontmp_;
			NI T116_;
			NI i_7;
			i_6 = (NI)0;
			colontmp_ = (NI)0;
			nimlf_(126, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");			nimlf_(731, "/workspaces/telestorie/lib/text_editor.nim");			T116_ = minimapData_1.Field0.len;
			colontmp_ = T116_;
			nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");			i_7 = ((NI)0);
			{
				nimln_(129);				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_176;
					if (!(i_7 < colontmp_)) goto LA118;
					nimlf_(731, "/workspaces/telestorie/lib/text_editor.nim");					i_6 = i_7;
					nimln_(732);					{
						NIM_BOOL T121_;
						NI T123_;
						NimStringV2 line_1;
						tySequence__shxop0zPIs5Ec3k71aCLuQ selMask_1;
						tySequence__48JTohSgTy339bRxHzUD8KA runes_3;
						T121_ = (NIM_BOOL)0;
						T121_ = (i_6 < minimapH_1);
						if (!(T121_)) goto LA122_;
						T123_ = minimapData_1.Field1.len;
						T121_ = (i_6 < T123_);
LA122_: ;
						if (!T121_) goto LA124_;
						line_1.len = 0; line_1.p = NIM_NIL;
						selMask_1.len = 0; selMask_1.p = NIM_NIL;
						runes_3.len = 0; runes_3.p = NIM_NIL;
						nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (i_6 < 0 || i_6 >= minimapData_1.Field0.len){ raiseIndexError2(i_6,minimapData_1.Field0.len-1); goto LA114_;
						}
						eqcopy___system_u2710((&line_1), minimapData_1.Field0.p->data[i_6]);
						nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");						if (i_6 < 0 || i_6 >= minimapData_1.Field1.len){ raiseIndexError2(i_6,minimapData_1.Field1.len-1); goto LA114_;
						}
						eqcopy___niminiZruntime_u160((&selMask_1), minimapData_1.Field1.p->data[i_6]);
						nimlf_(735, "/workspaces/telestorie/lib/text_editor.nim");						runes_3 = toRunes__pureZunicode_u7824(line_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
						{
							NI j_2;
							NI colontmp__2;
							NI T127_;
							NI i_8;
							j_2 = (NI)0;
							colontmp__2 = (NI)0;
							nimlf_(126, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");							nimlf_(737, "/workspaces/telestorie/lib/text_editor.nim");							T127_ = runes_3.len;
							colontmp__2 = T127_;
							nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");							i_8 = ((NI)0);
							{
								nimln_(129);								while (1) {
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_175;
									if (!(i_8 < colontmp__2)) goto LA129;
									nimlf_(737, "/workspaces/telestorie/lib/text_editor.nim");									j_2 = i_8;
									nimln_(738);									{
										NI T132_;
										NimStringV2 ch_2;
										tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_3;
										NI TM__ju9cg9cywhFyBl2l4t4KQoNA_172;
										NI TM__ju9cg9cywhFyBl2l4t4KQoNA_173;
										NI TM__ju9cg9cywhFyBl2l4t4KQoNA_174;
										T132_ = selMask_1.len;
										if (!(j_2 < T132_)) goto LA133_;
										ch_2.len = 0; ch_2.p = NIM_NIL;
										nimln_(739);										if (j_2 < 0 || j_2 >= runes_3.len){ raiseIndexError2(j_2,runes_3.len-1); goto LA114_;
										}
										ch_2 = dollar___pureZunicode_u663(runes_3.p->data[j_2]);
										if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
										nimln_(740);										style_3 = defaultStyle_1;
										nimln_(742);										{
											tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tempColor_3;
											if (j_2 < 0 || j_2 >= selMask_1.len){ raiseIndexError2(j_2,selMask_1.len-1); goto LA114_;
											}
											if (!selMask_1.p->data[j_2]) goto LA137_;
											nimln_(743);											tempColor_3 = style_3.fg;
											nimln_(744);											style_3.fg = style_3.bg;
											nimln_(745);											style_3.bg = tempColor_3;
										}
LA137_: ;
										nimln_(746);										if (nimAddInt(minimapX_1, j_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_172)) { raiseOverflow(); goto LA114_;
										};
										if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_173)) { raiseOverflow(); goto LA114_;
										};
										if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_173), i_6, &TM__ju9cg9cywhFyBl2l4t4KQoNA_174)) { raiseOverflow(); goto LA114_;
										};
										tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_172), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_174), ch_2, style_3);
										if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
										nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");										if (ch_2.p && !(ch_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(ch_2.p);
}
									}
LA133_: ;
									nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");									if (nimAddInt(i_8, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_175)) { raiseOverflow(); goto LA114_;
									};
									i_8 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_175);
								} LA129: ;
							}
						}
						nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");						eqdestroy___pureZunicode_u714(runes_3);
						nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");						eqdestroy___niminiZruntime_u157(selMask_1);
						nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");						if (line_1.p && !(line_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(line_1.p);
}
					}
LA124_: ;
					nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					if (nimAddInt(i_7, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_176)) { raiseOverflow(); goto LA114_;
					};
					i_7 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_176);
				} LA118: ;
			}
		}
		nimlf_(750, "/workspaces/telestorie/lib/text_editor.nim");		T139_ = (NI)0;
		T139_ = lineCount__libZtext95editor_u507((*state_p5).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
		if (nimSubInt(T139_, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_177)) { raiseOverflow(); goto LA114_;
		};
		maxScrollY_1 = ((((NI)1) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_177)) ? ((NI)1) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_177));
		nimln_(751);		{
			NI TM__ju9cg9cywhFyBl2l4t4KQoNA_178;
			if (!(((NI)0) < maxScrollY_1)) goto LA142_;
			nimln_(752);			if (nimSubInt(minimapH_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_178)) { raiseOverflow(); goto LA114_;
			};
			if ((((NI) (((NF)(((NF)(((NF) ((*state_p5).scrollY))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_178)))))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(((NF)(((NF) ((*state_p5).scrollY))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_178)))))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(((NF)(((NF) ((*state_p5).scrollY))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_178))))))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA114_;
			}
			colontmpD__13 = (((NI) (((NF)(((NF)(((NF) ((*state_p5).scrollY))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_178))))))));
			minimapStartY_1 = colontmpD__13;
		}
		goto LA140_;
LA142_: ;
		{
			nimln_(754);			colontmpD__14 = ((NI)0);
			minimapStartY_1 = colontmpD__14;
		}
LA140_: ;
		nimln_(755);		T145_ = (NI)0;
		T145_ = lineCount__libZtext95editor_u507((*state_p5).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
		if ((((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1))))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1))))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1)))))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA114_;
		}
		minimapVisibleHeight_1 = ((((NI)1) >= (((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1)))))))) ? ((NI)1) : (((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1))))))));
		{
			NI dy_1;
			NI i_9;
			dy_1 = (NI)0;
			nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");			i_9 = ((NI)0);
			{
				nimln_(129);				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_189;
					if (!(i_9 < minimapVisibleHeight_1)) goto LA148;
					nimlf_(757, "/workspaces/telestorie/lib/text_editor.nim");					dy_1 = i_9;
					nimln_(758);					{
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_179;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_180;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_181;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_182;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_183;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_184;
						tyObject_Style__UURjArTrf2wmcCbN5MncAQ T153_;
						if (nimAddInt(minimapStartY_1, dy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_179)) { raiseOverflow(); goto LA114_;
						};
						if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_179) < minimapH_1)) goto LA151_;
						nimln_(759);						if (nimAddInt(minimapX_1, minimapWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_180)) { raiseOverflow(); goto LA114_;
						};
						if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_180), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_181)) { raiseOverflow(); goto LA114_;
						};
						if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_182)) { raiseOverflow(); goto LA114_;
						};
						if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_182), minimapStartY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_183)) { raiseOverflow(); goto LA114_;
						};
						if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_183), dy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_184)) { raiseOverflow(); goto LA114_;
						};
						T153_ = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_188);
						if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
						tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_181), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_184), TM__ju9cg9cywhFyBl2l4t4KQoNA_186, T153_);
						if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
					}
LA151_: ;
					nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");					if (nimAddInt(i_9, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_189)) { raiseOverflow(); goto LA114_;
					};
					i_9 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_189);
				} LA148: ;
			}
		}
		{
			LA114_:;
		}
		{
			nimlf_(601, "/workspaces/telestorie/lib/text_editor.nim");			eqdestroy___libZtext95editor_u1370((&minimapData_1));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA112_: ;
	}BeforeRet_: ;
	popFrame();
}
N_LIB_PRIVATE N_NIMCALL(void, drawMinimap__libZtext95editor_u1623)(NI layer_p0, NI x_p1, NI y_p2, NI w_p3, NI h_p4, tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p5, NI scrollY_p6, NI viewportHeight_p7, tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw* selection_p8) {
	tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw minimapData_1;
	NI colontmpD_;
	NI colontmpD__2;
	NI contentHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_190;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_191;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_192;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ T2_;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ defaultStyle_1;
	NI maxScrollY_1;
	NI T25_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_202;
	NI minimapStartY_1;
	NI minimapHeight_1;
	NI T31_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_204;
NIM_BOOL* nimErr_;
	nimfr_("drawMinimap", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&minimapData_1), sizeof(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw));
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	nimln_(1023);	if (nimSubInt(viewportHeight_p7, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_190)) { raiseOverflow(); goto LA1_;
	};
	contentHeight_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_190);
	nimln_(1024);	if (nimSubInt(w_p3, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_191)) { raiseOverflow(); goto LA1_;
	};
	if (nimSubInt(h_p4, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_192)) { raiseOverflow(); goto LA1_;
	};
	generateMinimap__libZtext95editor_u1105(buffer_p5, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_191), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_192), scrollY_p6, contentHeight_1, selection_p8, (&minimapData_1));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1027);	T2_ = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_194);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	drawBoxSingle__libZtui95helpers_u194(layer_p0, x_p1, y_p2, w_p3, h_p4, T2_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimln_(1030);	defaultStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_195);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		NI i_1;
		NI colontmp_;
		NI T4_;
		NI i_2;
		i_1 = (NI)0;
		colontmp_ = (NI)0;
		nimlf_(126, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		nimlf_(1031, "/workspaces/telestorie/lib/text_editor.nim");		T4_ = minimapData_1.Field0.len;
		colontmp_ = T4_;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_2 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_201;
				if (!(i_2 < colontmp_)) goto LA6;
				nimlf_(1031, "/workspaces/telestorie/lib/text_editor.nim");				i_1 = i_2;
				nimln_(1032);				{
					NI T9_;
					NimStringV2 line_1;
					tySequence__shxop0zPIs5Ec3k71aCLuQ selMask_1;
					tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
					T9_ = minimapData_1.Field1.len;
					if (!(i_1 < T9_)) goto LA10_;
					line_1.len = 0; line_1.p = NIM_NIL;
					selMask_1.len = 0; selMask_1.p = NIM_NIL;
					runes_1.len = 0; runes_1.p = NIM_NIL;
					nimlf_(1699, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (i_1 < 0 || i_1 >= minimapData_1.Field0.len){ raiseIndexError2(i_1,minimapData_1.Field0.len-1); goto LA1_;
					}
					eqcopy___system_u2710((&line_1), minimapData_1.Field0.p->data[i_1]);
					nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");					if (i_1 < 0 || i_1 >= minimapData_1.Field1.len){ raiseIndexError2(i_1,minimapData_1.Field1.len-1); goto LA1_;
					}
					eqcopy___niminiZruntime_u160((&selMask_1), minimapData_1.Field1.p->data[i_1]);
					nimlf_(1035, "/workspaces/telestorie/lib/text_editor.nim");					runes_1 = toRunes__pureZunicode_u7824(line_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					{
						NI j_1;
						NI colontmp__2;
						NI T13_;
						NI i_3;
						j_1 = (NI)0;
						colontmp__2 = (NI)0;
						nimlf_(126, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");						nimlf_(1037, "/workspaces/telestorie/lib/text_editor.nim");						T13_ = runes_1.len;
						colontmp__2 = T13_;
						nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");						i_3 = ((NI)0);
						{
							nimln_(129);							while (1) {
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_200;
								if (!(i_3 < colontmp__2)) goto LA15;
								nimlf_(1037, "/workspaces/telestorie/lib/text_editor.nim");								j_1 = i_3;
								nimln_(1038);								{
									NI T18_;
									NimStringV2 ch_1;
									tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_196;
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_197;
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_198;
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_199;
									T18_ = selMask_1.len;
									if (!(j_1 < T18_)) goto LA19_;
									ch_1.len = 0; ch_1.p = NIM_NIL;
									nimln_(1039);									if (j_1 < 0 || j_1 >= runes_1.len){ raiseIndexError2(j_1,runes_1.len-1); goto LA1_;
									}
									ch_1 = dollar___pureZunicode_u663(runes_1.p->data[j_1]);
									if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
									nimln_(1040);									style_1 = defaultStyle_1;
									nimln_(1042);									{
										tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tempColor_1;
										if (j_1 < 0 || j_1 >= selMask_1.len){ raiseIndexError2(j_1,selMask_1.len-1); goto LA1_;
										}
										if (!selMask_1.p->data[j_1]) goto LA23_;
										nimln_(1043);										tempColor_1 = style_1.fg;
										nimln_(1044);										style_1.fg = style_1.bg;
										nimln_(1045);										style_1.bg = tempColor_1;
									}
LA23_: ;
									nimln_(1046);									if (nimAddInt(x_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_196)) { raiseOverflow(); goto LA1_;
									};
									if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_196), j_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_197)) { raiseOverflow(); goto LA1_;
									};
									if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_198)) { raiseOverflow(); goto LA1_;
									};
									if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_198), i_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_199)) { raiseOverflow(); goto LA1_;
									};
									tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_197), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_199), ch_1, style_1);
									if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
									nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");									if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(ch_1.p);
}
								}
LA19_: ;
								nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");								if (nimAddInt(i_3, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_200)) { raiseOverflow(); goto LA1_;
								};
								i_3 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_200);
							} LA15: ;
						}
					}
					nimlf_(310, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/pure/unicode.nim");					eqdestroy___pureZunicode_u714(runes_1);
					nimlf_(185, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");					eqdestroy___niminiZruntime_u157(selMask_1);
					nimlf_(394, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");					if (line_1.p && !(line_1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(line_1.p);
}
				}
LA10_: ;
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_201)) { raiseOverflow(); goto LA1_;
				};
				i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_201);
			} LA6: ;
		}
	}
	nimlf_(1050, "/workspaces/telestorie/lib/text_editor.nim");	T25_ = (NI)0;
	T25_ = lineCount__libZtext95editor_u507(buffer_p5);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (nimSubInt(T25_, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_202)) { raiseOverflow(); goto LA1_;
	};
	maxScrollY_1 = ((((NI)1) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_202)) ? ((NI)1) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_202));
	nimln_(1051);	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_203;
		if (!(((NI)0) < maxScrollY_1)) goto LA28_;
		nimln_(1052);		if (nimSubInt(h_p4, ((NI)3), &TM__ju9cg9cywhFyBl2l4t4KQoNA_203)) { raiseOverflow(); goto LA1_;
		};
		if ((((NI) (((NF)(((NF)(((NF) (scrollY_p6))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_203)))))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(((NF)(((NF) (scrollY_p6))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_203)))))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(((NF)(((NF) (scrollY_p6))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_203))))))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
		}
		colontmpD_ = (((NI) (((NF)(((NF)(((NF) (scrollY_p6))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_203))))))));
		minimapStartY_1 = colontmpD_;
	}
	goto LA26_;
LA28_: ;
	{
		nimln_(1054);		colontmpD__2 = ((NI)0);
		minimapStartY_1 = colontmpD__2;
	}
LA26_: ;
	nimln_(1055);	T31_ = (NI)0;
	T31_ = lineCount__libZtext95editor_u507(buffer_p5);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (nimSubInt(h_p4, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_204)) { raiseOverflow(); goto LA1_;
	};
	if ((((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204)))))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204)))))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204))))))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto LA1_;
	}
	minimapHeight_1 = ((((NI)1) >= (((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204))))))))) ? ((NI)1) : (((NI) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204)))))))));
	{
		NI dy_1;
		NI i_4;
		dy_1 = (NI)0;
		nimlf_(128, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");		i_4 = ((NI)0);
		{
			nimln_(129);			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_214;
				if (!(i_4 < minimapHeight_1)) goto LA34;
				nimlf_(1057, "/workspaces/telestorie/lib/text_editor.nim");				dy_1 = i_4;
				nimln_(1058);				{
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_205;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_206;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_207;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_208;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_209;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_210;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_211;
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ T39_;
					if (nimAddInt(minimapStartY_1, dy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_205)) { raiseOverflow(); goto LA1_;
					};
					if (nimSubInt(h_p4, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_206)) { raiseOverflow(); goto LA1_;
					};
					if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_205) < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_206))) goto LA37_;
					nimln_(1059);					if (nimAddInt(x_p1, w_p3, &TM__ju9cg9cywhFyBl2l4t4KQoNA_207)) { raiseOverflow(); goto LA1_;
					};
					if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_207), ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_208)) { raiseOverflow(); goto LA1_;
					};
					if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_209)) { raiseOverflow(); goto LA1_;
					};
					if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_209), minimapStartY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_210)) { raiseOverflow(); goto LA1_;
					};
					if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_210), dy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_211)) { raiseOverflow(); goto LA1_;
					};
					T39_ = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_213);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_208), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_211), TM__ju9cg9cywhFyBl2l4t4KQoNA_212, T39_);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA37_: ;
				nimlf_(131, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators_1.nim");				if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_214)) { raiseOverflow(); goto LA1_;
				};
				i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_214);
			} LA34: ;
		}
	}
	{
		LA1_:;
	}
	{
		nimlf_(601, "/workspaces/telestorie/lib/text_editor.nim");		eqdestroy___libZtext95editor_u1370((&minimapData_1));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
}
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2) {
	int result;
	result = memcmp(a_p0, b_p1, ((size_t) (size_p2)));
	return result;
}
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2) {
	NIM_BOOL result;
	int T1_;
	T1_ = (int)0;
	T1_ = nimCmpMem(a_p0, b_p1, size_p2);
	result = (T1_ == ((NI32)0));
	return result;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1) {
	NIM_BOOL result;
	NI alen_1;
	NI blen_1;
	nimfr_("eqStrings", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/strmantle.nim");
{	nimlf_(33, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/strmantle.nim");	result = NIM_FALSE;
	nimln_(34);	alen_1 = a_p0.len;
	nimln_(35);	blen_1 = b_p1.len;
	nimln_(36);	{
		if (!(alen_1 == blen_1)) goto LA3_;
		nimln_(37);		{
			if (!(alen_1 == ((NI)0))) goto LA7_;
			nimln_(32);			nimln_(37);			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA7_: ;
		nimln_(38);		nimln_(32);		nimln_(38);		result = equalMem__system_u1749(((void*) ((&a_p0.p->data[((NI)0)]))), ((void*) ((&b_p1.p->data[((NI)0)]))), (alen_1));
		goto BeforeRet_;
	}
LA3_: ;
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NI, find__stdZenumutils_u55)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1) {
	NI result;
	nimfr_("find", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
{	nimlf_(1764, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	result = ((NI)0);
	{
		NimStringV2* i_1;
		NI i_2;
		i_1 = (NimStringV2*)0;
		nimlf_(18, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");		i_2 = ((NI)0);
		{
			nimln_(19);			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_215;
				if (!(i_2 < a_p0Len_0)) goto LA3;
				nimlf_(1765, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");				if (i_2 < 0 || i_2 >= a_p0Len_0){ raiseIndexError2(i_2,a_p0Len_0-1); goto BeforeRet_;
				}
				i_1 = (&a_p0[i_2]);
				nimln_(1766);				{
					if (!eqStrings((*i_1), item_p1)) goto LA6_;
					goto BeforeRet_;
				}
LA6_: ;
				nimln_(1767);				if (nimAddInt(result, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_215)) { raiseOverflow(); goto BeforeRet_;
				};
				result = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_215);
				nimlf_(13, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system/iterators.nim");				i_2 += ((NI)1);
			} LA3: ;
		}
	}
	nimlf_(1768, "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");	result = ((NI)-1);
	}BeforeRet_: ;
	popFrame();
	return result;
}
static N_INLINE(NIM_BOOL, contains__stdZenumutils_u50)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1) {
	NIM_BOOL result;
	NI T1_;
	nimfr_("contains", "/home/codespace/.choosenim/toolchains/nim-2.2.6/lib/system.nim");
{	nimln_(1782);	nimln_(1770);	nimln_(1782);	T1_ = (NI)0;
	T1_ = find__stdZenumutils_u55(a_p0, a_p0Len_0, item_p1);
	result = (((NI)0) <= T1_);
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorKeyPress__libZtext95editor_u1532)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI keyCode_p1, NimStringV2 key_p2, tySequence__sM4lkSb7zS6F7OVMvW9cffQ mods_p3) {
	NIM_BOOL result;
	NIM_BOOL ctrl_1;
	NIM_BOOL shift_1;
NIM_BOOL* nimErr_;
	nimfr_("handleEditorKeyPress", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimlf_(782, "/workspaces/telestorie/lib/text_editor.nim");	ctrl_1 = contains__stdZenumutils_u50(((mods_p3).p) ? (mods_p3.p->data) : NIM_NIL, mods_p3.len, TM__ju9cg9cywhFyBl2l4t4KQoNA_217);
	nimln_(783);	shift_1 = contains__stdZenumutils_u50(((mods_p3).p) ? (mods_p3.p->data) : NIM_NIL, mods_p3.len, TM__ju9cg9cywhFyBl2l4t4KQoNA_219);
	nimln_(785);	switch (keyCode_p1) {
	case ((NI)37):
	case ((NI)10002):
	{
		nimln_(787);		moveCursorLeft__libZtext95editor_u1020(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(788);		nimln_(777);		nimln_(788);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)38):
	case ((NI)10000):
	{
		nimln_(790);		moveCursorUp__libZtext95editor_u1008(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(791);		nimln_(777);		nimln_(791);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)39):
	case ((NI)10003):
	{
		nimln_(793);		moveCursorRight__libZtext95editor_u1030(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(794);		nimln_(777);		nimln_(794);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)40):
	case ((NI)10001):
	{
		nimln_(796);		moveCursorDown__libZtext95editor_u1014(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(797);		nimln_(777);		nimln_(797);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)36):
	{
		nimln_(799);		{
			if (!ctrl_1) goto LA8_;
			nimln_(800);			moveCursorToBufferStart__libZtext95editor_u1045(state_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		goto LA6_;
LA8_: ;
		{
			nimln_(802);			moveCursorToLineStart__libZtext95editor_u1041(state_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
LA6_: ;
		nimln_(803);		nimln_(777);		nimln_(803);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)35):
	{
		nimln_(805);		{
			if (!ctrl_1) goto LA14_;
			nimln_(806);			moveCursorToBufferEnd__libZtext95editor_u1047(state_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		goto LA12_;
LA14_: ;
		{
			nimln_(808);			moveCursorToLineEnd__libZtext95editor_u1043(state_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
LA12_: ;
		nimln_(809);		nimln_(777);		nimln_(809);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)8):
	case ((NI)127):
	{
		nimln_(811);		backspaceAtCursor__libZtext95editor_u1071(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(812);		nimln_(777);		nimln_(812);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)46):
	{
		nimln_(814);		deleteAtCursor__libZtext95editor_u1068(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(815);		nimln_(777);		nimln_(815);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)13):
	{
		nimln_(817);		insertNewlineAtCursor__libZtext95editor_u1082(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(818);		nimln_(777);		nimln_(818);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)9):
	{
		nimln_(820);		insertTabAtCursor__libZtext95editor_u1088(state_p0, NIM_TRUE);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(821);		nimln_(777);		nimln_(821);		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	default:
	{
		nimln_(824);		{
			NIM_BOOL T24_;
			T24_ = (NIM_BOOL)0;
			T24_ = (key_p2.len == ((NI)1));
			if (!(T24_)) goto LA25_;
			T24_ = !(ctrl_1);
LA25_: ;
			if (!T24_) goto LA26_;
			nimln_(825);			if (((NI)0) < 0 || ((NI)0) >= key_p2.len){ raiseIndexError2(((NI)0),key_p2.len-1); goto BeforeRet_;
			}
			insertCharAtCursor__libZtext95editor_u1049(state_p0, key_p2.p->data[((NI)0)]);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimln_(826);			nimln_(777);			nimln_(826);			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA26_: ;
	}
	break;
	}
	nimln_(828);	nimln_(777);	nimln_(828);	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorMouseClick__libZtext95editor_u1548)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI mouseX_p1, NI mouseY_p2, NI editorX_p3, NI editorY_p4, NI editorW_p5, NI editorH_p6, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p7, NIM_BOOL clearSelection_p8) {
	NIM_BOOL result;
	NI colontmpD_;
	NI colontmpD__2;
	NI lineNumWidth_1;
	NI contentX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_220;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_221;
	NI contentY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_222;
	NI clickedLine_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_223;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_224;
	NI clickedCol_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_225;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_226;
NIM_BOOL* nimErr_;
	nimfr_("handleEditorMouseClick", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	nimln_(837);	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = pointInRect__libZtui95helpers_u410(mouseX_p1, mouseY_p2, editorX_p3, editorY_p4, editorW_p5, editorH_p6);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!(T3_)) goto LA4_;
		nimln_(838);		nimln_(830);		nimln_(838);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(841);	{
		if (!config_p7.showLineNumbers) goto LA8_;
		colontmpD_ = config_p7.lineNumberWidth;
		lineNumWidth_1 = colontmpD_;
	}
	goto LA6_;
LA8_: ;
	{
		colontmpD__2 = ((NI)0);
		lineNumWidth_1 = colontmpD__2;
	}
LA6_: ;
	nimln_(842);	if (nimAddInt(editorX_p3, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_220)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_220), ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_221)) { raiseOverflow(); goto BeforeRet_;
	};
	contentX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_221);
	nimln_(843);	if (nimAddInt(editorY_p4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_222)) { raiseOverflow(); goto BeforeRet_;
	};
	contentY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_222);
	nimln_(845);	{
		if (!(mouseX_p1 < contentX_1)) goto LA13_;
		nimln_(847);		nimln_(830);		nimln_(847);		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA13_: ;
	nimln_(850);	if (nimSubInt(mouseY_p2, contentY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_223)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollY, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_223), &TM__ju9cg9cywhFyBl2l4t4KQoNA_224)) { raiseOverflow(); goto BeforeRet_;
	};
	clickedLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_224);
	nimln_(851);	{
		NIM_BOOL T17_;
		NI T19_;
		T17_ = (NIM_BOOL)0;
		T17_ = (clickedLine_1 < ((NI)0));
		if (T17_) goto LA18_;
		T19_ = (NI)0;
		T19_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T17_ = (T19_ <= clickedLine_1);
LA18_: ;
		if (!T17_) goto LA20_;
		nimln_(852);		nimln_(830);		nimln_(852);		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA20_: ;
	nimln_(855);	if (nimSubInt(mouseX_p1, contentX_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_225)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollX, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_225), &TM__ju9cg9cywhFyBl2l4t4KQoNA_226)) { raiseOverflow(); goto BeforeRet_;
	};
	clickedCol_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_226)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_226));
	nimln_(858);	moveCursor__libZtext95editor_u992(state_p0, clickedLine_1, clickedCol_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(861);	{
		if (!clearSelection_p8) goto LA24_;
		nimln_(862);		(*state_p0).selection.active = NIM_FALSE;
	}
LA24_: ;
	nimln_(864);	nimln_(830);	nimln_(864);	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleMinimapClick__libZtext95editor_u1599)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI mouseX_p1, NI mouseY_p2, NI editorX_p3, NI editorY_p4, NI editorW_p5, NI editorH_p6, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p7) {
	NIM_BOOL result;
	NI minimapWidth_1;
	NI minimapX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_227;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_228;
	NI contentY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_229;
	NI contentHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_230;
	NI relativeY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_234;
	NI targetLine_1;
	NI T13_;
	NI halfHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_235;
	NI T14_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_236;
NIM_BOOL* nimErr_;
	nimfr_("handleMinimapClick", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimln_(963);	minimapWidth_1 = ((NI)14);
	nimln_(964);	if (nimAddInt(editorX_p3, editorW_p5, &TM__ju9cg9cywhFyBl2l4t4KQoNA_227)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_227), minimapWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_228)) { raiseOverflow(); goto BeforeRet_;
	};
	minimapX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_228);
	nimln_(965);	if (nimAddInt(editorY_p4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_229)) { raiseOverflow(); goto BeforeRet_;
	};
	contentY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_229);
	nimln_(966);	if (nimSubInt(editorH_p6, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_230)) { raiseOverflow(); goto BeforeRet_;
	};
	contentHeight_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_230);
	nimln_(969);	{
		NIM_BOOL T3_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_231;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_232;
		T3_ = (NIM_BOOL)0;
		T3_ = (mouseX_p1 < minimapX_1);
		if (T3_) goto LA4_;
		if (nimAddInt(editorX_p3, editorW_p5, &TM__ju9cg9cywhFyBl2l4t4KQoNA_231)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_231), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_232)) { raiseOverflow(); goto BeforeRet_;
		};
		T3_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_232) <= mouseX_p1);
LA4_: ;
		if (!T3_) goto LA5_;
		nimln_(970);		nimln_(957);		nimln_(970);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA5_: ;
	nimln_(971);	{
		NIM_BOOL T9_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_233;
		T9_ = (NIM_BOOL)0;
		T9_ = (mouseY_p2 < contentY_1);
		if (T9_) goto LA10_;
		if (nimAddInt(contentY_1, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_233)) { raiseOverflow(); goto BeforeRet_;
		};
		T9_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_233) <= mouseY_p2);
LA10_: ;
		if (!T9_) goto LA11_;
		nimln_(972);		nimln_(957);		nimln_(972);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA11_: ;
	nimln_(975);	if (nimSubInt(mouseY_p2, contentY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_234)) { raiseOverflow(); goto BeforeRet_;
	};
	relativeY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_234);
	nimln_(976);	T13_ = (NI)0;
	T13_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if ((((NI) (((NF)(((NF)(((NF) (relativeY_1))) / (NF)(((NF) (contentHeight_1))))) * (NF)(((NF) (T13_))))))) < ((NI)(IL64(-9223372036854775807) - IL64(1))) || (((NI) (((NF)(((NF)(((NF) (relativeY_1))) / (NF)(((NF) (contentHeight_1))))) * (NF)(((NF) (T13_))))))) > ((NI)IL64(9223372036854775807))){ raiseRangeErrorI(((NI) (((NF)(((NF)(((NF) (relativeY_1))) / (NF)(((NF) (contentHeight_1))))) * (NF)(((NF) (T13_)))))), ((NI)(IL64(-9223372036854775807) - IL64(1))), ((NI)IL64(9223372036854775807))); goto BeforeRet_;
	}
	targetLine_1 = (((NI) (((NF)(((NF)(((NF) (relativeY_1))) / (NF)(((NF) (contentHeight_1))))) * (NF)(((NF) (T13_)))))));
	nimln_(979);	halfHeight_1 = (NI)((contentHeight_1) / (((NI)2)));
	nimln_(980);	if (nimSubInt(targetLine_1, halfHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_235)) { raiseOverflow(); goto BeforeRet_;
	};
	T14_ = (NI)0;
	T14_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(T14_, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_236)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).scrollY = ((((NI)0) >= (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_235) <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_236)) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_235) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_236))) ? ((NI)0) : (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_235) <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_236)) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_235) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_236)));
	nimln_(982);	nimln_(957);	nimln_(982);	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorMousePress__libZtext95editor_u1564)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI mouseX_p1, NI mouseY_p2, NI editorX_p3, NI editorY_p4, NI editorW_p5, NI editorH_p6, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p7, NIM_BOOL shiftHeld_p8) {
	NIM_BOOL result;
	NI colontmpD_;
	NI colontmpD__2;
	NI lineNumWidth_1;
	NI contentX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_237;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_238;
	NI contentY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_239;
	NI clickedLine_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_240;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_241;
	NI clickedCol_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_242;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_243;
NIM_BOOL* nimErr_;
	nimfr_("handleEditorMousePress", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	nimln_(873);	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = pointInRect__libZtui95helpers_u410(mouseX_p1, mouseY_p2, editorX_p3, editorY_p4, editorW_p5, editorH_p6);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!(T3_)) goto LA4_;
		nimln_(874);		nimln_(866);		nimln_(874);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA4_: ;
	nimln_(877);	{
		if (!config_p7.showLineNumbers) goto LA8_;
		colontmpD_ = config_p7.lineNumberWidth;
		lineNumWidth_1 = colontmpD_;
	}
	goto LA6_;
LA8_: ;
	{
		colontmpD__2 = ((NI)0);
		lineNumWidth_1 = colontmpD__2;
	}
LA6_: ;
	nimln_(878);	if (nimAddInt(editorX_p3, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_237)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_237), ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_238)) { raiseOverflow(); goto BeforeRet_;
	};
	contentX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_238);
	nimln_(879);	if (nimAddInt(editorY_p4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_239)) { raiseOverflow(); goto BeforeRet_;
	};
	contentY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_239);
	nimln_(881);	{
		if (!(mouseX_p1 < contentX_1)) goto LA13_;
		nimln_(882);		nimln_(866);		nimln_(882);		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA13_: ;
	nimln_(885);	if (nimSubInt(mouseY_p2, contentY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_240)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollY, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_240), &TM__ju9cg9cywhFyBl2l4t4KQoNA_241)) { raiseOverflow(); goto BeforeRet_;
	};
	clickedLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_241);
	nimln_(886);	{
		NIM_BOOL T17_;
		NI T19_;
		T17_ = (NIM_BOOL)0;
		T17_ = (clickedLine_1 < ((NI)0));
		if (T17_) goto LA18_;
		T19_ = (NI)0;
		T19_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T17_ = (T19_ <= clickedLine_1);
LA18_: ;
		if (!T17_) goto LA20_;
		nimln_(887);		nimln_(866);		nimln_(887);		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA20_: ;
	nimln_(889);	if (nimSubInt(mouseX_p1, contentX_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_242)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollX, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_242), &TM__ju9cg9cywhFyBl2l4t4KQoNA_243)) { raiseOverflow(); goto BeforeRet_;
	};
	clickedCol_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_243)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_243));
	nimln_(891);	{
		NIM_BOOL T24_;
		tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ T28_;
		T24_ = (NIM_BOOL)0;
		T24_ = shiftHeld_p8;
		if (!(T24_)) goto LA25_;
		T24_ = (*state_p0).selection.active;
LA25_: ;
		if (!T24_) goto LA26_;
		nimln_(893);		T28_.line = clickedLine_1;
		T28_.col = clickedCol_1;
		(*state_p0).selection.end_0 = T28_;
		nimln_(894);		moveCursor__libZtext95editor_u992(state_p0, clickedLine_1, clickedCol_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA22_;
LA26_: ;
	{
		nimln_(897);		moveCursor__libZtext95editor_u992(state_p0, clickedLine_1, clickedCol_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimln_(898);		(*state_p0).selection.active = NIM_TRUE;
		nimln_(899);		(*state_p0).selection.start = (*state_p0).cursor;
		nimln_(900);		(*state_p0).selection.end_0 = (*state_p0).cursor;
	}
LA22_: ;
	nimln_(902);	nimln_(866);	nimln_(902);	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorMouseDrag__libZtext95editor_u1580)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI mouseX_p1, NI mouseY_p2, NI editorX_p3, NI editorY_p4, NI editorW_p5, NI editorH_p6, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p7) {
	NIM_BOOL result;
	NI colontmpD_;
	NI colontmpD__2;
	NI lineNumWidth_1;
	NI contentX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_244;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_245;
	NI contentY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_246;
	NI contentH_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_247;
	NI targetLine_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_248;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_249;
	NI T10_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_250;
	NI targetCol_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_251;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_252;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ T11_;
NIM_BOOL* nimErr_;
	nimfr_("handleEditorMouseDrag", "/workspaces/telestorie/lib/text_editor.nim");
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	nimln_(912);	{
		if (!!((*state_p0).selection.active)) goto LA3_;
		nimln_(913);		nimln_(904);		nimln_(913);		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA3_: ;
	nimln_(916);	{
		if (!config_p7.showLineNumbers) goto LA7_;
		colontmpD_ = config_p7.lineNumberWidth;
		lineNumWidth_1 = colontmpD_;
	}
	goto LA5_;
LA7_: ;
	{
		colontmpD__2 = ((NI)0);
		lineNumWidth_1 = colontmpD__2;
	}
LA5_: ;
	nimln_(917);	if (nimAddInt(editorX_p3, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_244)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_244), ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_245)) { raiseOverflow(); goto BeforeRet_;
	};
	contentX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_245);
	nimln_(918);	if (nimAddInt(editorY_p4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_246)) { raiseOverflow(); goto BeforeRet_;
	};
	contentY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_246);
	nimln_(919);	if (nimSubInt(editorH_p6, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_247)) { raiseOverflow(); goto BeforeRet_;
	};
	contentH_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_247);
	nimln_(922);	if (nimSubInt(mouseY_p2, contentY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_248)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollY, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_248), &TM__ju9cg9cywhFyBl2l4t4KQoNA_249)) { raiseOverflow(); goto BeforeRet_;
	};
	targetLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_249);
	nimln_(923);	T10_ = (NI)0;
	T10_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(T10_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_250)) { raiseOverflow(); goto BeforeRet_;
	};
	targetLine_1 = ((((NI)0) >= ((targetLine_1 <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_250)) ? targetLine_1 : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_250))) ? ((NI)0) : ((targetLine_1 <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_250)) ? targetLine_1 : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_250)));
	nimln_(926);	if (nimSubInt(mouseX_p1, contentX_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_251)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollX, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_251), &TM__ju9cg9cywhFyBl2l4t4KQoNA_252)) { raiseOverflow(); goto BeforeRet_;
	};
	targetCol_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_252)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_252));
	nimln_(929);	T11_.line = targetLine_1;
	T11_.col = targetCol_1;
	(*state_p0).selection.end_0 = T11_;
	nimln_(930);	(*state_p0).cursor.line = targetLine_1;
	nimln_(931);	(*state_p0).cursor.col = targetCol_1;
	nimln_(932);	clampCursor__libZtext95editor_u989(state_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimln_(933);	(*state_p0).desiredCol = (*state_p0).cursor.col;
	nimln_(936);	{
		NIM_BOOL T14_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_253;
		T14_ = (NIM_BOOL)0;
		T14_ = (mouseY_p2 < contentY_1);
		if (!(T14_)) goto LA15_;
		T14_ = (((NI)0) < (*state_p0).scrollY);
LA15_: ;
		if (!T14_) goto LA16_;
		nimln_(937);		if (nimSubInt((*state_p0).scrollY, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_253)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).scrollY = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_253)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_253));
	}
	goto LA12_;
LA16_: ;
	{
		NIM_BOOL T19_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_254;
		NI T21_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_255;
		NI T24_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_256;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_257;
		nimln_(938);		T19_ = (NIM_BOOL)0;
		if (nimAddInt(contentY_1, contentH_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_254)) { raiseOverflow(); goto BeforeRet_;
		};
		T19_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_254) <= mouseY_p2);
		if (!(T19_)) goto LA20_;
		T21_ = (NI)0;
		T21_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T21_, contentH_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_255)) { raiseOverflow(); goto BeforeRet_;
		};
		T19_ = ((*state_p0).scrollY < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_255));
LA20_: ;
		if (!T19_) goto LA22_;
		nimln_(939);		T24_ = (NI)0;
		T24_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T24_, contentH_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_256)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((*state_p0).scrollY, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_257)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).scrollY = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_256) <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_257)) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_256) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_257));
	}
	goto LA12_;
LA22_: ;
LA12_: ;
	nimln_(941);	nimln_(904);	nimln_(941);	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorMouseRelease__libZtext95editor_u1596)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NIM_BOOL result;
	nimfr_("handleEditorMouseRelease", "/workspaces/telestorie/lib/text_editor.nim");
{	nimln_(948);	{
		if (!(*state_p0).selection.active) goto LA3_;
		nimln_(950);		{
			NIM_BOOL T7_;
			T7_ = (NIM_BOOL)0;
			T7_ = ((*state_p0).selection.start.line == (*state_p0).selection.end_0.line);
			if (!(T7_)) goto LA8_;
			nimln_(951);			T7_ = ((*state_p0).selection.start.col == (*state_p0).selection.end_0.col);
LA8_: ;
			if (!T7_) goto LA9_;
			nimln_(952);			(*state_p0).selection.active = NIM_FALSE;
			nimln_(953);			nimln_(943);			nimln_(953);			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA9_: ;
	}
LA3_: ;
	nimln_(955);	nimln_(943);	nimln_(955);	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}
