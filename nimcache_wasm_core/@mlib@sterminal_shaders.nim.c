/* Generated by Nim Compiler v2.2.6 */
/* Compiled for: Linux, wasm32, clang */
/* Command for C compiler:
   emcc -c -w -ferror-limit=3 -fno-strict-aliasing -sUSE_SDL=3 -Os   -I/home/codespace/.choosenim/toolchains/nim-2.2.6/lib -I/workspaces/telestorie -o /workspaces/telestorie/nimcache_wasm_core/@mlib@sterminal_shaders.nim.c.o /workspaces/telestorie/nimcache_wasm_core/@mlib@sterminal_shaders.nim.c */
#define NIM_INTBITS 32

#include "nimbase.h"
#include <math.h>
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ;
typedef struct tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA;
typedef struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ;
typedef struct tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ;
typedef struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ tyObject_Style__UURjArTrf2wmcCbN5MncAQ;
typedef struct tyTuple__wpFMp8IwxV6MlaM4GANJ0Q tyTuple__wpFMp8IwxV6MlaM4GANJ0Q;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ;
typedef struct RootObj RootObj;
typedef struct tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A;
typedef struct tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw;
typedef struct tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA;
typedef struct tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg;
typedef struct tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ;
typedef struct tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA tySequence__hETDgeXECLenIIi9aRQgjOA;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content tySequence__hETDgeXECLenIIi9aRQgjOA_Content;
typedef struct tyTuple__hU79ak4NYUdNYnRLUvBkfpg tyTuple__hU79ak4NYUdNYnRLUvBkfpg;
typedef struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA;
typedef struct tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A;
typedef struct tyObject_ParticleData__wQy2juqx9buEWqXP26LAzOw tyObject_ParticleData__wQy2juqx9buEWqXP26LAzOw;
typedef struct tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA;
typedef struct tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA;
struct tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ {
	NI effectId;
	NI layerId;
	NI x;
	NI y;
	NI width;
	NI height;
	NI frame;
	NIM_BOOL paused;
	NI reduction;
};
struct tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA {
	NI effectId;
	NI layerId;
	NI x;
	NI y;
	NI width;
	NI height;
	NI frame;
	NIM_BOOL paused;
	NF intensity;
	NF speed;
	NF amplitude;
};
struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ {
	NI rc;
	NI rootIdx;
};
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ {
	NU8 r;
	NU8 g;
	NU8 b;
};
struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ bg;
	NIM_BOOL bold;
	NIM_BOOL underline;
	NIM_BOOL italic;
	NIM_BOOL dim;
};
typedef struct {
N_NIMCALL_PTR(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, ClP_0) (NI x_p0, NI y_p1, NI time_p2, void* ClE_0);
void* ClE_0;
} tyProc__uwoCnREI5bHhDm6ojz7Xjg;
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
	void* vTable[SEQ_DECL_SIZE];
};
struct RootObj {
	TNimTypeV2* m_type;
};
struct tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ {
	RootObj Sup;
	NIM_BOOL vertical0;
	NF frequency1;
	NF speed2;
	NF amplitude3;
};
struct tyTuple__wpFMp8IwxV6MlaM4GANJ0Q {
	NF Field0;
	NF Field1;
};
struct tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A {
	RootObj Sup;
	NI centerX0;
	NI centerY1;
	NF frequency2;
	NF speed3;
	NF amplitude4;
};
struct tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw {
	RootObj Sup;
	NIM_BOOL animateX0;
	NI scale1;
	NI seed2;
	NIM_BOOL animateY3;
	NF amplitude4;
};
struct tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA {
	RootObj Sup;
	NI seed0;
	NF frequency1;
	NF speed2;
	NF amplitude3;
};
struct tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg {
	RootObj Sup;
	NI centerX0;
	NI centerY1;
	NF radius2;
	NF strength3;
};
struct tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ {
	RootObj Sup;
	NI centerX0;
	NI centerY1;
	NF radius2;
	NF strength3;
};
struct tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg {
	RootObj Sup;
	NI centerX0;
	NI centerY1;
	NF radius2;
	NI time3;
	NF strength4;
};
typedef N_CLOSURE_PTR(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, TM__8WmSss49aIo2yrPDwPGHYMQ_257) (NI x_p0, NI y_p1, NI time_p2);
struct tySequence__hETDgeXECLenIIi9aRQgjOA {
  NI len; tySequence__hETDgeXECLenIIi9aRQgjOA_Content* p;
};
struct tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw {
	NI width;
	NI height;
	tySequence__hETDgeXECLenIIi9aRQgjOA cells;
	NI clipX;
	NI clipY;
	NI clipW;
	NI clipH;
	NI offsetX;
	NI offsetY;
};
struct tyTuple__hU79ak4NYUdNYnRLUvBkfpg {
	NimStringV2 Field0;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ Field1;
};
typedef N_CLOSURE_PTR(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, TM__8WmSss49aIo2yrPDwPGHYMQ_278) (NI x_p0, NI y_p1, NI time_p2);
typedef struct {
N_NIMCALL_PTR(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, ClP_0) (tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0);
void* ClE_0;
} tyProc__SDBJCN1RKcIw6ZTtrYle9cQ;
struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA {
	NimStringV2 ch;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ style;
};
struct tyObject_ParticleData__wQy2juqx9buEWqXP26LAzOw {
	NF x;
	NF y;
	NF vx;
	NF vy;
	NF life;
	NF maxLife;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ color;
	NimStringV2 char_0;
	NF age;
};
struct tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A {
	NI cellX;
	NI cellY;
	NI time;
	tyObject_ParticleData__wQy2juqx9buEWqXP26LAzOw particle;
	NIM_BOOL hasParticle;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ backgroundColor;
};
typedef N_CLOSURE_PTR(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, TM__8WmSss49aIo2yrPDwPGHYMQ_313) (tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, TM__8WmSss49aIo2yrPDwPGHYMQ_314) (tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, TM__8WmSss49aIo2yrPDwPGHYMQ_315) (tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0);
typedef N_CLOSURE_PTR(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, TM__8WmSss49aIo2yrPDwPGHYMQ_317) (tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0);
struct tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA {
	RootObj Sup;
	NF strength0;
};
struct tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA {
	RootObj Sup;
	NF strength0;
};
typedef N_CLOSURE_PTR(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, TM__8WmSss49aIo2yrPDwPGHYMQ_323) (tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0);
struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content { NI cap; tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA data[SEQ_DECL_SIZE]; };
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZterminal95shaders_u1677)(tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ** dest_p0, tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ* src_p1);
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p_p0);
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u1641)(tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObjUninit)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_NOINLINE(void, raiseOverflow)(void);
N_LIB_PRIVATE N_NIMCALL(void, renderPlasma__libZterminal95shaders_u1179)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NF scale_p6, NF speed_p7, NI reduction_p8);
N_LIB_PRIVATE N_NOINLINE(void, raiseDivByZero)(void);
static N_INLINE(NIM_BOOL, nimDivInt)(NI a_p0, NI b_p1, NI* res_p2);
N_LIB_PRIVATE N_NOINLINE(void, raiseRangeErrorI)(NI64 i_p0, NI64 a_p1, NI64 b_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2648)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, plasma__libZterminal95shaders_u64)(NI value_p0);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(NI, pgClamp)(NI v_p0, NI min_p1, NI max_p2);
N_LIB_PRIVATE N_NIMCALL(void, write__backendsZterminalZtermbuffer_u49)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* tb_p0, NI x_p1, NI y_p2, NimStringV2 ch_p3, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p4);
N_LIB_PRIVATE N_NOCONV(void, dealloc)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, renderRipple__libZterminal95shaders_u1225)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NI centerX_p6, NI centerY_p7, NF speed_p8, NF frequency_p9, NI reduction_p10);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, heatmap__libZterminal95shaders_u59)(NI value_p0);
N_LIB_PRIVATE N_NIMCALL(void, renderFire__libZterminal95shaders_u1270)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NF intensity_p6, NI seed_p7, NI reduction_p8);
N_LIB_PRIVATE N_NIMCALL(NI, pgIntHash3D)(NI x_p0, NI y_p1, NI z_p2, NI seed_p3);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, fire__libZterminal95shaders_u82)(NI value_p0);
N_LIB_PRIVATE N_NIMCALL(void, renderFractalNoise__libZterminal95shaders_u1311)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NI scale_p6, NI octaves_p7, NI seed_p8, NI reduction_p9);
N_LIB_PRIVATE N_NIMCALL(NI, pgFractalNoise2D)(NI x_p0, NI y_p1, NI octaves_p2, NI scale_p3, NI seed_p4);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, coolWarm__libZterminal95shaders_u69)(NI value_p0);
static N_INLINE(NF, abs__pureZmath_u222)(NF x_p0);
N_LIB_PRIVATE N_NIMCALL(void, renderWave__libZterminal95shaders_u1352)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NF frequency_p6, NF speed_p7, NI reduction_p8);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, ocean__libZterminal95shaders_u86)(NI value_p0);
N_LIB_PRIVATE N_NIMCALL(void, renderTunnel__libZterminal95shaders_u1390)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NI centerX_p6, NI centerY_p7, NF speed_p8, NI reduction_p9);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, neon__libZterminal95shaders_u77)(NI value_p0);
N_LIB_PRIVATE N_NIMCALL(void, renderMatrixRain__libZterminal95shaders_u1436)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NF speed_p6, NF density_p7, NI seed_p8, NI reduction_p9);
N_LIB_PRIVATE N_NIMCALL(NI, pgIntHash)(NI x_p0, NI seed_p1);
N_LIB_PRIVATE N_NIMCALL(NI, pgIntHash2D)(NI x_p0, NI y_p1, NI seed_p2);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, matrix__libZterminal95shaders_u90)(NI value_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZterminal95shaders_u1778)(tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA** dest_p0, tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA* src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u1740)(tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u609)(tyProc__uwoCnREI5bHhDm6ojz7Xjg* dest_p0);
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0);
N_LIB_PRIVATE N_NOINLINE(void, rememberCycle__system_u3414)(NIM_BOOL isDestroyAction_p0, tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* s_p1, TNimTypeV2* desc_p2);
N_LIB_PRIVATE N_NIMCALL(void, nimDestroyAndDispose)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, waveDisplacement__libZterminal95shaders_u573)(NF amplitude_p0, NF frequency_p1, NF speed_p2, NIM_BOOL vertical_p3, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u579)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0);
static N_INLINE(void, nimMarkCyclic)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, rippleDisplacement__libZterminal95shaders_u638)(NI centerX_p0, NI centerY_p1, NF amplitude_p2, NF frequency_p3, NF speed_p4, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result);
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u645)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(void, noiseDisplacement__libZterminal95shaders_u655)(NI scale_p0, NF amplitude_p1, NI seed_p2, NIM_BOOL animateX_p3, NIM_BOOL animateY_p4, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result);
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u662)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(void, heatHazeDisplacement__libZterminal95shaders_u672)(NF amplitude_p0, NF frequency_p1, NF speed_p2, NI seed_p3, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result);
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u678)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(void, swirlDisplacement__libZterminal95shaders_u687)(NI centerX_p0, NI centerY_p1, NF strength_p2, NF radius_p3, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result);
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u693)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(void, fisheyeDisplacement__libZterminal95shaders_u706)(NI centerX_p0, NI centerY_p1, NF strength_p2, NF radius_p3, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result);
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u712)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(void, bulgeDisplacement__libZterminal95shaders_u722)(NI centerX_p0, NI centerY_p1, NF strength_p2, NF radius_p3, NI time_p4, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result);
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u729)(NI x_p0, NI y_p1, NI t_p2, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(void, applyDisplacement__libZterminal95shaders_u1489)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* destBuffer_p0, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* sourceBuffer_p1, NI x_p2, NI y_p3, NI width_p4, NI height_p5, tyProc__uwoCnREI5bHhDm6ojz7Xjg displacement_p6, NI time_p7, NF intensity_p8, NIM_BOOL clampEdges_p9);
N_LIB_PRIVATE N_NIMCALL(tyTuple__hU79ak4NYUdNYnRLUvBkfpg, getCell__backendsZterminalZtermbuffer_u181)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* tb_p0, NI x_p1, NI y_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___backendsZsdl3Zsdl95canvas_u509)(tyTuple__hU79ak4NYUdNYnRLUvBkfpg* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, applyDisplacementInPlace__libZterminal95shaders_u1524)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, tyProc__uwoCnREI5bHhDm6ojz7Xjg displacement_p5, NI time_p6, NF intensity_p7);
N_LIB_PRIVATE N_NIMCALL(void, newTermBuffer__backendsZterminalZtermbuffer_u4)(NI w_p0, NI h_p1, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* Result);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___srcZlayers_u16)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* dest_p0);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1);
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2);
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2);
static N_INLINE(NF, slash___system_u1703)(NI x_p0, NI y_p1);
static N_INLINE(NF, toFloat__system_u1691)(NI i_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u100)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___backendsZsdl3Zsdl95canvas_u197)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA* dest_p0, tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, eqdup___system_u2645)(NimStringV2 src_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, eqdup___srcZtypes_u30)(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ src_p0);
static N_INLINE(void, nimIncRefCyclic)(void* p_p0, NIM_BOOL cyclic_p1);
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u157)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Style__UURjArTrf2wmcCbN5MncAQ, eqdup___srcZtypes_u76)(tyObject_Style__UURjArTrf2wmcCbN5MncAQ src_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u163)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u169)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2642)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___system_u2639)(NimStringV2* dest_p0);
N_LIB_PRIVATE N_CLOSURE(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u177)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(NF, clamp__libZterminal95shaders_u181)(NF x_p0, NF a_p1, NF b_p2);
N_LIB_PRIVATE N_CLOSURE(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u193)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0);
static N_INLINE(NU8, min__libZterminal95shaders_u205)(NU8 x_p0, NU8 y_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u220)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1);
N_LIB_PRIVATE N_NIMCALL(void, nimTestErrorFlag)(void);
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_7 = { 1 | NIM_STRLIT_FLAG, " " };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_8 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_9 = { 3 | NIM_STRLIT_FLAG, "\342\226\210" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_10 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_9};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_11 = { 3 | NIM_STRLIT_FLAG, "\342\226\223" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_12 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_11};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_13 = { 3 | NIM_STRLIT_FLAG, "\342\226\222" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_14 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_13};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_15 = { 3 | NIM_STRLIT_FLAG, "\342\226\221" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_16 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_15};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_40 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_41 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_9};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_42 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_11};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_43 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_13};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_44 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_15};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_68 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_69 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_9};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_70 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_13};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_71 = { 1 | NIM_STRLIT_FLAG, ":" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_72 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_71};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_73 = { 1 | NIM_STRLIT_FLAG, "." };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_74 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_73};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_105 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_106 = { 3 | NIM_STRLIT_FLAG, "\342\243\277" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_107 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_106};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_108 = { 3 | NIM_STRLIT_FLAG, "\342\243\247" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_109 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_108};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_110 = { 3 | NIM_STRLIT_FLAG, "\342\243\207" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_111 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_110};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_112 = { 3 | NIM_STRLIT_FLAG, "\342\241\207" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_113 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_112};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_131 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_132 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_9};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_133 = { 3 | NIM_STRLIT_FLAG, "\342\226\207" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_134 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_133};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_135 = { 3 | NIM_STRLIT_FLAG, "\342\226\206" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_136 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_135};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_137 = { 3 | NIM_STRLIT_FLAG, "\342\226\205" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_138 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_137};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_139 = { 3 | NIM_STRLIT_FLAG, "\342\226\204" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_140 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_139};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_141 = { 3 | NIM_STRLIT_FLAG, "\342\226\203" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_142 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_141};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_143 = { 3 | NIM_STRLIT_FLAG, "\342\226\202" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_144 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_143};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_145 = { 3 | NIM_STRLIT_FLAG, "\342\226\201" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_146 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_145};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_168 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_169 = { 3 | NIM_STRLIT_FLAG, "\342\226\254" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_170 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_169};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_171 = { 3 | NIM_STRLIT_FLAG, "\342\226\253" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_172 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_171};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_173 = { 3 | NIM_STRLIT_FLAG, "\342\226\252" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_174 = {3, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_173};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_175 = { 1 | NIM_STRLIT_FLAG, "+" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_176 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_175};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_200 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_201 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_73};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_202 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_71};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_203 = { 1 | NIM_STRLIT_FLAG, "=" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_204 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_203};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_205 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_175};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__8WmSss49aIo2yrPDwPGHYMQ_206 = { 1 | NIM_STRLIT_FLAG, "#" };
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_207 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_206};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_230 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
N_LIB_PRIVATE TNimTypeV2 NTIv2__vxQssILkzuBly8CF8AEwEQ_;
N_LIB_PRIVATE TNimTypeV2 NTIv2__gCK9czpJ3G0a9b17Xp2bG18A_;
N_LIB_PRIVATE TNimTypeV2 NTIv2__nmN8emaZtIKl9aGuXOJZiXw_;
N_LIB_PRIVATE TNimTypeV2 NTIv2__2TNea3VNbR9cqSiBKWTkZTA_;
N_LIB_PRIVATE TNimTypeV2 NTIv2__M5ODenV59bu5Ng9a8RMJg5Tg_;
N_LIB_PRIVATE TNimTypeV2 NTIv2__9adq5fctZ2nNEhpR8zIzelQ_;
N_LIB_PRIVATE TNimTypeV2 NTIv2__8sdBXMJSdU7YuKBPU9bcjwg_;
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_287 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_304 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
static const NimStringV2 TM__8WmSss49aIo2yrPDwPGHYMQ_316 = {1, (NimStrPayload*)&TM__8WmSss49aIo2yrPDwPGHYMQ_7};
N_LIB_PRIVATE TNimTypeV2 NTIv2__V2dYi9cmtdy0n9cLhHLjNMbA_;
N_LIB_PRIVATE TNimTypeV2 NTIv2__u4ATW6VKB3lCFQrXL51hPA_;
N_LIB_PRIVATE tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ* gShaderState__libZterminal95shaders_u51;
N_LIB_PRIVATE tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA* gDisplacementState__libZterminal95shaders_u52;
extern NIM_BOOL nimInErrorMode__system_u4234;
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_236[2] = {3701606400, 338472960};
N_LIB_PRIVATE TNimTypeV2 NTIv2__vxQssILkzuBly8CF8AEwEQ_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_236, .traceImpl = (void*)NIM_NIL, .flags = 0};
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_237[2] = {3701606400, 582995456};
N_LIB_PRIVATE TNimTypeV2 NTIv2__gCK9czpJ3G0a9b17Xp2bG18A_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_237, .traceImpl = (void*)NIM_NIL, .flags = 0};
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_240[2] = {3701606400, 1669102080};
N_LIB_PRIVATE TNimTypeV2 NTIv2__nmN8emaZtIKl9aGuXOJZiXw_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_240, .traceImpl = (void*)NIM_NIL, .flags = 0};
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_245[2] = {3701606400, 861825792};
N_LIB_PRIVATE TNimTypeV2 NTIv2__2TNea3VNbR9cqSiBKWTkZTA_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_245, .traceImpl = (void*)NIM_NIL, .flags = 0};
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_246[2] = {3701606400, 2474867200};
N_LIB_PRIVATE TNimTypeV2 NTIv2__M5ODenV59bu5Ng9a8RMJg5Tg_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_246, .traceImpl = (void*)NIM_NIL, .flags = 0};
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_249[2] = {3701606400, 3669589248};
N_LIB_PRIVATE TNimTypeV2 NTIv2__9adq5fctZ2nNEhpR8zIzelQ_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_249, .traceImpl = (void*)NIM_NIL, .flags = 0};
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_252[2] = {3701606400, 3342949376};
N_LIB_PRIVATE TNimTypeV2 NTIv2__8sdBXMJSdU7YuKBPU9bcjwg_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_252, .traceImpl = (void*)NIM_NIL, .flags = 0};
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_318[2] = {3701606400, 1733856000};
N_LIB_PRIVATE TNimTypeV2 NTIv2__V2dYi9cmtdy0n9cLhHLjNMbA_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_318, .traceImpl = (void*)NIM_NIL, .flags = 0};
static NIM_CONST NU32 TM__8WmSss49aIo2yrPDwPGHYMQ_319[2] = {3701606400, 2148752128};
N_LIB_PRIVATE TNimTypeV2 NTIv2__u4ATW6VKB3lCFQrXL51hPA_ = {.destructor = (void*)NIM_NIL, .size = sizeof(tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA), .align = (NI16) NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA), .depth = 1, .display = TM__8WmSss49aIo2yrPDwPGHYMQ_319, .traceImpl = (void*)NIM_NIL, .flags = 0};
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1) {
	NI result;
	result = ((NI) ((NU)((NU32)(((NU) (x_p0))) - (NU32)(((NU) (y_p1))))));
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p_p0) {
	NIM_BOOL result;
	result = NIM_FALSE;
	{
		tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* cell_1;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
		cell_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T5_));
		{
			if (!((NI)((NI32)((*cell_1).rc) >> (NU32)(((NI)4))) == ((NI)0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			(*cell_1).rc = minuspercent___system_u813((*cell_1).rc, ((NI)16));
		}
LA6_: ;
	}
LA3_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u1641)(tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ* dest_p0) {
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZterminal95shaders_u1677)(tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ** dest_p0, tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ* src_p1) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest_p0));
		if (!T3_) goto LA4_;
		eqdestroy___libZterminal95shaders_u1641((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)4));
	}
LA4_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(void, initShader__libZterminal95shaders_u1630)(NI effectId_p0, NI layerId_p1, NI x_p2, NI y_p3, NI width_p4, NI height_p5, NI reduction_p6) {
	NI colontmpD_;
	NI colontmpD__2;
	NI colontmpD__3;
	NI colontmpD__4;
	NI colontmpD__5;
	NI colontmpD__6;
	tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ* T1_;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	colontmpD__3 = (NI)0;
	colontmpD__4 = (NI)0;
	colontmpD__5 = (NI)0;
	colontmpD__6 = (NI)0;
	T1_ = NIM_NIL;
	T1_ = (tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ*) nimNewObjUninit(sizeof(tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ), NIM_ALIGNOF(tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ));
	colontmpD_ = effectId_p0;
	(*T1_).effectId = colontmpD_;
	colontmpD__2 = layerId_p1;
	(*T1_).layerId = colontmpD__2;
	colontmpD__3 = x_p2;
	(*T1_).x = colontmpD__3;
	colontmpD__4 = y_p3;
	(*T1_).y = colontmpD__4;
	colontmpD__5 = width_p4;
	(*T1_).width = colontmpD__5;
	colontmpD__6 = height_p5;
	(*T1_).height = colontmpD__6;
	(*T1_).frame = ((NI)0);
	(*T1_).paused = NIM_FALSE;
	(*T1_).reduction = ((((NI)1) >= reduction_p6) ? ((NI)1) : reduction_p6);
	eqsink___libZterminal95shaders_u1677(&gShaderState__libZterminal95shaders_u51, T1_);
}
N_LIB_PRIVATE N_NIMCALL(void, updateShader__libZterminal95shaders_u1690)(void) {
{	{
		NIM_BOOL T3_;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_2;
		T3_ = (NIM_BOOL)0;
		T3_ = !((gShaderState__libZterminal95shaders_u51 == ((tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ*) NIM_NIL)));
		if (!(T3_)) goto LA4_;
		T3_ = !((*gShaderState__libZterminal95shaders_u51).paused);
LA4_: ;
		if (!T3_) goto LA5_;
		if (nimAddInt((*gShaderState__libZterminal95shaders_u51).frame, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_2)) { raiseOverflow(); goto BeforeRet_;
		};
		(*gShaderState__libZterminal95shaders_u51).frame = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_2);
	}
LA5_: ;
	}BeforeRet_: ;
}
static N_INLINE(NIM_BOOL, nimDivInt)(NI a_p0, NI b_p1, NI* res_p2) {
	NIM_BOOL result;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (a_p0 == ((NI)(-2147483647 -1)));
		if (!(T3_)) goto LA4_;
		T3_ = (b_p1 == ((NI)-1));
LA4_: ;
		if (!T3_) goto LA5_;
		result = NIM_TRUE;
	}
	goto LA1_;
LA5_: ;
	{
		result = NIM_FALSE;
		(*res_p2) = (NI)(a_p0 / b_p1);
	}
LA1_: ;
	return result;
}
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4234);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, plasma__libZterminal95shaders_u64)(NI value_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
	NI v_1;
	NF angle_1;
	NF T1_;
	NF T2_;
	NF T3_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	v_1 = pgClamp(value_p0, ((NI)0), ((NI)255));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	angle_1 = ((NF)(((NF)(((NF)(((NF) (v_1))) * (NF)(3.141592653589793))) * (NF)(2.0))) / (NF)(255.0));
	T1_ = (NF)0;
	T1_ = sin(angle_1);
	result.r = ((NU8) (((NF)(127.5) + (NF)(((NF)(127.5) * (NF)(T1_))))));
	T2_ = (NF)0;
	T2_ = sin(((NF)(angle_1) + (NF)(2.0943951023931953)));
	result.g = ((NU8) (((NF)(127.5) + (NF)(((NF)(127.5) * (NF)(T2_))))));
	T3_ = (NF)0;
	T3_ = sin(((NF)(angle_1) + (NF)(4.1887902047863905)));
	result.b = ((NU8) (((NF)(127.5) + (NF)(((NF)(127.5) * (NF)(T3_))))));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderPlasma__libZterminal95shaders_u1179)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NF scale_p6, NF speed_p7, NI reduction_p8) {
	NI r_1;
	NI rw_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_3;
	NI rh_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_4;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	r_1 = ((((NI)1) >= reduction_p8) ? ((NI)1) : reduction_p8);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(width_p3, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_3)) { raiseOverflow(); goto BeforeRet_;
	};
	rw_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_3);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(height_p4, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_4)) { raiseOverflow(); goto BeforeRet_;
	};
	rh_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_4);
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_30;
				if (!(i_1 < rh_1)) goto LA3;
				row_1 = i_1;
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NimStringV2 char_1;
							NF fx_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_5;
							NF fy_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_6;
							NF ft_1;
							NF v1_1;
							NF v2_1;
							NF v3_1;
							NF v4_1;
							NF T7_;
							NF plasma_1;
							NI value_1;
							NF angle_1;
							tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ color_1;
							tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_29;
							if (!(i_2 < rw_1)) goto LA6;
							char_1.len = 0; char_1.p = NIM_NIL;
							col_1 = i_2;
							if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_5)) { raiseOverflow(); goto BeforeRet_;
							};
							fx_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_5)));
							if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_6)) { raiseOverflow(); goto BeforeRet_;
							};
							fy_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_6)));
							ft_1 = ((NF) (frame_p5));
							v1_1 = sin(((NF)(((NF)(fx_1) * (NF)(scale_p6))) + (NF)(((NF)(ft_1) * (NF)(speed_p7)))));
							v2_1 = sin(((NF)(((NF)(fy_1) * (NF)(scale_p6))) + (NF)(((NF)(ft_1) * (NF)(speed_p7)))));
							v3_1 = sin(((NF)(((NF)(((NF)(((NF)(fx_1) + (NF)(fy_1))) * (NF)(scale_p6))) * (NF)(0.5))) + (NF)(((NF)(ft_1) * (NF)(speed_p7)))));
							T7_ = (NF)0;
							T7_ = sqrt(((NF)(((NF)(fx_1) * (NF)(fx_1))) + (NF)(((NF)(fy_1) * (NF)(fy_1)))));
							v4_1 = sin(((NF)(((NF)(T7_) * (NF)(scale_p6))) + (NF)(((NF)(ft_1) * (NF)(speed_p7)))));
							plasma_1 = ((NF)(((NF)(((NF)(((NF)(v1_1) + (NF)(v2_1))) + (NF)(v3_1))) + (NF)(v4_1))) / (NF)(4.0));
							if ((((NI) (((NI64) (((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(2.5))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(2.5))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(2.5)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							value_1 = (((NI) (((NI64) (((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(2.5)))))));
							char_1 = TM__8WmSss49aIo2yrPDwPGHYMQ_8;
							{
								if (!(((NI)4) <= value_1)) goto LA10_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_10);
							}
							goto LA8_;
LA10_: ;
							{
								if (!(((NI)3) <= value_1)) goto LA13_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_12);
							}
							goto LA8_;
LA13_: ;
							{
								if (!(((NI)2) <= value_1)) goto LA16_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_14);
							}
							goto LA8_;
LA16_: ;
							{
								if (!(((NI)1) <= value_1)) goto LA19_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_16);
							}
							goto LA8_;
LA19_: ;
LA8_: ;
							angle_1 = ((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(3.141592653589793));
							if ((((NI) (((NI64) (((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(127.5))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(127.5))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(127.5)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							color_1 = plasma__libZterminal95shaders_u64((((NI) (((NI64) (((NF)(((NF)(plasma_1) + (NF)(1.0))) * (NF)(127.5))))))));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							style_1.fg = color_1;
							style_1.bg.r = ((NU8)0);
							style_1.bg.g = ((NU8)0);
							style_1.bg.b = ((NU8)0);
							style_1.bold = NIM_FALSE;
							style_1.underline = NIM_FALSE;
							style_1.italic = NIM_FALSE;
							style_1.dim = NIM_FALSE;
							{
								NI dy_1;
								NI i_3;
								dy_1 = (NI)0;
								i_3 = ((NI)0);
								{
									while (1) {
										NI TM__8WmSss49aIo2yrPDwPGHYMQ_28;
										if (!(i_3 < r_1)) goto LA23;
										dy_1 = i_3;
										{
											NI dx_1;
											NI i_4;
											dx_1 = (NI)0;
											i_4 = ((NI)0);
											{
												while (1) {
													NI TM__8WmSss49aIo2yrPDwPGHYMQ_27;
													if (!(i_4 < r_1)) goto LA26;
													dx_1 = i_4;
													{
														NIM_BOOL T29_;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_17;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_18;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_19;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_20;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_21;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_22;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_23;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_24;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_25;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_26;
														T29_ = (NIM_BOOL)0;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_17)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_17), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_18)) { raiseOverflow(); goto BeforeRet_;
														};
														T29_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_18) < width_p3);
														if (!(T29_)) goto LA30_;
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_19)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_19), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_20)) { raiseOverflow(); goto BeforeRet_;
														};
														T29_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_20) < height_p4);
LA30_: ;
														if (!T29_) goto LA31_;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_21)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(x_p1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_21), &TM__8WmSss49aIo2yrPDwPGHYMQ_22)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_22), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_23)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_24)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(y_p2, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_24), &TM__8WmSss49aIo2yrPDwPGHYMQ_25)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_25), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_26)) { raiseOverflow(); goto BeforeRet_;
														};
														write__backendsZterminalZtermbuffer_u49(buffer_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_23), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_26), char_1, style_1);
														if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
													}
LA31_: ;
													if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_27)) { raiseOverflow(); goto BeforeRet_;
													};
													i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_27);
												} LA26: ;
											}
										}
										if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_28)) { raiseOverflow(); goto BeforeRet_;
										};
										i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_28);
									} LA23: ;
								}
							}
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_29)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_29);
							if (char_1.p && !(char_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(char_1.p);
}
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_30)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_30);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, heatmap__libZterminal95shaders_u59)(NI value_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD_;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__2;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__3;
	NI v_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	v_1 = pgClamp(value_p0, ((NI)0), ((NI)255));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_45;
		if (!(v_1 < ((NI)85))) goto LA3_;
		if (nimMulInt(v_1, ((NI)3), &TM__8WmSss49aIo2yrPDwPGHYMQ_45)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD_.r = ((NU8) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_45)));
		colontmpD_.g = ((NU8)0);
		colontmpD_.b = ((NU8)0);
		result = colontmpD_;
	}
	goto LA1_;
LA3_: ;
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_46;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_47;
		if (!(v_1 < ((NI)170))) goto LA6_;
		colontmpD__2.r = ((NU8)255);
		if (nimSubInt(v_1, ((NI)85), &TM__8WmSss49aIo2yrPDwPGHYMQ_46)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimMulInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_46), ((NI)3), &TM__8WmSss49aIo2yrPDwPGHYMQ_47)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD__2.g = ((NU8) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_47)));
		colontmpD__2.b = ((NU8)0);
		result = colontmpD__2;
	}
	goto LA1_;
LA6_: ;
	{
		NU8 w_1;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_48;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_49;
		if (nimSubInt(v_1, ((NI)170), &TM__8WmSss49aIo2yrPDwPGHYMQ_48)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimMulInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_48), ((NI)3), &TM__8WmSss49aIo2yrPDwPGHYMQ_49)) { raiseOverflow(); goto BeforeRet_;
		};
		w_1 = ((NU8) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_49)));
		colontmpD__3.r = ((NU8)255);
		colontmpD__3.g = ((NU8)255);
		colontmpD__3.b = w_1;
		result = colontmpD__3;
	}
LA1_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderRipple__libZterminal95shaders_u1225)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NI centerX_p6, NI centerY_p7, NF speed_p8, NF frequency_p9, NI reduction_p10) {
	NI r_1;
	NI rw_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_31;
	NI rh_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_32;
	NI rcx_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_33;
	NI rcy_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_34;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	r_1 = ((((NI)1) >= reduction_p10) ? ((NI)1) : reduction_p10);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(width_p3, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_31)) { raiseOverflow(); goto BeforeRet_;
	};
	rw_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_31);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(height_p4, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_32)) { raiseOverflow(); goto BeforeRet_;
	};
	rh_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_32);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(centerX_p6, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_33)) { raiseOverflow(); goto BeforeRet_;
	};
	rcx_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_33);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(centerY_p7, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_34)) { raiseOverflow(); goto BeforeRet_;
	};
	rcy_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_34);
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_63;
				if (!(i_1 < rh_1)) goto LA3;
				row_1 = i_1;
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NimStringV2 char_1;
							NI dx_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_35;
							NI dy_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_36;
							NF d_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_37;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_38;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_39;
							NF wave_1;
							NI value_1;
							tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ color_1;
							tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_62;
							if (!(i_2 < rw_1)) goto LA6;
							char_1.len = 0; char_1.p = NIM_NIL;
							col_1 = i_2;
							if (nimSubInt(col_1, rcx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_35)) { raiseOverflow(); goto BeforeRet_;
							};
							dx_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_35);
							if (nimSubInt(row_1, rcy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_36)) { raiseOverflow(); goto BeforeRet_;
							};
							dy_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_36);
							if (nimMulInt(dx_1, dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_37)) { raiseOverflow(); goto BeforeRet_;
							};
							if (nimMulInt(dy_1, dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_38)) { raiseOverflow(); goto BeforeRet_;
							};
							if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_37), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_38), &TM__8WmSss49aIo2yrPDwPGHYMQ_39)) { raiseOverflow(); goto BeforeRet_;
							};
							d_1 = sqrt(((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_39))));
							wave_1 = sin(((NF)(((NF)(d_1) * (NF)(frequency_p9))) - (NF)(((NF)(((NF) (frame_p5))) * (NF)(speed_p8)))));
							if ((((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(2.5))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(2.5))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(2.5)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							value_1 = (((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(2.5)))))));
							char_1 = TM__8WmSss49aIo2yrPDwPGHYMQ_40;
							{
								if (!(((NI)4) <= value_1)) goto LA9_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_41);
							}
							goto LA7_;
LA9_: ;
							{
								if (!(((NI)3) <= value_1)) goto LA12_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_42);
							}
							goto LA7_;
LA12_: ;
							{
								if (!(((NI)2) <= value_1)) goto LA15_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_43);
							}
							goto LA7_;
LA15_: ;
							{
								if (!(((NI)1) <= value_1)) goto LA18_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_44);
							}
							goto LA7_;
LA18_: ;
LA7_: ;
							if ((((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(127.5))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(127.5))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(127.5)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							color_1 = heatmap__libZterminal95shaders_u59((((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(127.5))))))));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							style_1.fg = color_1;
							style_1.bg.r = ((NU8)0);
							style_1.bg.g = ((NU8)0);
							style_1.bg.b = ((NU8)0);
							style_1.bold = NIM_FALSE;
							style_1.underline = NIM_FALSE;
							style_1.italic = NIM_FALSE;
							style_1.dim = NIM_FALSE;
							{
								NI dy_2;
								NI i_3;
								dy_2 = (NI)0;
								i_3 = ((NI)0);
								{
									while (1) {
										NI TM__8WmSss49aIo2yrPDwPGHYMQ_61;
										if (!(i_3 < r_1)) goto LA22;
										dy_2 = i_3;
										{
											NI dx_2;
											NI i_4;
											dx_2 = (NI)0;
											i_4 = ((NI)0);
											{
												while (1) {
													NI TM__8WmSss49aIo2yrPDwPGHYMQ_60;
													if (!(i_4 < r_1)) goto LA25;
													dx_2 = i_4;
													{
														NIM_BOOL T28_;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_50;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_51;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_52;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_53;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_54;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_55;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_56;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_57;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_58;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_59;
														T28_ = (NIM_BOOL)0;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_50)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_50), dx_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_51)) { raiseOverflow(); goto BeforeRet_;
														};
														T28_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_51) < width_p3);
														if (!(T28_)) goto LA29_;
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_52)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_52), dy_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_53)) { raiseOverflow(); goto BeforeRet_;
														};
														T28_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_53) < height_p4);
LA29_: ;
														if (!T28_) goto LA30_;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_54)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(x_p1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_54), &TM__8WmSss49aIo2yrPDwPGHYMQ_55)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_55), dx_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_56)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_57)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(y_p2, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_57), &TM__8WmSss49aIo2yrPDwPGHYMQ_58)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_58), dy_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_59)) { raiseOverflow(); goto BeforeRet_;
														};
														write__backendsZterminalZtermbuffer_u49(buffer_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_56), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_59), char_1, style_1);
														if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
													}
LA30_: ;
													if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_60)) { raiseOverflow(); goto BeforeRet_;
													};
													i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_60);
												} LA25: ;
											}
										}
										if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_61)) { raiseOverflow(); goto BeforeRet_;
										};
										i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_61);
									} LA22: ;
								}
							}
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_62)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_62);
							if (char_1.p && !(char_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(char_1.p);
}
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_63)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_63);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, fire__libZterminal95shaders_u82)(NI value_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD_;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__2;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__3;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__4;
	NI v_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD__4), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	v_1 = pgClamp(value_p0, ((NI)0), ((NI)255));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_78;
		if (!(v_1 < ((NI)64))) goto LA3_;
		if (nimMulInt(v_1, ((NI)4), &TM__8WmSss49aIo2yrPDwPGHYMQ_78)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD_.r = ((NU8) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_78)));
		colontmpD_.g = ((NU8)0);
		colontmpD_.b = ((NU8)0);
		result = colontmpD_;
	}
	goto LA1_;
LA3_: ;
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_79;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_80;
		if (!(v_1 < ((NI)128))) goto LA6_;
		colontmpD__2.r = ((NU8)255);
		if (nimSubInt(v_1, ((NI)64), &TM__8WmSss49aIo2yrPDwPGHYMQ_79)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimMulInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_79), ((NI)4), &TM__8WmSss49aIo2yrPDwPGHYMQ_80)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD__2.g = ((NU8) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_80)));
		colontmpD__2.b = ((NU8)0);
		result = colontmpD__2;
	}
	goto LA1_;
LA6_: ;
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_81;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_82;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_83;
		if (!(v_1 < ((NI)192))) goto LA9_;
		colontmpD__3.r = ((NU8)255);
		if (nimSubInt(v_1, ((NI)128), &TM__8WmSss49aIo2yrPDwPGHYMQ_81)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimMulInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_81), ((NI)2), &TM__8WmSss49aIo2yrPDwPGHYMQ_82)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt(((NI)128), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_82), &TM__8WmSss49aIo2yrPDwPGHYMQ_83)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD__3.g = ((NU8) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_83)));
		colontmpD__3.b = ((NU8)0);
		result = colontmpD__3;
	}
	goto LA1_;
LA9_: ;
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_84;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_85;
		colontmpD__4.r = ((NU8)255);
		colontmpD__4.g = ((NU8)255);
		if (nimSubInt(v_1, ((NI)192), &TM__8WmSss49aIo2yrPDwPGHYMQ_84)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimMulInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_84), ((NI)4), &TM__8WmSss49aIo2yrPDwPGHYMQ_85)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD__4.b = ((NU8) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_85)));
		result = colontmpD__4;
	}
LA1_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderFire__libZterminal95shaders_u1270)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NF intensity_p6, NI seed_p7, NI reduction_p8) {
	NI r_1;
	NI rw_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_64;
	NI rh_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_65;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	r_1 = ((((NI)1) >= reduction_p8) ? ((NI)1) : reduction_p8);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(width_p3, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_64)) { raiseOverflow(); goto BeforeRet_;
	};
	rw_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_64);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(height_p4, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_65)) { raiseOverflow(); goto BeforeRet_;
	};
	rh_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_65);
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_99;
				if (!(i_1 < rh_1)) goto LA3;
				row_1 = i_1;
				{
					NI distFromBottom_1;
					NI TM__8WmSss49aIo2yrPDwPGHYMQ_66;
					NI TM__8WmSss49aIo2yrPDwPGHYMQ_67;
					if (nimSubInt(rh_1, row_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_66)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimSubInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_66), ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_67)) { raiseOverflow(); goto BeforeRet_;
					};
					distFromBottom_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_67);
					{
						if (!(distFromBottom_1 < ((NI)0))) goto LA7_;
						goto LA4;
					}
LA7_: ;
					{
						NI col_1;
						NI i_2;
						col_1 = (NI)0;
						i_2 = ((NI)0);
						{
							while (1) {
								NimStringV2 char_1;
								NI turbulence_1;
								NI T12_;
								NI heat_1;
								NI value_1;
								NI colorValue_1;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_75;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_76;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_77;
								tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ color_1;
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_98;
								if (!(i_2 < rw_1)) goto LA11;
								char_1.len = 0; char_1.p = NIM_NIL;
								col_1 = i_2;
								T12_ = (NI)0;
								T12_ = pgIntHash3D((NI)((col_1) / (((NI)2))), (NI)((row_1) / (((NI)2))), (NI)((frame_p5) / (((NI)3))), seed_p7);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								turbulence_1 = (NI)((T12_) % (((NI)100)));
								if ((((NI) (((NI64) (((NF)(((NF)(((NF) (distFromBottom_1))) + (NF)(((NF)(((NF) (turbulence_1))) * (NF)(0.5))))) * (NF)(intensity_p6))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(((NF) (distFromBottom_1))) + (NF)(((NF)(((NF) (turbulence_1))) * (NF)(0.5))))) * (NF)(intensity_p6))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(((NF) (distFromBottom_1))) + (NF)(((NF)(((NF) (turbulence_1))) * (NF)(0.5))))) * (NF)(intensity_p6)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
								}
								heat_1 = (((NI) (((NI64) (((NF)(((NF)(((NF) (distFromBottom_1))) + (NF)(((NF)(((NF) (turbulence_1))) * (NF)(0.5))))) * (NF)(intensity_p6)))))));
								value_1 = pgClamp((NI)((heat_1) / (((NI)10))), ((NI)0), ((NI)4));
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								char_1 = TM__8WmSss49aIo2yrPDwPGHYMQ_68;
								{
									if (!(((NI)4) <= value_1)) goto LA15_;
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_69);
								}
								goto LA13_;
LA15_: ;
								{
									if (!(((NI)3) <= value_1)) goto LA18_;
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_70);
								}
								goto LA13_;
LA18_: ;
								{
									if (!(((NI)2) <= value_1)) goto LA21_;
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_72);
								}
								goto LA13_;
LA21_: ;
								{
									if (!(((NI)1) <= value_1)) goto LA24_;
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_74);
								}
								goto LA13_;
LA24_: ;
LA13_: ;
								if (nimMulInt(distFromBottom_1, ((NI)10), &TM__8WmSss49aIo2yrPDwPGHYMQ_75)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimSubInt(((NI)255), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_75), &TM__8WmSss49aIo2yrPDwPGHYMQ_76)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_76), turbulence_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_77)) { raiseOverflow(); goto BeforeRet_;
								};
								colorValue_1 = pgClamp((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_77), ((NI)0), ((NI)255));
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								color_1 = fire__libZterminal95shaders_u82(colorValue_1);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								style_1.fg = color_1;
								style_1.bg.r = ((NU8)0);
								style_1.bg.g = ((NU8)0);
								style_1.bg.b = ((NU8)0);
								style_1.bold = NIM_FALSE;
								style_1.underline = NIM_FALSE;
								style_1.italic = NIM_FALSE;
								style_1.dim = NIM_FALSE;
								{
									NI dy_1;
									NI i_3;
									dy_1 = (NI)0;
									i_3 = ((NI)0);
									{
										while (1) {
											NI TM__8WmSss49aIo2yrPDwPGHYMQ_97;
											if (!(i_3 < r_1)) goto LA28;
											dy_1 = i_3;
											{
												NI dx_1;
												NI i_4;
												dx_1 = (NI)0;
												i_4 = ((NI)0);
												{
													while (1) {
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_96;
														if (!(i_4 < r_1)) goto LA31;
														dx_1 = i_4;
														{
															NIM_BOOL T34_;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_86;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_87;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_88;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_89;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_90;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_91;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_92;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_93;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_94;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_95;
															T34_ = (NIM_BOOL)0;
															if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_86)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_86), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_87)) { raiseOverflow(); goto BeforeRet_;
															};
															T34_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_87) < width_p3);
															if (!(T34_)) goto LA35_;
															if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_88)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_88), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_89)) { raiseOverflow(); goto BeforeRet_;
															};
															T34_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_89) < height_p4);
LA35_: ;
															if (!T34_) goto LA36_;
															if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_90)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt(x_p1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_90), &TM__8WmSss49aIo2yrPDwPGHYMQ_91)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_91), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_92)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_93)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt(y_p2, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_93), &TM__8WmSss49aIo2yrPDwPGHYMQ_94)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_94), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_95)) { raiseOverflow(); goto BeforeRet_;
															};
															write__backendsZterminalZtermbuffer_u49(buffer_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_92), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_95), char_1, style_1);
															if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
														}
LA36_: ;
														if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_96)) { raiseOverflow(); goto BeforeRet_;
														};
														i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_96);
													} LA31: ;
												}
											}
											if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_97)) { raiseOverflow(); goto BeforeRet_;
											};
											i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_97);
										} LA28: ;
									}
								}
								if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_98)) { raiseOverflow(); goto BeforeRet_;
								};
								i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_98);
								if (char_1.p && !(char_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(char_1.p);
}
							} LA11: ;
						}
					}
				} LA4: ;
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_99)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_99);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
static N_INLINE(NF, abs__pureZmath_u222)(NF x_p0) {
	NF result;
	result = (NF)0;
	result = fabs(x_p0);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, coolWarm__libZterminal95shaders_u69)(NI value_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
	NI v_1;
	NF t_1;
	NF T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	v_1 = pgClamp(value_p0, ((NI)0), ((NI)255));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	t_1 = ((NF)(((NF) (v_1))) / (NF)(255.0));
	result.r = ((NU8) (((NF)(t_1) * (NF)(255.0))));
	T1_ = (NF)0;
	T1_ = abs__pureZmath_u222(((NF)(t_1) - (NF)(0.5)));
	result.g = ((NU8) (((NF)(((NF)(1.0) - (NF)(((NF)(T1_) * (NF)(2.0))))) * (NF)(255.0))));
	result.b = ((NU8) (((NF)(((NF)(1.0) - (NF)(t_1))) * (NF)(255.0))));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderFractalNoise__libZterminal95shaders_u1311)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NI scale_p6, NI octaves_p7, NI seed_p8, NI reduction_p9) {
	NI r_1;
	NI rw_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_100;
	NI rh_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_101;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	r_1 = ((((NI)1) >= reduction_p9) ? ((NI)1) : reduction_p9);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(width_p3, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_100)) { raiseOverflow(); goto BeforeRet_;
	};
	rw_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_100);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(height_p4, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_101)) { raiseOverflow(); goto BeforeRet_;
	};
	rh_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_101);
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_127;
				if (!(i_1 < rh_1)) goto LA3;
				row_1 = i_1;
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NimStringV2 char_1;
							NI t_1;
							NI noise_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_102;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_103;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_104;
							NI value_1;
							NI colorValue_1;
							tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ color_1;
							tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_126;
							if (!(i_2 < rw_1)) goto LA6;
							char_1.len = 0; char_1.p = NIM_NIL;
							col_1 = i_2;
							t_1 = (NI)((frame_p5) / (((NI)10)));
							if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_102)) { raiseOverflow(); goto BeforeRet_;
							};
							if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_102), t_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_103)) { raiseOverflow(); goto BeforeRet_;
							};
							if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_104)) { raiseOverflow(); goto BeforeRet_;
							};
							noise_1 = pgFractalNoise2D((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_103), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_104), octaves_p7, scale_p6, seed_p8);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							value_1 = pgClamp((NI)((noise_1) / (((NI)13107))), ((NI)0), ((NI)4));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							char_1 = TM__8WmSss49aIo2yrPDwPGHYMQ_105;
							{
								if (!(((NI)4) <= value_1)) goto LA9_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_107);
							}
							goto LA7_;
LA9_: ;
							{
								if (!(((NI)3) <= value_1)) goto LA12_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_109);
							}
							goto LA7_;
LA12_: ;
							{
								if (!(((NI)2) <= value_1)) goto LA15_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_111);
							}
							goto LA7_;
LA15_: ;
							{
								if (!(((NI)1) <= value_1)) goto LA18_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_113);
							}
							goto LA7_;
LA18_: ;
LA7_: ;
							colorValue_1 = pgClamp((NI)((noise_1) / (((NI)256))), ((NI)0), ((NI)255));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							color_1 = coolWarm__libZterminal95shaders_u69(colorValue_1);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							style_1.fg = color_1;
							style_1.bg.r = ((NU8)0);
							style_1.bg.g = ((NU8)0);
							style_1.bg.b = ((NU8)0);
							style_1.bold = NIM_FALSE;
							style_1.underline = NIM_FALSE;
							style_1.italic = NIM_FALSE;
							style_1.dim = NIM_FALSE;
							{
								NI dy_1;
								NI i_3;
								dy_1 = (NI)0;
								i_3 = ((NI)0);
								{
									while (1) {
										NI TM__8WmSss49aIo2yrPDwPGHYMQ_125;
										if (!(i_3 < r_1)) goto LA22;
										dy_1 = i_3;
										{
											NI dx_1;
											NI i_4;
											dx_1 = (NI)0;
											i_4 = ((NI)0);
											{
												while (1) {
													NI TM__8WmSss49aIo2yrPDwPGHYMQ_124;
													if (!(i_4 < r_1)) goto LA25;
													dx_1 = i_4;
													{
														NIM_BOOL T28_;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_114;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_115;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_116;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_117;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_118;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_119;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_120;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_121;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_122;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_123;
														T28_ = (NIM_BOOL)0;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_114)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_114), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_115)) { raiseOverflow(); goto BeforeRet_;
														};
														T28_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_115) < width_p3);
														if (!(T28_)) goto LA29_;
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_116)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_116), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_117)) { raiseOverflow(); goto BeforeRet_;
														};
														T28_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_117) < height_p4);
LA29_: ;
														if (!T28_) goto LA30_;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_118)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(x_p1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_118), &TM__8WmSss49aIo2yrPDwPGHYMQ_119)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_119), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_120)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_121)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(y_p2, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_121), &TM__8WmSss49aIo2yrPDwPGHYMQ_122)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_122), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_123)) { raiseOverflow(); goto BeforeRet_;
														};
														write__backendsZterminalZtermbuffer_u49(buffer_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_120), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_123), char_1, style_1);
														if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
													}
LA30_: ;
													if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_124)) { raiseOverflow(); goto BeforeRet_;
													};
													i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_124);
												} LA25: ;
											}
										}
										if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_125)) { raiseOverflow(); goto BeforeRet_;
										};
										i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_125);
									} LA22: ;
								}
							}
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_126)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_126);
							if (char_1.p && !(char_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(char_1.p);
}
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_127)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_127);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, ocean__libZterminal95shaders_u86)(NI value_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
	NU8 colontmpD_;
	NU8 colontmpD__2;
	NI v_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_147;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	colontmpD_ = (NU8)0;
	colontmpD__2 = (NU8)0;
	v_1 = pgClamp(value_p0, ((NI)0), ((NI)255));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result.r = ((NU8)0);
	colontmpD_ = ((NU8) ((NI)((v_1) / (((NI)2)))));
	result.g = colontmpD_;
	if (nimAddInt(((NI)128), (NI)((v_1) / (((NI)2))), &TM__8WmSss49aIo2yrPDwPGHYMQ_147)) { raiseOverflow(); goto BeforeRet_;
	};
	colontmpD__2 = ((NU8) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_147)));
	result.b = colontmpD__2;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderWave__libZterminal95shaders_u1352)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NF frequency_p6, NF speed_p7, NI reduction_p8) {
	NI r_1;
	NI rw_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_128;
	NI rh_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_129;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	r_1 = ((((NI)1) >= reduction_p8) ? ((NI)1) : reduction_p8);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(width_p3, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_128)) { raiseOverflow(); goto BeforeRet_;
	};
	rw_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_128);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(height_p4, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_129)) { raiseOverflow(); goto BeforeRet_;
	};
	rh_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_129);
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_161;
				if (!(i_1 < rh_1)) goto LA3;
				row_1 = i_1;
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NimStringV2 char_1;
							NF wave_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_130;
							NI value_1;
							tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ color_1;
							tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_160;
							if (!(i_2 < rw_1)) goto LA6;
							char_1.len = 0; char_1.p = NIM_NIL;
							col_1 = i_2;
							if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_130)) { raiseOverflow(); goto BeforeRet_;
							};
							wave_1 = sin(((NF)(((NF)(((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_130)))) * (NF)(frequency_p6))) + (NF)(((NF)(((NF) (frame_p5))) * (NF)(speed_p7)))));
							if ((((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(4.5))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(4.5))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(4.5)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							value_1 = (((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(4.5)))))));
							char_1 = TM__8WmSss49aIo2yrPDwPGHYMQ_131;
							{
								if (!(((NI)8) <= value_1)) goto LA9_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_132);
							}
							goto LA7_;
LA9_: ;
							{
								if (!(((NI)7) <= value_1)) goto LA12_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_134);
							}
							goto LA7_;
LA12_: ;
							{
								if (!(((NI)6) <= value_1)) goto LA15_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_136);
							}
							goto LA7_;
LA15_: ;
							{
								if (!(((NI)5) <= value_1)) goto LA18_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_138);
							}
							goto LA7_;
LA18_: ;
							{
								if (!(((NI)4) <= value_1)) goto LA21_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_140);
							}
							goto LA7_;
LA21_: ;
							{
								if (!(((NI)3) <= value_1)) goto LA24_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_142);
							}
							goto LA7_;
LA24_: ;
							{
								if (!(((NI)2) <= value_1)) goto LA27_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_144);
							}
							goto LA7_;
LA27_: ;
							{
								if (!(((NI)1) <= value_1)) goto LA30_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_146);
							}
							goto LA7_;
LA30_: ;
LA7_: ;
							if ((((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(127.5))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(127.5))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(127.5)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							color_1 = ocean__libZterminal95shaders_u86((((NI) (((NI64) (((NF)(((NF)(wave_1) + (NF)(1.0))) * (NF)(127.5))))))));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							style_1.fg = color_1;
							style_1.bg.r = ((NU8)0);
							style_1.bg.g = ((NU8)0);
							style_1.bg.b = ((NU8)0);
							style_1.bold = NIM_FALSE;
							style_1.underline = NIM_FALSE;
							style_1.italic = NIM_FALSE;
							style_1.dim = NIM_FALSE;
							{
								NI dy_1;
								NI i_3;
								dy_1 = (NI)0;
								i_3 = ((NI)0);
								{
									while (1) {
										NI TM__8WmSss49aIo2yrPDwPGHYMQ_159;
										if (!(i_3 < r_1)) goto LA34;
										dy_1 = i_3;
										{
											NI dx_1;
											NI i_4;
											dx_1 = (NI)0;
											i_4 = ((NI)0);
											{
												while (1) {
													NI TM__8WmSss49aIo2yrPDwPGHYMQ_158;
													if (!(i_4 < r_1)) goto LA37;
													dx_1 = i_4;
													{
														NIM_BOOL T40_;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_148;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_149;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_150;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_151;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_152;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_153;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_154;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_155;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_156;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_157;
														T40_ = (NIM_BOOL)0;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_148)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_148), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_149)) { raiseOverflow(); goto BeforeRet_;
														};
														T40_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_149) < width_p3);
														if (!(T40_)) goto LA41_;
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_150)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_150), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_151)) { raiseOverflow(); goto BeforeRet_;
														};
														T40_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_151) < height_p4);
LA41_: ;
														if (!T40_) goto LA42_;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_152)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(x_p1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_152), &TM__8WmSss49aIo2yrPDwPGHYMQ_153)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_153), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_154)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_155)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(y_p2, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_155), &TM__8WmSss49aIo2yrPDwPGHYMQ_156)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_156), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_157)) { raiseOverflow(); goto BeforeRet_;
														};
														write__backendsZterminalZtermbuffer_u49(buffer_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_154), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_157), char_1, style_1);
														if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
													}
LA42_: ;
													if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_158)) { raiseOverflow(); goto BeforeRet_;
													};
													i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_158);
												} LA37: ;
											}
										}
										if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_159)) { raiseOverflow(); goto BeforeRet_;
										};
										i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_159);
									} LA34: ;
								}
							}
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_160)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_160);
							if (char_1.p && !(char_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(char_1.p);
}
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_161)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_161);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, neon__libZterminal95shaders_u77)(NI value_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
	NI v_1;
	NF t_1;
	NF T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	v_1 = pgClamp(value_p0, ((NI)0), ((NI)255));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	t_1 = ((NF)(((NF) (v_1))) / (NF)(255.0));
	result.r = ((NU8) (((NF)(t_1) * (NF)(255.0))));
	T1_ = (NF)0;
	T1_ = sin(((NF)(t_1) * (NF)(3.141592653589793)));
	result.g = ((NU8) (((NF)(((NF)(T1_) * (NF)(128.0))) + (NF)(127.0))));
	result.b = ((NU8)255);
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderTunnel__libZterminal95shaders_u1390)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NI centerX_p6, NI centerY_p7, NF speed_p8, NI reduction_p9) {
	NI r_1;
	NI rw_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_162;
	NI rh_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_163;
	NI rcx_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_164;
	NI rcy_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_165;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	r_1 = ((((NI)1) >= reduction_p9) ? ((NI)1) : reduction_p9);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(width_p3, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_162)) { raiseOverflow(); goto BeforeRet_;
	};
	rw_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_162);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(height_p4, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_163)) { raiseOverflow(); goto BeforeRet_;
	};
	rh_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_163);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(centerX_p6, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_164)) { raiseOverflow(); goto BeforeRet_;
	};
	rcx_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_164);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(centerY_p7, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_165)) { raiseOverflow(); goto BeforeRet_;
	};
	rcy_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_165);
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_190;
				if (!(i_1 < rh_1)) goto LA3;
				row_1 = i_1;
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NimStringV2 char_1;
							NF dx_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_166;
							NF dy_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_167;
							NF dist_1;
							NF angle_1;
							NF tunnel_1;
							NF T7_;
							NF T8_;
							NI value_1;
							NI colorValue_1;
							tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ color_1;
							tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_189;
							if (!(i_2 < rw_1)) goto LA6;
							char_1.len = 0; char_1.p = NIM_NIL;
							col_1 = i_2;
							if (nimSubInt(col_1, rcx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_166)) { raiseOverflow(); goto BeforeRet_;
							};
							dx_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_166)));
							if (nimSubInt(row_1, rcy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_167)) { raiseOverflow(); goto BeforeRet_;
							};
							dy_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_167)));
							dist_1 = sqrt(((NF)(((NF)(dx_1) * (NF)(dx_1))) + (NF)(((NF)(dy_1) * (NF)(dy_1)))));
							angle_1 = atan2(dy_1, dx_1);
							T7_ = (NF)0;
							T7_ = sin(((NF)(((NF)(dist_1) * (NF)(0.2))) - (NF)(((NF)(((NF) (frame_p5))) * (NF)(speed_p8)))));
							T8_ = (NF)0;
							T8_ = sin(((NF)(((NF)(angle_1) * (NF)(5.0))) + (NF)(((NF)(((NF) (frame_p5))) * (NF)(speed_p8)))));
							tunnel_1 = ((NF)(T7_) + (NF)(T8_));
							if ((((NI) (((NI64) (((NF)(((NF)(tunnel_1) + (NF)(2.0))) * (NF)(1.25))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(tunnel_1) + (NF)(2.0))) * (NF)(1.25))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(tunnel_1) + (NF)(2.0))) * (NF)(1.25)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							value_1 = (((NI) (((NI64) (((NF)(((NF)(tunnel_1) + (NF)(2.0))) * (NF)(1.25)))))));
							char_1 = TM__8WmSss49aIo2yrPDwPGHYMQ_168;
							{
								if (!(((NI)4) <= value_1)) goto LA11_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_170);
							}
							goto LA9_;
LA11_: ;
							{
								if (!(((NI)3) <= value_1)) goto LA14_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_172);
							}
							goto LA9_;
LA14_: ;
							{
								if (!(((NI)2) <= value_1)) goto LA17_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_174);
							}
							goto LA9_;
LA17_: ;
							{
								if (!(((NI)1) <= value_1)) goto LA20_;
								eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_176);
							}
							goto LA9_;
LA20_: ;
LA9_: ;
							if ((((NI) (((NI64) (((NF)(((NF)(tunnel_1) + (NF)(2.0))) * (NF)(63.75))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(tunnel_1) + (NF)(2.0))) * (NF)(63.75))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(tunnel_1) + (NF)(2.0))) * (NF)(63.75)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							colorValue_1 = (((NI) (((NI64) (((NF)(((NF)(tunnel_1) + (NF)(2.0))) * (NF)(63.75)))))));
							color_1 = neon__libZterminal95shaders_u77(colorValue_1);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							style_1.fg = color_1;
							style_1.bg.r = ((NU8)0);
							style_1.bg.g = ((NU8)0);
							style_1.bg.b = ((NU8)0);
							style_1.bold = NIM_FALSE;
							style_1.underline = NIM_FALSE;
							style_1.italic = NIM_FALSE;
							style_1.dim = NIM_FALSE;
							{
								NI dy_2;
								NI i_3;
								dy_2 = (NI)0;
								i_3 = ((NI)0);
								{
									while (1) {
										NI TM__8WmSss49aIo2yrPDwPGHYMQ_188;
										if (!(i_3 < r_1)) goto LA24;
										dy_2 = i_3;
										{
											NI dx_2;
											NI i_4;
											dx_2 = (NI)0;
											i_4 = ((NI)0);
											{
												while (1) {
													NI TM__8WmSss49aIo2yrPDwPGHYMQ_187;
													if (!(i_4 < r_1)) goto LA27;
													dx_2 = i_4;
													{
														NIM_BOOL T30_;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_177;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_178;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_179;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_180;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_181;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_182;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_183;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_184;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_185;
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_186;
														T30_ = (NIM_BOOL)0;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_177)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_177), dx_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_178)) { raiseOverflow(); goto BeforeRet_;
														};
														T30_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_178) < width_p3);
														if (!(T30_)) goto LA31_;
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_179)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_179), dy_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_180)) { raiseOverflow(); goto BeforeRet_;
														};
														T30_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_180) < height_p4);
LA31_: ;
														if (!T30_) goto LA32_;
														if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_181)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(x_p1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_181), &TM__8WmSss49aIo2yrPDwPGHYMQ_182)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_182), dx_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_183)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_184)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt(y_p2, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_184), &TM__8WmSss49aIo2yrPDwPGHYMQ_185)) { raiseOverflow(); goto BeforeRet_;
														};
														if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_185), dy_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_186)) { raiseOverflow(); goto BeforeRet_;
														};
														write__backendsZterminalZtermbuffer_u49(buffer_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_183), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_186), char_1, style_1);
														if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
													}
LA32_: ;
													if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_187)) { raiseOverflow(); goto BeforeRet_;
													};
													i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_187);
												} LA27: ;
											}
										}
										if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_188)) { raiseOverflow(); goto BeforeRet_;
										};
										i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_188);
									} LA24: ;
								}
							}
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_189)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_189);
							if (char_1.p && !(char_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(char_1.p);
}
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_190)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_190);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, matrix__libZterminal95shaders_u90)(NI value_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
	NU8 colontmpD_;
	NU8 colontmpD__2;
	NI v_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	colontmpD_ = (NU8)0;
	colontmpD__2 = (NU8)0;
	v_1 = pgClamp(value_p0, ((NI)0), ((NI)255));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result.r = ((NU8)0);
	colontmpD_ = ((NU8) (v_1));
	result.g = colontmpD_;
	colontmpD__2 = ((NU8) ((NI)((v_1) / (((NI)4)))));
	result.b = colontmpD__2;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, renderMatrixRain__libZterminal95shaders_u1436)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, NI frame_p5, NF speed_p6, NF density_p7, NI seed_p8, NI reduction_p9) {
	NI r_1;
	NI rw_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_191;
	NI rh_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_192;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	r_1 = ((((NI)1) >= reduction_p9) ? ((NI)1) : reduction_p9);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(width_p3, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_191)) { raiseOverflow(); goto BeforeRet_;
	};
	rw_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_191);
	if (r_1 == 0){ raiseDivByZero(); goto BeforeRet_;
	}
	if (nimDivInt(height_p4, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_192)) { raiseOverflow(); goto BeforeRet_;
	};
	rh_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_192);
	{
		NI col_1;
		NI i_1;
		col_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI dropStart_1;
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_193;
				NI T4_;
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_194;
				NI dropPos_1;
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_195;
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_196;
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_234;
				if (!(i_1 < rw_1)) goto LA3;
				col_1 = i_1;
				if (nimAddInt(seed_p8, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_193)) { raiseOverflow(); goto BeforeRet_;
				};
				T4_ = (NI)0;
				T4_ = pgIntHash(col_1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_193));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				if ((((NI) (((NI64) (((NF)(((NF) (frame_p5))) * (NF)(speed_p6))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF) (frame_p5))) * (NF)(speed_p6))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF) (frame_p5))) * (NF)(speed_p6)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
				}
				if (nimAddInt(T4_, (((NI) (((NI64) (((NF)(((NF) (frame_p5))) * (NF)(speed_p6))))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_194)) { raiseOverflow(); goto BeforeRet_;
				};
				dropStart_1 = (NI)(((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_194)) % (((NI)100)));
				if (nimMulInt(dropStart_1, ((NI)2), &TM__8WmSss49aIo2yrPDwPGHYMQ_195)) { raiseOverflow(); goto BeforeRet_;
				};
				if (nimSubInt((NI)(((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_195)) % (((NI)200))), ((NI)100), &TM__8WmSss49aIo2yrPDwPGHYMQ_196)) { raiseOverflow(); goto BeforeRet_;
				};
				dropPos_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_196);
				{
					NI row_1;
					NI i_2;
					row_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NI distFromDrop_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_197;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_233;
							if (!(i_2 < rh_1)) goto LA7;
							row_1 = i_2;
							if (nimSubInt(row_1, dropPos_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_197)) { raiseOverflow(); goto BeforeRet_;
							};
							if ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_197) == (-2147483647 -1)){ raiseOverflow(); goto BeforeRet_;
							}
							distFromDrop_1 = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_197) > 0? ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_197)) : -((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_197)));
							{
								NIM_BOOL T10_;
								NI T12_;
								NimStringV2 char_1;
								NI brightness_1;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_198;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_199;
								NI charIdx_1;
								NI T15_;
								tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ color_1;
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
								T10_ = (NIM_BOOL)0;
								T10_ = (distFromDrop_1 < ((NI)10));
								if (!(T10_)) goto LA11_;
								T12_ = (NI)0;
								T12_ = pgIntHash2D(col_1, row_1, seed_p8);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								if ((((NI) (((NI64) (((NF)(density_p7) * (NF)(100.0))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(density_p7) * (NF)(100.0))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(density_p7) * (NF)(100.0)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
								}
								T10_ = ((NI)((T12_) % (((NI)100))) < (((NI) (((NI64) (((NF)(density_p7) * (NF)(100.0))))))));
LA11_: ;
								if (!T10_) goto LA13_;
								char_1.len = 0; char_1.p = NIM_NIL;
								if (nimMulInt(distFromDrop_1, ((NI)20), &TM__8WmSss49aIo2yrPDwPGHYMQ_198)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimSubInt(((NI)255), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_198), &TM__8WmSss49aIo2yrPDwPGHYMQ_199)) { raiseOverflow(); goto BeforeRet_;
								};
								brightness_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_199);
								T15_ = (NI)0;
								T15_ = pgIntHash3D(col_1, row_1, (NI)((frame_p5) / (((NI)2))), seed_p8);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								charIdx_1 = (NI)((T15_) % (((NI)10)));
								char_1 = TM__8WmSss49aIo2yrPDwPGHYMQ_200;
								{
									if (!(charIdx_1 < ((NI)2))) goto LA18_;
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_201);
								}
								goto LA16_;
LA18_: ;
								{
									if (!(charIdx_1 < ((NI)4))) goto LA21_;
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_202);
								}
								goto LA16_;
LA21_: ;
								{
									if (!(charIdx_1 < ((NI)6))) goto LA24_;
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_204);
								}
								goto LA16_;
LA24_: ;
								{
									if (!(charIdx_1 < ((NI)8))) goto LA27_;
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_205);
								}
								goto LA16_;
LA27_: ;
								{
									eqsink___system_u2648((&char_1), TM__8WmSss49aIo2yrPDwPGHYMQ_207);
								}
LA16_: ;
								color_1 = matrix__libZterminal95shaders_u90(brightness_1);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								style_1.fg = color_1;
								style_1.bg.r = ((NU8)0);
								style_1.bg.g = ((NU8)0);
								style_1.bg.b = ((NU8)0);
								style_1.bold = NIM_FALSE;
								style_1.underline = NIM_FALSE;
								style_1.italic = NIM_FALSE;
								style_1.dim = NIM_FALSE;
								{
									NI dy_1;
									NI i_3;
									dy_1 = (NI)0;
									i_3 = ((NI)0);
									{
										while (1) {
											NI TM__8WmSss49aIo2yrPDwPGHYMQ_219;
											if (!(i_3 < r_1)) goto LA32;
											dy_1 = i_3;
											{
												NI dx_1;
												NI i_4;
												dx_1 = (NI)0;
												i_4 = ((NI)0);
												{
													while (1) {
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_218;
														if (!(i_4 < r_1)) goto LA35;
														dx_1 = i_4;
														{
															NIM_BOOL T38_;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_208;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_209;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_210;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_211;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_212;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_213;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_214;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_215;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_216;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_217;
															T38_ = (NIM_BOOL)0;
															if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_208)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_208), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_209)) { raiseOverflow(); goto BeforeRet_;
															};
															T38_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_209) < width_p3);
															if (!(T38_)) goto LA39_;
															if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_210)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_210), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_211)) { raiseOverflow(); goto BeforeRet_;
															};
															T38_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_211) < height_p4);
LA39_: ;
															if (!T38_) goto LA40_;
															if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_212)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt(x_p1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_212), &TM__8WmSss49aIo2yrPDwPGHYMQ_213)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_213), dx_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_214)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_215)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt(y_p2, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_215), &TM__8WmSss49aIo2yrPDwPGHYMQ_216)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_216), dy_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_217)) { raiseOverflow(); goto BeforeRet_;
															};
															write__backendsZterminalZtermbuffer_u49(buffer_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_214), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_217), char_1, style_1);
															if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
														}
LA40_: ;
														if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_218)) { raiseOverflow(); goto BeforeRet_;
														};
														i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_218);
													} LA35: ;
												}
											}
											if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_219)) { raiseOverflow(); goto BeforeRet_;
											};
											i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_219);
										} LA32: ;
									}
								}
								if (char_1.p && !(char_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(char_1.p);
}
							}
							goto LA8_;
LA13_: ;
							{
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_2;
								style_2.fg.r = ((NU8)0);
								style_2.fg.g = ((NU8)0);
								style_2.fg.b = ((NU8)0);
								style_2.bg.r = ((NU8)0);
								style_2.bg.g = ((NU8)0);
								style_2.bg.b = ((NU8)0);
								style_2.bold = NIM_FALSE;
								style_2.underline = NIM_FALSE;
								style_2.italic = NIM_FALSE;
								style_2.dim = NIM_FALSE;
								{
									NI dy_2;
									NI i_5;
									dy_2 = (NI)0;
									i_5 = ((NI)0);
									{
										while (1) {
											NI TM__8WmSss49aIo2yrPDwPGHYMQ_232;
											if (!(i_5 < r_1)) goto LA45;
											dy_2 = i_5;
											{
												NI dx_2;
												NI i_6;
												dx_2 = (NI)0;
												i_6 = ((NI)0);
												{
													while (1) {
														NI TM__8WmSss49aIo2yrPDwPGHYMQ_231;
														if (!(i_6 < r_1)) goto LA48;
														dx_2 = i_6;
														{
															NIM_BOOL T51_;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_220;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_221;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_222;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_223;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_224;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_225;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_226;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_227;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_228;
															NI TM__8WmSss49aIo2yrPDwPGHYMQ_229;
															T51_ = (NIM_BOOL)0;
															if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_220)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_220), dx_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_221)) { raiseOverflow(); goto BeforeRet_;
															};
															T51_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_221) < width_p3);
															if (!(T51_)) goto LA52_;
															if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_222)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_222), dy_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_223)) { raiseOverflow(); goto BeforeRet_;
															};
															T51_ = ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_223) < height_p4);
LA52_: ;
															if (!T51_) goto LA53_;
															if (nimMulInt(col_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_224)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt(x_p1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_224), &TM__8WmSss49aIo2yrPDwPGHYMQ_225)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_225), dx_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_226)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimMulInt(row_1, r_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_227)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt(y_p2, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_227), &TM__8WmSss49aIo2yrPDwPGHYMQ_228)) { raiseOverflow(); goto BeforeRet_;
															};
															if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_228), dy_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_229)) { raiseOverflow(); goto BeforeRet_;
															};
															write__backendsZterminalZtermbuffer_u49(buffer_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_226), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_229), TM__8WmSss49aIo2yrPDwPGHYMQ_230, style_2);
															if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
														}
LA53_: ;
														if (nimAddInt(i_6, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_231)) { raiseOverflow(); goto BeforeRet_;
														};
														i_6 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_231);
													} LA48: ;
												}
											}
											if (nimAddInt(i_5, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_232)) { raiseOverflow(); goto BeforeRet_;
											};
											i_5 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_232);
										} LA45: ;
									}
								}
							}
LA8_: ;
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_233)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_233);
						} LA7: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_234)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_234);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, drawShader__libZterminal95shaders_u1720)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0) {
	NI r_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		if (!(gShaderState__libZterminal95shaders_u51 == ((tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ*) NIM_NIL))) goto LA3_;
		goto BeforeRet_;
	}
LA3_: ;
	r_1 = (*gShaderState__libZterminal95shaders_u51).reduction;
	switch ((*gShaderState__libZterminal95shaders_u51).effectId) {
	case ((NI)0):
	{
		renderPlasma__libZterminal95shaders_u1179(buffer_p0, (*gShaderState__libZterminal95shaders_u51).x, (*gShaderState__libZterminal95shaders_u51).y, (*gShaderState__libZterminal95shaders_u51).width, (*gShaderState__libZterminal95shaders_u51).height, (*gShaderState__libZterminal95shaders_u51).frame, 0.15, 0.05, r_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((NI)1):
	{
		renderRipple__libZterminal95shaders_u1225(buffer_p0, (*gShaderState__libZterminal95shaders_u51).x, (*gShaderState__libZterminal95shaders_u51).y, (*gShaderState__libZterminal95shaders_u51).width, (*gShaderState__libZterminal95shaders_u51).height, (*gShaderState__libZterminal95shaders_u51).frame, (NI)(((*gShaderState__libZterminal95shaders_u51).width) / (((NI)2))), (NI)(((*gShaderState__libZterminal95shaders_u51).height) / (((NI)2))), 0.1, 0.3, r_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((NI)2):
	{
		renderFire__libZterminal95shaders_u1270(buffer_p0, (*gShaderState__libZterminal95shaders_u51).x, (*gShaderState__libZterminal95shaders_u51).y, (*gShaderState__libZterminal95shaders_u51).width, (*gShaderState__libZterminal95shaders_u51).height, (*gShaderState__libZterminal95shaders_u51).frame, 1.0, ((NI)42), r_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((NI)3):
	{
		renderFractalNoise__libZterminal95shaders_u1311(buffer_p0, (*gShaderState__libZterminal95shaders_u51).x, (*gShaderState__libZterminal95shaders_u51).y, (*gShaderState__libZterminal95shaders_u51).width, (*gShaderState__libZterminal95shaders_u51).height, (*gShaderState__libZterminal95shaders_u51).frame, ((NI)30), ((NI)4), ((NI)42), r_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((NI)4):
	{
		renderWave__libZterminal95shaders_u1352(buffer_p0, (*gShaderState__libZterminal95shaders_u51).x, (*gShaderState__libZterminal95shaders_u51).y, (*gShaderState__libZterminal95shaders_u51).width, (*gShaderState__libZterminal95shaders_u51).height, (*gShaderState__libZterminal95shaders_u51).frame, 0.3, 0.1, r_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((NI)5):
	{
		renderTunnel__libZterminal95shaders_u1390(buffer_p0, (*gShaderState__libZterminal95shaders_u51).x, (*gShaderState__libZterminal95shaders_u51).y, (*gShaderState__libZterminal95shaders_u51).width, (*gShaderState__libZterminal95shaders_u51).height, (*gShaderState__libZterminal95shaders_u51).frame, (NI)(((*gShaderState__libZterminal95shaders_u51).width) / (((NI)2))), (NI)(((*gShaderState__libZterminal95shaders_u51).height) / (((NI)2))), 0.05, r_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((NI)6):
	{
		renderMatrixRain__libZterminal95shaders_u1436(buffer_p0, (*gShaderState__libZterminal95shaders_u51).x, (*gShaderState__libZterminal95shaders_u51).y, (*gShaderState__libZterminal95shaders_u51).width, (*gShaderState__libZterminal95shaders_u51).height, (*gShaderState__libZterminal95shaders_u51).frame, 0.5, 0.1, ((NI)42), r_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	default:
	{
	}
	break;
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, setShaderEffect__libZterminal95shaders_u1714)(NI effectId_p0) {
	{
		if (!!((gShaderState__libZterminal95shaders_u51 == ((tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ*) NIM_NIL)))) goto LA3_;
		(*gShaderState__libZterminal95shaders_u51).effectId = effectId_p0;
		(*gShaderState__libZterminal95shaders_u51).frame = ((NI)0);
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, pauseShader__libZterminal95shaders_u1699)(void) {
	{
		if (!!((gShaderState__libZterminal95shaders_u51 == ((tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ*) NIM_NIL)))) goto LA3_;
		(*gShaderState__libZterminal95shaders_u51).paused = NIM_TRUE;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, resumeShader__libZterminal95shaders_u1704)(void) {
	{
		if (!!((gShaderState__libZterminal95shaders_u51 == ((tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ*) NIM_NIL)))) goto LA3_;
		(*gShaderState__libZterminal95shaders_u51).paused = NIM_FALSE;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, resetShader__libZterminal95shaders_u1709)(void) {
	{
		if (!!((gShaderState__libZterminal95shaders_u51 == ((tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ*) NIM_NIL)))) goto LA3_;
		(*gShaderState__libZterminal95shaders_u51).frame = ((NI)0);
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u1740)(tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA* dest_p0) {
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZterminal95shaders_u1778)(tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA** dest_p0, tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA* src_p1) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest_p0));
		if (!T3_) goto LA4_;
		eqdestroy___libZterminal95shaders_u1740((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)8));
	}
LA4_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(void, initDisplacement__libZterminal95shaders_u1727)(NI effectId_p0, NI layerId_p1, NI x_p2, NI y_p3, NI width_p4, NI height_p5, NF intensity_p6, NF speed_p7, NF amplitude_p8) {
	NI colontmpD_;
	NI colontmpD__2;
	NI colontmpD__3;
	NI colontmpD__4;
	NI colontmpD__5;
	NI colontmpD__6;
	NF colontmpD__7;
	NF colontmpD__8;
	NF colontmpD__9;
	tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA* T1_;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	colontmpD__3 = (NI)0;
	colontmpD__4 = (NI)0;
	colontmpD__5 = (NI)0;
	colontmpD__6 = (NI)0;
	colontmpD__7 = (NF)0;
	colontmpD__8 = (NF)0;
	colontmpD__9 = (NF)0;
	T1_ = NIM_NIL;
	T1_ = (tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) nimNewObjUninit(sizeof(tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA), NIM_ALIGNOF(tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA));
	colontmpD_ = effectId_p0;
	(*T1_).effectId = colontmpD_;
	colontmpD__2 = layerId_p1;
	(*T1_).layerId = colontmpD__2;
	colontmpD__3 = x_p2;
	(*T1_).x = colontmpD__3;
	colontmpD__4 = y_p3;
	(*T1_).y = colontmpD__4;
	colontmpD__5 = width_p4;
	(*T1_).width = colontmpD__5;
	colontmpD__6 = height_p5;
	(*T1_).height = colontmpD__6;
	(*T1_).frame = ((NI)0);
	(*T1_).paused = NIM_FALSE;
	colontmpD__7 = intensity_p6;
	(*T1_).intensity = colontmpD__7;
	colontmpD__8 = speed_p7;
	(*T1_).speed = colontmpD__8;
	colontmpD__9 = amplitude_p8;
	(*T1_).amplitude = colontmpD__9;
	eqsink___libZterminal95shaders_u1778(&gDisplacementState__libZterminal95shaders_u52, T1_);
}
N_LIB_PRIVATE N_NIMCALL(void, updateDisplacement__libZterminal95shaders_u1791)(void) {
{	{
		NIM_BOOL T3_;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_235;
		T3_ = (NIM_BOOL)0;
		T3_ = !((gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL)));
		if (!(T3_)) goto LA4_;
		T3_ = !((*gDisplacementState__libZterminal95shaders_u52).paused);
LA4_: ;
		if (!T3_) goto LA5_;
		if (nimAddInt((*gDisplacementState__libZterminal95shaders_u52).frame, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_235)) { raiseOverflow(); goto BeforeRet_;
		};
		(*gDisplacementState__libZterminal95shaders_u52).frame = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_235);
	}
LA5_: ;
	}BeforeRet_: ;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0) {
	NIM_BOOL result;
	result = NIM_FALSE;
	{
		tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* cell_1;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
		cell_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T5_));
		{
			if (!((NI)((*cell_1).rc & ((NI)-16)) == ((NI)0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			(*cell_1).rc = minuspercent___system_u813((*cell_1).rc, ((NI)16));
		}
LA6_: ;
		rememberCycle__system_u3414(result, cell_1, (*((TNimTypeV2**) (p_p0))));
	}
LA3_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u609)(tyProc__uwoCnREI5bHhDm6ojz7Xjg* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicDyn((*dest_p0).ClE_0);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest_p0).ClE_0);
	}
LA4_: ;
}
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u579)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0) {
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q result;
	tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ* colonenvP__1;
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q colontmpD_;
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q colontmpD__2;
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ*) ClE_0;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q));
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q));
	{
		NF wave_1;
		if (!(*colonenvP__1).vertical0) goto LA3_;
		wave_1 = sin(((NF)(((NF)(((NF) (x_p0))) * (NF)((*colonenvP__1).frequency1))) + (NF)(((NF)(((NF) (time_p2))) * (NF)((*colonenvP__1).speed2)))));
		colontmpD_.Field0 = 0.0;
		colontmpD_.Field1 = ((NF)(wave_1) * (NF)((*colonenvP__1).amplitude3));
		result = colontmpD_;
	}
	goto LA1_;
LA3_: ;
	{
		NF wave_2;
		wave_2 = sin(((NF)(((NF)(((NF) (y_p1))) * (NF)((*colonenvP__1).frequency1))) + (NF)(((NF)(((NF) (time_p2))) * (NF)((*colonenvP__1).speed2)))));
		colontmpD__2.Field0 = ((NF)(wave_2) * (NF)((*colonenvP__1).amplitude3));
		colontmpD__2.Field1 = 0.0;
		result = colontmpD__2;
	}
LA1_: ;
	return result;
}
static N_INLINE(void, nimMarkCyclic)(void* p_p0) {
}
N_LIB_PRIVATE N_NIMCALL(void, waveDisplacement__libZterminal95shaders_u573)(NF amplitude_p0, NF frequency_p1, NF speed_p2, NIM_BOOL vertical_p3, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result) {
	tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ* T1_;
	tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ* blitTmp_1;
	tyProc__uwoCnREI5bHhDm6ojz7Xjg T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_waveDisplacement___vxQssILkzuBly8CF8AEwEQ));
	(*T1_).Sup.m_type = (&NTIv2__vxQssILkzuBly8CF8AEwEQ_);
	colonenv__1 = T1_;
	(*colonenv__1).amplitude3 = amplitude_p0;
	(*colonenv__1).frequency1 = frequency_p1;
	(*colonenv__1).speed2 = speed_p2;
	(*colonenv__1).vertical0 = vertical_p3;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u579; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u645)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0) {
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q result;
	tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A* colonenvP__1;
	NF dx_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_238;
	NF dy_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_239;
	NF distance_1;
	NF wave_1;
	NF strength_1;
{	nimZeroMem((void*)(&result), sizeof(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q));
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A*) ClE_0;
	if (nimSubInt(x_p0, (*colonenvP__1).centerX0, &TM__8WmSss49aIo2yrPDwPGHYMQ_238)) { raiseOverflow(); goto BeforeRet_;
	};
	dx_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_238)));
	if (nimSubInt(y_p1, (*colonenvP__1).centerY1, &TM__8WmSss49aIo2yrPDwPGHYMQ_239)) { raiseOverflow(); goto BeforeRet_;
	};
	dy_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_239)));
	distance_1 = sqrt(((NF)(((NF)(dx_1) * (NF)(dx_1))) + (NF)(((NF)(dy_1) * (NF)(dy_1)))));
	{
		NF colontmp_;
		NF colontmp__2;
		if (!(distance_1 < 0.1)) goto LA3_;
		colontmp_ = 0.0;
		colontmp__2 = 0.0;
		result.Field0 = colontmp_;
		result.Field1 = colontmp__2;
		goto BeforeRet_;
	}
LA3_: ;
	wave_1 = sin(((NF)(((NF)(distance_1) * (NF)((*colonenvP__1).frequency2))) - (NF)(((NF)(((NF) (time_p2))) * (NF)((*colonenvP__1).speed3)))));
	strength_1 = ((NF)(((NF)(wave_1) * (NF)((*colonenvP__1).amplitude4))) / (NF)(distance_1));
	result.Field0 = ((NF)(dx_1) * (NF)(strength_1));
	result.Field1 = ((NF)(dy_1) * (NF)(strength_1));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, rippleDisplacement__libZterminal95shaders_u638)(NI centerX_p0, NI centerY_p1, NF amplitude_p2, NF frequency_p3, NF speed_p4, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result) {
	tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A* T1_;
	tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A* blitTmp_1;
	tyProc__uwoCnREI5bHhDm6ojz7Xjg T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_rippleDisplacement___gCK9czpJ3G0a9b17Xp2bG18A));
	(*T1_).Sup.m_type = (&NTIv2__gCK9czpJ3G0a9b17Xp2bG18A_);
	colonenv__1 = T1_;
	(*colonenv__1).centerX0 = centerX_p0;
	(*colonenv__1).centerY1 = centerY_p1;
	(*colonenv__1).amplitude4 = amplitude_p2;
	(*colonenv__1).frequency2 = frequency_p3;
	(*colonenv__1).speed3 = speed_p4;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u645; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u662)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0) {
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q result;
	tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw* colonenvP__1;
	NI colontmpD_;
	NI colontmpD__2;
	NI colontmpD__3;
	NI colontmpD__4;
	NI t_1;
	NI noiseX_1;
	NI noiseY_1;
	NF dx_1;
	NF dy_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q));
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw*) ClE_0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	colontmpD__3 = (NI)0;
	colontmpD__4 = (NI)0;
	t_1 = (NI)((time_p2) / (((NI)5)));
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_241;
		if (!(*colonenvP__1).animateX0) goto LA3_;
		if (nimAddInt(x_p0, t_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_241)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD_ = pgFractalNoise2D((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_241), y_p1, ((NI)3), (*colonenvP__1).scale1, (*colonenvP__1).seed2);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		noiseX_1 = colontmpD_;
	}
	goto LA1_;
LA3_: ;
	{
		colontmpD__2 = pgFractalNoise2D(x_p0, y_p1, ((NI)3), (*colonenvP__1).scale1, (*colonenvP__1).seed2);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		noiseX_1 = colontmpD__2;
	}
LA1_: ;
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_242;
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_243;
		if (!(*colonenvP__1).animateY3) goto LA8_;
		if (nimAddInt(y_p1, t_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_242)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((*colonenvP__1).seed2, ((NI)1000), &TM__8WmSss49aIo2yrPDwPGHYMQ_243)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD__3 = pgFractalNoise2D(x_p0, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_242), ((NI)3), (*colonenvP__1).scale1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_243));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		noiseY_1 = colontmpD__3;
	}
	goto LA6_;
LA8_: ;
	{
		NI TM__8WmSss49aIo2yrPDwPGHYMQ_244;
		if (nimAddInt((*colonenvP__1).seed2, ((NI)1000), &TM__8WmSss49aIo2yrPDwPGHYMQ_244)) { raiseOverflow(); goto BeforeRet_;
		};
		colontmpD__4 = pgFractalNoise2D(x_p0, y_p1, ((NI)3), (*colonenvP__1).scale1, (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_244));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		noiseY_1 = colontmpD__4;
	}
LA6_: ;
	dx_1 = ((NF)(((NF)(((NF)(((NF) (noiseX_1))) / (NF)(32768.0))) - (NF)(1.0))) * (NF)((*colonenvP__1).amplitude4));
	dy_1 = ((NF)(((NF)(((NF)(((NF) (noiseY_1))) / (NF)(32768.0))) - (NF)(1.0))) * (NF)((*colonenvP__1).amplitude4));
	result.Field0 = dx_1;
	result.Field1 = dy_1;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, noiseDisplacement__libZterminal95shaders_u655)(NI scale_p0, NF amplitude_p1, NI seed_p2, NIM_BOOL animateX_p3, NIM_BOOL animateY_p4, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result) {
	tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw* T1_;
	tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw* blitTmp_1;
	tyProc__uwoCnREI5bHhDm6ojz7Xjg T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_noiseDisplacement___nmN8emaZtIKl9aGuXOJZiXw));
	(*T1_).Sup.m_type = (&NTIv2__nmN8emaZtIKl9aGuXOJZiXw_);
	colonenv__1 = T1_;
	(*colonenv__1).scale1 = scale_p0;
	(*colonenv__1).amplitude4 = amplitude_p1;
	(*colonenv__1).seed2 = seed_p2;
	(*colonenv__1).animateX0 = animateX_p3;
	(*colonenv__1).animateY3 = animateY_p4;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u662; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u678)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0) {
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q result;
	tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA* colonenvP__1;
	NF noise_1;
	NI T1_;
	NF wave_1;
	NF dx_1;
	NF dy_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q));
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA*) ClE_0;
	T1_ = (NI)0;
	T1_ = pgIntHash2D((NI)((x_p0) / (((NI)3))), (NI)((time_p2) / (((NI)10))), (*colonenvP__1).seed0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	noise_1 = ((NF)(((NF) (T1_))) / (NF)(65536.0));
	wave_1 = sin(((NF)(((NF)(((NF)(((NF) (y_p1))) * (NF)((*colonenvP__1).frequency1))) + (NF)(((NF)(((NF) (time_p2))) * (NF)((*colonenvP__1).speed2))))) + (NF)(((NF)(noise_1) * (NF)(10.0)))));
	dx_1 = ((NF)(wave_1) * (NF)((*colonenvP__1).amplitude3));
	dy_1 = ((NF)(((NF)(noise_1) * (NF)((*colonenvP__1).amplitude3))) * (NF)(0.3));
	result.Field0 = dx_1;
	result.Field1 = dy_1;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, heatHazeDisplacement__libZterminal95shaders_u672)(NF amplitude_p0, NF frequency_p1, NF speed_p2, NI seed_p3, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result) {
	tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA* T1_;
	tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA* blitTmp_1;
	tyProc__uwoCnREI5bHhDm6ojz7Xjg T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_heatHazeDisplacement___2TNea3VNbR9cqSiBKWTkZTA));
	(*T1_).Sup.m_type = (&NTIv2__2TNea3VNbR9cqSiBKWTkZTA_);
	colonenv__1 = T1_;
	(*colonenv__1).amplitude3 = amplitude_p0;
	(*colonenv__1).frequency1 = frequency_p1;
	(*colonenv__1).speed2 = speed_p2;
	(*colonenv__1).seed0 = seed_p3;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u678; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u693)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0) {
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q result;
	tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg* colonenvP__1;
	NF dx_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_247;
	NF dy_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_248;
	NF distance_1;
	NF angle_1;
	NF cosA_1;
	NF sinA_1;
	NF rotX_1;
	NF rotY_1;
{	nimZeroMem((void*)(&result), sizeof(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q));
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg*) ClE_0;
	if (nimSubInt(x_p0, (*colonenvP__1).centerX0, &TM__8WmSss49aIo2yrPDwPGHYMQ_247)) { raiseOverflow(); goto BeforeRet_;
	};
	dx_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_247)));
	if (nimSubInt(y_p1, (*colonenvP__1).centerY1, &TM__8WmSss49aIo2yrPDwPGHYMQ_248)) { raiseOverflow(); goto BeforeRet_;
	};
	dy_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_248)));
	distance_1 = sqrt(((NF)(((NF)(dx_1) * (NF)(dx_1))) + (NF)(((NF)(dy_1) * (NF)(dy_1)))));
	{
		NIM_BOOL T3_;
		NF colontmp_;
		NF colontmp__2;
		T3_ = (NIM_BOOL)0;
		T3_ = ((*colonenvP__1).radius2 < distance_1);
		if (T3_) goto LA4_;
		T3_ = (distance_1 < 0.1);
LA4_: ;
		if (!T3_) goto LA5_;
		colontmp_ = 0.0;
		colontmp__2 = 0.0;
		result.Field0 = colontmp_;
		result.Field1 = colontmp__2;
		goto BeforeRet_;
	}
LA5_: ;
	angle_1 = ((NF)(((NF)(((NF)(((NF) (time_p2))) * (NF)(0.05))) * (NF)((*colonenvP__1).strength3))) * (NF)(((NF)(1.0) - (NF)(((NF)(distance_1) / (NF)((*colonenvP__1).radius2))))));
	cosA_1 = cos(angle_1);
	sinA_1 = sin(angle_1);
	rotX_1 = ((NF)(((NF)(dx_1) * (NF)(cosA_1))) - (NF)(((NF)(dy_1) * (NF)(sinA_1))));
	rotY_1 = ((NF)(((NF)(dx_1) * (NF)(sinA_1))) + (NF)(((NF)(dy_1) * (NF)(cosA_1))));
	result.Field0 = ((NF)(rotX_1) - (NF)(dx_1));
	result.Field1 = ((NF)(rotY_1) - (NF)(dy_1));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, swirlDisplacement__libZterminal95shaders_u687)(NI centerX_p0, NI centerY_p1, NF strength_p2, NF radius_p3, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result) {
	tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg* T1_;
	tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg* blitTmp_1;
	tyProc__uwoCnREI5bHhDm6ojz7Xjg T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_swirlDisplacement___M5ODenV59bu5Ng9a8RMJg5Tg));
	(*T1_).Sup.m_type = (&NTIv2__M5ODenV59bu5Ng9a8RMJg5Tg_);
	colonenv__1 = T1_;
	(*colonenv__1).centerX0 = centerX_p0;
	(*colonenv__1).centerY1 = centerY_p1;
	(*colonenv__1).strength3 = strength_p2;
	(*colonenv__1).radius2 = radius_p3;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u693; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u712)(NI x_p0, NI y_p1, NI time_p2, void* ClE_0) {
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q result;
	tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ* colonenvP__1;
	NF dx_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_250;
	NF dy_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_251;
	NF distance_1;
	NF amount_1;
	NF scale_1;
{	nimZeroMem((void*)(&result), sizeof(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q));
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ*) ClE_0;
	if (nimSubInt(x_p0, (*colonenvP__1).centerX0, &TM__8WmSss49aIo2yrPDwPGHYMQ_250)) { raiseOverflow(); goto BeforeRet_;
	};
	dx_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_250)));
	if (nimSubInt(y_p1, (*colonenvP__1).centerY1, &TM__8WmSss49aIo2yrPDwPGHYMQ_251)) { raiseOverflow(); goto BeforeRet_;
	};
	dy_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_251)));
	distance_1 = sqrt(((NF)(((NF)(dx_1) * (NF)(dx_1))) + (NF)(((NF)(dy_1) * (NF)(dy_1)))));
	{
		NIM_BOOL T3_;
		NF colontmp_;
		NF colontmp__2;
		T3_ = (NIM_BOOL)0;
		T3_ = ((*colonenvP__1).radius2 < distance_1);
		if (T3_) goto LA4_;
		T3_ = (distance_1 < 0.1);
LA4_: ;
		if (!T3_) goto LA5_;
		colontmp_ = 0.0;
		colontmp__2 = 0.0;
		result.Field0 = colontmp_;
		result.Field1 = colontmp__2;
		goto BeforeRet_;
	}
LA5_: ;
	amount_1 = ((NF)((*colonenvP__1).strength3) * (NF)(((NF)(1.0) - (NF)(((NF)(distance_1) / (NF)((*colonenvP__1).radius2))))));
	scale_1 = ((NF)(1.0) + (NF)(amount_1));
	result.Field0 = ((NF)(((NF)(dx_1) * (NF)(scale_1))) - (NF)(dx_1));
	result.Field1 = ((NF)(((NF)(dy_1) * (NF)(scale_1))) - (NF)(dy_1));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, fisheyeDisplacement__libZterminal95shaders_u706)(NI centerX_p0, NI centerY_p1, NF strength_p2, NF radius_p3, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result) {
	tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ* T1_;
	tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ* blitTmp_1;
	tyProc__uwoCnREI5bHhDm6ojz7Xjg T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_fisheyeDisplacement___9adq5fctZ2nNEhpR8zIzelQ));
	(*T1_).Sup.m_type = (&NTIv2__9adq5fctZ2nNEhpR8zIzelQ_);
	colonenv__1 = T1_;
	(*colonenv__1).centerX0 = centerX_p0;
	(*colonenv__1).centerY1 = centerY_p1;
	(*colonenv__1).strength3 = strength_p2;
	(*colonenv__1).radius2 = radius_p3;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u712; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
N_LIB_PRIVATE N_CLOSURE(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q, colonanonymous___libZterminal95shaders_u729)(NI x_p0, NI y_p1, NI t_p2, void* ClE_0) {
	tyTuple__wpFMp8IwxV6MlaM4GANJ0Q result;
	tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg* colonenvP__1;
	NF colontmpD_;
	NF colontmpD__2;
	NF dx_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_253;
	NF dy_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_254;
	NF distance_1;
	NF pulse_1;
	NF amount_1;
{	nimZeroMem((void*)(&result), sizeof(tyTuple__wpFMp8IwxV6MlaM4GANJ0Q));
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg*) ClE_0;
	colontmpD_ = (NF)0;
	colontmpD__2 = (NF)0;
	if (nimSubInt(x_p0, (*colonenvP__1).centerX0, &TM__8WmSss49aIo2yrPDwPGHYMQ_253)) { raiseOverflow(); goto BeforeRet_;
	};
	dx_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_253)));
	if (nimSubInt(y_p1, (*colonenvP__1).centerY1, &TM__8WmSss49aIo2yrPDwPGHYMQ_254)) { raiseOverflow(); goto BeforeRet_;
	};
	dy_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_254)));
	distance_1 = sqrt(((NF)(((NF)(dx_1) * (NF)(dx_1))) + (NF)(((NF)(dy_1) * (NF)(dy_1)))));
	{
		NIM_BOOL T3_;
		NF colontmp_;
		NF colontmp__2;
		T3_ = (NIM_BOOL)0;
		T3_ = ((*colonenvP__1).radius2 < distance_1);
		if (T3_) goto LA4_;
		T3_ = (distance_1 < 0.1);
LA4_: ;
		if (!T3_) goto LA5_;
		colontmp_ = 0.0;
		colontmp__2 = 0.0;
		result.Field0 = colontmp_;
		result.Field1 = colontmp__2;
		goto BeforeRet_;
	}
LA5_: ;
	{
		NF T11_;
		if (!(((NI)0) < (*colonenvP__1).time3)) goto LA9_;
		T11_ = (NF)0;
		T11_ = sin(((NF)(((NF) (t_p2))) * (NF)(0.1)));
		colontmpD_ = ((NF)(1.0) + (NF)(((NF)(T11_) * (NF)(0.3))));
		pulse_1 = colontmpD_;
	}
	goto LA7_;
LA9_: ;
	{
		colontmpD__2 = 1.0;
		pulse_1 = colontmpD__2;
	}
LA7_: ;
	amount_1 = ((NF)(((NF)(((NF)((*colonenvP__1).strength4) * (NF)(pulse_1))) * (NF)(((NF)(1.0) - (NF)(((NF)(distance_1) / (NF)((*colonenvP__1).radius2))))))) * (NF)(((NF)(1.0) - (NF)(((NF)(distance_1) / (NF)((*colonenvP__1).radius2))))));
	result.Field0 = ((NF)(dx_1) * (NF)(amount_1));
	result.Field1 = ((NF)(dy_1) * (NF)(amount_1));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, bulgeDisplacement__libZterminal95shaders_u722)(NI centerX_p0, NI centerY_p1, NF strength_p2, NF radius_p3, NI time_p4, tyProc__uwoCnREI5bHhDm6ojz7Xjg* Result) {
	tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg* T1_;
	tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg* blitTmp_1;
	tyProc__uwoCnREI5bHhDm6ojz7Xjg T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_bulgeDisplacement___8sdBXMJSdU7YuKBPU9bcjwg));
	(*T1_).Sup.m_type = (&NTIv2__8sdBXMJSdU7YuKBPU9bcjwg_);
	colonenv__1 = T1_;
	(*colonenv__1).centerX0 = centerX_p0;
	(*colonenv__1).centerY1 = centerY_p1;
	(*colonenv__1).strength4 = strength_p2;
	(*colonenv__1).radius2 = radius_p3;
	(*colonenv__1).time3 = time_p4;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u729; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
N_LIB_PRIVATE N_NIMCALL(void, applyDisplacement__libZterminal95shaders_u1489)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* destBuffer_p0, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* sourceBuffer_p1, NI x_p2, NI y_p3, NI width_p4, NI height_p5, tyProc__uwoCnREI5bHhDm6ojz7Xjg displacement_p6, NI time_p7, NF intensity_p8, NIM_BOOL clampEdges_p9) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_271;
				if (!(i_1 < height_p5)) goto LA3;
				row_1 = i_1;
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NI screenX_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_255;
							NI screenY_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_256;
							tyTuple__wpFMp8IwxV6MlaM4GANJ0Q tmpTuple_1;
							NF rawDx_1;
							NF rawDy_1;
							NF dx_1;
							NF dy_1;
							NI srcX_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_258;
							NI srcY_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_259;
							NI finalSrcX_1;
							NI finalSrcY_1;
							NI srcScreenX_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_268;
							NI srcScreenY_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_269;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_270;
							if (!(i_2 < width_p4)) goto LA6;
							col_1 = i_2;
							if (nimAddInt(x_p2, col_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_255)) { raiseOverflow(); goto BeforeRet_;
							};
							screenX_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_255);
							if (nimAddInt(y_p3, row_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_256)) { raiseOverflow(); goto BeforeRet_;
							};
							screenY_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_256);
							tmpTuple_1 = displacement_p6.ClE_0? displacement_p6.ClP_0(col_1, row_1, time_p7, displacement_p6.ClE_0):((TM__8WmSss49aIo2yrPDwPGHYMQ_257)(displacement_p6.ClP_0))(col_1, row_1, time_p7);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							rawDx_1 = tmpTuple_1.Field0;
							rawDy_1 = tmpTuple_1.Field1;
							dx_1 = ((NF)(rawDx_1) * (NF)(intensity_p8));
							dy_1 = ((NF)(rawDy_1) * (NF)(intensity_p8));
							if ((((NI) (((NI64) (dx_1))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (dx_1))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (dx_1)))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							if (nimAddInt(col_1, (((NI) (((NI64) (dx_1))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_258)) { raiseOverflow(); goto BeforeRet_;
							};
							srcX_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_258);
							if ((((NI) (((NI64) (dy_1))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (dy_1))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (dy_1)))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							if (nimAddInt(row_1, (((NI) (((NI64) (dy_1))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_259)) { raiseOverflow(); goto BeforeRet_;
							};
							srcY_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_259);
							finalSrcX_1 = srcX_1;
							finalSrcY_1 = srcY_1;
							{
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_260;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_261;
								if (!clampEdges_p9) goto LA9_;
								if (nimSubInt(width_p4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_260)) { raiseOverflow(); goto BeforeRet_;
								};
								finalSrcX_1 = pgClamp(srcX_1, ((NI)0), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_260));
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								if (nimSubInt(height_p5, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_261)) { raiseOverflow(); goto BeforeRet_;
								};
								finalSrcY_1 = pgClamp(srcY_1, ((NI)0), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_261));
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							}
							goto LA7_;
LA9_: ;
							{
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_262;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_263;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_264;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_265;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_266;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_267;
								if (width_p4 == 0){ raiseDivByZero(); goto BeforeRet_;
								}
								if (nimModInt(srcX_1, width_p4, &TM__8WmSss49aIo2yrPDwPGHYMQ_262)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_262), width_p4, &TM__8WmSss49aIo2yrPDwPGHYMQ_263)) { raiseOverflow(); goto BeforeRet_;
								};
								if (width_p4 == 0){ raiseDivByZero(); goto BeforeRet_;
								}
								if (nimModInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_263), width_p4, &TM__8WmSss49aIo2yrPDwPGHYMQ_264)) { raiseOverflow(); goto BeforeRet_;
								};
								finalSrcX_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_264);
								if (height_p5 == 0){ raiseDivByZero(); goto BeforeRet_;
								}
								if (nimModInt(srcY_1, height_p5, &TM__8WmSss49aIo2yrPDwPGHYMQ_265)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_265), height_p5, &TM__8WmSss49aIo2yrPDwPGHYMQ_266)) { raiseOverflow(); goto BeforeRet_;
								};
								if (height_p5 == 0){ raiseDivByZero(); goto BeforeRet_;
								}
								if (nimModInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_266), height_p5, &TM__8WmSss49aIo2yrPDwPGHYMQ_267)) { raiseOverflow(); goto BeforeRet_;
								};
								finalSrcY_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_267);
							}
LA7_: ;
							if (nimAddInt(x_p2, finalSrcX_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_268)) { raiseOverflow(); goto BeforeRet_;
							};
							srcScreenX_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_268);
							if (nimAddInt(y_p3, finalSrcY_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_269)) { raiseOverflow(); goto BeforeRet_;
							};
							srcScreenY_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_269);
							{
								NIM_BOOL T14_;
								NIM_BOOL T15_;
								NIM_BOOL T16_;
								tyTuple__hU79ak4NYUdNYnRLUvBkfpg srcCell_1;
								T14_ = (NIM_BOOL)0;
								T15_ = (NIM_BOOL)0;
								T16_ = (NIM_BOOL)0;
								T16_ = (((NI)0) <= srcScreenX_1);
								if (!(T16_)) goto LA17_;
								T16_ = (srcScreenX_1 < (*sourceBuffer_p1).width);
LA17_: ;
								T15_ = T16_;
								if (!(T15_)) goto LA18_;
								T15_ = (((NI)0) <= srcScreenY_1);
LA18_: ;
								T14_ = T15_;
								if (!(T14_)) goto LA19_;
								T14_ = (srcScreenY_1 < (*sourceBuffer_p1).height);
LA19_: ;
								if (!T14_) goto LA20_;
								nimZeroMem((void*)(&srcCell_1), sizeof(tyTuple__hU79ak4NYUdNYnRLUvBkfpg));
								srcCell_1 = getCell__backendsZterminalZtermbuffer_u181(sourceBuffer_p1, srcScreenX_1, srcScreenY_1);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								write__backendsZterminalZtermbuffer_u49(destBuffer_p0, screenX_1, screenY_1, srcCell_1.Field0, srcCell_1.Field1);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								eqdestroy___backendsZsdl3Zsdl95canvas_u509((&srcCell_1));
							}
LA20_: ;
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_270)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_270);
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_271)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_271);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, drawDisplacement__libZterminal95shaders_u1839)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* sourceBuffer_p1) {
	tyProc__uwoCnREI5bHhDm6ojz7Xjg displacement_1;
	NI scaledFrame_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&displacement_1), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	{
		if (!(gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL))) goto LA4_;
		eqdestroy___libZterminal95shaders_u609((&displacement_1));
		goto BeforeRet_;
	}
LA4_: ;
	if ((((NI) (((NI64) (((NF)(((NF) ((*gDisplacementState__libZterminal95shaders_u52).frame))) * (NF)((*gDisplacementState__libZterminal95shaders_u52).speed))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF) ((*gDisplacementState__libZterminal95shaders_u52).frame))) * (NF)((*gDisplacementState__libZterminal95shaders_u52).speed))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF) ((*gDisplacementState__libZterminal95shaders_u52).frame))) * (NF)((*gDisplacementState__libZterminal95shaders_u52).speed)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto LA1_;
	}
	scaledFrame_1 = (((NI) (((NI64) (((NF)(((NF) ((*gDisplacementState__libZterminal95shaders_u52).frame))) * (NF)((*gDisplacementState__libZterminal95shaders_u52).speed)))))));
	switch ((*gDisplacementState__libZterminal95shaders_u52).effectId) {
	case ((NI)0):
	{
		waveDisplacement__libZterminal95shaders_u573(((NF)(2.0) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 0.2, 0.1, NIM_FALSE, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)1):
	{
		waveDisplacement__libZterminal95shaders_u573(((NF)(2.0) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 0.2, 0.1, NIM_TRUE, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)2):
	{
		rippleDisplacement__libZterminal95shaders_u638((NI)(((*gDisplacementState__libZterminal95shaders_u52).width) / (((NI)2))), (NI)(((*gDisplacementState__libZterminal95shaders_u52).height) / (((NI)2))), ((NF)(2.0) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 0.3, 0.1, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)3):
	{
		noiseDisplacement__libZterminal95shaders_u655(((NI)20), ((NF)(1.5) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), ((NI)42), NIM_TRUE, NIM_TRUE, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)4):
	{
		heatHazeDisplacement__libZterminal95shaders_u672(((NF)(1.0) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 0.3, 0.08, ((NI)42), (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)5):
	{
		swirlDisplacement__libZterminal95shaders_u687((NI)(((*gDisplacementState__libZterminal95shaders_u52).width) / (((NI)2))), (NI)(((*gDisplacementState__libZterminal95shaders_u52).height) / (((NI)2))), ((NF)(0.5) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 20.0, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)6):
	{
		fisheyeDisplacement__libZterminal95shaders_u706((NI)(((*gDisplacementState__libZterminal95shaders_u52).width) / (((NI)2))), (NI)(((*gDisplacementState__libZterminal95shaders_u52).height) / (((NI)2))), ((NF)(0.3) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 30.0, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)7):
	{
		bulgeDisplacement__libZterminal95shaders_u722((NI)(((*gDisplacementState__libZterminal95shaders_u52).width) / (((NI)2))), (NI)(((*gDisplacementState__libZterminal95shaders_u52).height) / (((NI)2))), ((NF)(0.5) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 15.0, scaledFrame_1, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	default:
	{
		eqdestroy___libZterminal95shaders_u609((&displacement_1));
		goto BeforeRet_;
	}
	break;
	}
	applyDisplacement__libZterminal95shaders_u1489(buffer_p0, (&(*sourceBuffer_p1)), (*gDisplacementState__libZterminal95shaders_u52).x, (*gDisplacementState__libZterminal95shaders_u52).y, (*gDisplacementState__libZterminal95shaders_u52).width, (*gDisplacementState__libZterminal95shaders_u52).height, displacement_1, scaledFrame_1, (*gDisplacementState__libZterminal95shaders_u52).intensity, NIM_TRUE);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		eqdestroy___libZterminal95shaders_u609((&displacement_1));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, applyDisplacementInPlace__libZterminal95shaders_u1524)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0, NI x_p1, NI y_p2, NI width_p3, NI height_p4, tyProc__uwoCnREI5bHhDm6ojz7Xjg displacement_p5, NI time_p6, NF intensity_p7) {
	tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw tempBuffer_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&tempBuffer_1), sizeof(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw));
	newTermBuffer__backendsZterminalZtermbuffer_u4(width_p3, height_p4, (&tempBuffer_1));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_275;
				if (!(i_1 < height_p4)) goto LA3;
				row_1 = i_1;
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							tyTuple__hU79ak4NYUdNYnRLUvBkfpg cell_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_272;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_273;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_274;
							if (!(i_2 < width_p3)) goto LA6;
							nimZeroMem((void*)(&cell_1), sizeof(tyTuple__hU79ak4NYUdNYnRLUvBkfpg));
							col_1 = i_2;
							if (nimAddInt(x_p1, col_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_272)) { raiseOverflow(); goto BeforeRet_;
							};
							if (nimAddInt(y_p2, row_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_273)) { raiseOverflow(); goto BeforeRet_;
							};
							cell_1 = getCell__backendsZterminalZtermbuffer_u181((&(*buffer_p0)), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_272), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_273));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							write__backendsZterminalZtermbuffer_u49((&tempBuffer_1), col_1, row_1, cell_1.Field0, cell_1.Field1);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_274)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_274);
							eqdestroy___backendsZsdl3Zsdl95canvas_u509((&cell_1));
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_275)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_275);
			} LA3: ;
		}
	}
	{
		NI row_2;
		NI i_3;
		row_2 = (NI)0;
		i_3 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_284;
				if (!(i_3 < height_p4)) goto LA9;
				row_2 = i_3;
				{
					NI col_2;
					NI i_4;
					col_2 = (NI)0;
					i_4 = ((NI)0);
					{
						while (1) {
							tyTuple__hU79ak4NYUdNYnRLUvBkfpg srcCell_1;
							NI screenX_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_276;
							NI screenY_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_277;
							tyTuple__wpFMp8IwxV6MlaM4GANJ0Q tmpTuple_1;
							NF rawDx_1;
							NF rawDy_1;
							NF dx_1;
							NF dy_1;
							NI srcX_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_279;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_280;
							NI srcY_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_281;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_282;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_283;
							if (!(i_4 < width_p3)) goto LA12;
							nimZeroMem((void*)(&srcCell_1), sizeof(tyTuple__hU79ak4NYUdNYnRLUvBkfpg));
							col_2 = i_4;
							if (nimAddInt(x_p1, col_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_276)) { raiseOverflow(); goto BeforeRet_;
							};
							screenX_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_276);
							if (nimAddInt(y_p2, row_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_277)) { raiseOverflow(); goto BeforeRet_;
							};
							screenY_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_277);
							tmpTuple_1 = displacement_p5.ClE_0? displacement_p5.ClP_0(col_2, row_2, time_p6, displacement_p5.ClE_0):((TM__8WmSss49aIo2yrPDwPGHYMQ_278)(displacement_p5.ClP_0))(col_2, row_2, time_p6);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							rawDx_1 = tmpTuple_1.Field0;
							rawDy_1 = tmpTuple_1.Field1;
							dx_1 = ((NF)(rawDx_1) * (NF)(intensity_p7));
							dy_1 = ((NF)(rawDy_1) * (NF)(intensity_p7));
							if ((((NI) (((NI64) (dx_1))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (dx_1))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (dx_1)))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							if (nimAddInt(col_2, (((NI) (((NI64) (dx_1))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_279)) { raiseOverflow(); goto BeforeRet_;
							};
							if (nimSubInt(width_p3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_280)) { raiseOverflow(); goto BeforeRet_;
							};
							srcX_1 = pgClamp((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_279), ((NI)0), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_280));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							if ((((NI) (((NI64) (dy_1))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (dy_1))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (dy_1)))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
							}
							if (nimAddInt(row_2, (((NI) (((NI64) (dy_1))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_281)) { raiseOverflow(); goto BeforeRet_;
							};
							if (nimSubInt(height_p4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_282)) { raiseOverflow(); goto BeforeRet_;
							};
							srcY_1 = pgClamp((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_281), ((NI)0), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_282));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							srcCell_1 = getCell__backendsZterminalZtermbuffer_u181((&tempBuffer_1), srcX_1, srcY_1);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							write__backendsZterminalZtermbuffer_u49(buffer_p0, screenX_1, screenY_1, srcCell_1.Field0, srcCell_1.Field1);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_283)) { raiseOverflow(); goto BeforeRet_;
							};
							i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_283);
							eqdestroy___backendsZsdl3Zsdl95canvas_u509((&srcCell_1));
						} LA12: ;
					}
				}
				if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_284)) { raiseOverflow(); goto BeforeRet_;
				};
				i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_284);
			} LA9: ;
		}
	}
	eqdestroy___srcZlayers_u16((&tempBuffer_1));
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, drawDisplacementInPlace__libZterminal95shaders_u1848)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* buffer_p0) {
	tyProc__uwoCnREI5bHhDm6ojz7Xjg displacement_1;
	NI scaledFrame_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&displacement_1), sizeof(tyProc__uwoCnREI5bHhDm6ojz7Xjg));
	{
		if (!(gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL))) goto LA4_;
		eqdestroy___libZterminal95shaders_u609((&displacement_1));
		goto BeforeRet_;
	}
LA4_: ;
	if ((((NI) (((NI64) (((NF)(((NF) ((*gDisplacementState__libZterminal95shaders_u52).frame))) * (NF)((*gDisplacementState__libZterminal95shaders_u52).speed))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF) ((*gDisplacementState__libZterminal95shaders_u52).frame))) * (NF)((*gDisplacementState__libZterminal95shaders_u52).speed))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF) ((*gDisplacementState__libZterminal95shaders_u52).frame))) * (NF)((*gDisplacementState__libZterminal95shaders_u52).speed)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto LA1_;
	}
	scaledFrame_1 = (((NI) (((NI64) (((NF)(((NF) ((*gDisplacementState__libZterminal95shaders_u52).frame))) * (NF)((*gDisplacementState__libZterminal95shaders_u52).speed)))))));
	switch ((*gDisplacementState__libZterminal95shaders_u52).effectId) {
	case ((NI)0):
	{
		waveDisplacement__libZterminal95shaders_u573(((NF)(2.0) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 0.2, 0.1, NIM_FALSE, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)1):
	{
		waveDisplacement__libZterminal95shaders_u573(((NF)(2.0) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 0.2, 0.1, NIM_TRUE, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)2):
	{
		rippleDisplacement__libZterminal95shaders_u638((NI)(((*gDisplacementState__libZterminal95shaders_u52).width) / (((NI)2))), (NI)(((*gDisplacementState__libZterminal95shaders_u52).height) / (((NI)2))), ((NF)(2.0) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 0.3, 0.1, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)3):
	{
		noiseDisplacement__libZterminal95shaders_u655(((NI)20), ((NF)(1.5) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), ((NI)42), NIM_TRUE, NIM_TRUE, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)4):
	{
		heatHazeDisplacement__libZterminal95shaders_u672(((NF)(1.0) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 0.3, 0.08, ((NI)42), (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)5):
	{
		swirlDisplacement__libZterminal95shaders_u687((NI)(((*gDisplacementState__libZterminal95shaders_u52).width) / (((NI)2))), (NI)(((*gDisplacementState__libZterminal95shaders_u52).height) / (((NI)2))), ((NF)(0.5) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 20.0, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)6):
	{
		fisheyeDisplacement__libZterminal95shaders_u706((NI)(((*gDisplacementState__libZterminal95shaders_u52).width) / (((NI)2))), (NI)(((*gDisplacementState__libZterminal95shaders_u52).height) / (((NI)2))), ((NF)(0.3) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 30.0, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((NI)7):
	{
		bulgeDisplacement__libZterminal95shaders_u722((NI)(((*gDisplacementState__libZterminal95shaders_u52).width) / (((NI)2))), (NI)(((*gDisplacementState__libZterminal95shaders_u52).height) / (((NI)2))), ((NF)(0.5) * (NF)((*gDisplacementState__libZterminal95shaders_u52).amplitude)), 15.0, scaledFrame_1, (&displacement_1));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	default:
	{
		eqdestroy___libZterminal95shaders_u609((&displacement_1));
		goto BeforeRet_;
	}
	break;
	}
	applyDisplacementInPlace__libZterminal95shaders_u1524(buffer_p0, (*gDisplacementState__libZterminal95shaders_u52).x, (*gDisplacementState__libZterminal95shaders_u52).y, (*gDisplacementState__libZterminal95shaders_u52).width, (*gDisplacementState__libZterminal95shaders_u52).height, displacement_1, scaledFrame_1, (*gDisplacementState__libZterminal95shaders_u52).intensity);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		eqdestroy___libZterminal95shaders_u609((&displacement_1));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2) {
	int result;
	result = memcmp(a_p0, b_p1, ((size_t) (size_p2)));
	return result;
}
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2) {
	NIM_BOOL result;
	int T1_;
	T1_ = (int)0;
	T1_ = nimCmpMem(a_p0, b_p1, size_p2);
	result = (T1_ == ((NI32)0));
	return result;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1) {
	NIM_BOOL result;
	NI alen_1;
	NI blen_1;
{	result = NIM_FALSE;
	alen_1 = a_p0.len;
	blen_1 = b_p1.len;
	{
		if (!(alen_1 == blen_1)) goto LA3_;
		{
			if (!(alen_1 == ((NI)0))) goto LA7_;
			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA7_: ;
		result = equalMem__system_u1749(((void*) ((&a_p0.p->data[((NI)0)]))), ((void*) ((&b_p1.p->data[((NI)0)]))), (alen_1));
		goto BeforeRet_;
	}
LA3_: ;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NF, toFloat__system_u1691)(NI i_p0) {
	NF result;
	result = ((NF) (i_p0));
	return result;
}
static N_INLINE(NF, slash___system_u1703)(NI x_p0, NI y_p1) {
	NF result;
	NF T1_;
	NF T2_;
	T1_ = (NF)0;
	T1_ = toFloat__system_u1691(x_p0);
	T2_ = (NF)0;
	T2_ = toFloat__system_u1691(y_p1);
	result = ((NF)(T1_) / (NF)(T2_));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, applyDisplacementFromLayer__libZterminal95shaders_u1565)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* destBuffer_p0, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* sourceBuffer_p1, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* displacementBuffer_p2, NI x_p3, NI y_p4, NI width_p5, NI height_p6, NF strength_p7, NI mode_p8) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_299;
				if (!(i_1 < height_p6)) goto LA3;
				row_1 = i_1;
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NI screenX_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_285;
							NI screenY_1;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_286;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_298;
							if (!(i_2 < width_p5)) goto LA6;
							col_1 = i_2;
							if (nimAddInt(x_p3, col_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_285)) { raiseOverflow(); goto BeforeRet_;
							};
							screenX_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_285);
							if (nimAddInt(y_p4, row_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_286)) { raiseOverflow(); goto BeforeRet_;
							};
							screenY_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_286);
							{
								NIM_BOOL T9_;
								NIM_BOOL T10_;
								NIM_BOOL T11_;
								tyTuple__hU79ak4NYUdNYnRLUvBkfpg dispCell_1;
								NI colontmpD_;
								NI colontmpD__2;
								NI luminance_1;
								T9_ = (NIM_BOOL)0;
								T10_ = (NIM_BOOL)0;
								T11_ = (NIM_BOOL)0;
								T11_ = (((NI)0) <= screenX_1);
								if (!(T11_)) goto LA12_;
								T11_ = (screenX_1 < (*displacementBuffer_p2).width);
LA12_: ;
								T10_ = T11_;
								if (!(T10_)) goto LA13_;
								T10_ = (((NI)0) <= screenY_1);
LA13_: ;
								T9_ = T10_;
								if (!(T9_)) goto LA14_;
								T9_ = (screenY_1 < (*displacementBuffer_p2).height);
LA14_: ;
								if (!T9_) goto LA15_;
								nimZeroMem((void*)(&dispCell_1), sizeof(tyTuple__hU79ak4NYUdNYnRLUvBkfpg));
								colontmpD_ = (NI)0;
								colontmpD__2 = (NI)0;
								dispCell_1 = getCell__backendsZterminalZtermbuffer_u181(displacementBuffer_p2, screenX_1, screenY_1);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								{
									if (!eqStrings(dispCell_1.Field0, TM__8WmSss49aIo2yrPDwPGHYMQ_287)) goto LA19_;
									colontmpD_ = ((NI)0);
									luminance_1 = colontmpD_;
								}
								goto LA17_;
LA19_: ;
								{
									NI TM__8WmSss49aIo2yrPDwPGHYMQ_288;
									NI TM__8WmSss49aIo2yrPDwPGHYMQ_289;
									if (nimAddInt(((NI) (dispCell_1.Field1.fg.r)), ((NI) (dispCell_1.Field1.fg.g)), &TM__8WmSss49aIo2yrPDwPGHYMQ_288)) { raiseOverflow(); goto BeforeRet_;
									};
									if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_288), ((NI) (dispCell_1.Field1.fg.b)), &TM__8WmSss49aIo2yrPDwPGHYMQ_289)) { raiseOverflow(); goto BeforeRet_;
									};
									colontmpD__2 = (NI)(((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_289)) / (((NI)3)));
									luminance_1 = colontmpD__2;
								}
LA17_: ;
								{
									NF intensity_1;
									NF dx_1;
									NF dy_1;
									NI srcX_1;
									NI TM__8WmSss49aIo2yrPDwPGHYMQ_292;
									NI TM__8WmSss49aIo2yrPDwPGHYMQ_293;
									NI srcY_1;
									NI TM__8WmSss49aIo2yrPDwPGHYMQ_294;
									NI TM__8WmSss49aIo2yrPDwPGHYMQ_295;
									NI srcScreenX_1;
									NI TM__8WmSss49aIo2yrPDwPGHYMQ_296;
									NI srcScreenY_1;
									NI TM__8WmSss49aIo2yrPDwPGHYMQ_297;
									if (!(((NI)10) < luminance_1)) goto LA24_;
									intensity_1 = ((NF)(((NF) (luminance_1))) / (NF)(255.0));
									dx_1 = 0.0;
									dy_1 = 0.0;
									switch (mode_p8) {
									case ((NI)0):
									{
										dy_1 = ((NF)(((NF)(intensity_1) * (NF)(strength_p7))) * (NF)(3.0));
									}
									break;
									case ((NI)1):
									{
										NI centerX_1;
										NI centerY_1;
										NF dirX_1;
										NI TM__8WmSss49aIo2yrPDwPGHYMQ_290;
										NF dirY_1;
										NI TM__8WmSss49aIo2yrPDwPGHYMQ_291;
										NF dist_1;
										centerX_1 = (NI)((width_p5) / (((NI)2)));
										centerY_1 = (NI)((height_p6) / (((NI)2)));
										if (nimSubInt(col_1, centerX_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_290)) { raiseOverflow(); goto BeforeRet_;
										};
										dirX_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_290)));
										if (nimSubInt(row_1, centerY_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_291)) { raiseOverflow(); goto BeforeRet_;
										};
										dirY_1 = ((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_291)));
										dist_1 = sqrt(((NF)(((NF)(dirX_1) * (NF)(dirX_1))) + (NF)(((NF)(dirY_1) * (NF)(dirY_1)))));
										{
											if (!(0.1 < dist_1)) goto LA30_;
											dx_1 = ((NF)(((NF)(((NF)(((NF)(dirX_1) / (NF)(dist_1))) * (NF)(intensity_1))) * (NF)(strength_p7))) * (NF)(2.0));
											dy_1 = ((NF)(((NF)(((NF)(((NF)(dirY_1) / (NF)(dist_1))) * (NF)(intensity_1))) * (NF)(strength_p7))) * (NF)(2.0));
										}
LA30_: ;
									}
									break;
									case ((NI)2):
									{
										dx_1 = ((NF)(((NF)(intensity_1) * (NF)(strength_p7))) * (NF)(3.0));
									}
									break;
									case ((NI)3):
									{
										dx_1 = ((NF)(((NF)(intensity_1) * (NF)(strength_p7))) * (NF)(2.0));
										dy_1 = ((NF)(((NF)(intensity_1) * (NF)(strength_p7))) * (NF)(2.0));
									}
									break;
									default:
									{
										dy_1 = ((NF)(((NF)(intensity_1) * (NF)(strength_p7))) * (NF)(3.0));
									}
									break;
									}
									if ((((NI) (((NI64) (dx_1))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (dx_1))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (dx_1)))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
									}
									if (nimAddInt(col_1, (((NI) (((NI64) (dx_1))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_292)) { raiseOverflow(); goto BeforeRet_;
									};
									if (nimSubInt(width_p5, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_293)) { raiseOverflow(); goto BeforeRet_;
									};
									srcX_1 = pgClamp((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_292), ((NI)0), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_293));
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									if ((((NI) (((NI64) (dy_1))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (dy_1))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (dy_1)))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
									}
									if (nimAddInt(row_1, (((NI) (((NI64) (dy_1))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_294)) { raiseOverflow(); goto BeforeRet_;
									};
									if (nimSubInt(height_p6, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_295)) { raiseOverflow(); goto BeforeRet_;
									};
									srcY_1 = pgClamp((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_294), ((NI)0), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_295));
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									if (nimAddInt(x_p3, srcX_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_296)) { raiseOverflow(); goto BeforeRet_;
									};
									srcScreenX_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_296);
									if (nimAddInt(y_p4, srcY_1, &TM__8WmSss49aIo2yrPDwPGHYMQ_297)) { raiseOverflow(); goto BeforeRet_;
									};
									srcScreenY_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_297);
									{
										NIM_BOOL T37_;
										NIM_BOOL T38_;
										NIM_BOOL T39_;
										tyTuple__hU79ak4NYUdNYnRLUvBkfpg srcCell_1;
										T37_ = (NIM_BOOL)0;
										T38_ = (NIM_BOOL)0;
										T39_ = (NIM_BOOL)0;
										T39_ = (((NI)0) <= srcScreenX_1);
										if (!(T39_)) goto LA40_;
										T39_ = (srcScreenX_1 < (*sourceBuffer_p1).width);
LA40_: ;
										T38_ = T39_;
										if (!(T38_)) goto LA41_;
										T38_ = (((NI)0) <= srcScreenY_1);
LA41_: ;
										T37_ = T38_;
										if (!(T37_)) goto LA42_;
										T37_ = (srcScreenY_1 < (*sourceBuffer_p1).height);
LA42_: ;
										if (!T37_) goto LA43_;
										nimZeroMem((void*)(&srcCell_1), sizeof(tyTuple__hU79ak4NYUdNYnRLUvBkfpg));
										srcCell_1 = getCell__backendsZterminalZtermbuffer_u181(sourceBuffer_p1, srcScreenX_1, srcScreenY_1);
										if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
										write__backendsZterminalZtermbuffer_u49(destBuffer_p0, screenX_1, screenY_1, srcCell_1.Field0, srcCell_1.Field1);
										if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
										eqdestroy___backendsZsdl3Zsdl95canvas_u509((&srcCell_1));
									}
LA43_: ;
								}
								goto LA22_;
LA24_: ;
								{
									{
										NIM_BOOL T48_;
										NIM_BOOL T49_;
										NIM_BOOL T50_;
										tyTuple__hU79ak4NYUdNYnRLUvBkfpg srcCell_2;
										T48_ = (NIM_BOOL)0;
										T49_ = (NIM_BOOL)0;
										T50_ = (NIM_BOOL)0;
										T50_ = (((NI)0) <= screenX_1);
										if (!(T50_)) goto LA51_;
										T50_ = (screenX_1 < (*sourceBuffer_p1).width);
LA51_: ;
										T49_ = T50_;
										if (!(T49_)) goto LA52_;
										T49_ = (((NI)0) <= screenY_1);
LA52_: ;
										T48_ = T49_;
										if (!(T48_)) goto LA53_;
										T48_ = (screenY_1 < (*sourceBuffer_p1).height);
LA53_: ;
										if (!T48_) goto LA54_;
										nimZeroMem((void*)(&srcCell_2), sizeof(tyTuple__hU79ak4NYUdNYnRLUvBkfpg));
										srcCell_2 = getCell__backendsZterminalZtermbuffer_u181(sourceBuffer_p1, screenX_1, screenY_1);
										if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
										write__backendsZterminalZtermbuffer_u49(destBuffer_p0, screenX_1, screenY_1, srcCell_2.Field0, srcCell_2.Field1);
										if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
										eqdestroy___backendsZsdl3Zsdl95canvas_u509((&srcCell_2));
									}
LA54_: ;
								}
LA22_: ;
								eqdestroy___backendsZsdl3Zsdl95canvas_u509((&dispCell_1));
							}
LA15_: ;
							if (nimAddInt(i_2, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_298)) { raiseOverflow(); goto BeforeRet_;
							};
							i_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_298);
						} LA6: ;
					}
				}
				if (nimAddInt(i_1, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_299)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_299);
			} LA3: ;
		}
	}
	{
		NI row_2;
		NI i_3;
		row_2 = (NI)0;
		i_3 = ((NI)0);
		{
			while (1) {
				NI TM__8WmSss49aIo2yrPDwPGHYMQ_312;
				if (!(i_3 < height_p6)) goto LA58;
				row_2 = i_3;
				{
					NI col_2;
					NI i_4;
					col_2 = (NI)0;
					i_4 = ((NI)0);
					{
						while (1) {
							NI screenX_2;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_300;
							NI screenY_2;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_301;
							NI TM__8WmSss49aIo2yrPDwPGHYMQ_311;
							if (!(i_4 < width_p5)) goto LA61;
							col_2 = i_4;
							if (nimAddInt(x_p3, col_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_300)) { raiseOverflow(); goto BeforeRet_;
							};
							screenX_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_300);
							if (nimAddInt(y_p4, row_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_301)) { raiseOverflow(); goto BeforeRet_;
							};
							screenY_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_301);
							{
								NIM_BOOL T64_;
								NIM_BOOL T65_;
								NIM_BOOL T66_;
								tyTuple__hU79ak4NYUdNYnRLUvBkfpg dispCell_2;
								NF brightness_1;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_302;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_303;
								NF intensity_2;
								NF dx_2;
								NF dy_2;
								NI srcX_2;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_305;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_306;
								NI srcY_2;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_307;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_308;
								NI srcScreenX_2;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_309;
								NI srcScreenY_2;
								NI TM__8WmSss49aIo2yrPDwPGHYMQ_310;
								T64_ = (NIM_BOOL)0;
								T65_ = (NIM_BOOL)0;
								T66_ = (NIM_BOOL)0;
								T66_ = (((NI)0) <= screenX_2);
								if (!(T66_)) goto LA67_;
								T66_ = (screenX_2 < (*displacementBuffer_p2).width);
LA67_: ;
								T65_ = T66_;
								if (!(T65_)) goto LA68_;
								T65_ = (((NI)0) <= screenY_2);
LA68_: ;
								T64_ = T65_;
								if (!(T64_)) goto LA69_;
								T64_ = (screenY_2 < (*displacementBuffer_p2).height);
LA69_: ;
								if (!T64_) goto LA70_;
								nimZeroMem((void*)(&dispCell_2), sizeof(tyTuple__hU79ak4NYUdNYnRLUvBkfpg));
								dispCell_2 = getCell__backendsZterminalZtermbuffer_u181(displacementBuffer_p2, screenX_2, screenY_2);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								if (nimAddInt(((NI) (dispCell_2.Field1.fg.r)), ((NI) (dispCell_2.Field1.fg.g)), &TM__8WmSss49aIo2yrPDwPGHYMQ_302)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimAddInt((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_302), ((NI) (dispCell_2.Field1.fg.b)), &TM__8WmSss49aIo2yrPDwPGHYMQ_303)) { raiseOverflow(); goto BeforeRet_;
								};
								brightness_1 = ((NF)(((NF) ((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_303)))) / (NF)(3.0));
								intensity_2 = ((NF)(brightness_1) / (NF)(255.0));
								dx_2 = 0.0;
								dy_2 = 0.0;
								{
									NIM_BOOL T74_;
									T74_ = (NIM_BOOL)0;
									T74_ = !(eqStrings(dispCell_2.Field0, TM__8WmSss49aIo2yrPDwPGHYMQ_304));
									if (!(T74_)) goto LA75_;
									T74_ = (0.1 < intensity_2);
LA75_: ;
									if (!T74_) goto LA76_;
									switch (mode_p8) {
									case ((NI)0):
									{
										NF centerX_2;
										NF centerY_2;
										NF dirX_2;
										NF dirY_2;
										NF dist_2;
										centerX_2 = slash___system_u1703(width_p5, ((NI)2));
										centerY_2 = slash___system_u1703(height_p6, ((NI)2));
										dirX_2 = ((NF)(((NF) (col_2))) - (NF)(centerX_2));
										dirY_2 = ((NF)(((NF) (row_2))) - (NF)(centerY_2));
										dist_2 = sqrt(((NF)(((NF)(dirX_2) * (NF)(dirX_2))) + (NF)(((NF)(dirY_2) * (NF)(dirY_2)))));
										{
											if (!(0.1 < dist_2)) goto LA81_;
											dx_2 = ((NF)(((NF)(((NF)(dirX_2) / (NF)(dist_2))) * (NF)(intensity_2))) * (NF)(strength_p7));
											dy_2 = ((NF)(((NF)(((NF)(dirY_2) / (NF)(dist_2))) * (NF)(intensity_2))) * (NF)(strength_p7));
										}
LA81_: ;
									}
									break;
									case ((NI)1):
									{
										dx_2 = ((NF)(((NF)(((NF)(intensity_2) - (NF)(0.5))) * (NF)(strength_p7))) * (NF)(2.0));
									}
									break;
									case ((NI)2):
									{
										dy_2 = ((NF)(((NF)(((NF)(intensity_2) - (NF)(0.5))) * (NF)(strength_p7))) * (NF)(2.0));
									}
									break;
									case ((NI)3):
									{
										dx_2 = ((NF)(((NF)(intensity_2) - (NF)(0.5))) * (NF)(strength_p7));
										dy_2 = ((NF)(((NF)(intensity_2) - (NF)(0.5))) * (NF)(strength_p7));
									}
									break;
									default:
									{
									}
									break;
									}
								}
LA76_: ;
								if ((((NI) (((NI64) (dx_2))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (dx_2))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (dx_2)))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
								}
								if (nimAddInt(col_2, (((NI) (((NI64) (dx_2))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_305)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimSubInt(width_p5, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_306)) { raiseOverflow(); goto BeforeRet_;
								};
								srcX_2 = pgClamp((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_305), ((NI)0), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_306));
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								if ((((NI) (((NI64) (dy_2))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (dy_2))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (dy_2)))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
								}
								if (nimAddInt(row_2, (((NI) (((NI64) (dy_2))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_307)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimSubInt(height_p6, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_308)) { raiseOverflow(); goto BeforeRet_;
								};
								srcY_2 = pgClamp((NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_307), ((NI)0), (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_308));
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								if (nimAddInt(x_p3, srcX_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_309)) { raiseOverflow(); goto BeforeRet_;
								};
								srcScreenX_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_309);
								if (nimAddInt(y_p4, srcY_2, &TM__8WmSss49aIo2yrPDwPGHYMQ_310)) { raiseOverflow(); goto BeforeRet_;
								};
								srcScreenY_2 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_310);
								{
									NIM_BOOL T89_;
									NIM_BOOL T90_;
									NIM_BOOL T91_;
									tyTuple__hU79ak4NYUdNYnRLUvBkfpg srcCell_3;
									T89_ = (NIM_BOOL)0;
									T90_ = (NIM_BOOL)0;
									T91_ = (NIM_BOOL)0;
									T91_ = (((NI)0) <= srcScreenX_2);
									if (!(T91_)) goto LA92_;
									T91_ = (srcScreenX_2 < (*sourceBuffer_p1).width);
LA92_: ;
									T90_ = T91_;
									if (!(T90_)) goto LA93_;
									T90_ = (((NI)0) <= srcScreenY_2);
LA93_: ;
									T89_ = T90_;
									if (!(T89_)) goto LA94_;
									T89_ = (srcScreenY_2 < (*sourceBuffer_p1).height);
LA94_: ;
									if (!T89_) goto LA95_;
									nimZeroMem((void*)(&srcCell_3), sizeof(tyTuple__hU79ak4NYUdNYnRLUvBkfpg));
									srcCell_3 = getCell__backendsZterminalZtermbuffer_u181(sourceBuffer_p1, srcScreenX_2, srcScreenY_2);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									write__backendsZterminalZtermbuffer_u49(destBuffer_p0, screenX_2, screenY_2, srcCell_3.Field0, srcCell_3.Field1);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									eqdestroy___backendsZsdl3Zsdl95canvas_u509((&srcCell_3));
								}
LA95_: ;
								eqdestroy___backendsZsdl3Zsdl95canvas_u509((&dispCell_2));
							}
LA70_: ;
							if (nimAddInt(i_4, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_311)) { raiseOverflow(); goto BeforeRet_;
							};
							i_4 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_311);
						} LA61: ;
					}
				}
				if (nimAddInt(i_3, ((NI)1), &TM__8WmSss49aIo2yrPDwPGHYMQ_312)) { raiseOverflow(); goto BeforeRet_;
				};
				i_3 = (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_312);
			} LA58: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, setDisplacementEffect__libZterminal95shaders_u1815)(NI effectId_p0) {
	{
		if (!!((gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL)))) goto LA3_;
		(*gDisplacementState__libZterminal95shaders_u52).effectId = effectId_p0;
		(*gDisplacementState__libZterminal95shaders_u52).frame = ((NI)0);
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, setDisplacementIntensity__libZterminal95shaders_u1821)(NF intensity_p0) {
	{
		if (!!((gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL)))) goto LA3_;
		(*gDisplacementState__libZterminal95shaders_u52).intensity = intensity_p0;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, setDisplacementSpeed__libZterminal95shaders_u1827)(NF speed_p0) {
	{
		if (!!((gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL)))) goto LA3_;
		(*gDisplacementState__libZterminal95shaders_u52).speed = speed_p0;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, setDisplacementAmplitude__libZterminal95shaders_u1833)(NF amplitude_p0) {
	{
		if (!!((gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL)))) goto LA3_;
		(*gDisplacementState__libZterminal95shaders_u52).amplitude = amplitude_p0;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, pauseDisplacement__libZterminal95shaders_u1800)(void) {
	{
		if (!!((gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL)))) goto LA3_;
		(*gDisplacementState__libZterminal95shaders_u52).paused = NIM_TRUE;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, resumeDisplacement__libZterminal95shaders_u1805)(void) {
	{
		if (!!((gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL)))) goto LA3_;
		(*gDisplacementState__libZterminal95shaders_u52).paused = NIM_FALSE;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, resetDisplacement__libZterminal95shaders_u1810)(void) {
	{
		if (!!((gDisplacementState__libZterminal95shaders_u52 == ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL)))) goto LA3_;
		(*gDisplacementState__libZterminal95shaders_u52).frame = ((NI)0);
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZterminal95shaders_u118)(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* dest_p0, tyProc__SDBJCN1RKcIw6ZTtrYle9cQ src_p1) {
	void* colontmp_;
	colontmp_ = (*dest_p0).ClE_0;
	(*dest_p0).ClE_0 = src_p1.ClE_0;
	(*dest_p0).ClP_0 = src_p1.ClP_0;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicDyn(colontmp_);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose(colontmp_);
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u100)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1) {
	tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA result;
	NimStringV2 colontmpD_;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__2;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__3;
{	nimZeroMem((void*)(&result), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	{
		if (!!((*ctx_p1).hasParticle)) goto LA3_;
		eqcopy___backendsZsdl3Zsdl95canvas_u197((&result), inCell_p0);
		goto BeforeRet_;
	}
LA3_: ;
	colontmpD_ = eqdup___system_u2645((*ctx_p1).particle.char_0);
	result.ch = colontmpD_;
	colontmpD__2 = eqdup___srcZtypes_u30((*ctx_p1).particle.color);
	result.style.fg = colontmpD__2;
	colontmpD__3 = eqdup___srcZtypes_u30((*ctx_p1).backgroundColor);
	result.style.bg = colontmpD__3;
	result.style.bold = NIM_FALSE;
	result.style.underline = NIM_FALSE;
	result.style.italic = NIM_FALSE;
	result.style.dim = NIM_FALSE;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, replaceShader__libZterminal95shaders_u98)(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* Result) {
	tyProc__SDBJCN1RKcIw6ZTtrYle9cQ T1_;
	nimZeroMem((void*)Result, sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	nimZeroMem((void*)(&T1_), sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	T1_.ClP_0 = ((TM__8WmSss49aIo2yrPDwPGHYMQ_313) (colonanonymous___libZterminal95shaders_u100)); T1_.ClE_0 = NIM_NIL;
	(*Result).ClE_0 = T1_.ClE_0;
	(*Result).ClP_0 = T1_.ClP_0;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZparticles_u2635)(tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* dest_p0) {
	if ((*dest_p0).particle.char_0.p && !((*dest_p0).particle.char_0.p->cap & NIM_STRLIT_FLAG)) {
 dealloc((*dest_p0).particle.char_0.p);
}
}
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1) {
	NI result;
	result = ((NI) ((NU)((NU32)(((NU) (x_p0))) + (NU32)(((NU) (y_p1))))));
	return result;
}
static N_INLINE(void, nimIncRefCyclic)(void* p_p0, NIM_BOOL cyclic_p1) {
	tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* h_1;
	NI T1_;
	T1_ = (NI)0;
	T1_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
	h_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T1_));
	(*h_1).rc = pluspercent___system_u793((*h_1).rc, ((NI)16));
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZterminal95shaders_u110)(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* dest_p0, tyProc__SDBJCN1RKcIw6ZTtrYle9cQ src_p1, NIM_BOOL cyclic_p2) {
	void* colontmp_;
	colontmp_ = (*dest_p0).ClE_0;
	{
		if (!src_p1.ClE_0) goto LA3_;
		nimIncRefCyclic(src_p1.ClE_0, cyclic_p2);
	}
LA3_: ;
	(*dest_p0).ClE_0 = src_p1.ClE_0;
	(*dest_p0).ClP_0 = src_p1.ClP_0;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = nimDecRefIsLastCyclicDyn(colontmp_);
		if (!T7_) goto LA8_;
		nimDestroyAndDispose(colontmp_);
	}
LA8_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u107)(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicDyn((*dest_p0).ClE_0);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest_p0).ClE_0);
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u157)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1) {
	tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA result;
	NimStringV2 colontmpD_;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__2;
{	nimZeroMem((void*)(&result), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	{
		if (!!((*ctx_p1).hasParticle)) goto LA3_;
		eqcopy___backendsZsdl3Zsdl95canvas_u197((&result), inCell_p0);
		goto BeforeRet_;
	}
LA3_: ;
	colontmpD_ = eqdup___system_u2645((*ctx_p1).particle.char_0);
	result.ch = colontmpD_;
	colontmpD__2 = eqdup___srcZtypes_u76(inCell_p0.style);
	result.style = colontmpD__2;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, charOnlyShader__libZterminal95shaders_u155)(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* Result) {
	tyProc__SDBJCN1RKcIw6ZTtrYle9cQ T1_;
	nimZeroMem((void*)Result, sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	nimZeroMem((void*)(&T1_), sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	T1_.ClP_0 = ((TM__8WmSss49aIo2yrPDwPGHYMQ_314) (colonanonymous___libZterminal95shaders_u157)); T1_.ClE_0 = NIM_NIL;
	(*Result).ClE_0 = T1_.ClE_0;
	(*Result).ClP_0 = T1_.ClP_0;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u163)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1) {
	tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA result;
	NimStringV2 colontmpD_;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__2;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__3;
	NIM_BOOL colontmpD__4;
	NIM_BOOL colontmpD__5;
	NIM_BOOL colontmpD__6;
	NIM_BOOL colontmpD__7;
{	nimZeroMem((void*)(&result), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	colontmpD__4 = (NIM_BOOL)0;
	colontmpD__5 = (NIM_BOOL)0;
	colontmpD__6 = (NIM_BOOL)0;
	colontmpD__7 = (NIM_BOOL)0;
	{
		if (!!((*ctx_p1).hasParticle)) goto LA3_;
		eqcopy___backendsZsdl3Zsdl95canvas_u197((&result), inCell_p0);
		goto BeforeRet_;
	}
LA3_: ;
	colontmpD_ = eqdup___system_u2645(inCell_p0.ch);
	result.ch = colontmpD_;
	colontmpD__2 = eqdup___srcZtypes_u30((*ctx_p1).particle.color);
	result.style.fg = colontmpD__2;
	colontmpD__3 = eqdup___srcZtypes_u30(inCell_p0.style.bg);
	result.style.bg = colontmpD__3;
	colontmpD__4 = inCell_p0.style.bold;
	result.style.bold = colontmpD__4;
	colontmpD__5 = inCell_p0.style.underline;
	result.style.underline = colontmpD__5;
	colontmpD__6 = inCell_p0.style.italic;
	result.style.italic = colontmpD__6;
	colontmpD__7 = inCell_p0.style.dim;
	result.style.dim = colontmpD__7;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, foregroundOnlyShader__libZterminal95shaders_u161)(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* Result) {
	tyProc__SDBJCN1RKcIw6ZTtrYle9cQ T1_;
	nimZeroMem((void*)Result, sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	nimZeroMem((void*)(&T1_), sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	T1_.ClP_0 = ((TM__8WmSss49aIo2yrPDwPGHYMQ_315) (colonanonymous___libZterminal95shaders_u163)); T1_.ClE_0 = NIM_NIL;
	(*Result).ClE_0 = T1_.ClE_0;
	(*Result).ClP_0 = T1_.ClP_0;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u169)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1) {
	tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA result;
	NimStringV2 ch_1;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD_;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__2;
	NIM_BOOL colontmpD__3;
	NIM_BOOL colontmpD__4;
	NIM_BOOL colontmpD__5;
	NIM_BOOL colontmpD__6;
	NimStringV2 T6_;
	NimStringV2 blitTmp_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
	ch_1.len = 0; ch_1.p = NIM_NIL;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	colontmpD__3 = (NIM_BOOL)0;
	colontmpD__4 = (NIM_BOOL)0;
	colontmpD__5 = (NIM_BOOL)0;
	colontmpD__6 = (NIM_BOOL)0;
	{
		if (!!((*ctx_p1).hasParticle)) goto LA4_;
		eqcopy___backendsZsdl3Zsdl95canvas_u197((&result), inCell_p0);
		if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(ch_1.p);
}
		goto BeforeRet_;
	}
LA4_: ;
	T6_.len = 0; T6_.p = NIM_NIL;
	{
		if (!(inCell_p0.ch.len == ((NI)0))) goto LA9_;
		ch_1 = TM__8WmSss49aIo2yrPDwPGHYMQ_316;
	}
	goto LA7_;
LA9_: ;
	{
		eqcopy___system_u2642((&ch_1), inCell_p0.ch);
	}
LA7_: ;
	blitTmp_1 = ch_1;
	eqwasMoved___system_u2639((&ch_1));
	result.ch = blitTmp_1;
	colontmpD_ = eqdup___srcZtypes_u30(inCell_p0.style.fg);
	result.style.fg = colontmpD_;
	colontmpD__2 = eqdup___srcZtypes_u30((*ctx_p1).particle.color);
	result.style.bg = colontmpD__2;
	colontmpD__3 = inCell_p0.style.bold;
	result.style.bold = colontmpD__3;
	colontmpD__4 = inCell_p0.style.underline;
	result.style.underline = colontmpD__4;
	colontmpD__5 = inCell_p0.style.italic;
	result.style.italic = colontmpD__5;
	colontmpD__6 = inCell_p0.style.dim;
	result.style.dim = colontmpD__6;
	{
		LA1_:;
	}
	{
		if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(ch_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, backgroundOnlyShader__libZterminal95shaders_u167)(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* Result) {
	tyProc__SDBJCN1RKcIw6ZTtrYle9cQ T1_;
	nimZeroMem((void*)Result, sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	nimZeroMem((void*)(&T1_), sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	T1_.ClP_0 = ((TM__8WmSss49aIo2yrPDwPGHYMQ_317) (colonanonymous___libZterminal95shaders_u169)); T1_.ClE_0 = NIM_NIL;
	(*Result).ClE_0 = T1_.ClE_0;
	(*Result).ClP_0 = T1_.ClP_0;
}
N_LIB_PRIVATE N_CLOSURE(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u177)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0) {
	tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA result;
	tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA* colonenvP__1;
	NimStringV2 colontmpD_;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__2;
	NIM_BOOL colontmpD__3;
	NIM_BOOL colontmpD__4;
	NIM_BOOL colontmpD__5;
	NIM_BOOL colontmpD__6;
	NF t_1;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg_1;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ pc_1;
{	nimZeroMem((void*)(&result), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA*) ClE_0;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	colontmpD__3 = (NIM_BOOL)0;
	colontmpD__4 = (NIM_BOOL)0;
	colontmpD__5 = (NIM_BOOL)0;
	colontmpD__6 = (NIM_BOOL)0;
	{
		if (!!((*ctx_p1).hasParticle)) goto LA3_;
		eqcopy___backendsZsdl3Zsdl95canvas_u197((&result), inCell_p0);
		goto BeforeRet_;
	}
LA3_: ;
	t_1 = clamp__libZterminal95shaders_u181((*colonenvP__1).strength0, 0.0, 1.0);
	fg_1 = inCell_p0.style.fg;
	pc_1 = (*ctx_p1).particle.color;
	colontmpD_ = eqdup___system_u2645(inCell_p0.ch);
	result.ch = colontmpD_;
	result.style.fg.r = ((NU8) (((NF)(((NF)(((NF) (fg_1.r))) * (NF)(((NF)(1.0) - (NF)(t_1))))) + (NF)(((NF)(((NF) (pc_1.r))) * (NF)(t_1))))));
	result.style.fg.g = ((NU8) (((NF)(((NF)(((NF) (fg_1.g))) * (NF)(((NF)(1.0) - (NF)(t_1))))) + (NF)(((NF)(((NF) (pc_1.g))) * (NF)(t_1))))));
	result.style.fg.b = ((NU8) (((NF)(((NF)(((NF) (fg_1.b))) * (NF)(((NF)(1.0) - (NF)(t_1))))) + (NF)(((NF)(((NF) (pc_1.b))) * (NF)(t_1))))));
	colontmpD__2 = eqdup___srcZtypes_u30(inCell_p0.style.bg);
	result.style.bg = colontmpD__2;
	colontmpD__3 = inCell_p0.style.bold;
	result.style.bold = colontmpD__3;
	colontmpD__4 = inCell_p0.style.underline;
	result.style.underline = colontmpD__4;
	colontmpD__5 = inCell_p0.style.italic;
	result.style.italic = colontmpD__5;
	colontmpD__6 = inCell_p0.style.dim;
	result.style.dim = colontmpD__6;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, colorModulateShader__libZterminal95shaders_u174)(NF strength_p0, tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* Result) {
	tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA* T1_;
	tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA* blitTmp_1;
	tyProc__SDBJCN1RKcIw6ZTtrYle9cQ T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_colorModulateShader___V2dYi9cmtdy0n9cLhHLjNMbA));
	(*T1_).Sup.m_type = (&NTIv2__V2dYi9cmtdy0n9cLhHLjNMbA_);
	colonenv__1 = T1_;
	(*colonenv__1).strength0 = strength_p0;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u177; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
static N_INLINE(NU8, min__libZterminal95shaders_u205)(NU8 x_p0, NU8 y_p1) {
	NU8 result;
	NU8 colontmpD_;
	NU8 colontmpD__2;
	colontmpD_ = (NU8)0;
	colontmpD__2 = (NU8)0;
	{
		if (!((NU8)(x_p0) <= (NU8)(y_p1))) goto LA3_;
		colontmpD_ = x_p0;
		result = colontmpD_;
	}
	goto LA1_;
LA3_: ;
	{
		colontmpD__2 = y_p1;
		result = colontmpD__2;
	}
LA1_: ;
	return result;
}
N_LIB_PRIVATE N_CLOSURE(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u193)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1, void* ClE_0) {
	tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA result;
	tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA* colonenvP__1;
	NimStringV2 colontmpD_;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__2;
	NIM_BOOL colontmpD__3;
	NIM_BOOL colontmpD__4;
	NIM_BOOL colontmpD__5;
	NIM_BOOL colontmpD__6;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg_1;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ pc_1;
	NF s_1;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_320;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_321;
	NI TM__8WmSss49aIo2yrPDwPGHYMQ_322;
{	nimZeroMem((void*)(&result), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
	colonenvP__1 = (tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA*) ClE_0;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	colontmpD__3 = (NIM_BOOL)0;
	colontmpD__4 = (NIM_BOOL)0;
	colontmpD__5 = (NIM_BOOL)0;
	colontmpD__6 = (NIM_BOOL)0;
	{
		if (!!((*ctx_p1).hasParticle)) goto LA3_;
		eqcopy___backendsZsdl3Zsdl95canvas_u197((&result), inCell_p0);
		goto BeforeRet_;
	}
LA3_: ;
	fg_1 = inCell_p0.style.fg;
	pc_1 = (*ctx_p1).particle.color;
	s_1 = clamp__libZterminal95shaders_u181((*colonenvP__1).strength0, 0.0, 1.0);
	colontmpD_ = eqdup___system_u2645(inCell_p0.ch);
	result.ch = colontmpD_;
	if ((((NI) (((NI64) (((NF)(((NF) (pc_1.r))) * (NF)(s_1))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF) (pc_1.r))) * (NF)(s_1))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF) (pc_1.r))) * (NF)(s_1)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
	}
	if (nimAddInt(((NI) (fg_1.r)), (((NI) (((NI64) (((NF)(((NF) (pc_1.r))) * (NF)(s_1))))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_320)) { raiseOverflow(); goto BeforeRet_;
	};
	result.style.fg.r = min__libZterminal95shaders_u205(((NU8)255), ((NU8) (((((NI)255) <= (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_320)) ? ((NI)255) : (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_320)))));
	if ((((NI) (((NI64) (((NF)(((NF) (pc_1.g))) * (NF)(s_1))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF) (pc_1.g))) * (NF)(s_1))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF) (pc_1.g))) * (NF)(s_1)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
	}
	if (nimAddInt(((NI) (fg_1.g)), (((NI) (((NI64) (((NF)(((NF) (pc_1.g))) * (NF)(s_1))))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_321)) { raiseOverflow(); goto BeforeRet_;
	};
	result.style.fg.g = min__libZterminal95shaders_u205(((NU8)255), ((NU8) (((((NI)255) <= (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_321)) ? ((NI)255) : (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_321)))));
	if ((((NI) (((NI64) (((NF)(((NF) (pc_1.b))) * (NF)(s_1))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF) (pc_1.b))) * (NF)(s_1))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF) (pc_1.b))) * (NF)(s_1)))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
	}
	if (nimAddInt(((NI) (fg_1.b)), (((NI) (((NI64) (((NF)(((NF) (pc_1.b))) * (NF)(s_1))))))), &TM__8WmSss49aIo2yrPDwPGHYMQ_322)) { raiseOverflow(); goto BeforeRet_;
	};
	result.style.fg.b = min__libZterminal95shaders_u205(((NU8)255), ((NU8) (((((NI)255) <= (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_322)) ? ((NI)255) : (NI)(TM__8WmSss49aIo2yrPDwPGHYMQ_322)))));
	colontmpD__2 = eqdup___srcZtypes_u30(inCell_p0.style.bg);
	result.style.bg = colontmpD__2;
	colontmpD__3 = inCell_p0.style.bold;
	result.style.bold = colontmpD__3;
	colontmpD__4 = inCell_p0.style.underline;
	result.style.underline = colontmpD__4;
	colontmpD__5 = inCell_p0.style.italic;
	result.style.italic = colontmpD__5;
	colontmpD__6 = inCell_p0.style.dim;
	result.style.dim = colontmpD__6;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, colorAdditiveShader__libZterminal95shaders_u190)(NF strength_p0, tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* Result) {
	tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA* colonenv__1;
	tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA* T1_;
	tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA* blitTmp_1;
	tyProc__SDBJCN1RKcIw6ZTtrYle9cQ T2_;
	colonenv__1 = NIM_NIL;
	T1_ = NIM_NIL;
	T1_ = (tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA*) nimNewObj(sizeof(tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA), NIM_ALIGNOF(tyObject_Env_terminal_shadersdotnim_colorAdditiveShader___u4ATW6VKB3lCFQrXL51hPA));
	(*T1_).Sup.m_type = (&NTIv2__u4ATW6VKB3lCFQrXL51hPA_);
	colonenv__1 = T1_;
	(*colonenv__1).strength0 = strength_p0;
	blitTmp_1 = colonenv__1;
	nimMarkCyclic(colonenv__1);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	T2_.ClP_0 = colonanonymous___libZterminal95shaders_u193; T2_.ClE_0 = blitTmp_1;
	(*Result).ClE_0 = T2_.ClE_0;
	(*Result).ClP_0 = T2_.ClP_0;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA, colonanonymous___libZterminal95shaders_u220)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA inCell_p0, tyObject_ShaderContext__RfcvRNc4ghnObbsfurRy5A* ctx_p1) {
	tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA result;
	NimStringV2 colontmpD_;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ colontmpD__2;
	NIM_BOOL colontmpD__3;
	NIM_BOOL colontmpD__4;
	NIM_BOOL colontmpD__5;
	NIM_BOOL colontmpD__6;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg_1;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ pc_1;
{	nimZeroMem((void*)(&result), sizeof(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA));
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	colontmpD__3 = (NIM_BOOL)0;
	colontmpD__4 = (NIM_BOOL)0;
	colontmpD__5 = (NIM_BOOL)0;
	colontmpD__6 = (NIM_BOOL)0;
	{
		if (!!((*ctx_p1).hasParticle)) goto LA3_;
		eqcopy___backendsZsdl3Zsdl95canvas_u197((&result), inCell_p0);
		goto BeforeRet_;
	}
LA3_: ;
	fg_1 = inCell_p0.style.fg;
	pc_1 = (*ctx_p1).particle.color;
	colontmpD_ = eqdup___system_u2645(inCell_p0.ch);
	result.ch = colontmpD_;
	result.style.fg.r = ((NU8) (((NF)(((NF)(((NF)(((NF) (fg_1.r))) / (NF)(255.0))) * (NF)(((NF)(((NF) (pc_1.r))) / (NF)(255.0))))) * (NF)(255.0))));
	result.style.fg.g = ((NU8) (((NF)(((NF)(((NF)(((NF) (fg_1.g))) / (NF)(255.0))) * (NF)(((NF)(((NF) (pc_1.g))) / (NF)(255.0))))) * (NF)(255.0))));
	result.style.fg.b = ((NU8) (((NF)(((NF)(((NF)(((NF) (fg_1.b))) / (NF)(255.0))) * (NF)(((NF)(((NF) (pc_1.b))) / (NF)(255.0))))) * (NF)(255.0))));
	colontmpD__2 = eqdup___srcZtypes_u30(inCell_p0.style.bg);
	result.style.bg = colontmpD__2;
	colontmpD__3 = inCell_p0.style.bold;
	result.style.bold = colontmpD__3;
	colontmpD__4 = inCell_p0.style.underline;
	result.style.underline = colontmpD__4;
	colontmpD__5 = inCell_p0.style.italic;
	result.style.italic = colontmpD__5;
	colontmpD__6 = inCell_p0.style.dim;
	result.style.dim = colontmpD__6;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, colorMultiplyShader__libZterminal95shaders_u218)(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ* Result) {
	tyProc__SDBJCN1RKcIw6ZTtrYle9cQ T1_;
	nimZeroMem((void*)Result, sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	nimZeroMem((void*)(&T1_), sizeof(tyProc__SDBJCN1RKcIw6ZTtrYle9cQ));
	T1_.ClP_0 = ((TM__8WmSss49aIo2yrPDwPGHYMQ_323) (colonanonymous___libZterminal95shaders_u220)); T1_.ClE_0 = NIM_NIL;
	(*Result).ClE_0 = T1_.ClE_0;
	(*Result).ClP_0 = T1_.ClP_0;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u1769)(tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast(dest_p0);
		if (!T3_) goto LA4_;
		eqdestroy___libZterminal95shaders_u1740((&(*dest_p0)));
		nimRawDispose(dest_p0, ((NI)8));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZterminal95shaders_u1668)(tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast(dest_p0);
		if (!T3_) goto LA4_;
		eqdestroy___libZterminal95shaders_u1641((&(*dest_p0)));
		nimRawDispose(dest_p0, ((NI)4));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, atmlibatsterminal_shadersdotnim_Init000)(void) {
{
	gShaderState__libZterminal95shaders_u51 = ((tyObject_ShaderStatecolonObjectType___RfTXv8TLJEh39byJtSgmUTQ*) NIM_NIL);
	gDisplacementState__libZterminal95shaders_u52 = ((tyObject_DisplacementStatecolonObjectType___Eq1J5ozanapPcgXIqbEDOA*) NIM_NIL);
	nimTestErrorFlag();
}
}

