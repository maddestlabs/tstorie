/* Generated by Nim Compiler v2.2.6 */
/* Compiled for: Linux, wasm32, clang */
/* Command for C compiler:
   emcc -c -w -ferror-limit=3 -fno-strict-aliasing -sUSE_SDL=3 -I/workspaces/storie-vendor/vendor/SDL_ttf-src/include -Os   -I/home/codespace/.choosenim/toolchains/nim-2.2.6/lib -I/workspaces/telestorie -o /workspaces/telestorie/nimcache_wasm_sdl3/@mlib@stext_editor.nim.c.o /workspaces/telestorie/nimcache_wasm_sdl3/@mlib@stext_editor.nim.c */
#define NIM_INTBITS 32

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q;
typedef struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ;
typedef struct tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA;
typedef struct tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ;
typedef struct tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw;
typedef struct tySequence__TtMbAhpjw87rFOFlPjxZaw tySequence__TtMbAhpjw87rFOFlPjxZaw;
typedef struct tySequence__TtMbAhpjw87rFOFlPjxZaw_Content tySequence__TtMbAhpjw87rFOFlPjxZaw_Content;
typedef struct tySequence__48JTohSgTy339bRxHzUD8KA tySequence__48JTohSgTy339bRxHzUD8KA;
typedef struct tySequence__48JTohSgTy339bRxHzUD8KA_Content tySequence__48JTohSgTy339bRxHzUD8KA_Content;
typedef struct tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ tySequence__sM4lkSb7zS6F7OVMvW9cffQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content;
typedef struct tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA;
typedef struct tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng;
typedef struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ tyObject_Style__UURjArTrf2wmcCbN5MncAQ;
typedef struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ;
typedef struct tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw;
typedef struct tySequence__iEoNTfSuEpSv8aQiyfWQQw tySequence__iEoNTfSuEpSv8aQiyfWQQw;
typedef struct tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content;
typedef struct tySequence__shxop0zPIs5Ec3k71aCLuQ tySequence__shxop0zPIs5Ec3k71aCLuQ;
typedef struct tySequence__shxop0zPIs5Ec3k71aCLuQ_Content tySequence__shxop0zPIs5Ec3k71aCLuQ_Content;
struct tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ {
	NI rc;
	NI rootIdx;
};
struct tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ {
	NI line;
	NI col;
};
struct tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw {
	NIM_BOOL active;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ start;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ end_0;
};
struct tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q {
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ cursor;
	tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw selection;
	NI scrollX;
	NI scrollY;
	NI desiredCol;
	NI tabWidth;
	NIM_BOOL insertMode;
};
struct tySequence__TtMbAhpjw87rFOFlPjxZaw {
  NI len; tySequence__TtMbAhpjw87rFOFlPjxZaw_Content* p;
};
struct tySequence__48JTohSgTy339bRxHzUD8KA {
  NI len; tySequence__48JTohSgTy339bRxHzUD8KA_Content* p;
};
struct tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA {
	tySequence__48JTohSgTy339bRxHzUD8KA text;
	NI gapStart;
	NI gapEnd;
};
struct tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA {
	tySequence__TtMbAhpjw87rFOFlPjxZaw lines;
	NIM_BOOL modified;
};
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ {
  NI len; tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content* p;
};
struct tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA {
	NI a;
	NI b;
};
struct tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng {
	NIM_BOOL showLineNumbers;
	NI lineNumberWidth;
	NIM_BOOL showScrollbar;
	NIM_BOOL highlightCurrentLine;
	NIM_BOOL wrapLines;
	NIM_BOOL useSoftTabs;
};
struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ {
	NU8 r;
	NU8 g;
	NU8 b;
};
struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ bg;
	NIM_BOOL bold;
	NIM_BOOL underline;
	NIM_BOOL italic;
	NIM_BOOL dim;
};
struct tySequence__iEoNTfSuEpSv8aQiyfWQQw {
  NI len; tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content* p;
};
struct tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ Field0;
	tySequence__iEoNTfSuEpSv8aQiyfWQQw Field1;
};
struct tySequence__shxop0zPIs5Ec3k71aCLuQ {
  NI len; tySequence__shxop0zPIs5Ec3k71aCLuQ_Content* p;
};
struct tySequence__TtMbAhpjw87rFOFlPjxZaw_Content { NI cap; tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA data[SEQ_DECL_SIZE]; };
struct tySequence__48JTohSgTy339bRxHzUD8KA_Content { NI cap; NI32 data[SEQ_DECL_SIZE]; };
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content { NI cap; NimStringV2 data[SEQ_DECL_SIZE]; };
struct tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content { NI cap; tySequence__shxop0zPIs5Ec3k71aCLuQ data[SEQ_DECL_SIZE]; };
struct tySequence__shxop0zPIs5Ec3k71aCLuQ_Content { NI cap; NIM_BOOL data[SEQ_DECL_SIZE]; };
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p_p0);
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u256)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u274)(tySequence__TtMbAhpjw87rFOFlPjxZaw dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZunicode_u714)(tySequence__48JTohSgTy339bRxHzUD8KA dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, alignedDealloc)(void* p_p0, NI align_p1);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u918)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u881)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u430)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA** dest_p0, tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*, newEditorBuffer__libZtext95editor_u208)(NimStringV2 content_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u421)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u283)(tySequence__TtMbAhpjw87rFOFlPjxZaw* dest_p0, tySequence__TtMbAhpjw87rFOFlPjxZaw src_p1);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap_p0, NI elemSize_p1, NI elemAlign_p2);
N_LIB_PRIVATE N_NIMCALL(void, add__libZtext95editor_u218)(tySequence__TtMbAhpjw87rFOFlPjxZaw* x_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA y_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA, newEditorLine__libZtext95editor_u39)(NimStringV2 text_p0);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pureZunicode_u723)(tySequence__48JTohSgTy339bRxHzUD8KA* dest_p0, tySequence__48JTohSgTy339bRxHzUD8KA src_p1);
static N_INLINE(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u7844)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u4517)(NIM_CHAR* s_p0, NI s_p0Len_0);
N_LIB_PRIVATE N_NOINLINE(void, raiseIndexError4)(NI l1_p0, NI h1_p1, NI h2_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u339)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseIndexError2)(NI i_p0, NI n_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2648)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s_p0, NI addLen_p1);
N_LIB_PRIVATE N_NOINLINE(void, raiseOverflow)(void);
N_LIB_PRIVATE N_NIMCALL(void, failedAssertImpl__stdZassertions_u234)(NimStringV2 msg_p0);
N_LIB_PRIVATE N_NOCONV(void, dealloc)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*, newEditorBuffer__libZtext95editor_u482)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ lines_p0);
static N_INLINE(void, nimIncRef)(void* p_p0);
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, toString__libZtext95editor_u54)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA line_p0);
N_LIB_PRIVATE N_NIMCALL(void, add__pureZunicode_u4554)(tySequence__48JTohSgTy339bRxHzUD8KA* x_p0, NI32 y_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___pureZunicode_u666)(tySequence__48JTohSgTy339bRxHzUD8KA runes_p0);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, copyMem__system_u1741)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NOINLINE(void, raiseRangeErrorI)(NI64 i_p0, NI64 a_p1, NI64 b_p2);
N_LIB_PRIVATE N_NIMCALL(void, add__stdZenumutils_u70)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* x_p0, NimStringV2 y_p1);
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0);
N_LIB_PRIVATE N_NIMCALL(void, clampCursor__libZtext95editor_u989)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(NI, lineCount__libZtext95editor_u507)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0);
N_LIB_PRIVATE N_NIMCALL(NI, lineLength__libZtext95editor_u572)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI lineIdx_p1);
N_LIB_PRIVATE N_NIMCALL(NI, len__libZtext95editor_u48)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA line_p0);
N_LIB_PRIVATE N_NIMCALL(void, insertRune__libZtext95editor_u644)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2, NI32 r_p3);
N_LIB_PRIVATE N_NIMCALL(void, insertRune__libZtext95editor_u183)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1, NI32 r_p2);
N_LIB_PRIVATE N_NIMCALL(void, moveGapTo__libZtext95editor_u106)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI pos_p1);
N_LIB_PRIVATE N_NIMCALL(void, ensureGapSize__libZtext95editor_u138)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI minSize_p1);
N_LIB_PRIVATE N_NIMCALL(tySequence__48JTohSgTy339bRxHzUD8KA, newSeq__pureZunicode_u4536)(NI len_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___pureZunicode_u711)(tySequence__48JTohSgTy339bRxHzUD8KA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, insertChar__libZtext95editor_u633)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2, NIM_CHAR ch_p3);
N_LIB_PRIVATE N_NIMCALL(void, deleteCharBackward__libZtext95editor_u677)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2);
N_LIB_PRIVATE N_NIMCALL(void, deleteRuneBackward__libZtext95editor_u201)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1);
N_LIB_PRIVATE N_NIMCALL(void, deleteNewline__libZtext95editor_u794)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u348)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space_p0);
N_LIB_PRIVATE N_NIMCALL(void, delete__libZtext95editor_u802)(tySequence__TtMbAhpjw87rFOFlPjxZaw* x_p0, NI i_p1);
N_LIB_PRIVATE N_NIMCALL(void, deleteChar__libZtext95editor_u670)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2);
N_LIB_PRIVATE N_NIMCALL(void, deleteRune__libZtext95editor_u191)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1);
N_LIB_PRIVATE N_NIMCALL(void, insertNewline__libZtext95editor_u684)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2);
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1292)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1);
N_NIMCALL(NimStringV2, mnewString)(NI len_p0);
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimPrepareStrMutationImpl__system_u2391)(NimStringV2* s_p0);
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZstrbasics_u48)(NI a_p0, NI b_p1);
N_LIB_PRIVATE N_NIMCALL(void, insert__libZtext95editor_u743)(tySequence__TtMbAhpjw87rFOFlPjxZaw* x_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA item_p1, NI i_p2);
N_LIB_PRIVATE N_NOINLINE(void, raiseDivByZero)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Style__UURjArTrf2wmcCbN5MncAQ, tuiGetStyle__libZtui95helpers_u17)(NimStringV2 name_p0);
N_LIB_PRIVATE N_NIMCALL(void, drawBoxSingle__libZtui95helpers_u194)(NI layer_p0, NI x_p1, NI y_p2, NI w_p3, NI h_p4, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p5);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___systemZdollars_u14)(NI xX60gensym0__p0);
N_LIB_PRIVATE N_NIMCALL(void, tuiDraw__libZtui95helpers_u118)(NI layer_p0, NI x_p1, NI y_p2, NimStringV2 text_p3, tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_p4);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getLine__libZtext95editor_u513)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI lineIdx_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___pureZunicode_u663)(NI32 rune_p0);
N_LIB_PRIVATE N_NIMCALL(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw, generateMinimap__libZtext95editor_u1105)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI width_p1, NI height_p2, NI scrollY_p3, NI viewportHeight_p4, tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw selection_p5);
N_LIB_PRIVATE N_NIMCALL(void, add__niminiZruntime_u5425)(tySequence__shxop0zPIs5Ec3k71aCLuQ* x_p0, NIM_BOOL y_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__libZtext95editor_u1181)(tySequence__iEoNTfSuEpSv8aQiyfWQQw* x_p0, tySequence__shxop0zPIs5Ec3k71aCLuQ y_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2642)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___niminiZruntime_u160)(tySequence__shxop0zPIs5Ec3k71aCLuQ* dest_p0, tySequence__shxop0zPIs5Ec3k71aCLuQ src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___niminiZruntime_u157)(tySequence__shxop0zPIs5Ec3k71aCLuQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u1370)(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u3717)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u1211)(tySequence__iEoNTfSuEpSv8aQiyfWQQw dest_p0);
static N_INLINE(NIM_BOOL, contains__stdZenumutils_u50)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1);
static N_INLINE(NI, find__stdZenumutils_u55)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1);
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2);
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorLeft__libZtext95editor_u1020)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorUp__libZtext95editor_u1008)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorRight__libZtext95editor_u1030)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorDown__libZtext95editor_u1014)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToBufferStart__libZtext95editor_u1045)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToLineStart__libZtext95editor_u1041)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToBufferEnd__libZtext95editor_u1047)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToLineEnd__libZtext95editor_u1043)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, backspaceAtCursor__libZtext95editor_u1071)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, deleteAtCursor__libZtext95editor_u1068)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, insertNewlineAtCursor__libZtext95editor_u1082)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0);
N_LIB_PRIVATE N_NIMCALL(void, insertTabAtCursor__libZtext95editor_u1088)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NIM_BOOL useSoftTabs_p1);
N_LIB_PRIVATE N_NIMCALL(void, insertCharAtCursor__libZtext95editor_u1049)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NIM_CHAR ch_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, pointInRect__libZtui95helpers_u410)(NI px_p0, NI py_p1, NI rx_p2, NI ry_p3, NI rw_p4, NI rh_p5);
N_LIB_PRIVATE N_NIMCALL(void, moveCursor__libZtext95editor_u992)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI line_p1, NI col_p2);
static const struct {
  NI cap; NIM_CHAR data[0+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_2 = { 0 | NIM_STRLIT_FLAG, "" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_3 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_4 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_5 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const struct {
  NI cap; NIM_CHAR data[93+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_7 = { 93 | NIM_STRLIT_FLAG, "iterators.nim(272, 11) `len(a) == L` the length of the string changed while iterating over it" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_8 = {93, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_7};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_9 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const struct {
  NI cap; NIM_CHAR data[90+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_10 = { 90 | NIM_STRLIT_FLAG, "iterators.nim(254, 11) `len(a) == L` the length of the seq changed while iterating over it" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_11 = {90, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_10};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_12 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const struct {
  NI cap; NIM_CHAR data[90+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_17 = { 90 | NIM_STRLIT_FLAG, "iterators.nim(187, 11) `len(a) == L` the length of the seq changed while iterating over it" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_18 = {90, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_17};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_19 = {90, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_10};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_20 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_51 = {90, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_10};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_63 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_69 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const struct {
  NI cap; NIM_CHAR data[17+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_98 = { 17 | NIM_STRLIT_FLAG, "editor.background" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_99 = {17, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_98};
static const struct {
  NI cap; NIM_CHAR data[13+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_100 = { 13 | NIM_STRLIT_FLAG, "editor.border" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_101 = {13, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_100};
static const struct {
  NI cap; NIM_CHAR data[13+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_102 = { 13 | NIM_STRLIT_FLAG, "editor.cursor" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_103 = {13, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_102};
static const struct {
  NI cap; NIM_CHAR data[17+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_104 = { 17 | NIM_STRLIT_FLAG, "editor.linenumber" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_105 = {17, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_104};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_106 = { 24 | NIM_STRLIT_FLAG, "editor.linenumber.active" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_107 = {24, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_106};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_124 = { 1 | NIM_STRLIT_FLAG, " " };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_125 = {1, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_124};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_138 = {1, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_124};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_147 = {0, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_2};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_158 = {1, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_124};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_159 = { 3 | NIM_STRLIT_FLAG, "\342\240\202" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_160 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_159};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_161 = { 3 | NIM_STRLIT_FLAG, "\342\240\206" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_162 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_161};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_163 = { 3 | NIM_STRLIT_FLAG, "\342\240\207" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_164 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_163};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_165 = { 3 | NIM_STRLIT_FLAG, "\342\240\277" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_166 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_165};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_170 = { 7 | NIM_STRLIT_FLAG, "default" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_171 = {7, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_170};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_185 = { 3 | NIM_STRLIT_FLAG, "\342\226\210" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_186 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_185};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_187 = { 4 | NIM_STRLIT_FLAG, "info" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_188 = {4, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_187};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_193 = { 6 | NIM_STRLIT_FLAG, "border" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_194 = {6, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_193};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_195 = {7, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_170};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_212 = {3, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_185};
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_213 = {4, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_187};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_216 = { 4 | NIM_STRLIT_FLAG, "ctrl" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_217 = {4, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_216};
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__ju9cg9cywhFyBl2l4t4KQoNA_218 = { 5 | NIM_STRLIT_FLAG, "shift" };
static const NimStringV2 TM__ju9cg9cywhFyBl2l4t4KQoNA_219 = {5, (NimStrPayload*)&TM__ju9cg9cywhFyBl2l4t4KQoNA_218};
extern NIM_BOOL nimInErrorMode__system_u4234;
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1) {
	NI result;
	result = ((NI) ((NU)((NU32)(((NU) (x_p0))) - (NU32)(((NU) (y_p1))))));
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p_p0) {
	NIM_BOOL result;
	result = NIM_FALSE;
	{
		tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ* cell_1;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
		cell_1 = ((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T5_));
		{
			if (!((NI)((NI32)((*cell_1).rc) >> (NU32)(((NI)4))) == ((NI)0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			(*cell_1).rc = minuspercent___system_u813((*cell_1).rc, ((NI)16));
		}
LA6_: ;
	}
LA3_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u274)(tySequence__TtMbAhpjw87rFOFlPjxZaw dest_p0) {
	NI colontmp_;
	colontmp_ = ((NI)0);
	{
		while (1) {
			NI T3_;
			T3_ = dest_p0.len;
			if (!(colontmp_ < T3_)) goto LA2;
			eqdestroy___pureZunicode_u714(dest_p0.p->data[colontmp_].text);
			colontmp_ += ((NI)1);
		} LA2: ;
	}
	if (dest_p0.p && !(dest_p0.p->cap & NIM_STRLIT_FLAG)) {
 alignedDealloc(dest_p0.p, NIM_ALIGNOF(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
}
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u256)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* dest_p0) {
	eqdestroy___libZtext95editor_u274((*dest_p0).lines);
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u881)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest_p0).buffer);
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u256((&(*(*dest_p0).buffer)));
		nimRawDispose((*dest_p0).buffer, ((NI)4));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u918)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast(dest_p0);
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u881((&(*dest_p0)));
		nimRawDispose(dest_p0, ((NI)4));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u430)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA** dest_p0, tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* src_p1) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest_p0));
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u256((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)4));
	}
LA4_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u421)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast(dest_p0);
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u256((&(*dest_p0)));
		nimRawDispose(dest_p0, ((NI)4));
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u283)(tySequence__TtMbAhpjw87rFOFlPjxZaw* dest_p0, tySequence__TtMbAhpjw87rFOFlPjxZaw src_p1) {
	if ((*dest_p0).p != src_p1.p) {	eqdestroy___libZtext95editor_u274((*dest_p0));
	}
(*dest_p0).len = src_p1.len; (*dest_p0).p = src_p1.p;
}
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4234);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u7844)(NimStringV2 s_p0) {
	tySequence__48JTohSgTy339bRxHzUD8KA result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	if ((s_p0.len-1)-((NI)0) != -1 && (((NI)0) < 0 || ((NI)0) >= s_p0.len || (s_p0.len-1) < 0 || (s_p0.len-1) >= s_p0.len)){ raiseIndexError4(((NI)0), (s_p0.len-1), s_p0.len); goto BeforeRet_;
	}
	result = toRunes__pureZunicode_u4517((((s_p0).p) ? ((NIM_CHAR*)s_p0.p->data+(((NI)0))) : NIM_NIL), ((s_p0.len-1))-(((NI)0))+1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA, newEditorLine__libZtext95editor_u39)(NimStringV2 text_p0) {
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA result;
	tySequence__48JTohSgTy339bRxHzUD8KA T1_;
	NI T2_;
	NI T3_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	T1_.len = 0; T1_.p = NIM_NIL;
	T1_ = toRunes__pureZunicode_u7844(text_p0);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___pureZunicode_u714(T1_); goto BeforeRet_;}
	eqsink___pureZunicode_u723((&result.text), T1_);
	T2_ = result.text.len;
	result.gapStart = T2_;
	T3_ = result.text.len;
	result.gapEnd = T3_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u339)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0) {
	eqdestroy___pureZunicode_u714((*dest_p0).text);
}
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_6;
{	prepareAdd(s_p0, ((NI)1));
	(*(*s_p0).p).data[(*s_p0).len] = c_p1;
	if (nimAddInt((*s_p0).len, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_6)) { raiseOverflow(); goto BeforeRet_;
	};
	(*s_p0).len = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_6);
	(*(*s_p0).p).data[(*s_p0).len] = 0;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*, newEditorBuffer__libZtext95editor_u208)(NimStringV2 content_p0) {
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* result;
	tySequence__TtMbAhpjw87rFOFlPjxZaw T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	eqdestroy___libZtext95editor_u421(result);
	result = (tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*) nimNewObj(sizeof(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA), NIM_ALIGNOF(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA));
	T1_.len = 0; T1_.p = NIM_NIL;
	T1_.len = 0; T1_.p = (tySequence__TtMbAhpjw87rFOFlPjxZaw_Content*) newSeqPayload(0, sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA), NIM_ALIGNOF(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	eqsink___libZtext95editor_u283((&(*result).lines), T1_);
	(*result).modified = NIM_FALSE;
	{
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T6_;
		if (!(content_p0.len == ((NI)0))) goto LA4_;
		T6_ = newEditorLine__libZtext95editor_u39(TM__ju9cg9cywhFyBl2l4t4KQoNA_3);
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u339(&T6_); goto BeforeRet_;}
		add__libZtext95editor_u218((&(*result).lines), T6_);
	}
	goto LA2_;
LA4_: ;
	{
		NimStringV2 currentLine_1;
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T21_;
		currentLine_1.len = 0; currentLine_1.p = NIM_NIL;
		currentLine_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_4;
		{
			NIM_CHAR ch_1;
			NI i_1;
			NI L_1;
			ch_1 = (NIM_CHAR)0;
			i_1 = ((NI)0);
			L_1 = content_p0.len;
			{
				while (1) {
					if (!(i_1 < L_1)) goto LA10;
					if (i_1 < 0 || i_1 >= content_p0.len){ raiseIndexError2(i_1,content_p0.len-1); goto BeforeRet_;
					}
					ch_1 = content_p0.p->data[i_1];
					{
						tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T15_;
						if (!((NU8)(ch_1) == (NU8)(10))) goto LA13_;
						T15_ = newEditorLine__libZtext95editor_u39(currentLine_1);
						if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u339(&T15_); goto BeforeRet_;}
						add__libZtext95editor_u218((&(*result).lines), T15_);
						eqsink___system_u2648((&currentLine_1), TM__ju9cg9cywhFyBl2l4t4KQoNA_5);
					}
					goto LA11_;
LA13_: ;
					{
						nimAddCharV1((&currentLine_1), ch_1);
					}
LA11_: ;
					i_1 += ((NI)1);
					{
						if (!!((content_p0.len == L_1))) goto LA19_;
						failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_8);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
LA19_: ;
				} LA10: ;
			}
		}
		T21_ = newEditorLine__libZtext95editor_u39(currentLine_1);
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u339(&T21_); goto BeforeRet_;}
		add__libZtext95editor_u218((&(*result).lines), T21_);
		if (currentLine_1.p && !(currentLine_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(currentLine_1.p);
}
	}
LA2_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*, newEditorState__libZtext95editor_u872)(NimStringV2 content_p0) {
	tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* result;
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* T1_;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ T2_;
	tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw T3_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	eqdestroy___libZtext95editor_u918(result);
	result = (tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*) nimNewObj(sizeof(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q), NIM_ALIGNOF(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q));
	T1_ = NIM_NIL;
	T1_ = newEditorBuffer__libZtext95editor_u208(content_p0);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u421(T1_); goto BeforeRet_;}
	eqsink___libZtext95editor_u430(&(*result).buffer, T1_);
	T2_.line = ((NI)0);
	T2_.col = ((NI)0);
	(*result).cursor = T2_;
	nimZeroMem((void*)(&T3_), sizeof(tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw));
	T3_.active = NIM_FALSE;
	(*result).selection = T3_;
	(*result).scrollX = ((NI)0);
	(*result).scrollY = ((NI)0);
	(*result).desiredCol = ((NI)0);
	(*result).tabWidth = ((NI)4);
	(*result).insertMode = NIM_TRUE;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*, newEditorBuffer__libZtext95editor_u482)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ lines_p0) {
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* result;
	tySequence__TtMbAhpjw87rFOFlPjxZaw T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	eqdestroy___libZtext95editor_u421(result);
	result = (tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA*) nimNewObj(sizeof(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA), NIM_ALIGNOF(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA));
	T1_.len = 0; T1_.p = NIM_NIL;
	T1_.len = 0; T1_.p = (tySequence__TtMbAhpjw87rFOFlPjxZaw_Content*) newSeqPayload(0, sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA), NIM_ALIGNOF(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	eqsink___libZtext95editor_u283((&(*result).lines), T1_);
	(*result).modified = NIM_FALSE;
	{
		NI T4_;
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T7_;
		T4_ = lines_p0.len;
		if (!(T4_ == ((NI)0))) goto LA5_;
		T7_ = newEditorLine__libZtext95editor_u39(TM__ju9cg9cywhFyBl2l4t4KQoNA_9);
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u339(&T7_); goto BeforeRet_;}
		add__libZtext95editor_u218((&(*result).lines), T7_);
	}
	goto LA2_;
LA5_: ;
	{
		{
			NimStringV2* line_1;
			NI i_1;
			NI L_1;
			NI T10_;
			line_1 = (NimStringV2*)0;
			i_1 = ((NI)0);
			T10_ = lines_p0.len;
			L_1 = T10_;
			{
				while (1) {
					tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T13_;
					if (!(i_1 < L_1)) goto LA12;
					if (i_1 < 0 || i_1 >= lines_p0.len){ raiseIndexError2(i_1,lines_p0.len-1); goto BeforeRet_;
					}
					line_1 = (&lines_p0.p->data[i_1]);
					T13_ = newEditorLine__libZtext95editor_u39((*line_1));
					if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u339(&T13_); goto BeforeRet_;}
					add__libZtext95editor_u218((&(*result).lines), T13_);
					i_1 += ((NI)1);
					{
						NI T16_;
						T16_ = lines_p0.len;
						if (!!((T16_ == L_1))) goto LA17_;
						failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_11);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
LA17_: ;
				} LA12: ;
			}
		}
	}
LA2_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*, newEditorState__libZtext95editor_u983)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ lines_p0) {
	tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* result;
	tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* T1_;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ T2_;
	tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw T3_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	eqdestroy___libZtext95editor_u918(result);
	result = (tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*) nimNewObj(sizeof(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q), NIM_ALIGNOF(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q));
	T1_ = NIM_NIL;
	T1_ = newEditorBuffer__libZtext95editor_u482(lines_p0);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u421(T1_); goto BeforeRet_;}
	eqsink___libZtext95editor_u430(&(*result).buffer, T1_);
	T2_.line = ((NI)0);
	T2_.col = ((NI)0);
	(*result).cursor = T2_;
	nimZeroMem((void*)(&T3_), sizeof(tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw));
	T3_.active = NIM_FALSE;
	(*result).selection = T3_;
	(*result).scrollX = ((NI)0);
	(*result).scrollY = ((NI)0);
	(*result).desiredCol = ((NI)0);
	(*result).tabWidth = ((NI)4);
	(*result).insertMode = NIM_TRUE;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u927)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q** dest_p0, tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* src_p1) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest_p0));
		if (!T3_) goto LA4_;
		eqdestroy___libZtext95editor_u881((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)4));
	}
LA4_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___libZtext95editor_u915)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q** dest_p0) {
	(*dest_p0) = 0;
}
static N_INLINE(NI, pluspercent___system_u793)(NI x_p0, NI y_p1) {
	NI result;
	result = ((NI) ((NU)((NU32)(((NU) (x_p0))) + (NU32)(((NU) (y_p1))))));
	return result;
}
static N_INLINE(void, nimIncRef)(void* p_p0) {
	NI T1_;
	NI T2_;
	T1_ = (NI)0;
	T1_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
	T2_ = (NI)0;
	T2_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
	(*((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T1_))).rc = pluspercent___system_u793((*((tyObject_RefHeader__hLWKr9clDoQwq3AJwLFw0xQ*) (T2_))).rc, ((NI)16));
}
N_LIB_PRIVATE N_NIMCALL(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q*, eqdup___libZtext95editor_u924)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* src_p0) {
	tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* result;
	result = src_p0;
	{
		if (!src_p0) goto LA3_;
		nimIncRef(src_p0);
	}
LA3_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___libZtext95editor_u921)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q** dest_p0, tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* src_p1) {
	{
		if (!src_p1) goto LA3_;
		nimIncRef(src_p1);
	}
LA3_: ;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = nimDecRefIsLast((*dest_p0));
		if (!T7_) goto LA8_;
		eqdestroy___libZtext95editor_u881((&(*(*dest_p0))));
		nimRawDispose((*dest_p0), ((NI)4));
	}
LA8_: ;
	(*dest_p0) = src_p1;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, toString__libZtext95editor_u54)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA line_p0) {
	NimStringV2 result;
	tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	runes_1.len = 0; runes_1.p = NIM_NIL;
	runes_1.len = 0; runes_1.p = (tySequence__48JTohSgTy339bRxHzUD8KA_Content*) newSeqPayload(0, sizeof(NI32), NIM_ALIGNOF(NI32));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		i_2 = ((NI)0);
		{
			while (1) {
				NI32 colontmpD_;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_13;
				if (!(i_2 < line_p0.gapStart)) goto LA3;
				colontmpD_ = (NI32)0;
				i_1 = i_2;
				if (i_1 < 0 || i_1 >= line_p0.text.len){ raiseIndexError2(i_1,line_p0.text.len-1); goto BeforeRet_;
				}
				colontmpD_ = line_p0.text.p->data[i_1];
				add__pureZunicode_u4554((&runes_1), colontmpD_);
				if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_13)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_13);
			} LA3: ;
		}
	}
	{
		NI i_3;
		NI colontmp_;
		NI T5_;
		NI i_4;
		i_3 = (NI)0;
		colontmp_ = (NI)0;
		T5_ = line_p0.text.len;
		colontmp_ = T5_;
		i_4 = line_p0.gapEnd;
		{
			while (1) {
				NI32 colontmpD__2;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_14;
				if (!(i_4 < colontmp_)) goto LA7;
				colontmpD__2 = (NI32)0;
				i_3 = i_4;
				if (i_3 < 0 || i_3 >= line_p0.text.len){ raiseIndexError2(i_3,line_p0.text.len-1); goto BeforeRet_;
				}
				colontmpD__2 = line_p0.text.p->data[i_3];
				add__pureZunicode_u4554((&runes_1), colontmpD__2);
				if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_14)) { raiseOverflow(); goto BeforeRet_;
				};
				i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_14);
			} LA7: ;
		}
	}
	result = dollar___pureZunicode_u666(runes_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqdestroy___pureZunicode_u714(runes_1);
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}
static N_INLINE(void, copyMem__system_u1741)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
{	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_15;
		if (!(((NI)0) < src_p1.len)) goto LA3_;
		if ((src_p1.len) < ((NI)0) || (src_p1.len) > ((NI)2147483647)){ raiseRangeErrorI(src_p1.len, ((NI)0), ((NI)2147483647)); goto BeforeRet_;
		}
		copyMem__system_u1741(((void*) ((&(*(*dest_p0).p).data[(*dest_p0).len]))), ((void*) ((&(*src_p1.p).data[((NI)0)]))), (src_p1.len));
		if (nimAddInt((*dest_p0).len, src_p1.len, &TM__ju9cg9cywhFyBl2l4t4KQoNA_15)) { raiseOverflow(); goto BeforeRet_;
		};
		(*dest_p0).len = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_15);
		(*(*dest_p0).p).data[(*dest_p0).len] = 0;
	}
LA3_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getText__libZtext95editor_u579)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = TM__ju9cg9cywhFyBl2l4t4KQoNA_12;
	{
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA line_1;
		NI i_1;
		NI i_2;
		NI L_1;
		NI T2_;
		nimZeroMem((void*)(&line_1), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
		i_1 = (NI)0;
		i_2 = ((NI)0);
		T2_ = (*buffer_p0).lines.len;
		L_1 = T2_;
		{
			while (1) {
				NimStringV2 colontmpD_;
				if (!(i_2 < L_1)) goto LA4;
				colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
				i_1 = i_2;
				if (i_2 < 0 || i_2 >= (*buffer_p0).lines.len){ raiseIndexError2(i_2,(*buffer_p0).lines.len-1); goto BeforeRet_;
				}
				line_1 = (*buffer_p0).lines.p->data[i_2];
				colontmpD_ = toString__libZtext95editor_u54(line_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				prepareAdd((&result), colontmpD_.len + 0);
appendString((&result), colontmpD_);
				{
					NI T7_;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_16;
					T7_ = (*buffer_p0).lines.len;
					if (nimSubInt(T7_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_16)) { raiseOverflow(); goto BeforeRet_;
					};
					if (!(i_1 < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_16))) goto LA8_;
					nimAddCharV1((&result), 10);
				}
LA8_: ;
				i_2 += ((NI)1);
				{
					NI T12_;
					T12_ = (*buffer_p0).lines.len;
					if (!!((T12_ == L_1))) goto LA13_;
					failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_18);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA13_: ;
				if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
			} LA4: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0) {
}
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ, getLines__libZtext95editor_u520)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	{
		tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_1;
		NI i_1;
		NI L_1;
		NI T2_;
		line_1 = (tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA*)0;
		i_1 = ((NI)0);
		T2_ = (*buffer_p0).lines.len;
		L_1 = T2_;
		{
			while (1) {
				NimStringV2 T5_;
				if (!(i_1 < L_1)) goto LA4;
				if (i_1 < 0 || i_1 >= (*buffer_p0).lines.len){ raiseIndexError2(i_1,(*buffer_p0).lines.len-1); goto BeforeRet_;
				}
				line_1 = (&(*buffer_p0).lines.p->data[i_1]);
				T5_.len = 0; T5_.p = NIM_NIL;
				T5_ = toString__libZtext95editor_u54((*line_1));
				if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T5_); goto BeforeRet_;}
				add__stdZenumutils_u70((&result), T5_);
				i_1 += ((NI)1);
				{
					NI T8_;
					T8_ = (*buffer_p0).lines.len;
					if (!!((T8_ == L_1))) goto LA9_;
					failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_19);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA9_: ;
			} LA4: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getLine__libZtext95editor_u513)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI lineIdx_p1) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (lineIdx_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= lineIdx_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		result = TM__ju9cg9cywhFyBl2l4t4KQoNA_20;
		goto BeforeRet_;
	}
LA6_: ;
	if (lineIdx_p1 < 0 || lineIdx_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(lineIdx_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	result = toString__libZtext95editor_u54((*buffer_p0).lines.p->data[lineIdx_p1]);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, lineCount__libZtext95editor_u507)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0) {
	NI result;
	NI T1_;
	T1_ = (*buffer_p0).lines.len;
	result = T1_;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, len__libZtext95editor_u48)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA line_p0) {
	NI result;
	NI T1_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_22;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_23;
{	result = (NI)0;
	T1_ = line_p0.text.len;
	if (nimSubInt(line_p0.gapEnd, line_p0.gapStart, &TM__ju9cg9cywhFyBl2l4t4KQoNA_22)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimSubInt(T1_, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_22), &TM__ju9cg9cywhFyBl2l4t4KQoNA_23)) { raiseOverflow(); goto BeforeRet_;
	};
	result = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_23);
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, lineLength__libZtext95editor_u572)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI lineIdx_p1) {
	NI result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (lineIdx_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= lineIdx_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		result = ((NI)0);
		goto BeforeRet_;
	}
LA6_: ;
	if (lineIdx_p1 < 0 || lineIdx_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(lineIdx_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	result = len__libZtext95editor_u48((*buffer_p0).lines.p->data[lineIdx_p1]);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, clampCursor__libZtext95editor_u989)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI lineLen_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		if (!((*state_p0).cursor.line < ((NI)0))) goto LA3_;
		(*state_p0).cursor.line = ((NI)0);
	}
	goto LA1_;
LA3_: ;
	{
		NI T6_;
		NI T9_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_21;
		T6_ = (NI)0;
		T6_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!(T6_ <= (*state_p0).cursor.line)) goto LA7_;
		T9_ = (NI)0;
		T9_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T9_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_21)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_21);
	}
	goto LA1_;
LA7_: ;
LA1_: ;
	lineLen_1 = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		if (!((*state_p0).cursor.col < ((NI)0))) goto LA12_;
		(*state_p0).cursor.col = ((NI)0);
	}
	goto LA10_;
LA12_: ;
	{
		if (!(lineLen_1 < (*state_p0).cursor.col)) goto LA15_;
		(*state_p0).cursor.col = lineLen_1;
	}
	goto LA10_;
LA15_: ;
LA10_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursor__libZtext95editor_u992)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI line_p1, NI col_p2) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	(*state_p0).cursor.line = line_p1;
	(*state_p0).cursor.col = col_p2;
	clampCursor__libZtext95editor_u989(state_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*state_p0).desiredCol = (*state_p0).cursor.col;
	(*state_p0).selection.active = NIM_FALSE;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveGapTo__libZtext95editor_u106)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI pos_p1) {
{	{
		if (!(pos_p1 == (*line_p0).gapStart)) goto LA3_;
		goto BeforeRet_;
	}
LA3_: ;
	{
		NI moveCount_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_24;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_31;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_32;
		if (!(pos_p1 < (*line_p0).gapStart)) goto LA7_;
		if (nimSubInt((*line_p0).gapStart, pos_p1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_24)) { raiseOverflow(); goto BeforeRet_;
		};
		moveCount_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_24);
		{
			NI i_1;
			NI colontmp_;
			NI TM__ju9cg9cywhFyBl2l4t4KQoNA_25;
			NI res_1;
			i_1 = (NI)0;
			colontmp_ = (NI)0;
			if (nimSubInt(moveCount_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_25)) { raiseOverflow(); goto BeforeRet_;
			};
			colontmp_ = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_25);
			res_1 = colontmp_;
			{
				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_26;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_27;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_28;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_29;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_30;
					if (!(((NI)0) <= res_1)) goto LA11;
					i_1 = ((NI) (res_1));
					if (nimSubInt((*line_p0).gapEnd, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_26)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_26), i_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_27)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_27) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_27) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_27),(*line_p0).text.len-1); goto BeforeRet_;
					}
					if (nimSubInt((*line_p0).gapStart, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_28)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_28), i_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_29)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_29) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_29) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_29),(*line_p0).text.len-1); goto BeforeRet_;
					}
					(*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_27)] = (*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_29)];
					if (nimSubInt(res_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_30)) { raiseOverflow(); goto BeforeRet_;
					};
					res_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_30);
				} LA11: ;
			}
		}
		if (nimSubInt((*line_p0).gapEnd, moveCount_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_31)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapEnd = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_31);
		if (nimSubInt((*line_p0).gapStart, moveCount_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_32)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapStart = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_32);
	}
	goto LA5_;
LA7_: ;
	{
		NI moveCount_2;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_33;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_37;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_38;
		if (nimSubInt(pos_p1, (*line_p0).gapStart, &TM__ju9cg9cywhFyBl2l4t4KQoNA_33)) { raiseOverflow(); goto BeforeRet_;
		};
		moveCount_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_33);
		{
			NI i_2;
			NI i_3;
			i_2 = (NI)0;
			i_3 = ((NI)0);
			{
				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_34;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_35;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_36;
					if (!(i_3 < moveCount_2)) goto LA15;
					i_2 = i_3;
					if (nimAddInt((*line_p0).gapStart, i_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_34)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_34) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_34) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_34),(*line_p0).text.len-1); goto BeforeRet_;
					}
					if (nimAddInt((*line_p0).gapEnd, i_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_35)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_35) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_35) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_35),(*line_p0).text.len-1); goto BeforeRet_;
					}
					(*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_34)] = (*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_35)];
					if (nimAddInt(i_3, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_36)) { raiseOverflow(); goto BeforeRet_;
					};
					i_3 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_36);
				} LA15: ;
			}
		}
		if (nimAddInt((*line_p0).gapStart, moveCount_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_37)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapStart = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_37);
		if (nimAddInt((*line_p0).gapEnd, moveCount_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_38)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapEnd = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_38);
	}
LA5_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, ensureGapSize__libZtext95editor_u138)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI minSize_p1) {
	tySequence__48JTohSgTy339bRxHzUD8KA newText_1;
	NI currentGapSize_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_39;
	NI growBy_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_40;
	NI newSize_1;
	NI T6_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_41;
	NI afterStart_1;
	NI afterCount_1;
	NI T10_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_43;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_48;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	newText_1.len = 0; newText_1.p = NIM_NIL;
	if (nimSubInt((*line_p0).gapEnd, (*line_p0).gapStart, &TM__ju9cg9cywhFyBl2l4t4KQoNA_39)) { raiseOverflow(); goto LA1_;
	};
	currentGapSize_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_39);
	{
		if (!(minSize_p1 <= currentGapSize_1)) goto LA4_;
		eqdestroy___pureZunicode_u714(newText_1);
		goto BeforeRet_;
	}
LA4_: ;
	if (nimSubInt(minSize_p1, currentGapSize_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_40)) { raiseOverflow(); goto LA1_;
	};
	growBy_1 = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_40) >= ((NI)32)) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_40) : ((NI)32));
	T6_ = (*line_p0).text.len;
	if (nimAddInt(T6_, growBy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_41)) { raiseOverflow(); goto LA1_;
	};
	newSize_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_41);
	if ((newSize_1) < ((NI)0) || (newSize_1) > ((NI)2147483647)){ raiseRangeErrorI(newSize_1, ((NI)0), ((NI)2147483647)); goto LA1_;
	}
	newText_1 = newSeq__pureZunicode_u4536((newSize_1));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		i_2 = ((NI)0);
		{
			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_42;
				if (!(i_2 < (*line_p0).gapStart)) goto LA9;
				i_1 = i_2;
				if (i_1 < 0 || i_1 >= newText_1.len){ raiseIndexError2(i_1,newText_1.len-1); goto LA1_;
				}
				if (i_1 < 0 || i_1 >= (*line_p0).text.len){ raiseIndexError2(i_1,(*line_p0).text.len-1); goto LA1_;
				}
				newText_1.p->data[i_1] = (*line_p0).text.p->data[i_1];
				if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_42)) { raiseOverflow(); goto LA1_;
				};
				i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_42);
			} LA9: ;
		}
	}
	afterStart_1 = (*line_p0).gapEnd;
	T10_ = (*line_p0).text.len;
	if (nimSubInt(T10_, (*line_p0).gapEnd, &TM__ju9cg9cywhFyBl2l4t4KQoNA_43)) { raiseOverflow(); goto LA1_;
	};
	afterCount_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_43);
	{
		NI i_3;
		NI i_4;
		i_3 = (NI)0;
		i_4 = ((NI)0);
		{
			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_44;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_45;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_46;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_47;
				if (!(i_4 < afterCount_1)) goto LA13;
				i_3 = i_4;
				if (nimAddInt((*line_p0).gapStart, growBy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_44)) { raiseOverflow(); goto LA1_;
				};
				if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_44), i_3, &TM__ju9cg9cywhFyBl2l4t4KQoNA_45)) { raiseOverflow(); goto LA1_;
				};
				if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_45) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_45) >= newText_1.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_45),newText_1.len-1); goto LA1_;
				}
				if (nimAddInt(afterStart_1, i_3, &TM__ju9cg9cywhFyBl2l4t4KQoNA_46)) { raiseOverflow(); goto LA1_;
				};
				if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_46) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_46) >= (*line_p0).text.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_46),(*line_p0).text.len-1); goto LA1_;
				}
				newText_1.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_45)] = (*line_p0).text.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_46)];
				if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_47)) { raiseOverflow(); goto LA1_;
				};
				i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_47);
			} LA13: ;
		}
	}
	eqsink___pureZunicode_u723((&(*line_p0).text), newText_1);
	eqwasMoved___pureZunicode_u711((&newText_1));
	if (nimAddInt((*line_p0).gapStart, growBy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_48)) { raiseOverflow(); goto LA1_;
	};
	(*line_p0).gapEnd = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_48);
	{
		LA1_:;
	}
	{
		eqdestroy___pureZunicode_u714(newText_1);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, insertRune__libZtext95editor_u183)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1, NI32 r_p2) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_49;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	moveGapTo__libZtext95editor_u106(line_p0, col_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	ensureGapSize__libZtext95editor_u138(line_p0, ((NI)1));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if ((*line_p0).gapStart < 0 || (*line_p0).gapStart >= (*line_p0).text.len){ raiseIndexError2((*line_p0).gapStart,(*line_p0).text.len-1); goto BeforeRet_;
	}
	(*line_p0).text.p->data[(*line_p0).gapStart] = r_p2;
	if (nimAddInt((*line_p0).gapStart, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_49)) { raiseOverflow(); goto BeforeRet_;
	};
	(*line_p0).gapStart = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_49);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, insertRune__libZtext95editor_u644)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2, NI32 r_p3) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (line_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= line_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		goto BeforeRet_;
	}
LA6_: ;
	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	insertRune__libZtext95editor_u183((&(*buffer_p0).lines.p->data[line_p1]), col_p2, r_p3);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*buffer_p0).modified = NIM_TRUE;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, insertTextAtCursor__libZtext95editor_u1056)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NimStringV2 text_p1) {
	tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	runes_1.len = 0; runes_1.p = NIM_NIL;
	runes_1 = toRunes__pureZunicode_u7844(text_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI32* r_1;
		NI i_1;
		NI L_1;
		NI T2_;
		r_1 = (NI32*)0;
		i_1 = ((NI)0);
		T2_ = runes_1.len;
		L_1 = T2_;
		{
			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_50;
				if (!(i_1 < L_1)) goto LA4;
				if (i_1 < 0 || i_1 >= runes_1.len){ raiseIndexError2(i_1,runes_1.len-1); goto BeforeRet_;
				}
				r_1 = (&runes_1.p->data[i_1]);
				insertRune__libZtext95editor_u644((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col, (*r_1));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_50)) { raiseOverflow(); goto BeforeRet_;
				};
				(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_50);
				i_1 += ((NI)1);
				{
					NI T7_;
					T7_ = runes_1.len;
					if (!!((T7_ == L_1))) goto LA8_;
					failedAssertImpl__stdZassertions_u234(TM__ju9cg9cywhFyBl2l4t4KQoNA_51);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA8_: ;
			} LA4: ;
		}
	}
	(*state_p0).desiredCol = (*state_p0).cursor.col;
	eqdestroy___pureZunicode_u714(runes_1);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, insertChar__libZtext95editor_u633)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2, NIM_CHAR ch_p3) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (line_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= line_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		goto BeforeRet_;
	}
LA6_: ;
	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	insertRune__libZtext95editor_u183((&(*buffer_p0).lines.p->data[line_p1]), col_p2, ((NI32) (((NU8)(ch_p3)))));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*buffer_p0).modified = NIM_TRUE;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, insertCharAtCursor__libZtext95editor_u1049)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NIM_CHAR ch_p1) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_52;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	insertChar__libZtext95editor_u633((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col, ch_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_52)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_52);
	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, deleteRuneBackward__libZtext95editor_u201)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (col_p1 <= ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (NI)0;
		T5_ = len__libZtext95editor_u48((*line_p0));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T3_ = (T5_ < col_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		goto BeforeRet_;
	}
LA6_: ;
	moveGapTo__libZtext95editor_u106(line_p0, col_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_53;
		if (!(((NI)0) < (*line_p0).gapStart)) goto LA10_;
		if (nimSubInt((*line_p0).gapStart, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_53)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapStart = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_53);
	}
LA10_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, deleteCharBackward__libZtext95editor_u677)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (line_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= line_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		goto BeforeRet_;
	}
LA6_: ;
	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	deleteRuneBackward__libZtext95editor_u201((&(*buffer_p0).lines.p->data[line_p1]), col_p2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*buffer_p0).modified = NIM_TRUE;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZtext95editor_u348)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0, tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA src_p1) {
	if ((*dest_p0).text.p != src_p1.text.p) {	eqdestroy___pureZunicode_u714((*dest_p0).text);
	}
(*dest_p0).text.len = src_p1.text.len; (*dest_p0).text.p = src_p1.text.p;
	(*dest_p0).gapStart = src_p1.gapStart;
	(*dest_p0).gapEnd = src_p1.gapEnd;
}
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___libZtext95editor_u336)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* dest_p0) {
	(*dest_p0).text.len = 0; (*dest_p0).text.p = NIM_NIL;
	(*dest_p0).gapStart = 0;
	(*dest_p0).gapEnd = 0;
}
N_LIB_PRIVATE N_NIMCALL(void, deleteNewline__libZtext95editor_u794)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1) {
	NimStringV2 currentText_1;
	NimStringV2 nextText_1;
	NimStringV2 colontmpD_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_57;
	NimStringV2 T9_;
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T10_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_58;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	currentText_1.len = 0; currentText_1.p = NIM_NIL;
	nextText_1.len = 0; nextText_1.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	{
		NIM_BOOL T4_;
		NI T6_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_56;
		T4_ = (NIM_BOOL)0;
		T4_ = (line_p1 < ((NI)0));
		if (T4_) goto LA5_;
		T6_ = (*buffer_p0).lines.len;
		if (nimSubInt(T6_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_56)) { raiseOverflow(); goto LA1_;
		};
		T4_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_56) <= line_p1);
LA5_: ;
		if (!T4_) goto LA7_;
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
		if (nextText_1.p && !(nextText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(nextText_1.p);
}
		if (currentText_1.p && !(currentText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(currentText_1.p);
}
		goto BeforeRet_;
	}
LA7_: ;
	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto LA1_;
	}
	currentText_1 = toString__libZtext95editor_u54((*buffer_p0).lines.p->data[line_p1]);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (nimAddInt(line_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_57)) { raiseOverflow(); goto LA1_;
	};
	if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_57) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_57) >= (*buffer_p0).lines.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_57),(*buffer_p0).lines.len-1); goto LA1_;
	}
	nextText_1 = toString__libZtext95editor_u54((*buffer_p0).lines.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_57)]);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto LA1_;
	}
	T9_.len = 0; T9_.p = NIM_NIL;
	T9_ = rawNewString(currentText_1.len + nextText_1.len + 0);
appendString((&T9_), currentText_1);
appendString((&T9_), nextText_1);
	colontmpD_ = T9_;
	T10_ = newEditorLine__libZtext95editor_u39(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u339(&T10_); goto LA1_;}
	eqsink___libZtext95editor_u348((&(*buffer_p0).lines.p->data[line_p1]), T10_);
	if (nimAddInt(line_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_58)) { raiseOverflow(); goto LA1_;
	};
	if (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_58)) < ((NI)0) || ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_58)) > ((NI)2147483647)){ raiseRangeErrorI((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_58), ((NI)0), ((NI)2147483647)); goto LA1_;
	}
	delete__libZtext95editor_u802((&(*buffer_p0).lines), ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_58)));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	(*buffer_p0).modified = NIM_TRUE;
	{
		LA1_:;
	}
	{
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
		if (nextText_1.p && !(nextText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(nextText_1.p);
}
		if (currentText_1.p && !(currentText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(currentText_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, backspaceAtCursor__libZtext95editor_u1071)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_54;
		if (!(((NI)0) < (*state_p0).cursor.col)) goto LA3_;
		deleteCharBackward__libZtext95editor_u677((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_54)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_54);
		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA3_: ;
	{
		NI prevLineLen_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_55;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_59;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_60;
		if (!(((NI)0) < (*state_p0).cursor.line)) goto LA6_;
		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_55)) { raiseOverflow(); goto BeforeRet_;
		};
		prevLineLen_1 = lineLength__libZtext95editor_u572((*state_p0).buffer, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_55));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_59)) { raiseOverflow(); goto BeforeRet_;
		};
		deleteNewline__libZtext95editor_u794((*state_p0).buffer, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_59));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_60)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_60);
		(*state_p0).cursor.col = prevLineLen_1;
		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA6_: ;
LA1_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, deleteRune__libZtext95editor_u191)(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA* line_p0, NI col_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (col_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (NI)0;
		T5_ = len__libZtext95editor_u48((*line_p0));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T3_ = (T5_ <= col_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		goto BeforeRet_;
	}
LA6_: ;
	moveGapTo__libZtext95editor_u106(line_p0, col_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI T10_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_61;
		T10_ = (*line_p0).text.len;
		if (!((*line_p0).gapEnd < T10_)) goto LA11_;
		if (nimAddInt((*line_p0).gapEnd, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_61)) { raiseOverflow(); goto BeforeRet_;
		};
		(*line_p0).gapEnd = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_61);
	}
LA11_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, deleteChar__libZtext95editor_u670)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (line_p1 < ((NI)0));
		if (T3_) goto LA4_;
		T5_ = (*buffer_p0).lines.len;
		T3_ = (T5_ <= line_p1);
LA4_: ;
		if (!T3_) goto LA6_;
		goto BeforeRet_;
	}
LA6_: ;
	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto BeforeRet_;
	}
	deleteRune__libZtext95editor_u191((&(*buffer_p0).lines.p->data[line_p1]), col_p2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*buffer_p0).modified = NIM_TRUE;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, deleteAtCursor__libZtext95editor_u1068)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI lineLen_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	lineLen_1 = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		if (!((*state_p0).cursor.col < lineLen_1)) goto LA3_;
		deleteChar__libZtext95editor_u670((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA1_;
LA3_: ;
	{
		NI T6_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_62;
		T6_ = (NI)0;
		T6_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T6_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_62)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((*state_p0).cursor.line < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_62))) goto LA7_;
		deleteNewline__libZtext95editor_u794((*state_p0).buffer, (*state_p0).cursor.line);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA1_;
LA7_: ;
LA1_: ;
	}BeforeRet_: ;
}
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = !(((*s_p0).p == ((NimStrPayload*) NIM_NIL)));
		if (!(T3_)) goto LA4_;
		T3_ = ((NI)((*(*s_p0).p).cap & ((NI)1073741824)) == ((NI)1073741824));
LA4_: ;
		if (!T3_) goto LA5_;
		nimPrepareStrMutationImpl__system_u2391(s_p0);
	}
LA5_: ;
}
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1292)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1) {
	NimStringV2 result;
	NI a_1;
	NI L_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_64;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_65;
{	result.len = 0; result.p = NIM_NIL;
	a_1 = x_p1.a;
	if (nimSubInt(x_p1.b, a_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_64)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_64), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_65)) { raiseOverflow(); goto BeforeRet_;
	};
	L_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_65);
	if ((L_1) < ((NI)0) || (L_1) > ((NI)2147483647)){ raiseRangeErrorI(L_1, ((NI)0), ((NI)2147483647)); goto BeforeRet_;
	}
	result = mnewString((L_1));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		i_2 = ((NI)0);
		{
			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_66;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_67;
				if (!(i_2 < L_1)) goto LA3;
				i_1 = i_2;
				if (i_1 < 0 || i_1 >= result.len){ raiseIndexError2(i_1,result.len-1); goto BeforeRet_;
				}
				nimPrepareStrMutationV2((&result));
				if (nimAddInt(i_1, a_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_66)) { raiseOverflow(); goto BeforeRet_;
				};
				if ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_66) < 0 || (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_66) >= s_p0.len){ raiseIndexError2((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_66),s_p0.len-1); goto BeforeRet_;
				}
				result.p->data[i_1] = s_p0.p->data[(NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_66)];
				if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_67)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_67);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZstrbasics_u48)(NI a_p0, NI b_p1) {
	tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA result;
	result.a = a_p0;
	result.b = b_p1;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, insertNewline__libZtext95editor_u684)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI line_p1, NI col_p2) {
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA currentLine_1;
	NimStringV2 lineText_1;
	NimStringV2 beforeText_1;
	NimStringV2 afterText_1;
	NimStringV2 T9_;
	NimStringV2 T16_;
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T23_;
	tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA T24_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_71;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&currentLine_1), sizeof(tyObject_EditorLine__aI5fG9apm9bKlXMth9azLkNLA));
	lineText_1.len = 0; lineText_1.p = NIM_NIL;
	beforeText_1.len = 0; beforeText_1.p = NIM_NIL;
	afterText_1.len = 0; afterText_1.p = NIM_NIL;
	{
		NIM_BOOL T4_;
		NI T6_;
		T4_ = (NIM_BOOL)0;
		T4_ = (line_p1 < ((NI)0));
		if (T4_) goto LA5_;
		T6_ = (*buffer_p0).lines.len;
		T4_ = (T6_ <= line_p1);
LA5_: ;
		if (!T4_) goto LA7_;
		if (afterText_1.p && !(afterText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(afterText_1.p);
}
		if (beforeText_1.p && !(beforeText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(beforeText_1.p);
}
		if (lineText_1.p && !(lineText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(lineText_1.p);
}
		goto BeforeRet_;
	}
LA7_: ;
	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto LA1_;
	}
	currentLine_1 = (*buffer_p0).lines.p->data[line_p1];
	lineText_1 = toString__libZtext95editor_u54(currentLine_1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T9_.len = 0; T9_.p = NIM_NIL;
	{
		if (!(col_p2 <= ((NI)0))) goto LA12_;
		beforeText_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_63;
	}
	goto LA10_;
LA12_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_68;
		tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T15_;
		if (nimSubInt(((col_p2 <= lineText_1.len) ? col_p2 : lineText_1.len), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_68)) { raiseOverflow(); goto LA1_;
		};
		T15_ = dotdot___stdZstrbasics_u48(((NI)0), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_68));
		beforeText_1 = X5BX5D___pureZstrutils_u1292(lineText_1, T15_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA10_: ;
	T16_.len = 0; T16_.p = NIM_NIL;
	{
		if (!(lineText_1.len <= col_p2)) goto LA19_;
		afterText_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_69;
	}
	goto LA17_;
LA19_: ;
	{
		NI colontmpD_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_70;
		tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T22_;
		colontmpD_ = (NI)0;
		colontmpD_ = col_p2;
		if (nimSubInt(lineText_1.len, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_70)) { raiseOverflow(); goto LA1_;
		};
		T22_ = dotdot___stdZstrbasics_u48(colontmpD_, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_70));
		afterText_1 = X5BX5D___pureZstrutils_u1292(lineText_1, T22_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA17_: ;
	if (line_p1 < 0 || line_p1 >= (*buffer_p0).lines.len){ raiseIndexError2(line_p1,(*buffer_p0).lines.len-1); goto LA1_;
	}
	T23_ = newEditorLine__libZtext95editor_u39(beforeText_1);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u339(&T23_); goto LA1_;}
	eqsink___libZtext95editor_u348((&(*buffer_p0).lines.p->data[line_p1]), T23_);
	T24_ = newEditorLine__libZtext95editor_u39(afterText_1);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___libZtext95editor_u339(&T24_); goto LA1_;}
	if (nimAddInt(line_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_71)) { raiseOverflow(); goto LA1_;
	};
	if (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_71)) < ((NI)0) || ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_71)) > ((NI)2147483647)){ raiseRangeErrorI((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_71), ((NI)0), ((NI)2147483647)); goto LA1_;
	}
	insert__libZtext95editor_u743((&(*buffer_p0).lines), T24_, ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_71)));
	(*buffer_p0).modified = NIM_TRUE;
	{
		LA1_:;
	}
	{
		if (afterText_1.p && !(afterText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(afterText_1.p);
}
		if (beforeText_1.p && !(beforeText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(beforeText_1.p);
}
		if (lineText_1.p && !(lineText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(lineText_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, insertNewlineAtCursor__libZtext95editor_u1082)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_72;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	insertNewline__libZtext95editor_u684((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimAddInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_72)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_72);
	(*state_p0).cursor.col = ((NI)0);
	(*state_p0).desiredCol = ((NI)0);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, insertTabAtCursor__libZtext95editor_u1088)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NIM_BOOL useSoftTabs_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI spaces_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_73;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_74;
		if (!useSoftTabs_p1) goto LA3_;
		if ((*state_p0).tabWidth == 0){ raiseDivByZero(); goto BeforeRet_;
		}
		if (nimModInt((*state_p0).cursor.col, (*state_p0).tabWidth, &TM__ju9cg9cywhFyBl2l4t4KQoNA_73)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimSubInt((*state_p0).tabWidth, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_73), &TM__ju9cg9cywhFyBl2l4t4KQoNA_74)) { raiseOverflow(); goto BeforeRet_;
		};
		spaces_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_74);
		{
			NI i_1;
			NI i_2;
			i_1 = (NI)0;
			i_2 = ((NI)0);
			{
				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_75;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_76;
					if (!(i_2 < spaces_1)) goto LA7;
					i_1 = i_2;
					insertChar__libZtext95editor_u633((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col, 32);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_75)) { raiseOverflow(); goto BeforeRet_;
					};
					(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_75);
					if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_76)) { raiseOverflow(); goto BeforeRet_;
					};
					i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_76);
				} LA7: ;
			}
		}
	}
	goto LA1_;
LA3_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_77;
		insertChar__libZtext95editor_u633((*state_p0).buffer, (*state_p0).cursor.line, (*state_p0).cursor.col, 9);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_77)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_77);
	}
LA1_: ;
	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorRelative__libZtext95editor_u996)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI deltaLine_p1, NI deltaCol_p2) {
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_78;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_79;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	if (nimAddInt((*state_p0).cursor.line, deltaLine_p1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_78)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_78);
	if (nimAddInt((*state_p0).cursor.col, deltaCol_p2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_79)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_79);
	clampCursor__libZtext95editor_u989(state_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorUp__libZtext95editor_u1008)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_80;
		NI T5_;
		if (!(((NI)0) < (*state_p0).cursor.line)) goto LA3_;
		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_80)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_80);
		T5_ = (NI)0;
		T5_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*state_p0).cursor.col = (((*state_p0).desiredCol <= T5_) ? (*state_p0).desiredCol : T5_);
	}
LA3_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorDown__libZtext95editor_u1014)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI T3_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_81;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_82;
		NI T6_;
		T3_ = (NI)0;
		T3_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T3_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_81)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((*state_p0).cursor.line < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_81))) goto LA4_;
		if (nimAddInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_82)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_82);
		T6_ = (NI)0;
		T6_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*state_p0).cursor.col = (((*state_p0).desiredCol <= T6_) ? (*state_p0).desiredCol : T6_);
	}
LA4_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorLeft__libZtext95editor_u1020)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_83;
		if (!(((NI)0) < (*state_p0).cursor.col)) goto LA3_;
		if (nimSubInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_83)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_83);
		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA3_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_84;
		NI T8_;
		if (!(((NI)0) < (*state_p0).cursor.line)) goto LA6_;
		if (nimSubInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_84)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_84);
		T8_ = (NI)0;
		T8_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*state_p0).cursor.col = T8_;
		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA6_: ;
LA1_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorRight__libZtext95editor_u1030)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI lineLen_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	lineLen_1 = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_85;
		if (!((*state_p0).cursor.col < lineLen_1)) goto LA3_;
		if (nimAddInt((*state_p0).cursor.col, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_85)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.col = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_85);
		(*state_p0).desiredCol = (*state_p0).cursor.col;
	}
	goto LA1_;
LA3_: ;
	{
		NI T6_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_86;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_87;
		T6_ = (NI)0;
		T6_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T6_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_86)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((*state_p0).cursor.line < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_86))) goto LA7_;
		if (nimAddInt((*state_p0).cursor.line, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_87)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_87);
		(*state_p0).cursor.col = ((NI)0);
		(*state_p0).desiredCol = ((NI)0);
	}
	goto LA1_;
LA7_: ;
LA1_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToLineStart__libZtext95editor_u1041)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	(*state_p0).cursor.col = ((NI)0);
	(*state_p0).desiredCol = ((NI)0);
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToLineEnd__libZtext95editor_u1043)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	T1_ = (NI)0;
	T1_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*state_p0).cursor.col = T1_;
	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToBufferStart__libZtext95editor_u1045)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	(*state_p0).cursor.line = ((NI)0);
	(*state_p0).cursor.col = ((NI)0);
	(*state_p0).desiredCol = ((NI)0);
}
N_LIB_PRIVATE N_NIMCALL(void, moveCursorToBufferEnd__libZtext95editor_u1047)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NI T1_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_88;
	NI T2_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	T1_ = (NI)0;
	T1_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(T1_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_88)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).cursor.line = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_88);
	T2_ = (NI)0;
	T2_ = lineLength__libZtext95editor_u572((*state_p0).buffer, (*state_p0).cursor.line);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*state_p0).cursor.col = T2_;
	(*state_p0).desiredCol = (*state_p0).cursor.col;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, updateEditorScroll__libZtext95editor_u1616)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI viewportHeight_p1, NI viewportWidth_p2) {
	NI contentHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_89;
	NI contentWidth_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_90;
	NI maxScrollY_1;
	NI T15_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_97;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	if (nimSubInt(viewportHeight_p1, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_89)) { raiseOverflow(); goto BeforeRet_;
	};
	contentHeight_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_89);
	if (nimSubInt(viewportWidth_p2, ((NI)4), &TM__ju9cg9cywhFyBl2l4t4KQoNA_90)) { raiseOverflow(); goto BeforeRet_;
	};
	contentWidth_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_90);
	{
		if (!((*state_p0).cursor.line < (*state_p0).scrollY)) goto LA3_;
		(*state_p0).scrollY = (*state_p0).cursor.line;
	}
	goto LA1_;
LA3_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_91;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_92;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_93;
		if (nimAddInt((*state_p0).scrollY, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_91)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_91) <= (*state_p0).cursor.line)) goto LA6_;
		if (nimSubInt((*state_p0).cursor.line, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_92)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_92), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_93)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).scrollY = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_93);
	}
	goto LA1_;
LA6_: ;
LA1_: ;
	{
		if (!((*state_p0).cursor.col < (*state_p0).scrollX)) goto LA10_;
		(*state_p0).scrollX = (*state_p0).cursor.col;
	}
	goto LA8_;
LA10_: ;
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_94;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_95;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_96;
		if (nimAddInt((*state_p0).scrollX, contentWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_94)) { raiseOverflow(); goto BeforeRet_;
		};
		if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_94) <= (*state_p0).cursor.col)) goto LA13_;
		if (nimSubInt((*state_p0).cursor.col, contentWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_95)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_95), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_96)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).scrollX = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_96);
	}
	goto LA8_;
LA13_: ;
LA8_: ;
	T15_ = (NI)0;
	T15_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(T15_, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_97)) { raiseOverflow(); goto BeforeRet_;
	};
	maxScrollY_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_97)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_97));
	{
		if (!((*state_p0).scrollY < ((NI)0))) goto LA18_;
		(*state_p0).scrollY = ((NI)0);
	}
	goto LA16_;
LA18_: ;
	{
		if (!(maxScrollY_1 < (*state_p0).scrollY)) goto LA21_;
		(*state_p0).scrollY = maxScrollY_1;
	}
	goto LA16_;
LA21_: ;
LA16_: ;
	{
		if (!((*state_p0).scrollX < ((NI)0))) goto LA25_;
		(*state_p0).scrollX = ((NI)0);
	}
LA25_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw, generateMinimap__libZtext95editor_u1105)(tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p0, NI width_p1, NI height_p2, NI scrollY_p3, NI viewportHeight_p4, tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw selection_p5) {
	tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw result;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ content_1;
	tySequence__iEoNTfSuEpSv8aQiyfWQQw selectionMask_1;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmp_;
	tySequence__iEoNTfSuEpSv8aQiyfWQQw colontmp__2;
	NI linesPerBrailleRow_1;
	NI charsPerBrailleCol_1;
	NI totalMinimapLines_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_141;
	NI minimapStartLine_1;
	NI minimapEndLine_1;
	NI selStartLine_1;
	NI selEndLine_1;
	NI selStartCol_1;
	NI selEndCol_1;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ blitTmp_3;
	tySequence__iEoNTfSuEpSv8aQiyfWQQw blitTmp_4;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw));
	content_1.len = 0; content_1.p = NIM_NIL;
	selectionMask_1.len = 0; selectionMask_1.p = NIM_NIL;
	colontmp_.len = 0; colontmp_.p = NIM_NIL;
	colontmp__2.len = 0; colontmp__2.p = NIM_NIL;
	content_1.len = 0; content_1.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	selectionMask_1.len = 0; selectionMask_1.p = (tySequence__iEoNTfSuEpSv8aQiyfWQQw_Content*) newSeqPayload(0, sizeof(tySequence__shxop0zPIs5Ec3k71aCLuQ), NIM_ALIGNOF(tySequence__shxop0zPIs5Ec3k71aCLuQ));
	linesPerBrailleRow_1 = ((NI)4);
	charsPerBrailleCol_1 = ((NI)2);
	if (nimMulInt(height_p2, linesPerBrailleRow_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_141)) { raiseOverflow(); goto LA1_;
	};
	totalMinimapLines_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_141);
	minimapStartLine_1 = ((NI)0);
	minimapEndLine_1 = lineCount__libZtext95editor_u507(buffer_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		NIM_BOOL T4_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_142;
		NI T6_;
		NI centerLine_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_143;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_144;
		NI T9_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_145;
		T4_ = (NIM_BOOL)0;
		T4_ = (((NI)0) < viewportHeight_p4);
		if (!(T4_)) goto LA5_;
		if (nimMulInt(totalMinimapLines_1, ((NI)3), &TM__ju9cg9cywhFyBl2l4t4KQoNA_142)) { raiseOverflow(); goto LA1_;
		};
		T6_ = (NI)0;
		T6_ = lineCount__libZtext95editor_u507(buffer_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		T4_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_142) < T6_);
LA5_: ;
		if (!T4_) goto LA7_;
		if (nimAddInt(scrollY_p3, (NI)((viewportHeight_p4) / (((NI)2))), &TM__ju9cg9cywhFyBl2l4t4KQoNA_143)) { raiseOverflow(); goto LA1_;
		};
		centerLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_143);
		if (nimSubInt(centerLine_1, (NI)((totalMinimapLines_1) / (((NI)2))), &TM__ju9cg9cywhFyBl2l4t4KQoNA_144)) { raiseOverflow(); goto LA1_;
		};
		minimapStartLine_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_144)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_144));
		T9_ = (NI)0;
		T9_ = lineCount__libZtext95editor_u507(buffer_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (nimAddInt(minimapStartLine_1, totalMinimapLines_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_145)) { raiseOverflow(); goto LA1_;
		};
		minimapEndLine_1 = ((T9_ <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_145)) ? T9_ : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_145));
		{
			NI T12_;
			NI TM__ju9cg9cywhFyBl2l4t4KQoNA_146;
			T12_ = (NI)0;
			T12_ = lineCount__libZtext95editor_u507(buffer_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			if (!(minimapEndLine_1 == T12_)) goto LA13_;
			if (nimSubInt(minimapEndLine_1, totalMinimapLines_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_146)) { raiseOverflow(); goto LA1_;
			};
			minimapStartLine_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_146)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_146));
		}
LA13_: ;
	}
LA7_: ;
	selStartLine_1 = (NI)0;
	selEndLine_1 = (NI)0;
	selStartCol_1 = (NI)0;
	selEndCol_1 = (NI)0;
	{
		if (!selection_p5.active) goto LA17_;
		selStartLine_1 = ((selection_p5.start.line <= selection_p5.end_0.line) ? selection_p5.start.line : selection_p5.end_0.line);
		selEndLine_1 = ((selection_p5.start.line >= selection_p5.end_0.line) ? selection_p5.start.line : selection_p5.end_0.line);
		{
			if (!(selection_p5.start.line == selection_p5.end_0.line)) goto LA21_;
			selStartCol_1 = ((selection_p5.start.col <= selection_p5.end_0.col) ? selection_p5.start.col : selection_p5.end_0.col);
			selEndCol_1 = ((selection_p5.start.col >= selection_p5.end_0.col) ? selection_p5.start.col : selection_p5.end_0.col);
		}
		goto LA19_;
LA21_: ;
		{
			if (!(selection_p5.start.line < selection_p5.end_0.line)) goto LA24_;
			selStartCol_1 = selection_p5.start.col;
			selEndCol_1 = selection_p5.end_0.col;
		}
		goto LA19_;
LA24_: ;
		{
			selStartCol_1 = selection_p5.end_0.col;
			selEndCol_1 = selection_p5.start.col;
		}
LA19_: ;
	}
LA17_: ;
	{
		NI row_1;
		NI i_1;
		row_1 = (NI)0;
		i_1 = ((NI)0);
		{
			while (1) {
				NimStringV2 minimapLine_1;
				tySequence__shxop0zPIs5Ec3k71aCLuQ selectionRow_1;
				NimStringV2 blitTmp_1;
				tySequence__shxop0zPIs5Ec3k71aCLuQ blitTmp_2;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_168;
				if (!(i_1 < height_p2)) goto LA29;
				minimapLine_1.len = 0; minimapLine_1.p = NIM_NIL;
				selectionRow_1.len = 0; selectionRow_1.p = NIM_NIL;
				row_1 = i_1;
				minimapLine_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_147;
				selectionRow_1.len = 0; selectionRow_1.p = (tySequence__shxop0zPIs5Ec3k71aCLuQ_Content*) newSeqPayload(0, sizeof(NIM_BOOL), NIM_ALIGNOF(NIM_BOOL));
				{
					NI col_1;
					NI i_2;
					col_1 = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							NimStringV2 brailleChar_1;
							NI startLine_1;
							NI TM__ju9cg9cywhFyBl2l4t4KQoNA_148;
							NI TM__ju9cg9cywhFyBl2l4t4KQoNA_149;
							NI endLine_1;
							NI TM__ju9cg9cywhFyBl2l4t4KQoNA_150;
							NI density_1;
							NIM_BOOL isSelected_1;
							NimStringV2 T89_;
							NI TM__ju9cg9cywhFyBl2l4t4KQoNA_167;
							if (!(i_2 < width_p1)) goto LA33;
							brailleChar_1.len = 0; brailleChar_1.p = NIM_NIL;
							col_1 = i_2;
							if (nimMulInt(row_1, linesPerBrailleRow_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_148)) { raiseOverflow(); goto LA30_;
							};
							if (nimAddInt(minimapStartLine_1, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_148), &TM__ju9cg9cywhFyBl2l4t4KQoNA_149)) { raiseOverflow(); goto LA30_;
							};
							startLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_149);
							if (nimAddInt(startLine_1, linesPerBrailleRow_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_150)) { raiseOverflow(); goto LA30_;
							};
							endLine_1 = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_150) <= minimapEndLine_1) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_150) : minimapEndLine_1);
							density_1 = ((NI)0);
							{
								NI lineIdx_1;
								NI i_3;
								lineIdx_1 = (NI)0;
								i_3 = startLine_1;
								{
									while (1) {
										NI TM__ju9cg9cywhFyBl2l4t4KQoNA_153;
										if (!(i_3 < endLine_1)) goto LA36;
										lineIdx_1 = i_3;
										{
											NI T39_;
											NI lineLen_1;
											T39_ = (NI)0;
											T39_ = lineCount__libZtext95editor_u507(buffer_p0);
											if (NIM_UNLIKELY(*nimErr_)) goto LA30_;
											if (!(lineIdx_1 < T39_)) goto LA40_;
											lineLen_1 = lineLength__libZtext95editor_u572(buffer_p0, lineIdx_1);
											if (NIM_UNLIKELY(*nimErr_)) goto LA30_;
											{
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_151;
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_152;
												if (nimMulInt(col_1, charsPerBrailleCol_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_151)) { raiseOverflow(); goto LA30_;
												};
												if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_151) < lineLen_1)) goto LA44_;
												if (nimAddInt(density_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_152)) { raiseOverflow(); goto LA30_;
												};
												density_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_152);
											}
LA44_: ;
										}
LA40_: ;
										if (nimAddInt(i_3, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_153)) { raiseOverflow(); goto LA30_;
										};
										i_3 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_153);
									} LA36: ;
								}
							}
							isSelected_1 = NIM_FALSE;
							{
								if (!selection_p5.active) goto LA48_;
								{
									NI lineIdx_2;
									NI i_4;
									lineIdx_2 = (NI)0;
									i_4 = startLine_1;
									{
										while (1) {
											NI TM__ju9cg9cywhFyBl2l4t4KQoNA_157;
											if (!(i_4 < endLine_1)) goto LA52;
											lineIdx_2 = i_4;
											{
												NIM_BOOL T55_;
												NIM_BOOL T56_;
												NI T59_;
												NI colStart_1;
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_154;
												NI colEnd_1;
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_155;
												NI TM__ju9cg9cywhFyBl2l4t4KQoNA_156;
												T55_ = (NIM_BOOL)0;
												T56_ = (NIM_BOOL)0;
												T56_ = (selStartLine_1 <= lineIdx_2);
												if (!(T56_)) goto LA57_;
												T56_ = (lineIdx_2 <= selEndLine_1);
LA57_: ;
												T55_ = T56_;
												if (!(T55_)) goto LA58_;
												T59_ = (NI)0;
												T59_ = lineCount__libZtext95editor_u507(buffer_p0);
												if (NIM_UNLIKELY(*nimErr_)) goto LA30_;
												T55_ = (lineIdx_2 < T59_);
LA58_: ;
												if (!T55_) goto LA60_;
												if (nimMulInt(col_1, charsPerBrailleCol_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_154)) { raiseOverflow(); goto LA30_;
												};
												colStart_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_154);
												if (nimAddInt(col_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_155)) { raiseOverflow(); goto LA30_;
												};
												if (nimMulInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_155), charsPerBrailleCol_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_156)) { raiseOverflow(); goto LA30_;
												};
												colEnd_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_156);
												{
													NIM_BOOL T64_;
													T64_ = (NIM_BOOL)0;
													T64_ = (lineIdx_2 == selStartLine_1);
													if (!(T64_)) goto LA65_;
													T64_ = (lineIdx_2 == selEndLine_1);
LA65_: ;
													if (!T64_) goto LA66_;
													{
														NIM_BOOL T70_;
														T70_ = (NIM_BOOL)0;
														T70_ = (selStartCol_1 < colEnd_1);
														if (!(T70_)) goto LA71_;
														T70_ = (colStart_1 < selEndCol_1);
LA71_: ;
														if (!T70_) goto LA72_;
														isSelected_1 = NIM_TRUE;
														goto LA50;
													}
LA72_: ;
												}
												goto LA62_;
LA66_: ;
												{
													if (!(lineIdx_2 == selStartLine_1)) goto LA75_;
													{
														if (!(selStartCol_1 < colEnd_1)) goto LA79_;
														isSelected_1 = NIM_TRUE;
														goto LA50;
													}
LA79_: ;
												}
												goto LA62_;
LA75_: ;
												{
													if (!(lineIdx_2 == selEndLine_1)) goto LA82_;
													{
														if (!(colStart_1 < selEndCol_1)) goto LA86_;
														isSelected_1 = NIM_TRUE;
														goto LA50;
													}
LA86_: ;
												}
												goto LA62_;
LA82_: ;
												{
													isSelected_1 = NIM_TRUE;
													goto LA50;
												}
LA62_: ;
											}
LA60_: ;
											if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_157)) { raiseOverflow(); goto LA30_;
											};
											i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_157);
										} LA52: ;
									}
								} LA50: ;
							}
LA48_: ;
							T89_.len = 0; T89_.p = NIM_NIL;
							{
								if (!(density_1 == ((NI)0))) goto LA92_;
								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_158;
							}
							goto LA90_;
LA92_: ;
							{
								if (!(density_1 == ((NI)1))) goto LA95_;
								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_160;
							}
							goto LA90_;
LA95_: ;
							{
								if (!(density_1 == ((NI)2))) goto LA98_;
								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_162;
							}
							goto LA90_;
LA98_: ;
							{
								if (!(density_1 == ((NI)3))) goto LA101_;
								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_164;
							}
							goto LA90_;
LA101_: ;
							{
								brailleChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_166;
							}
LA90_: ;
							prepareAdd((&minimapLine_1), brailleChar_1.len + 0);
appendString((&minimapLine_1), brailleChar_1);
							add__niminiZruntime_u5425((&selectionRow_1), isSelected_1);
							if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_167)) { raiseOverflow(); goto LA30_;
							};
							i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_167);
						} LA33: ;
					}
				}
				blitTmp_1 = minimapLine_1;
				add__stdZenumutils_u70((&content_1), blitTmp_1);
				blitTmp_2 = selectionRow_1;
				add__libZtext95editor_u1181((&selectionMask_1), blitTmp_2);
				if (nimAddInt(i_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_168)) { raiseOverflow(); goto LA30_;
				};
				i_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_168);
				{
					LA30_:;
				}
				{
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			} LA29: ;
		}
	}
	colontmp_ = content_1;
	colontmp__2 = selectionMask_1;
	blitTmp_3 = colontmp_;
	result.Field0 = blitTmp_3;
	blitTmp_4 = colontmp__2;
	result.Field1 = blitTmp_4;
	{
		LA1_:;
	}
	{
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZtext95editor_u1370)(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw* dest_p0) {
	eqdestroy___system_u3717((*dest_p0).Field0);
	eqdestroy___libZtext95editor_u1211((*dest_p0).Field1);
}
N_LIB_PRIVATE N_NIMCALL(void, drawEditor__libZtext95editor_u1389)(NI layer_p0, NI x_p1, NI y_p2, NI w_p3, NI h_p4, tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p5, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p6) {
	NI colontmpD_;
	NI colontmpD__2;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ bgStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ borderStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ cursorStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ lineNumStyle_1;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ lineNumActiveStyle_1;
	NI lineNumWidth_1;
	NI minimapWidth_1;
	NI contentX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_108;
	NI contentW_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_109;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_110;
	NI contentHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_111;
	NI visibleStartLine_1;
	NI visibleEndLine_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_112;
	NI T6_;
	NI contentWidthChars_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_119;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	bgStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_99);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	borderStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_101);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	cursorStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_103);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	lineNumStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_105);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	lineNumActiveStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_107);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		if (!config_p6.showLineNumbers) goto LA3_;
		colontmpD_ = config_p6.lineNumberWidth;
		lineNumWidth_1 = colontmpD_;
	}
	goto LA1_;
LA3_: ;
	{
		colontmpD__2 = ((NI)0);
		lineNumWidth_1 = colontmpD__2;
	}
LA1_: ;
	minimapWidth_1 = ((NI)14);
	if (nimAddInt(x_p1, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_108)) { raiseOverflow(); goto BeforeRet_;
	};
	contentX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_108);
	if (nimSubInt(w_p3, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_109)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_109), minimapWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_110)) { raiseOverflow(); goto BeforeRet_;
	};
	contentW_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_110);
	drawBoxSingle__libZtui95helpers_u194(layer_p0, x_p1, y_p2, w_p3, h_p4, borderStyle_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(h_p4, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_111)) { raiseOverflow(); goto BeforeRet_;
	};
	contentHeight_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_111);
	visibleStartLine_1 = (*state_p5).scrollY;
	if (nimAddInt((*state_p5).scrollY, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_112)) { raiseOverflow(); goto BeforeRet_;
	};
	T6_ = (NI)0;
	T6_ = lineCount__libZtext95editor_u507((*state_p5).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	visibleEndLine_1 = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_112) <= T6_) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_112) : T6_);
	{
		NIM_BOOL T9_;
		T9_ = (NIM_BOOL)0;
		T9_ = config_p6.showLineNumbers;
		if (!(T9_)) goto LA10_;
		T9_ = (((NI)0) < lineNumWidth_1);
LA10_: ;
		if (!T9_) goto LA11_;
		{
			NI i_1;
			NI i_2;
			i_1 = (NI)0;
			i_2 = visibleStartLine_1;
			{
				while (1) {
					NimStringV2 lineNum_1;
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__3;
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__4;
					NI screenY_1;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_113;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_114;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_115;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_116;
					NIM_BOOL isCurrentLine_1;
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_117;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_118;
					if (!(i_2 < visibleEndLine_1)) goto LA15;
					lineNum_1.len = 0; lineNum_1.p = NIM_NIL;
					nimZeroMem((void*)(&colontmpD__3), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
					nimZeroMem((void*)(&colontmpD__4), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
					i_1 = i_2;
					if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_113)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimSubInt(i_1, visibleStartLine_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_114)) { raiseOverflow(); goto BeforeRet_;
					};
					if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_113), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_114), &TM__ju9cg9cywhFyBl2l4t4KQoNA_115)) { raiseOverflow(); goto BeforeRet_;
					};
					screenY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_115);
					if (nimAddInt(i_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_116)) { raiseOverflow(); goto BeforeRet_;
					};
					lineNum_1 = dollar___systemZdollars_u14((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_116));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					isCurrentLine_1 = (i_1 == (*state_p5).cursor.line);
					{
						if (!isCurrentLine_1) goto LA18_;
						colontmpD__3 = lineNumActiveStyle_1;
						style_1 = colontmpD__3;
					}
					goto LA16_;
LA18_: ;
					{
						colontmpD__4 = lineNumStyle_1;
						style_1 = colontmpD__4;
					}
LA16_: ;
					if (nimAddInt(x_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_117)) { raiseOverflow(); goto BeforeRet_;
					};
					tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_117), screenY_1, lineNum_1, style_1);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_118)) { raiseOverflow(); goto BeforeRet_;
					};
					i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_118);
					if (lineNum_1.p && !(lineNum_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(lineNum_1.p);
}
				} LA15: ;
			}
		}
	}
LA11_: ;
	if (nimSubInt(contentW_1, ((NI)4), &TM__ju9cg9cywhFyBl2l4t4KQoNA_119)) { raiseOverflow(); goto BeforeRet_;
	};
	contentWidthChars_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_119);
	{
		NI i_3;
		NI i_4;
		i_3 = (NI)0;
		i_4 = visibleStartLine_1;
		{
			while (1) {
				NimStringV2 lineText_1;
				tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
				NI screenY_2;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_120;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_121;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_122;
				NI runeCount_1;
				NI T24_;
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_130;
				if (!(i_4 < visibleEndLine_1)) goto LA23;
				lineText_1.len = 0; lineText_1.p = NIM_NIL;
				runes_1.len = 0; runes_1.p = NIM_NIL;
				i_3 = i_4;
				if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_120)) { raiseOverflow(); goto BeforeRet_;
				};
				if (nimSubInt(i_3, visibleStartLine_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_121)) { raiseOverflow(); goto BeforeRet_;
				};
				if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_120), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_121), &TM__ju9cg9cywhFyBl2l4t4KQoNA_122)) { raiseOverflow(); goto BeforeRet_;
				};
				screenY_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_122);
				lineText_1 = getLine__libZtext95editor_u513((*state_p5).buffer, i_3);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				runes_1 = toRunes__pureZunicode_u7844(lineText_1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				T24_ = runes_1.len;
				runeCount_1 = T24_;
				{
					NIM_BOOL T27_;
					NI endCol_1;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_123;
					NI selStartCol_1;
					NI selEndCol_1;
					T27_ = (NIM_BOOL)0;
					T27_ = ((*state_p5).scrollX < runeCount_1);
					if (T27_) goto LA28_;
					T27_ = (runeCount_1 == ((NI)0));
LA28_: ;
					if (!T27_) goto LA29_;
					if (nimAddInt((*state_p5).scrollX, contentWidthChars_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_123)) { raiseOverflow(); goto BeforeRet_;
					};
					endCol_1 = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_123) <= runeCount_1) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_123) : runeCount_1);
					selStartCol_1 = ((NI)-1);
					selEndCol_1 = ((NI)-1);
					{
						NI colontmpD__5;
						NI colontmpD__6;
						NI colontmpD__7;
						NI colontmpD__8;
						NI colontmpD__9;
						NI colontmpD__10;
						tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ selStart_1;
						tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ selEnd_1;
						NI minLine_1;
						NI maxLine_1;
						NI minCol_1;
						NI maxCol_1;
						if (!(*state_p5).selection.active) goto LA33_;
						colontmpD__5 = (NI)0;
						colontmpD__6 = (NI)0;
						colontmpD__7 = (NI)0;
						colontmpD__8 = (NI)0;
						colontmpD__9 = (NI)0;
						colontmpD__10 = (NI)0;
						selStart_1 = (*state_p5).selection.start;
						selEnd_1 = (*state_p5).selection.end_0;
						minLine_1 = ((selStart_1.line <= selEnd_1.line) ? selStart_1.line : selEnd_1.line);
						maxLine_1 = ((selStart_1.line >= selEnd_1.line) ? selStart_1.line : selEnd_1.line);
						{
							if (!(selStart_1.line < selEnd_1.line)) goto LA37_;
							colontmpD__5 = selStart_1.col;
							minCol_1 = colontmpD__5;
						}
						goto LA35_;
LA37_: ;
						{
							if (!(selEnd_1.line < selStart_1.line)) goto LA40_;
							colontmpD__6 = selEnd_1.col;
							minCol_1 = colontmpD__6;
						}
						goto LA35_;
LA40_: ;
						{
							colontmpD__7 = ((selStart_1.col <= selEnd_1.col) ? selStart_1.col : selEnd_1.col);
							minCol_1 = colontmpD__7;
						}
LA35_: ;
						{
							if (!(selStart_1.line < selEnd_1.line)) goto LA45_;
							colontmpD__8 = selEnd_1.col;
							maxCol_1 = colontmpD__8;
						}
						goto LA43_;
LA45_: ;
						{
							if (!(selEnd_1.line < selStart_1.line)) goto LA48_;
							colontmpD__9 = selStart_1.col;
							maxCol_1 = colontmpD__9;
						}
						goto LA43_;
LA48_: ;
						{
							colontmpD__10 = ((selStart_1.col >= selEnd_1.col) ? selStart_1.col : selEnd_1.col);
							maxCol_1 = colontmpD__10;
						}
LA43_: ;
						{
							NIM_BOOL T53_;
							T53_ = (NIM_BOOL)0;
							T53_ = (minLine_1 <= i_3);
							if (!(T53_)) goto LA54_;
							T53_ = (i_3 <= maxLine_1);
LA54_: ;
							if (!T53_) goto LA55_;
							{
								NIM_BOOL T59_;
								T59_ = (NIM_BOOL)0;
								T59_ = (i_3 == minLine_1);
								if (!(T59_)) goto LA60_;
								T59_ = (i_3 == maxLine_1);
LA60_: ;
								if (!T59_) goto LA61_;
								selStartCol_1 = ((minCol_1 >= (*state_p5).scrollX) ? minCol_1 : (*state_p5).scrollX);
								selEndCol_1 = ((maxCol_1 <= endCol_1) ? maxCol_1 : endCol_1);
							}
							goto LA57_;
LA61_: ;
							{
								if (!(i_3 == minLine_1)) goto LA64_;
								selStartCol_1 = ((minCol_1 >= (*state_p5).scrollX) ? minCol_1 : (*state_p5).scrollX);
								selEndCol_1 = endCol_1;
							}
							goto LA57_;
LA64_: ;
							{
								if (!(i_3 == maxLine_1)) goto LA67_;
								selStartCol_1 = (*state_p5).scrollX;
								selEndCol_1 = ((maxCol_1 <= endCol_1) ? maxCol_1 : endCol_1);
							}
							goto LA57_;
LA67_: ;
							{
								selStartCol_1 = (*state_p5).scrollX;
								selEndCol_1 = endCol_1;
							}
LA57_: ;
						}
LA55_: ;
					}
LA33_: ;
					{
						NI j_1;
						NI i_5;
						j_1 = (NI)0;
						i_5 = (*state_p5).scrollX;
						{
							while (1) {
								NimStringV2 ch_1;
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__11;
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__12;
								NimStringV2 T73_;
								NIM_BOOL isSelected_1;
								NIM_BOOL T79_;
								NIM_BOOL T80_;
								tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_2;
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_126;
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_127;
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_128;
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_129;
								if (!(i_5 < endCol_1)) goto LA72;
								ch_1.len = 0; ch_1.p = NIM_NIL;
								nimZeroMem((void*)(&colontmpD__11), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
								nimZeroMem((void*)(&colontmpD__12), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
								j_1 = i_5;
								T73_.len = 0; T73_.p = NIM_NIL;
								{
									if (!(j_1 < runeCount_1)) goto LA76_;
									if (j_1 < 0 || j_1 >= runes_1.len){ raiseIndexError2(j_1,runes_1.len-1); goto BeforeRet_;
									}
									ch_1 = dollar___pureZunicode_u663(runes_1.p->data[j_1]);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								}
								goto LA74_;
LA76_: ;
								{
									ch_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_125;
								}
LA74_: ;
								T79_ = (NIM_BOOL)0;
								T80_ = (NIM_BOOL)0;
								T80_ = (((NI)0) <= selStartCol_1);
								if (!(T80_)) goto LA81_;
								T80_ = (selStartCol_1 <= j_1);
LA81_: ;
								T79_ = T80_;
								if (!(T79_)) goto LA82_;
								T79_ = (j_1 < selEndCol_1);
LA82_: ;
								isSelected_1 = T79_;
								{
									tyObject_Style__UURjArTrf2wmcCbN5MncAQ invStyle_1;
									tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tempColor_1;
									if (!isSelected_1) goto LA85_;
									invStyle_1 = bgStyle_1;
									tempColor_1 = invStyle_1.fg;
									invStyle_1.fg = invStyle_1.bg;
									invStyle_1.bg = tempColor_1;
									colontmpD__11 = invStyle_1;
									style_2 = colontmpD__11;
								}
								goto LA83_;
LA85_: ;
								{
									colontmpD__12 = bgStyle_1;
									style_2 = colontmpD__12;
								}
LA83_: ;
								if (nimAddInt(contentX_1, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_126)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimSubInt(j_1, (*state_p5).scrollX, &TM__ju9cg9cywhFyBl2l4t4KQoNA_127)) { raiseOverflow(); goto BeforeRet_;
								};
								if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_126), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_127), &TM__ju9cg9cywhFyBl2l4t4KQoNA_128)) { raiseOverflow(); goto BeforeRet_;
								};
								tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_128), screenY_2, ch_1, style_2);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								if (nimAddInt(i_5, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_129)) { raiseOverflow(); goto BeforeRet_;
								};
								i_5 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_129);
								if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(ch_1.p);
}
							} LA72: ;
						}
					}
				}
LA29_: ;
				if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_130)) { raiseOverflow(); goto BeforeRet_;
				};
				i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_130);
				eqdestroy___pureZunicode_u714(runes_1);
				if (lineText_1.p && !(lineText_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(lineText_1.p);
}
			} LA23: ;
		}
	}
	{
		NIM_BOOL T90_;
		NI cursorScreenY_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_131;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_132;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_133;
		NI cursorScreenX_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_134;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_135;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_136;
		T90_ = (NIM_BOOL)0;
		T90_ = (visibleStartLine_1 <= (*state_p5).cursor.line);
		if (!(T90_)) goto LA91_;
		T90_ = ((*state_p5).cursor.line < visibleEndLine_1);
LA91_: ;
		if (!T90_) goto LA92_;
		if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_131)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimSubInt((*state_p5).cursor.line, visibleStartLine_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_132)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_131), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_132), &TM__ju9cg9cywhFyBl2l4t4KQoNA_133)) { raiseOverflow(); goto BeforeRet_;
		};
		cursorScreenY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_133);
		if (nimAddInt(contentX_1, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_134)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimSubInt((*state_p5).cursor.col, (*state_p5).scrollX, &TM__ju9cg9cywhFyBl2l4t4KQoNA_135)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_134), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_135), &TM__ju9cg9cywhFyBl2l4t4KQoNA_136)) { raiseOverflow(); goto BeforeRet_;
		};
		cursorScreenX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_136);
		{
			NIM_BOOL T96_;
			NI TM__ju9cg9cywhFyBl2l4t4KQoNA_137;
			NimStringV2 lineText_2;
			tySequence__48JTohSgTy339bRxHzUD8KA runes_2;
			NimStringV2 cursorChar_1;
			NimStringV2 T100_;
			tyObject_Style__UURjArTrf2wmcCbN5MncAQ invertedStyle_1;
			tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tempColor_2;
			T96_ = (NIM_BOOL)0;
			T96_ = ((*state_p5).scrollX <= (*state_p5).cursor.col);
			if (!(T96_)) goto LA97_;
			if (nimAddInt((*state_p5).scrollX, contentWidthChars_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_137)) { raiseOverflow(); goto BeforeRet_;
			};
			T96_ = ((*state_p5).cursor.col < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_137));
LA97_: ;
			if (!T96_) goto LA98_;
			lineText_2.len = 0; lineText_2.p = NIM_NIL;
			runes_2.len = 0; runes_2.p = NIM_NIL;
			cursorChar_1.len = 0; cursorChar_1.p = NIM_NIL;
			lineText_2 = getLine__libZtext95editor_u513((*state_p5).buffer, (*state_p5).cursor.line);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			runes_2 = toRunes__pureZunicode_u7844(lineText_2);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			T100_.len = 0; T100_.p = NIM_NIL;
			{
				NI T103_;
				T103_ = runes_2.len;
				if (!((*state_p5).cursor.col < T103_)) goto LA104_;
				if ((*state_p5).cursor.col < 0 || (*state_p5).cursor.col >= runes_2.len){ raiseIndexError2((*state_p5).cursor.col,runes_2.len-1); goto BeforeRet_;
				}
				cursorChar_1 = dollar___pureZunicode_u663(runes_2.p->data[(*state_p5).cursor.col]);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			goto LA101_;
LA104_: ;
			{
				cursorChar_1 = TM__ju9cg9cywhFyBl2l4t4KQoNA_138;
			}
LA101_: ;
			invertedStyle_1 = bgStyle_1;
			tempColor_2 = invertedStyle_1.fg;
			invertedStyle_1.fg = invertedStyle_1.bg;
			invertedStyle_1.bg = tempColor_2;
			tuiDraw__libZtui95helpers_u118(layer_p0, cursorScreenX_1, cursorScreenY_1, cursorChar_1, invertedStyle_1);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			if (cursorChar_1.p && !(cursorChar_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(cursorChar_1.p);
}
			eqdestroy___pureZunicode_u714(runes_2);
			if (lineText_2.p && !(lineText_2.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(lineText_2.p);
}
		}
LA98_: ;
	}
LA92_: ;
	{
		NIM_BOOL T109_;
		NI T111_;
		tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw minimapData_1;
		NI colontmpD__13;
		NI colontmpD__14;
		NI minimapX_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_139;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_140;
		NI minimapH_1;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_169;
		tyObject_Style__UURjArTrf2wmcCbN5MncAQ defaultStyle_1;
		NI maxScrollY_1;
		NI T139_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_177;
		NI minimapStartY_1;
		NI minimapVisibleHeight_1;
		NI T145_;
		T109_ = (NIM_BOOL)0;
		T109_ = config_p6.showScrollbar;
		if (!(T109_)) goto LA110_;
		T111_ = (NI)0;
		T111_ = lineCount__libZtext95editor_u507((*state_p5).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T109_ = (contentHeight_1 < T111_);
LA110_: ;
		if (!T109_) goto LA112_;
		nimZeroMem((void*)(&minimapData_1), sizeof(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw));
		colontmpD__13 = (NI)0;
		colontmpD__14 = (NI)0;
		if (nimAddInt(x_p1, w_p3, &TM__ju9cg9cywhFyBl2l4t4KQoNA_139)) { raiseOverflow(); goto LA114_;
		};
		if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_139), minimapWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_140)) { raiseOverflow(); goto LA114_;
		};
		minimapX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_140);
		minimapH_1 = contentHeight_1;
		if (nimSubInt(minimapWidth_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_169)) { raiseOverflow(); goto LA114_;
		};
		minimapData_1 = generateMinimap__libZtext95editor_u1105((*state_p5).buffer, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_169), minimapH_1, (*state_p5).scrollY, contentHeight_1, (*state_p5).selection);
		if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
		defaultStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_171);
		if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
		{
			NI i_6;
			NI colontmp_;
			NI T116_;
			NI i_7;
			i_6 = (NI)0;
			colontmp_ = (NI)0;
			T116_ = minimapData_1.Field0.len;
			colontmp_ = T116_;
			i_7 = ((NI)0);
			{
				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_176;
					if (!(i_7 < colontmp_)) goto LA118;
					i_6 = i_7;
					{
						NIM_BOOL T121_;
						NI T123_;
						NimStringV2 line_1;
						tySequence__shxop0zPIs5Ec3k71aCLuQ selMask_1;
						tySequence__48JTohSgTy339bRxHzUD8KA runes_3;
						T121_ = (NIM_BOOL)0;
						T121_ = (i_6 < minimapH_1);
						if (!(T121_)) goto LA122_;
						T123_ = minimapData_1.Field1.len;
						T121_ = (i_6 < T123_);
LA122_: ;
						if (!T121_) goto LA124_;
						line_1.len = 0; line_1.p = NIM_NIL;
						selMask_1.len = 0; selMask_1.p = NIM_NIL;
						runes_3.len = 0; runes_3.p = NIM_NIL;
						if (i_6 < 0 || i_6 >= minimapData_1.Field0.len){ raiseIndexError2(i_6,minimapData_1.Field0.len-1); goto LA114_;
						}
						eqcopy___system_u2642((&line_1), minimapData_1.Field0.p->data[i_6]);
						if (i_6 < 0 || i_6 >= minimapData_1.Field1.len){ raiseIndexError2(i_6,minimapData_1.Field1.len-1); goto LA114_;
						}
						eqcopy___niminiZruntime_u160((&selMask_1), minimapData_1.Field1.p->data[i_6]);
						runes_3 = toRunes__pureZunicode_u7844(line_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
						{
							NI j_2;
							NI colontmp__2;
							NI T127_;
							NI i_8;
							j_2 = (NI)0;
							colontmp__2 = (NI)0;
							T127_ = runes_3.len;
							colontmp__2 = T127_;
							i_8 = ((NI)0);
							{
								while (1) {
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_175;
									if (!(i_8 < colontmp__2)) goto LA129;
									j_2 = i_8;
									{
										NI T132_;
										NimStringV2 ch_2;
										tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_3;
										NI TM__ju9cg9cywhFyBl2l4t4KQoNA_172;
										NI TM__ju9cg9cywhFyBl2l4t4KQoNA_173;
										NI TM__ju9cg9cywhFyBl2l4t4KQoNA_174;
										T132_ = selMask_1.len;
										if (!(j_2 < T132_)) goto LA133_;
										ch_2.len = 0; ch_2.p = NIM_NIL;
										if (j_2 < 0 || j_2 >= runes_3.len){ raiseIndexError2(j_2,runes_3.len-1); goto LA114_;
										}
										ch_2 = dollar___pureZunicode_u663(runes_3.p->data[j_2]);
										if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
										style_3 = defaultStyle_1;
										{
											tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tempColor_3;
											if (j_2 < 0 || j_2 >= selMask_1.len){ raiseIndexError2(j_2,selMask_1.len-1); goto LA114_;
											}
											if (!selMask_1.p->data[j_2]) goto LA137_;
											tempColor_3 = style_3.fg;
											style_3.fg = style_3.bg;
											style_3.bg = tempColor_3;
										}
LA137_: ;
										if (nimAddInt(minimapX_1, j_2, &TM__ju9cg9cywhFyBl2l4t4KQoNA_172)) { raiseOverflow(); goto LA114_;
										};
										if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_173)) { raiseOverflow(); goto LA114_;
										};
										if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_173), i_6, &TM__ju9cg9cywhFyBl2l4t4KQoNA_174)) { raiseOverflow(); goto LA114_;
										};
										tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_172), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_174), ch_2, style_3);
										if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
										if (ch_2.p && !(ch_2.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(ch_2.p);
}
									}
LA133_: ;
									if (nimAddInt(i_8, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_175)) { raiseOverflow(); goto LA114_;
									};
									i_8 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_175);
								} LA129: ;
							}
						}
						eqdestroy___pureZunicode_u714(runes_3);
						eqdestroy___niminiZruntime_u157(selMask_1);
						if (line_1.p && !(line_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(line_1.p);
}
					}
LA124_: ;
					if (nimAddInt(i_7, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_176)) { raiseOverflow(); goto LA114_;
					};
					i_7 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_176);
				} LA118: ;
			}
		}
		T139_ = (NI)0;
		T139_ = lineCount__libZtext95editor_u507((*state_p5).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
		if (nimSubInt(T139_, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_177)) { raiseOverflow(); goto LA114_;
		};
		maxScrollY_1 = ((((NI)1) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_177)) ? ((NI)1) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_177));
		{
			NI TM__ju9cg9cywhFyBl2l4t4KQoNA_178;
			if (!(((NI)0) < maxScrollY_1)) goto LA142_;
			if (nimSubInt(minimapH_1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_178)) { raiseOverflow(); goto LA114_;
			};
			if ((((NI) (((NI64) (((NF)(((NF)(((NF) ((*state_p5).scrollY))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_178)))))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(((NF) ((*state_p5).scrollY))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_178)))))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(((NF) ((*state_p5).scrollY))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_178))))))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto LA114_;
			}
			colontmpD__13 = (((NI) (((NI64) (((NF)(((NF)(((NF) ((*state_p5).scrollY))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_178))))))))));
			minimapStartY_1 = colontmpD__13;
		}
		goto LA140_;
LA142_: ;
		{
			colontmpD__14 = ((NI)0);
			minimapStartY_1 = colontmpD__14;
		}
LA140_: ;
		T145_ = (NI)0;
		T145_ = lineCount__libZtext95editor_u507((*state_p5).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
		if ((((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1))))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1))))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1)))))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto LA114_;
		}
		minimapVisibleHeight_1 = ((((NI)1) >= (((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1)))))))))) ? ((NI)1) : (((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T145_))))) * (NF)(((NF) (minimapH_1))))))))));
		{
			NI dy_1;
			NI i_9;
			dy_1 = (NI)0;
			i_9 = ((NI)0);
			{
				while (1) {
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_189;
					if (!(i_9 < minimapVisibleHeight_1)) goto LA148;
					dy_1 = i_9;
					{
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_179;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_180;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_181;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_182;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_183;
						NI TM__ju9cg9cywhFyBl2l4t4KQoNA_184;
						tyObject_Style__UURjArTrf2wmcCbN5MncAQ T153_;
						if (nimAddInt(minimapStartY_1, dy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_179)) { raiseOverflow(); goto LA114_;
						};
						if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_179) < minimapH_1)) goto LA151_;
						if (nimAddInt(minimapX_1, minimapWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_180)) { raiseOverflow(); goto LA114_;
						};
						if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_180), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_181)) { raiseOverflow(); goto LA114_;
						};
						if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_182)) { raiseOverflow(); goto LA114_;
						};
						if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_182), minimapStartY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_183)) { raiseOverflow(); goto LA114_;
						};
						if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_183), dy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_184)) { raiseOverflow(); goto LA114_;
						};
						T153_ = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_188);
						if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
						tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_181), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_184), TM__ju9cg9cywhFyBl2l4t4KQoNA_186, T153_);
						if (NIM_UNLIKELY(*nimErr_)) goto LA114_;
					}
LA151_: ;
					if (nimAddInt(i_9, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_189)) { raiseOverflow(); goto LA114_;
					};
					i_9 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_189);
				} LA148: ;
			}
		}
		{
			LA114_:;
		}
		{
			eqdestroy___libZtext95editor_u1370((&minimapData_1));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA112_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, drawMinimap__libZtext95editor_u1623)(NI layer_p0, NI x_p1, NI y_p2, NI w_p3, NI h_p4, tyObject_EditorBuffercolonObjectType___hEFnb9aI3EOJNqq2rQbfpGA* buffer_p5, NI scrollY_p6, NI viewportHeight_p7, tyObject_Selection__feOuo9atjaxuMYC3vJzUQCw selection_p8) {
	tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw minimapData_1;
	NI colontmpD_;
	NI colontmpD__2;
	NI contentHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_190;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_191;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_192;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ T2_;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ defaultStyle_1;
	NI maxScrollY_1;
	NI T25_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_202;
	NI minimapStartY_1;
	NI minimapHeight_1;
	NI T31_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_204;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&minimapData_1), sizeof(tyTuple__lCkPSZ8mSjw9ar0f2jTiKGw));
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	if (nimSubInt(viewportHeight_p7, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_190)) { raiseOverflow(); goto LA1_;
	};
	contentHeight_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_190);
	if (nimSubInt(w_p3, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_191)) { raiseOverflow(); goto LA1_;
	};
	if (nimSubInt(h_p4, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_192)) { raiseOverflow(); goto LA1_;
	};
	minimapData_1 = generateMinimap__libZtext95editor_u1105(buffer_p5, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_191), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_192), scrollY_p6, contentHeight_1, selection_p8);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T2_ = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_194);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	drawBoxSingle__libZtui95helpers_u194(layer_p0, x_p1, y_p2, w_p3, h_p4, T2_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	defaultStyle_1 = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_195);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		NI i_1;
		NI colontmp_;
		NI T4_;
		NI i_2;
		i_1 = (NI)0;
		colontmp_ = (NI)0;
		T4_ = minimapData_1.Field0.len;
		colontmp_ = T4_;
		i_2 = ((NI)0);
		{
			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_201;
				if (!(i_2 < colontmp_)) goto LA6;
				i_1 = i_2;
				{
					NI T9_;
					NimStringV2 line_1;
					tySequence__shxop0zPIs5Ec3k71aCLuQ selMask_1;
					tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
					T9_ = minimapData_1.Field1.len;
					if (!(i_1 < T9_)) goto LA10_;
					line_1.len = 0; line_1.p = NIM_NIL;
					selMask_1.len = 0; selMask_1.p = NIM_NIL;
					runes_1.len = 0; runes_1.p = NIM_NIL;
					if (i_1 < 0 || i_1 >= minimapData_1.Field0.len){ raiseIndexError2(i_1,minimapData_1.Field0.len-1); goto LA1_;
					}
					eqcopy___system_u2642((&line_1), minimapData_1.Field0.p->data[i_1]);
					if (i_1 < 0 || i_1 >= minimapData_1.Field1.len){ raiseIndexError2(i_1,minimapData_1.Field1.len-1); goto LA1_;
					}
					eqcopy___niminiZruntime_u160((&selMask_1), minimapData_1.Field1.p->data[i_1]);
					runes_1 = toRunes__pureZunicode_u7844(line_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					{
						NI j_1;
						NI colontmp__2;
						NI T13_;
						NI i_3;
						j_1 = (NI)0;
						colontmp__2 = (NI)0;
						T13_ = runes_1.len;
						colontmp__2 = T13_;
						i_3 = ((NI)0);
						{
							while (1) {
								NI TM__ju9cg9cywhFyBl2l4t4KQoNA_200;
								if (!(i_3 < colontmp__2)) goto LA15;
								j_1 = i_3;
								{
									NI T18_;
									NimStringV2 ch_1;
									tyObject_Style__UURjArTrf2wmcCbN5MncAQ style_1;
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_196;
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_197;
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_198;
									NI TM__ju9cg9cywhFyBl2l4t4KQoNA_199;
									T18_ = selMask_1.len;
									if (!(j_1 < T18_)) goto LA19_;
									ch_1.len = 0; ch_1.p = NIM_NIL;
									if (j_1 < 0 || j_1 >= runes_1.len){ raiseIndexError2(j_1,runes_1.len-1); goto LA1_;
									}
									ch_1 = dollar___pureZunicode_u663(runes_1.p->data[j_1]);
									if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
									style_1 = defaultStyle_1;
									{
										tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tempColor_1;
										if (j_1 < 0 || j_1 >= selMask_1.len){ raiseIndexError2(j_1,selMask_1.len-1); goto LA1_;
										}
										if (!selMask_1.p->data[j_1]) goto LA23_;
										tempColor_1 = style_1.fg;
										style_1.fg = style_1.bg;
										style_1.bg = tempColor_1;
									}
LA23_: ;
									if (nimAddInt(x_p1, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_196)) { raiseOverflow(); goto LA1_;
									};
									if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_196), j_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_197)) { raiseOverflow(); goto LA1_;
									};
									if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_198)) { raiseOverflow(); goto LA1_;
									};
									if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_198), i_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_199)) { raiseOverflow(); goto LA1_;
									};
									tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_197), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_199), ch_1, style_1);
									if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
									if (ch_1.p && !(ch_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(ch_1.p);
}
								}
LA19_: ;
								if (nimAddInt(i_3, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_200)) { raiseOverflow(); goto LA1_;
								};
								i_3 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_200);
							} LA15: ;
						}
					}
					eqdestroy___pureZunicode_u714(runes_1);
					eqdestroy___niminiZruntime_u157(selMask_1);
					if (line_1.p && !(line_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(line_1.p);
}
				}
LA10_: ;
				if (nimAddInt(i_2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_201)) { raiseOverflow(); goto LA1_;
				};
				i_2 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_201);
			} LA6: ;
		}
	}
	T25_ = (NI)0;
	T25_ = lineCount__libZtext95editor_u507(buffer_p5);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (nimSubInt(T25_, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_202)) { raiseOverflow(); goto LA1_;
	};
	maxScrollY_1 = ((((NI)1) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_202)) ? ((NI)1) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_202));
	{
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_203;
		if (!(((NI)0) < maxScrollY_1)) goto LA28_;
		if (nimSubInt(h_p4, ((NI)3), &TM__ju9cg9cywhFyBl2l4t4KQoNA_203)) { raiseOverflow(); goto LA1_;
		};
		if ((((NI) (((NI64) (((NF)(((NF)(((NF) (scrollY_p6))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_203)))))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(((NF) (scrollY_p6))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_203)))))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(((NF) (scrollY_p6))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_203))))))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto LA1_;
		}
		colontmpD_ = (((NI) (((NI64) (((NF)(((NF)(((NF) (scrollY_p6))) / (NF)(((NF) (maxScrollY_1))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_203))))))))));
		minimapStartY_1 = colontmpD_;
	}
	goto LA26_;
LA28_: ;
	{
		colontmpD__2 = ((NI)0);
		minimapStartY_1 = colontmpD__2;
	}
LA26_: ;
	T31_ = (NI)0;
	T31_ = lineCount__libZtext95editor_u507(buffer_p5);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (nimSubInt(h_p4, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_204)) { raiseOverflow(); goto LA1_;
	};
	if ((((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204)))))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204)))))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204))))))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto LA1_;
	}
	minimapHeight_1 = ((((NI)1) >= (((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204))))))))))) ? ((NI)1) : (((NI) (((NI64) (((NF)(((NF)(((NF) (contentHeight_1))) / (NF)(((NF) (T31_))))) * (NF)(((NF) ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_204)))))))))));
	{
		NI dy_1;
		NI i_4;
		dy_1 = (NI)0;
		i_4 = ((NI)0);
		{
			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_214;
				if (!(i_4 < minimapHeight_1)) goto LA34;
				dy_1 = i_4;
				{
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_205;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_206;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_207;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_208;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_209;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_210;
					NI TM__ju9cg9cywhFyBl2l4t4KQoNA_211;
					tyObject_Style__UURjArTrf2wmcCbN5MncAQ T39_;
					if (nimAddInt(minimapStartY_1, dy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_205)) { raiseOverflow(); goto LA1_;
					};
					if (nimSubInt(h_p4, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_206)) { raiseOverflow(); goto LA1_;
					};
					if (!((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_205) < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_206))) goto LA37_;
					if (nimAddInt(x_p1, w_p3, &TM__ju9cg9cywhFyBl2l4t4KQoNA_207)) { raiseOverflow(); goto LA1_;
					};
					if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_207), ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_208)) { raiseOverflow(); goto LA1_;
					};
					if (nimAddInt(y_p2, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_209)) { raiseOverflow(); goto LA1_;
					};
					if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_209), minimapStartY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_210)) { raiseOverflow(); goto LA1_;
					};
					if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_210), dy_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_211)) { raiseOverflow(); goto LA1_;
					};
					T39_ = tuiGetStyle__libZtui95helpers_u17(TM__ju9cg9cywhFyBl2l4t4KQoNA_213);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					tuiDraw__libZtui95helpers_u118(layer_p0, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_208), (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_211), TM__ju9cg9cywhFyBl2l4t4KQoNA_212, T39_);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA37_: ;
				if (nimAddInt(i_4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_214)) { raiseOverflow(); goto LA1_;
				};
				i_4 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_214);
			} LA34: ;
		}
	}
	{
		LA1_:;
	}
	{
		eqdestroy___libZtext95editor_u1370((&minimapData_1));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(int, nimCmpMem)(void* a_p0, void* b_p1, NI size_p2) {
	int result;
	result = memcmp(a_p0, b_p1, ((size_t) (size_p2)));
	return result;
}
static N_INLINE(NIM_BOOL, equalMem__system_u1749)(void* a_p0, void* b_p1, NI size_p2) {
	NIM_BOOL result;
	int T1_;
	T1_ = (int)0;
	T1_ = nimCmpMem(a_p0, b_p1, size_p2);
	result = (T1_ == ((NI32)0));
	return result;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a_p0, NimStringV2 b_p1) {
	NIM_BOOL result;
	NI alen_1;
	NI blen_1;
{	result = NIM_FALSE;
	alen_1 = a_p0.len;
	blen_1 = b_p1.len;
	{
		if (!(alen_1 == blen_1)) goto LA3_;
		{
			if (!(alen_1 == ((NI)0))) goto LA7_;
			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA7_: ;
		result = equalMem__system_u1749(((void*) ((&a_p0.p->data[((NI)0)]))), ((void*) ((&b_p1.p->data[((NI)0)]))), (alen_1));
		goto BeforeRet_;
	}
LA3_: ;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NI, find__stdZenumutils_u55)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1) {
	NI result;
{	result = ((NI)0);
	{
		NimStringV2* i_1;
		NI i_2;
		i_1 = (NimStringV2*)0;
		i_2 = ((NI)0);
		{
			while (1) {
				NI TM__ju9cg9cywhFyBl2l4t4KQoNA_215;
				if (!(i_2 < a_p0Len_0)) goto LA3;
				if (i_2 < 0 || i_2 >= a_p0Len_0){ raiseIndexError2(i_2,a_p0Len_0-1); goto BeforeRet_;
				}
				i_1 = (&a_p0[i_2]);
				{
					if (!eqStrings((*i_1), item_p1)) goto LA6_;
					goto BeforeRet_;
				}
LA6_: ;
				if (nimAddInt(result, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_215)) { raiseOverflow(); goto BeforeRet_;
				};
				result = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_215);
				i_2 += ((NI)1);
			} LA3: ;
		}
	}
	result = ((NI)-1);
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NIM_BOOL, contains__stdZenumutils_u50)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 item_p1) {
	NIM_BOOL result;
	NI T1_;
{	T1_ = (NI)0;
	T1_ = find__stdZenumutils_u55(a_p0, a_p0Len_0, item_p1);
	result = (((NI)0) <= T1_);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorKeyPress__libZtext95editor_u1532)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI keyCode_p1, NimStringV2 key_p2, tySequence__sM4lkSb7zS6F7OVMvW9cffQ mods_p3) {
	NIM_BOOL result;
	NIM_BOOL ctrl_1;
	NIM_BOOL shift_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	ctrl_1 = contains__stdZenumutils_u50(((mods_p3).p) ? (mods_p3.p->data) : NIM_NIL, mods_p3.len, TM__ju9cg9cywhFyBl2l4t4KQoNA_217);
	shift_1 = contains__stdZenumutils_u50(((mods_p3).p) ? (mods_p3.p->data) : NIM_NIL, mods_p3.len, TM__ju9cg9cywhFyBl2l4t4KQoNA_219);
	switch (keyCode_p1) {
	case ((NI)37):
	case ((NI)10002):
	{
		moveCursorLeft__libZtext95editor_u1020(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)38):
	case ((NI)10000):
	{
		moveCursorUp__libZtext95editor_u1008(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)39):
	case ((NI)10003):
	{
		moveCursorRight__libZtext95editor_u1030(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)40):
	case ((NI)10001):
	{
		moveCursorDown__libZtext95editor_u1014(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)36):
	{
		{
			if (!ctrl_1) goto LA8_;
			moveCursorToBufferStart__libZtext95editor_u1045(state_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		goto LA6_;
LA8_: ;
		{
			moveCursorToLineStart__libZtext95editor_u1041(state_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
LA6_: ;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)35):
	{
		{
			if (!ctrl_1) goto LA14_;
			moveCursorToBufferEnd__libZtext95editor_u1047(state_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		goto LA12_;
LA14_: ;
		{
			moveCursorToLineEnd__libZtext95editor_u1043(state_p0);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
LA12_: ;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)8):
	case ((NI)127):
	{
		backspaceAtCursor__libZtext95editor_u1071(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)46):
	{
		deleteAtCursor__libZtext95editor_u1068(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)13):
	{
		insertNewlineAtCursor__libZtext95editor_u1082(state_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((NI)9):
	{
		insertTabAtCursor__libZtext95editor_u1088(state_p0, NIM_TRUE);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	default:
	{
		{
			NIM_BOOL T24_;
			T24_ = (NIM_BOOL)0;
			T24_ = (key_p2.len == ((NI)1));
			if (!(T24_)) goto LA25_;
			T24_ = !(ctrl_1);
LA25_: ;
			if (!T24_) goto LA26_;
			if (((NI)0) < 0 || ((NI)0) >= key_p2.len){ raiseIndexError2(((NI)0),key_p2.len-1); goto BeforeRet_;
			}
			insertCharAtCursor__libZtext95editor_u1049(state_p0, key_p2.p->data[((NI)0)]);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA26_: ;
	}
	break;
	}
	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorMouseClick__libZtext95editor_u1548)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI mouseX_p1, NI mouseY_p2, NI editorX_p3, NI editorY_p4, NI editorW_p5, NI editorH_p6, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p7, NIM_BOOL clearSelection_p8) {
	NIM_BOOL result;
	NI colontmpD_;
	NI colontmpD__2;
	NI lineNumWidth_1;
	NI contentX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_220;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_221;
	NI contentY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_222;
	NI clickedLine_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_223;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_224;
	NI clickedCol_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_225;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_226;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = pointInRect__libZtui95helpers_u410(mouseX_p1, mouseY_p2, editorX_p3, editorY_p4, editorW_p5, editorH_p6);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!(T3_)) goto LA4_;
		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA4_: ;
	{
		if (!config_p7.showLineNumbers) goto LA8_;
		colontmpD_ = config_p7.lineNumberWidth;
		lineNumWidth_1 = colontmpD_;
	}
	goto LA6_;
LA8_: ;
	{
		colontmpD__2 = ((NI)0);
		lineNumWidth_1 = colontmpD__2;
	}
LA6_: ;
	if (nimAddInt(editorX_p3, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_220)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_220), ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_221)) { raiseOverflow(); goto BeforeRet_;
	};
	contentX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_221);
	if (nimAddInt(editorY_p4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_222)) { raiseOverflow(); goto BeforeRet_;
	};
	contentY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_222);
	{
		if (!(mouseX_p1 < contentX_1)) goto LA13_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA13_: ;
	if (nimSubInt(mouseY_p2, contentY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_223)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollY, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_223), &TM__ju9cg9cywhFyBl2l4t4KQoNA_224)) { raiseOverflow(); goto BeforeRet_;
	};
	clickedLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_224);
	{
		NIM_BOOL T17_;
		NI T19_;
		T17_ = (NIM_BOOL)0;
		T17_ = (clickedLine_1 < ((NI)0));
		if (T17_) goto LA18_;
		T19_ = (NI)0;
		T19_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T17_ = (T19_ <= clickedLine_1);
LA18_: ;
		if (!T17_) goto LA20_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA20_: ;
	if (nimSubInt(mouseX_p1, contentX_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_225)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollX, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_225), &TM__ju9cg9cywhFyBl2l4t4KQoNA_226)) { raiseOverflow(); goto BeforeRet_;
	};
	clickedCol_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_226)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_226));
	moveCursor__libZtext95editor_u992(state_p0, clickedLine_1, clickedCol_1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		if (!clearSelection_p8) goto LA24_;
		(*state_p0).selection.active = NIM_FALSE;
	}
LA24_: ;
	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleMinimapClick__libZtext95editor_u1599)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI mouseX_p1, NI mouseY_p2, NI editorX_p3, NI editorY_p4, NI editorW_p5, NI editorH_p6, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p7) {
	NIM_BOOL result;
	NI minimapWidth_1;
	NI minimapX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_227;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_228;
	NI contentY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_229;
	NI contentHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_230;
	NI relativeY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_234;
	NI targetLine_1;
	NI T13_;
	NI halfHeight_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_235;
	NI T14_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_236;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	minimapWidth_1 = ((NI)14);
	if (nimAddInt(editorX_p3, editorW_p5, &TM__ju9cg9cywhFyBl2l4t4KQoNA_227)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_227), minimapWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_228)) { raiseOverflow(); goto BeforeRet_;
	};
	minimapX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_228);
	if (nimAddInt(editorY_p4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_229)) { raiseOverflow(); goto BeforeRet_;
	};
	contentY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_229);
	if (nimSubInt(editorH_p6, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_230)) { raiseOverflow(); goto BeforeRet_;
	};
	contentHeight_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_230);
	{
		NIM_BOOL T3_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_231;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_232;
		T3_ = (NIM_BOOL)0;
		T3_ = (mouseX_p1 < minimapX_1);
		if (T3_) goto LA4_;
		if (nimAddInt(editorX_p3, editorW_p5, &TM__ju9cg9cywhFyBl2l4t4KQoNA_231)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimSubInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_231), ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_232)) { raiseOverflow(); goto BeforeRet_;
		};
		T3_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_232) <= mouseX_p1);
LA4_: ;
		if (!T3_) goto LA5_;
		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA5_: ;
	{
		NIM_BOOL T9_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_233;
		T9_ = (NIM_BOOL)0;
		T9_ = (mouseY_p2 < contentY_1);
		if (T9_) goto LA10_;
		if (nimAddInt(contentY_1, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_233)) { raiseOverflow(); goto BeforeRet_;
		};
		T9_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_233) <= mouseY_p2);
LA10_: ;
		if (!T9_) goto LA11_;
		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA11_: ;
	if (nimSubInt(mouseY_p2, contentY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_234)) { raiseOverflow(); goto BeforeRet_;
	};
	relativeY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_234);
	T13_ = (NI)0;
	T13_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if ((((NI) (((NI64) (((NF)(((NF)(((NF) (relativeY_1))) / (NF)(((NF) (contentHeight_1))))) * (NF)(((NF) (T13_))))))))) < ((NI)(-2147483647 -1)) || (((NI) (((NI64) (((NF)(((NF)(((NF) (relativeY_1))) / (NF)(((NF) (contentHeight_1))))) * (NF)(((NF) (T13_))))))))) > ((NI)2147483647)){ raiseRangeErrorI(((NI) (((NI64) (((NF)(((NF)(((NF) (relativeY_1))) / (NF)(((NF) (contentHeight_1))))) * (NF)(((NF) (T13_)))))))), ((NI)(-2147483647 -1)), ((NI)2147483647)); goto BeforeRet_;
	}
	targetLine_1 = (((NI) (((NI64) (((NF)(((NF)(((NF) (relativeY_1))) / (NF)(((NF) (contentHeight_1))))) * (NF)(((NF) (T13_)))))))));
	halfHeight_1 = (NI)((contentHeight_1) / (((NI)2)));
	if (nimSubInt(targetLine_1, halfHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_235)) { raiseOverflow(); goto BeforeRet_;
	};
	T14_ = (NI)0;
	T14_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(T14_, contentHeight_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_236)) { raiseOverflow(); goto BeforeRet_;
	};
	(*state_p0).scrollY = ((((NI)0) >= (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_235) <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_236)) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_235) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_236))) ? ((NI)0) : (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_235) <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_236)) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_235) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_236)));
	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorMousePress__libZtext95editor_u1564)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI mouseX_p1, NI mouseY_p2, NI editorX_p3, NI editorY_p4, NI editorW_p5, NI editorH_p6, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p7, NIM_BOOL shiftHeld_p8) {
	NIM_BOOL result;
	NI colontmpD_;
	NI colontmpD__2;
	NI lineNumWidth_1;
	NI contentX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_237;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_238;
	NI contentY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_239;
	NI clickedLine_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_240;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_241;
	NI clickedCol_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_242;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_243;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = pointInRect__libZtui95helpers_u410(mouseX_p1, mouseY_p2, editorX_p3, editorY_p4, editorW_p5, editorH_p6);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!(T3_)) goto LA4_;
		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA4_: ;
	{
		if (!config_p7.showLineNumbers) goto LA8_;
		colontmpD_ = config_p7.lineNumberWidth;
		lineNumWidth_1 = colontmpD_;
	}
	goto LA6_;
LA8_: ;
	{
		colontmpD__2 = ((NI)0);
		lineNumWidth_1 = colontmpD__2;
	}
LA6_: ;
	if (nimAddInt(editorX_p3, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_237)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_237), ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_238)) { raiseOverflow(); goto BeforeRet_;
	};
	contentX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_238);
	if (nimAddInt(editorY_p4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_239)) { raiseOverflow(); goto BeforeRet_;
	};
	contentY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_239);
	{
		if (!(mouseX_p1 < contentX_1)) goto LA13_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA13_: ;
	if (nimSubInt(mouseY_p2, contentY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_240)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollY, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_240), &TM__ju9cg9cywhFyBl2l4t4KQoNA_241)) { raiseOverflow(); goto BeforeRet_;
	};
	clickedLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_241);
	{
		NIM_BOOL T17_;
		NI T19_;
		T17_ = (NIM_BOOL)0;
		T17_ = (clickedLine_1 < ((NI)0));
		if (T17_) goto LA18_;
		T19_ = (NI)0;
		T19_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T17_ = (T19_ <= clickedLine_1);
LA18_: ;
		if (!T17_) goto LA20_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA20_: ;
	if (nimSubInt(mouseX_p1, contentX_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_242)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollX, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_242), &TM__ju9cg9cywhFyBl2l4t4KQoNA_243)) { raiseOverflow(); goto BeforeRet_;
	};
	clickedCol_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_243)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_243));
	{
		NIM_BOOL T24_;
		tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ T28_;
		T24_ = (NIM_BOOL)0;
		T24_ = shiftHeld_p8;
		if (!(T24_)) goto LA25_;
		T24_ = (*state_p0).selection.active;
LA25_: ;
		if (!T24_) goto LA26_;
		T28_.line = clickedLine_1;
		T28_.col = clickedCol_1;
		(*state_p0).selection.end_0 = T28_;
		moveCursor__libZtext95editor_u992(state_p0, clickedLine_1, clickedCol_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA22_;
LA26_: ;
	{
		moveCursor__libZtext95editor_u992(state_p0, clickedLine_1, clickedCol_1);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*state_p0).selection.active = NIM_TRUE;
		(*state_p0).selection.start = (*state_p0).cursor;
		(*state_p0).selection.end_0 = (*state_p0).cursor;
	}
LA22_: ;
	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorMouseDrag__libZtext95editor_u1580)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0, NI mouseX_p1, NI mouseY_p2, NI editorX_p3, NI editorY_p4, NI editorW_p5, NI editorH_p6, tyObject_EditorConfig__t9betA8iqhAbm9aLKO9bPufng config_p7) {
	NIM_BOOL result;
	NI colontmpD_;
	NI colontmpD__2;
	NI lineNumWidth_1;
	NI contentX_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_244;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_245;
	NI contentY_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_246;
	NI contentH_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_247;
	NI targetLine_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_248;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_249;
	NI T10_;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_250;
	NI targetCol_1;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_251;
	NI TM__ju9cg9cywhFyBl2l4t4KQoNA_252;
	tyObject_CursorPos__hSLs9bmjJm3PlCX4in2NlYQ T11_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	{
		if (!!((*state_p0).selection.active)) goto LA3_;
		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA3_: ;
	{
		if (!config_p7.showLineNumbers) goto LA7_;
		colontmpD_ = config_p7.lineNumberWidth;
		lineNumWidth_1 = colontmpD_;
	}
	goto LA5_;
LA7_: ;
	{
		colontmpD__2 = ((NI)0);
		lineNumWidth_1 = colontmpD__2;
	}
LA5_: ;
	if (nimAddInt(editorX_p3, lineNumWidth_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_244)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_244), ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_245)) { raiseOverflow(); goto BeforeRet_;
	};
	contentX_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_245);
	if (nimAddInt(editorY_p4, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_246)) { raiseOverflow(); goto BeforeRet_;
	};
	contentY_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_246);
	if (nimSubInt(editorH_p6, ((NI)2), &TM__ju9cg9cywhFyBl2l4t4KQoNA_247)) { raiseOverflow(); goto BeforeRet_;
	};
	contentH_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_247);
	if (nimSubInt(mouseY_p2, contentY_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_248)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollY, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_248), &TM__ju9cg9cywhFyBl2l4t4KQoNA_249)) { raiseOverflow(); goto BeforeRet_;
	};
	targetLine_1 = (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_249);
	T10_ = (NI)0;
	T10_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	if (nimSubInt(T10_, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_250)) { raiseOverflow(); goto BeforeRet_;
	};
	targetLine_1 = ((((NI)0) >= ((targetLine_1 <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_250)) ? targetLine_1 : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_250))) ? ((NI)0) : ((targetLine_1 <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_250)) ? targetLine_1 : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_250)));
	if (nimSubInt(mouseX_p1, contentX_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_251)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((*state_p0).scrollX, (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_251), &TM__ju9cg9cywhFyBl2l4t4KQoNA_252)) { raiseOverflow(); goto BeforeRet_;
	};
	targetCol_1 = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_252)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_252));
	T11_.line = targetLine_1;
	T11_.col = targetCol_1;
	(*state_p0).selection.end_0 = T11_;
	(*state_p0).cursor.line = targetLine_1;
	(*state_p0).cursor.col = targetCol_1;
	clampCursor__libZtext95editor_u989(state_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*state_p0).desiredCol = (*state_p0).cursor.col;
	{
		NIM_BOOL T14_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_253;
		T14_ = (NIM_BOOL)0;
		T14_ = (mouseY_p2 < contentY_1);
		if (!(T14_)) goto LA15_;
		T14_ = (((NI)0) < (*state_p0).scrollY);
LA15_: ;
		if (!T14_) goto LA16_;
		if (nimSubInt((*state_p0).scrollY, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_253)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).scrollY = ((((NI)0) >= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_253)) ? ((NI)0) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_253));
	}
	goto LA12_;
LA16_: ;
	{
		NIM_BOOL T19_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_254;
		NI T21_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_255;
		NI T24_;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_256;
		NI TM__ju9cg9cywhFyBl2l4t4KQoNA_257;
		T19_ = (NIM_BOOL)0;
		if (nimAddInt(contentY_1, contentH_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_254)) { raiseOverflow(); goto BeforeRet_;
		};
		T19_ = ((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_254) <= mouseY_p2);
		if (!(T19_)) goto LA20_;
		T21_ = (NI)0;
		T21_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T21_, contentH_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_255)) { raiseOverflow(); goto BeforeRet_;
		};
		T19_ = ((*state_p0).scrollY < (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_255));
LA20_: ;
		if (!T19_) goto LA22_;
		T24_ = (NI)0;
		T24_ = lineCount__libZtext95editor_u507((*state_p0).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (nimSubInt(T24_, contentH_1, &TM__ju9cg9cywhFyBl2l4t4KQoNA_256)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt((*state_p0).scrollY, ((NI)1), &TM__ju9cg9cywhFyBl2l4t4KQoNA_257)) { raiseOverflow(); goto BeforeRet_;
		};
		(*state_p0).scrollY = (((NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_256) <= (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_257)) ? (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_256) : (NI)(TM__ju9cg9cywhFyBl2l4t4KQoNA_257));
	}
	goto LA12_;
LA22_: ;
LA12_: ;
	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, handleEditorMouseRelease__libZtext95editor_u1596)(tyObject_EditorStatecolonObjectType___lgClUY61o9cq1ydkC4V767Q* state_p0) {
	NIM_BOOL result;
{	{
		if (!(*state_p0).selection.active) goto LA3_;
		{
			NIM_BOOL T7_;
			T7_ = (NIM_BOOL)0;
			T7_ = ((*state_p0).selection.start.line == (*state_p0).selection.end_0.line);
			if (!(T7_)) goto LA8_;
			T7_ = ((*state_p0).selection.start.col == (*state_p0).selection.end_0.col);
LA8_: ;
			if (!T7_) goto LA9_;
			(*state_p0).selection.active = NIM_FALSE;
			result = NIM_TRUE;
			goto BeforeRet_;
		}
LA9_: ;
	}
LA3_: ;
	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
