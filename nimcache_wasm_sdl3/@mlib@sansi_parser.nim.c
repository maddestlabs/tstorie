/* Generated by Nim Compiler v2.2.6 */
/* Compiled for: Linux, wasm32, clang */
/* Command for C compiler:
   emcc -c -w -ferror-limit=3 -fno-strict-aliasing -sUSE_SDL=3 -I/workspaces/storie-vendor/vendor/SDL_ttf-src/include -Os   -I/home/codespace/.choosenim/toolchains/nim-2.2.6/lib -I/workspaces/telestorie -o /workspaces/telestorie/nimcache_wasm_sdl3/@mlib@sansi_parser.nim.c.o /workspaces/telestorie/nimcache_wasm_sdl3/@mlib@sansi_parser.nim.c */
#define NIM_INTBITS 32

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ tySequence__sM4lkSb7zS6F7OVMvW9cffQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A;
typedef struct tyObject_Env__YOkjv76lcCADUm0ClKJM5g tyObject_Env__YOkjv76lcCADUm0ClKJM5g;
typedef struct tySequence__Gf9avO3sd1YsdKIYcdAbNvA tySequence__Gf9avO3sd1YsdKIYcdAbNvA;
typedef struct tySequence__Gf9avO3sd1YsdKIYcdAbNvA_Content tySequence__Gf9avO3sd1YsdKIYcdAbNvA_Content;
typedef struct tyObject_FunctionValcolonObjectType___pGR2JmOxTVrNPc3jK4h0Xg tyObject_FunctionValcolonObjectType___pGR2JmOxTVrNPc3jK4h0Xg;
typedef struct tyObject_Table__Kkv168EwyeC2mcswHBvZ1A tyObject_Table__Kkv168EwyeC2mcswHBvZ1A;
typedef struct tySequence__2nVARL7psn6awrm07aftcQ tySequence__2nVARL7psn6awrm07aftcQ;
typedef struct tySequence__2nVARL7psn6awrm07aftcQ_Content tySequence__2nVARL7psn6awrm07aftcQ_Content;
typedef struct tyObject_Rand__xd6HIyS1W9aI4gBq8W9ct0qA tyObject_Rand__xd6HIyS1W9aI4gBq8W9ct0qA;
typedef struct tyTuple__JTIDOE9coS9asgfLHY5jZqMA tyTuple__JTIDOE9coS9asgfLHY5jZqMA;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g tySequence__qwqHTkRvwhrRyENtudHQ7g;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content tySequence__qwqHTkRvwhrRyENtudHQ7g_Content;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct tySequence__xhQiLwJj5RFCOa9c4fVuodA tySequence__xhQiLwJj5RFCOa9c4fVuodA;
typedef struct tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content;
typedef struct tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA;
typedef struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ;
typedef struct tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA tySequence__hETDgeXECLenIIi9aRQgjOA;
typedef struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content tySequence__hETDgeXECLenIIi9aRQgjOA_Content;
typedef struct tySequence__48JTohSgTy339bRxHzUD8KA tySequence__48JTohSgTy339bRxHzUD8KA;
typedef struct tySequence__48JTohSgTy339bRxHzUD8KA_Content tySequence__48JTohSgTy339bRxHzUD8KA_Content;
typedef struct tyObject_AnsiParserState__hXKo0zTYmCVqECdNV6ufbw tyObject_AnsiParserState__hXKo0zTYmCVqECdNV6ufbw;
typedef struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ tyObject_Style__UURjArTrf2wmcCbN5MncAQ;
typedef struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ;
typedef struct tyTuple__hSHiEU6uEtL7soi1F4tKCg tyTuple__hSHiEU6uEtL7soi1F4tKCg;
typedef struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA;
typedef struct tyTuple__9bJQUgvR2blr9cUNMhbZPKyA tyTuple__9bJQUgvR2blr9cUNMhbZPKyA;
typedef struct tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg;
typedef N_NIMCALL_PTR(void, tyProc__T4eqaYlFJYZUv9aG9b1TV0bQ) (void);
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ {
  NI len; tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content* p;
};
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tySequence__Gf9avO3sd1YsdKIYcdAbNvA {
  NI len; tySequence__Gf9avO3sd1YsdKIYcdAbNvA_Content* p;
};
typedef struct {
N_NIMCALL_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, ClP_0) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
void* ClE_0;
} tyProc__uEHdpYdtD80h7sXcarWpbg;
typedef NU8 tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ;
struct tySequence__2nVARL7psn6awrm07aftcQ {
  NI len; tySequence__2nVARL7psn6awrm07aftcQ_Content* p;
};
struct tyObject_Table__Kkv168EwyeC2mcswHBvZ1A {
	tySequence__2nVARL7psn6awrm07aftcQ data;
	NI counter;
};
struct tyObject_Rand__xd6HIyS1W9aI4gBq8W9ct0qA {
	NU64 a0;
	NU64 a1;
};
struct tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A {
	tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ kind;
	NI i;
	NF f;
	NIM_BOOL b;
	NimStringV2 s;
	tyObject_FunctionValcolonObjectType___pGR2JmOxTVrNPc3jK4h0Xg* fnVal;
	tyObject_Table__Kkv168EwyeC2mcswHBvZ1A map;
	tySequence__Gf9avO3sd1YsdKIYcdAbNvA arr;
	void* ptrVal;
	tyObject_Rand__xd6HIyS1W9aI4gBq8W9ct0qA randState;
};
struct tySequence__qwqHTkRvwhrRyENtudHQ7g {
  NI len; tySequence__qwqHTkRvwhrRyENtudHQ7g_Content* p;
};
struct tyTuple__JTIDOE9coS9asgfLHY5jZqMA {
	NI Field0;
	NIM_CHAR Field1;
	tySequence__qwqHTkRvwhrRyENtudHQ7g Field2;
};
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
	void* vTable[SEQ_DECL_SIZE];
};
struct RootObj {
	TNimTypeV2* m_type;
};
struct tySequence__xhQiLwJj5RFCOa9c4fVuodA {
  NI len; tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content* p;
};
struct Exception {
	RootObj Sup;
	Exception* parent;
	NCSTRING name;
	NimStringV2 message;
	tySequence__xhQiLwJj5RFCOa9c4fVuodA trace;
	Exception* up;
};
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__7VUp4HkTkBAUceCS9cYfV1A_19) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
struct tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA {
	NI a;
	NI b;
};
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__7VUp4HkTkBAUceCS9cYfV1A_38) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ {
	NI Field0;
	NI Field1;
};
typedef N_CLOSURE_PTR(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, TM__7VUp4HkTkBAUceCS9cYfV1A_49) (tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1, void* ClE_0);
struct tySequence__hETDgeXECLenIIi9aRQgjOA {
  NI len; tySequence__hETDgeXECLenIIi9aRQgjOA_Content* p;
};
struct tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw {
	NI width;
	NI height;
	tySequence__hETDgeXECLenIIi9aRQgjOA cells;
	NI clipX;
	NI clipY;
	NI clipW;
	NI clipH;
	NI offsetX;
	NI offsetY;
};
struct tySequence__48JTohSgTy339bRxHzUD8KA {
  NI len; tySequence__48JTohSgTy339bRxHzUD8KA_Content* p;
};
struct tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ {
	NU8 r;
	NU8 g;
	NU8 b;
};
struct tyObject_Style__UURjArTrf2wmcCbN5MncAQ {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ fg;
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ bg;
	NIM_BOOL bold;
	NIM_BOOL underline;
	NIM_BOOL italic;
	NIM_BOOL dim;
};
struct tyObject_AnsiParserState__hXKo0zTYmCVqECdNV6ufbw {
	NI x;
	NI y;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ style;
	NI savedX;
	NI savedY;
	NI maxX;
	NI maxY;
};
struct tyTuple__hSHiEU6uEtL7soi1F4tKCg {
	NU8 Field0;
	NU8 Field1;
	NU8 Field2;
};
typedef tyTuple__hSHiEU6uEtL7soi1F4tKCg tyArray__jZayXHp3QmrIkn3Up8Iy3g[8];
struct tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA {
	NimStringV2 ch;
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ style;
};
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content { NI cap; NimStringV2 data[SEQ_DECL_SIZE]; };
struct tySequence__Gf9avO3sd1YsdKIYcdAbNvA_Content { NI cap; tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* data[SEQ_DECL_SIZE]; };
struct tyTuple__9bJQUgvR2blr9cUNMhbZPKyA {
	NI Field0;
	NimStringV2 Field1;
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* Field2;
};
struct tySequence__2nVARL7psn6awrm07aftcQ_Content { NI cap; tyTuple__9bJQUgvR2blr9cUNMhbZPKyA data[SEQ_DECL_SIZE]; };
struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content { NI cap; NI data[SEQ_DECL_SIZE]; };
struct tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg {
	NCSTRING procname;
	NI line;
	NCSTRING filename;
};
struct tySequence__xhQiLwJj5RFCOa9c4fVuodA_Content { NI cap; tyObject_StackTraceEntry__1PUuHpJIPD3aeC4eiQfrTg data[SEQ_DECL_SIZE]; };
struct tySequence__hETDgeXECLenIIi9aRQgjOA_Content { NI cap; tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA data[SEQ_DECL_SIZE]; };
struct tySequence__48JTohSgTy339bRxHzUD8KA_Content { NI cap; NI32 data[SEQ_DECL_SIZE]; };
N_LIB_PRIVATE N_NIMCALL(void, queuePluginRegistration__niminiZauto95pointer_u25)(tyProc__T4eqaYlFJYZUv9aG9b1TV0bQ callback_p0);
N_LIB_PRIVATE N_NIMCALL(void, register_stripAnsi__libZansi95parser_u369)(void);
N_LIB_PRIVATE N_NIMCALL(void, registerNative__niminiZruntime_u6373)(NimStringV2 name_p0, tyProc__uEHdpYdtD80h7sXcarWpbg fn_p1, tySequence__sM4lkSb7zS6F7OVMvW9cffQ imports_p2, tySequence__sM4lkSb7zS6F7OVMvW9cffQ storieLibs_p3, tySequence__sM4lkSb7zS6F7OVMvW9cffQ dependencies_p4, NimStringV2 description_p5);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, niminiAuto_stripAnsi__libZansi95parser_u364)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
static N_INLINE(NimStringV2, niminiConvertToString__niminiZauto95bindings_u12)(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* v_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2642)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NOINLINE(void, raiseIndexError2)(NI i_p0, NI n_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, valString__niminiZruntime_u1095)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, stripAnsi__libZansi95parser_u349)(NimStringV2 text_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseOverflow)(void);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(tyTuple__JTIDOE9coS9asgfLHY5jZqMA, parseAnsiSequence__libZansi95parser_u102)(NimStringV2 content_p0, NI startPos_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___niminiZtokenizer_u869)(tySequence__qwqHTkRvwhrRyENtudHQ7g* dest_p0, tySequence__qwqHTkRvwhrRyENtudHQ7g src_p1);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap_p0, NI elemSize_p1, NI elemAlign_p2);
N_LIB_PRIVATE N_NOCONV(void, dealloc)(void* p_p0);
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s_p0, NI addLen_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__niminiZtokenizer_u204)(tySequence__qwqHTkRvwhrRyENtudHQ7g* x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(NI, nsuParseInt)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(void, raiseDefect)(void);
static N_INLINE(void, popCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u3950)(Exception** dest_p0, Exception* src_p1, NIM_BOOL cyclic_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2648)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZansi95parser_u173)(tyTuple__JTIDOE9coS9asgfLHY5jZqMA* dest_p0, tyTuple__JTIDOE9coS9asgfLHY5jZqMA src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___niminiZtokenizer_u860)(tySequence__qwqHTkRvwhrRyENtudHQ7g dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___niminiZtokenizer_u857)(tySequence__qwqHTkRvwhrRyENtudHQ7g* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZansi95parser_u164)(tyTuple__JTIDOE9coS9asgfLHY5jZqMA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u3717)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, register_convertBracketNotationToAnsi__libZansi95parser_u429)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, niminiAuto_convertBracketNotationToAnsi__libZansi95parser_u424)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, convertBracketNotationToAnsi__libZansi95parser_u374)(NimStringV2 text_p0);
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1292)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1);
N_NIMCALL(NimStringV2, mnewString)(NI len_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseRangeErrorI)(NI64 i_p0, NI64 a_p1, NI64 b_p2);
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimPrepareStrMutationImpl__system_u2391)(NimStringV2* s_p0);
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZstrbasics_u48)(NI a_p0, NI b_p1);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, copyMem__system_u1741)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(void, register_getAnsiTextDimensions__libZansi95parser_u465)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, niminiAuto_getAnsiTextDimensions__libZansi95parser_u460)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, tupleWidthHeightToValue__niminiZtype95converters_u3201)(tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ t_p0);
N_LIB_PRIVATE N_NIMCALL(tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ, getAnsiTextDimensions__libZansi95parser_u434)(NimStringV2 text_p0);
N_LIB_PRIVATE N_NIMCALL(void, newAnsiParserState__libZansi95parser_u100)(tyObject_AnsiParserState__hXKo0zTYmCVqECdNV6ufbw* Result);
N_LIB_PRIVATE N_NIMCALL(tyObject_Style__UURjArTrf2wmcCbN5MncAQ, defaultStyle__srcZtypes_u65)(void);
N_LIB_PRIVATE N_NIMCALL(void, newTermBuffer__backendsZterminalZtermbuffer_u4)(NI w_p0, NI h_p1, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* Result);
static N_INLINE(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u7844)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u4517)(NIM_CHAR* s_p0, NI s_p0Len_0);
N_LIB_PRIVATE N_NOINLINE(void, raiseIndexError4)(NI l1_p0, NI h1_p1, NI h2_p2);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, eqeq___pureZunicode_u1126)(NI32 a_p0, NI32 b_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nuctoUTF8)(NI32 c_p0);
N_LIB_PRIVATE N_NIMCALL(void, applySgrParams__libZansi95parser_u44)(tySequence__qwqHTkRvwhrRyENtudHQ7g params_p0, tyObject_Style__UURjArTrf2wmcCbN5MncAQ* style_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, ansi8ToRgb__libZansi95parser_u6)(NI colorNum_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, ansi256ToRgb__libZansi95parser_u33)(NI colorNum_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, white__srcZtypes_u59)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, black__srcZtypes_u45)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___backendsZsdl3Zsdl95canvas_u269)(tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA* dest_p0, tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___pureZunicode_u663)(NI32 rune_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Style__UURjArTrf2wmcCbN5MncAQ, eqdup___srcZtypes_u76)(tyObject_Style__UURjArTrf2wmcCbN5MncAQ src_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___srcZlayers_u13)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZunicode_u714)(tySequence__48JTohSgTy339bRxHzUD8KA dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___srcZlayers_u16)(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, nimTestErrorFlag)(void);
static const struct {
  NI cap; NIM_CHAR data[9+1];
} TM__7VUp4HkTkBAUceCS9cYfV1A_2 = { 9 | NIM_STRLIT_FLAG, "stripAnsi" };
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_3 = {9, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_2};
static const struct {
  NI cap; NIM_CHAR data[0+1];
} TM__7VUp4HkTkBAUceCS9cYfV1A_4 = { 0 | NIM_STRLIT_FLAG, "" };
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_5 = {0, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_4};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_6 = {0, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_4};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_11 = {0, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_4};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_13 = {0, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_4};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__7VUp4HkTkBAUceCS9cYfV1A_20 = { 4 | NIM_STRLIT_FLAG, "ansi" };
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_21 = {4, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_20};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_22 = {0, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_4};
static const struct {
  NI cap; NIM_CHAR data[28+1];
} TM__7VUp4HkTkBAUceCS9cYfV1A_23 = { 28 | NIM_STRLIT_FLAG, "convertBracketNotationToAnsi" };
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_24 = {28, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_23};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_25 = {0, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_4};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_39 = {4, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_20};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_40 = {0, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_4};
static const struct {
  NI cap; NIM_CHAR data[21+1];
} TM__7VUp4HkTkBAUceCS9cYfV1A_41 = { 21 | NIM_STRLIT_FLAG, "getAnsiTextDimensions" };
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_42 = {21, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_41};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_50 = {4, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_20};
static const NimStringV2 TM__7VUp4HkTkBAUceCS9cYfV1A_51 = {0, (NimStrPayload*)&TM__7VUp4HkTkBAUceCS9cYfV1A_4};
N_LIB_PRIVATE NIM_CONST tyArray__jZayXHp3QmrIkn3Up8Iy3g baseColors__libZansi95parser_u9 = {{((NU8)0),
((NU8)0),
((NU8)0)}
,
{((NU8)205),
((NU8)49),
((NU8)49)}
,
{((NU8)13),
((NU8)188),
((NU8)121)}
,
{((NU8)229),
((NU8)229),
((NU8)16)}
,
{((NU8)36),
((NU8)114),
((NU8)200)}
,
{((NU8)188),
((NU8)63),
((NU8)188)}
,
{((NU8)17),
((NU8)168),
((NU8)205)}
,
{((NU8)229),
((NU8)229),
((NU8)229)}
}
;
N_LIB_PRIVATE NIM_CONST tyArray__jZayXHp3QmrIkn3Up8Iy3g brightColors__libZansi95parser_u10 = {{((NU8)102),
((NU8)102),
((NU8)102)}
,
{((NU8)241),
((NU8)76),
((NU8)76)}
,
{((NU8)35),
((NU8)209),
((NU8)139)}
,
{((NU8)245),
((NU8)245),
((NU8)67)}
,
{((NU8)59),
((NU8)142),
((NU8)234)}
,
{((NU8)214),
((NU8)112),
((NU8)214)}
,
{((NU8)41),
((NU8)184),
((NU8)219)}
,
{((NU8)255),
((NU8)255),
((NU8)255)}
}
;
extern NIM_BOOL nimInErrorMode__system_u4234;
extern Exception* currException__system_u3917;
static N_INLINE(NimStringV2, niminiConvertToString__niminiZauto95bindings_u12)(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* v_p0) {
	NimStringV2 result;
	NimStringV2 T1_;
	result.len = 0; result.p = NIM_NIL;
	T1_.len = 0; T1_.p = NIM_NIL;
	{
		if (!((*v_p0).kind == ((tyEnum_ValueKind__QxtKmTl5uLHSaIOWTFlTlQ)4))) goto LA4_;
		eqcopy___system_u2642((&result), (*v_p0).s);
	}
	goto LA2_;
LA4_: ;
	{
		result = TM__7VUp4HkTkBAUceCS9cYfV1A_5;
	}
LA2_: ;
	return result;
}
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4234);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1) {
	NI TM__7VUp4HkTkBAUceCS9cYfV1A_12;
{	prepareAdd(s_p0, ((NI)1));
	(*(*s_p0).p).data[(*s_p0).len] = c_p1;
	if (nimAddInt((*s_p0).len, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_12)) { raiseOverflow(); goto BeforeRet_;
	};
	(*s_p0).len = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_12);
	(*(*s_p0).p).data[(*s_p0).len] = 0;
	}BeforeRet_: ;
}
static N_INLINE(void, popCurrentException)(void) {
	eqcopy___system_u3950(&currException__system_u3917, (*currException__system_u3917).up, NIM_FALSE);
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___libZansi95parser_u173)(tyTuple__JTIDOE9coS9asgfLHY5jZqMA* dest_p0, tyTuple__JTIDOE9coS9asgfLHY5jZqMA src_p1) {
	(*dest_p0).Field0 = src_p1.Field0;
	(*dest_p0).Field1 = src_p1.Field1;
	if ((*dest_p0).Field2.p != src_p1.Field2.p) {	eqdestroy___niminiZtokenizer_u860((*dest_p0).Field2);
	}
(*dest_p0).Field2.len = src_p1.Field2.len; (*dest_p0).Field2.p = src_p1.Field2.p;
}
N_LIB_PRIVATE N_NIMCALL(tyTuple__JTIDOE9coS9asgfLHY5jZqMA, parseAnsiSequence__libZansi95parser_u102)(NimStringV2 content_p0, NI startPos_p1) {
	tyTuple__JTIDOE9coS9asgfLHY5jZqMA result;
	NimStringV2 numStr_1;
	tySequence__qwqHTkRvwhrRyENtudHQ7g T2_;
	NI i_1;
	NI TM__7VUp4HkTkBAUceCS9cYfV1A_9;
	NI TM__7VUp4HkTkBAUceCS9cYfV1A_10;
	NIM_BOOL foundCmd_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyTuple__JTIDOE9coS9asgfLHY5jZqMA));
	numStr_1.len = 0; numStr_1.p = NIM_NIL;
	result.Field0 = ((NI)0);
	result.Field1 = 0;
	T2_.len = 0; T2_.p = NIM_NIL;
	T2_.len = 0; T2_.p = (tySequence__qwqHTkRvwhrRyENtudHQ7g_Content*) newSeqPayload(0, sizeof(NI), NIM_ALIGNOF(NI));
	eqsink___niminiZtokenizer_u869((&result.Field2), T2_);
	i_1 = startPos_p1;
	{
		NIM_BOOL T5_;
		T5_ = (NIM_BOOL)0;
		T5_ = (content_p0.len <= i_1);
		if (T5_) goto LA6_;
		if (i_1 < 0 || i_1 >= content_p0.len){ raiseIndexError2(i_1,content_p0.len-1); goto LA1_;
		}
		T5_ = !(((NU8)(content_p0.p->data[i_1]) == (NU8)(27)));
LA6_: ;
		if (!T5_) goto LA7_;
		if (numStr_1.p && !(numStr_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(numStr_1.p);
}
		goto BeforeRet_;
	}
LA7_: ;
	if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_9)) { raiseOverflow(); goto LA1_;
	};
	i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_9);
	{
		NIM_BOOL T11_;
		T11_ = (NIM_BOOL)0;
		T11_ = (content_p0.len <= i_1);
		if (T11_) goto LA12_;
		if (i_1 < 0 || i_1 >= content_p0.len){ raiseIndexError2(i_1,content_p0.len-1); goto LA1_;
		}
		T11_ = !(((NU8)(content_p0.p->data[i_1]) == (NU8)(91)));
LA12_: ;
		if (!T11_) goto LA13_;
		if (numStr_1.p && !(numStr_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(numStr_1.p);
}
		goto BeforeRet_;
	}
LA13_: ;
	if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_10)) { raiseOverflow(); goto LA1_;
	};
	i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_10);
	numStr_1 = TM__7VUp4HkTkBAUceCS9cYfV1A_11;
	foundCmd_1 = NIM_FALSE;
	{
		while (1) {
			NIM_CHAR ch_1;
			NI TM__7VUp4HkTkBAUceCS9cYfV1A_15;
			if (!(i_1 < content_p0.len)) goto LA16;
			if (i_1 < 0 || i_1 >= content_p0.len){ raiseIndexError2(i_1,content_p0.len-1); goto LA1_;
			}
			ch_1 = content_p0.p->data[i_1];
			switch (((NU8)(ch_1))) {
			case 48 ... 57:
			{
				nimAddCharV1((&numStr_1), ch_1);
			}
			break;
			case 59:
			case 58:
			{
				{
					NI T24_;
					if (!(((NI)0) < numStr_1.len)) goto LA21_;
					T24_ = (NI)0;
					T24_ = nsuParseInt(numStr_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA23_;
					add__niminiZtokenizer_u204((&result.Field2), T24_);
					if (NIM_UNLIKELY(*nimErr_)) {
						LA23_:;
						{
							*nimErr_ = NIM_FALSE;
							raiseDefect();
							add__niminiZtokenizer_u204((&result.Field2), ((NI)0));
							popCurrentException();
							LA26_:;
						}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					eqsink___system_u2648((&numStr_1), TM__7VUp4HkTkBAUceCS9cYfV1A_13);
				}
				goto LA19_;
LA21_: ;
				{
					add__niminiZtokenizer_u204((&result.Field2), ((NI)0));
				}
LA19_: ;
			}
			break;
			case 65 ... 90:
			case 97 ... 122:
			{
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_14;
				{
					NI T35_;
					if (!(((NI)0) < numStr_1.len)) goto LA32_;
					T35_ = (NI)0;
					T35_ = nsuParseInt(numStr_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA34_;
					add__niminiZtokenizer_u204((&result.Field2), T35_);
					if (NIM_UNLIKELY(*nimErr_)) {
						LA34_:;
						{
							*nimErr_ = NIM_FALSE;
							raiseDefect();
							add__niminiZtokenizer_u204((&result.Field2), ((NI)0));
							popCurrentException();
							LA37_:;
						}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA32_: ;
				result.Field1 = ch_1;
				foundCmd_1 = NIM_TRUE;
				if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_14)) { raiseOverflow(); goto LA1_;
				};
				i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_14);
				goto LA15;
			}
			break;
			default:
			{
				tySequence__qwqHTkRvwhrRyENtudHQ7g colontmp_;
				NI colontmp__2;
				NIM_CHAR colontmp__3;
				tyTuple__JTIDOE9coS9asgfLHY5jZqMA T41_;
				tySequence__qwqHTkRvwhrRyENtudHQ7g blitTmp_1;
				colontmp_.len = 0; colontmp_.p = NIM_NIL;
				colontmp__2 = ((NI)0);
				colontmp__3 = 0;
				colontmp_.len = 0; colontmp_.p = (tySequence__qwqHTkRvwhrRyENtudHQ7g_Content*) newSeqPayload(0, sizeof(NI), NIM_ALIGNOF(NI));
				T41_.Field0 = colontmp__2;
				T41_.Field1 = colontmp__3;
				blitTmp_1 = colontmp_;
				eqwasMoved___niminiZtokenizer_u857((&colontmp_));
				T41_.Field2 = blitTmp_1;
				eqsink___libZansi95parser_u173((&result), T41_);
				eqdestroy___niminiZtokenizer_u860(colontmp_);
				if (numStr_1.p && !(numStr_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(numStr_1.p);
}
				goto BeforeRet_;
				{
					LA40_:;
				}
				{
					eqdestroy___niminiZtokenizer_u860(colontmp_);
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			}
			break;
			}
			if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_15)) { raiseOverflow(); goto LA1_;
			};
			i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_15);
		} LA16: ;
	} LA15: ;
	{
		NI TM__7VUp4HkTkBAUceCS9cYfV1A_16;
		if (!foundCmd_1) goto LA46_;
		if (nimSubInt(i_1, startPos_p1, &TM__7VUp4HkTkBAUceCS9cYfV1A_16)) { raiseOverflow(); goto LA1_;
		};
		result.Field0 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_16);
	}
	goto LA44_;
LA46_: ;
	{
		result.Field0 = ((NI)0);
	}
LA44_: ;
	{
		LA1_:;
	}
	{
		if (numStr_1.p && !(numStr_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(numStr_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___libZansi95parser_u164)(tyTuple__JTIDOE9coS9asgfLHY5jZqMA* dest_p0) {
	eqdestroy___niminiZtokenizer_u860((*dest_p0).Field2);
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, stripAnsi__libZansi95parser_u349)(NimStringV2 text_p0) {
	NimStringV2 result;
	NI i_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = TM__7VUp4HkTkBAUceCS9cYfV1A_6;
	i_1 = ((NI)0);
	{
		while (1) {
			if (!(i_1 < text_p0.len)) goto LA2;
			{
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_18;
				{
					NIM_BOOL T6_;
					NIM_BOOL T7_;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_7;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_8;
					tyTuple__JTIDOE9coS9asgfLHY5jZqMA tmpTuple_1;
					NI seqLen_1;
					T6_ = (NIM_BOOL)0;
					T7_ = (NIM_BOOL)0;
					if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
					}
					T7_ = ((NU8)(text_p0.p->data[i_1]) == (NU8)(27));
					if (!(T7_)) goto LA8_;
					if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_7)) { raiseOverflow(); goto BeforeRet_;
					};
					T7_ = ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_7) < text_p0.len);
LA8_: ;
					T6_ = T7_;
					if (!(T6_)) goto LA9_;
					if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_8)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_8) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_8) >= text_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_8),text_p0.len-1); goto BeforeRet_;
					}
					T6_ = ((NU8)(text_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_8)]) == (NU8)(91));
LA9_: ;
					if (!T6_) goto LA10_;
					nimZeroMem((void*)(&tmpTuple_1), sizeof(tyTuple__JTIDOE9coS9asgfLHY5jZqMA));
					tmpTuple_1 = parseAnsiSequence__libZansi95parser_u102(text_p0, i_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
					seqLen_1 = tmpTuple_1.Field0;
					{
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_17;
						if (!(((NI)0) < seqLen_1)) goto LA15_;
						if (nimAddInt(i_1, seqLen_1, &TM__7VUp4HkTkBAUceCS9cYfV1A_17)) { raiseOverflow(); goto LA12_;
						};
						i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_17);
						eqdestroy___libZansi95parser_u164((&tmpTuple_1));
						goto LA3;
					}
LA15_: ;
					{
						LA12_:;
					}
					{
						eqdestroy___libZansi95parser_u164((&tmpTuple_1));
					}
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA10_: ;
				if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
				}
				nimAddCharV1((&result), text_p0.p->data[i_1]);
				if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_18)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_18);
			} LA3: ;
		} LA2: ;
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, niminiAuto_stripAnsi__libZansi95parser_u364)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	NimStringV2 text_1;
	NimStringV2 colontmpD_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	text_1.len = 0; text_1.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto LA1_;
	}
	text_1 = niminiConvertToString__niminiZauto95bindings_u12(args_p1.p->data[((NI)0)]);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	colontmpD_ = stripAnsi__libZansi95parser_u349(text_1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	result = valString__niminiZruntime_u1095(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
	if (text_1.p && !(text_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(text_1.p);
}
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
		if (text_1.p && !(text_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(text_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, register_stripAnsi__libZansi95parser_u369)(void) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T1_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T2_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T3_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&T1_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T1_.ClP_0 = ((TM__7VUp4HkTkBAUceCS9cYfV1A_19) (niminiAuto_stripAnsi__libZansi95parser_u364)); T1_.ClE_0 = NIM_NIL;
	T2_.len = 0; T2_.p = NIM_NIL;
	T2_.len = 0; T2_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	colontmpD_.len = 1; colontmpD_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	colontmpD_.p->data[0] = TM__7VUp4HkTkBAUceCS9cYfV1A_21;
	T3_.len = 0; T3_.p = NIM_NIL;
	T3_.len = 0; T3_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__7VUp4HkTkBAUceCS9cYfV1A_3, T1_, T2_, colontmpD_, T3_, TM__7VUp4HkTkBAUceCS9cYfV1A_22);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqdestroy___system_u3717(colontmpD_);
	}BeforeRet_: ;
}
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = !(((*s_p0).p == ((NimStrPayload*) NIM_NIL)));
		if (!(T3_)) goto LA4_;
		T3_ = ((NI)((*(*s_p0).p).cap & ((NI)1073741824)) == ((NI)1073741824));
LA4_: ;
		if (!T3_) goto LA5_;
		nimPrepareStrMutationImpl__system_u2391(s_p0);
	}
LA5_: ;
}
static N_INLINE(NimStringV2, X5BX5D___pureZstrutils_u1292)(NimStringV2 s_p0, tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA x_p1) {
	NimStringV2 result;
	NI a_1;
	NI L_1;
	NI TM__7VUp4HkTkBAUceCS9cYfV1A_30;
	NI TM__7VUp4HkTkBAUceCS9cYfV1A_31;
{	result.len = 0; result.p = NIM_NIL;
	a_1 = x_p1.a;
	if (nimSubInt(x_p1.b, a_1, &TM__7VUp4HkTkBAUceCS9cYfV1A_30)) { raiseOverflow(); goto BeforeRet_;
	};
	if (nimAddInt((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_30), ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_31)) { raiseOverflow(); goto BeforeRet_;
	};
	L_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_31);
	if ((L_1) < ((NI)0) || (L_1) > ((NI)2147483647)){ raiseRangeErrorI(L_1, ((NI)0), ((NI)2147483647)); goto BeforeRet_;
	}
	result = mnewString((L_1));
	{
		NI i_1;
		NI i_2;
		i_1 = (NI)0;
		i_2 = ((NI)0);
		{
			while (1) {
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_32;
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_33;
				if (!(i_2 < L_1)) goto LA3;
				i_1 = i_2;
				if (i_1 < 0 || i_1 >= result.len){ raiseIndexError2(i_1,result.len-1); goto BeforeRet_;
				}
				nimPrepareStrMutationV2((&result));
				if (nimAddInt(i_1, a_1, &TM__7VUp4HkTkBAUceCS9cYfV1A_32)) { raiseOverflow(); goto BeforeRet_;
				};
				if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_32) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_32) >= s_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_32),s_p0.len-1); goto BeforeRet_;
				}
				result.p->data[i_1] = s_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_32)];
				if (nimAddInt(i_2, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_33)) { raiseOverflow(); goto BeforeRet_;
				};
				i_2 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_33);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
static N_INLINE(tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA, dotdot___stdZstrbasics_u48)(NI a_p0, NI b_p1) {
	tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA result;
	result.a = a_p0;
	result.b = b_p1;
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}
static N_INLINE(void, copyMem__system_u1741)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
{	{
		NI TM__7VUp4HkTkBAUceCS9cYfV1A_35;
		if (!(((NI)0) < src_p1.len)) goto LA3_;
		if ((src_p1.len) < ((NI)0) || (src_p1.len) > ((NI)2147483647)){ raiseRangeErrorI(src_p1.len, ((NI)0), ((NI)2147483647)); goto BeforeRet_;
		}
		copyMem__system_u1741(((void*) ((&(*(*dest_p0).p).data[(*dest_p0).len]))), ((void*) ((&(*src_p1.p).data[((NI)0)]))), (src_p1.len));
		if (nimAddInt((*dest_p0).len, src_p1.len, &TM__7VUp4HkTkBAUceCS9cYfV1A_35)) { raiseOverflow(); goto BeforeRet_;
		};
		(*dest_p0).len = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_35);
		(*(*dest_p0).p).data[(*dest_p0).len] = 0;
	}
LA3_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, convertBracketNotationToAnsi__libZansi95parser_u374)(NimStringV2 text_p0) {
	NimStringV2 result;
	NI i_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = TM__7VUp4HkTkBAUceCS9cYfV1A_25;
	i_1 = ((NI)0);
	{
		while (1) {
			if (!(i_1 < text_p0.len)) goto LA2;
			{
				NI j_1;
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_26;
				NIM_BOOL isAnsiCode_1;
				if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
				}
				if (!((NU8)(text_p0.p->data[i_1]) == (NU8)(91))) goto LA5_;
				if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_26)) { raiseOverflow(); goto BeforeRet_;
				};
				j_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_26);
				isAnsiCode_1 = NIM_FALSE;
				{
					while (1) {
						if (!(j_1 < text_p0.len)) goto LA8;
						if (j_1 < 0 || j_1 >= text_p0.len){ raiseIndexError2(j_1,text_p0.len-1); goto BeforeRet_;
						}
						switch (((NU8)(text_p0.p->data[j_1]))) {
						case 48 ... 57:
						case 59:
						case 58:
						{
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_27;
							if (nimAddInt(j_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_27)) { raiseOverflow(); goto BeforeRet_;
							};
							j_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_27);
						}
						break;
						case 65 ... 90:
						case 97 ... 122:
						{
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_28;
							isAnsiCode_1 = NIM_TRUE;
							if (nimAddInt(j_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_28)) { raiseOverflow(); goto BeforeRet_;
							};
							j_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_28);
							goto LA7;
						}
						break;
						default:
						{
							goto LA7;
						}
						break;
						}
					} LA8: ;
				} LA7: ;
				{
					NIM_BOOL T14_;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_29;
					NimStringV2 colontmpD_;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_34;
					tyObject_HSlice__lHgNVhT9csv0Ntz6xvKK2dA T18_;
					T14_ = (NIM_BOOL)0;
					T14_ = isAnsiCode_1;
					if (!(T14_)) goto LA15_;
					if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_29)) { raiseOverflow(); goto BeforeRet_;
					};
					T14_ = ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_29) < j_1);
LA15_: ;
					if (!T14_) goto LA16_;
					colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
					nimAddCharV1((&result), 27);
					if (nimSubInt(j_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_34)) { raiseOverflow(); goto BeforeRet_;
					};
					T18_ = dotdot___stdZstrbasics_u48(i_1, (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_34));
					colontmpD_ = X5BX5D___pureZstrutils_u1292(text_p0, T18_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					prepareAdd((&result), colontmpD_.len + 0);
appendString((&result), colontmpD_);
					i_1 = j_1;
					if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
				}
				goto LA12_;
LA16_: ;
				{
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_36;
					if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
					}
					nimAddCharV1((&result), text_p0.p->data[i_1]);
					if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_36)) { raiseOverflow(); goto BeforeRet_;
					};
					i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_36);
				}
LA12_: ;
			}
			goto LA3_;
LA5_: ;
			{
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_37;
				if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
				}
				nimAddCharV1((&result), text_p0.p->data[i_1]);
				if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_37)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_37);
			}
LA3_: ;
		} LA2: ;
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, niminiAuto_convertBracketNotationToAnsi__libZansi95parser_u424)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	NimStringV2 text_1;
	NimStringV2 colontmpD_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	text_1.len = 0; text_1.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto LA1_;
	}
	text_1 = niminiConvertToString__niminiZauto95bindings_u12(args_p1.p->data[((NI)0)]);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	colontmpD_ = convertBracketNotationToAnsi__libZansi95parser_u374(text_1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	result = valString__niminiZruntime_u1095(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
	if (text_1.p && !(text_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(text_1.p);
}
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
		if (text_1.p && !(text_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(text_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, register_convertBracketNotationToAnsi__libZansi95parser_u429)(void) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T1_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T2_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T3_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&T1_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T1_.ClP_0 = ((TM__7VUp4HkTkBAUceCS9cYfV1A_38) (niminiAuto_convertBracketNotationToAnsi__libZansi95parser_u424)); T1_.ClE_0 = NIM_NIL;
	T2_.len = 0; T2_.p = NIM_NIL;
	T2_.len = 0; T2_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	colontmpD_.len = 1; colontmpD_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	colontmpD_.p->data[0] = TM__7VUp4HkTkBAUceCS9cYfV1A_39;
	T3_.len = 0; T3_.p = NIM_NIL;
	T3_.len = 0; T3_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__7VUp4HkTkBAUceCS9cYfV1A_24, T1_, T2_, colontmpD_, T3_, TM__7VUp4HkTkBAUceCS9cYfV1A_40);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqdestroy___system_u3717(colontmpD_);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ, getAnsiTextDimensions__libZansi95parser_u434)(NimStringV2 text_p0) {
	tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ result;
	NI currentX_1;
	NI i_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ));
	result.Field0 = ((NI)0);
	result.Field1 = ((NI)1);
	currentX_1 = ((NI)0);
	i_1 = ((NI)0);
	{
		while (1) {
			if (!(i_1 < text_p0.len)) goto LA2;
			{
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_48;
				{
					NIM_BOOL T6_;
					NIM_BOOL T7_;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_43;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_44;
					tyTuple__JTIDOE9coS9asgfLHY5jZqMA tmpTuple_1;
					NI seqLen_1;
					T6_ = (NIM_BOOL)0;
					T7_ = (NIM_BOOL)0;
					if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
					}
					T7_ = ((NU8)(text_p0.p->data[i_1]) == (NU8)(27));
					if (!(T7_)) goto LA8_;
					if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_43)) { raiseOverflow(); goto BeforeRet_;
					};
					T7_ = ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_43) < text_p0.len);
LA8_: ;
					T6_ = T7_;
					if (!(T6_)) goto LA9_;
					if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_44)) { raiseOverflow(); goto BeforeRet_;
					};
					if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_44) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_44) >= text_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_44),text_p0.len-1); goto BeforeRet_;
					}
					T6_ = ((NU8)(text_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_44)]) == (NU8)(91));
LA9_: ;
					if (!T6_) goto LA10_;
					nimZeroMem((void*)(&tmpTuple_1), sizeof(tyTuple__JTIDOE9coS9asgfLHY5jZqMA));
					tmpTuple_1 = parseAnsiSequence__libZansi95parser_u102(text_p0, i_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
					seqLen_1 = tmpTuple_1.Field0;
					{
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_45;
						if (!(((NI)0) < seqLen_1)) goto LA15_;
						if (nimAddInt(i_1, seqLen_1, &TM__7VUp4HkTkBAUceCS9cYfV1A_45)) { raiseOverflow(); goto LA12_;
						};
						i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_45);
						eqdestroy___libZansi95parser_u164((&tmpTuple_1));
						goto LA3;
					}
LA15_: ;
					{
						LA12_:;
					}
					{
						eqdestroy___libZansi95parser_u164((&tmpTuple_1));
					}
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
LA10_: ;
				if (i_1 < 0 || i_1 >= text_p0.len){ raiseIndexError2(i_1,text_p0.len-1); goto BeforeRet_;
				}
				switch (((NU8)(text_p0.p->data[i_1]))) {
				case 10:
				{
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_46;
					if (nimAddInt(result.Field1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_46)) { raiseOverflow(); goto BeforeRet_;
					};
					result.Field1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_46);
					currentX_1 = ((NI)0);
				}
				break;
				case 13:
				{
					currentX_1 = ((NI)0);
				}
				break;
				default:
				{
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_47;
					if (nimAddInt(currentX_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_47)) { raiseOverflow(); goto BeforeRet_;
					};
					currentX_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_47);
					{
						if (!(result.Field0 < currentX_1)) goto LA24_;
						result.Field0 = currentX_1;
					}
LA24_: ;
				}
				break;
				}
				if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_48)) { raiseOverflow(); goto BeforeRet_;
				};
				i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_48);
			} LA3: ;
		} LA2: ;
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A*, niminiAuto_getAnsiTextDimensions__libZansi95parser_u460)(tyObject_Env__YOkjv76lcCADUm0ClKJM5g* env_p0, tySequence__Gf9avO3sd1YsdKIYcdAbNvA args_p1) {
	tyObject_ValuecolonObjectType___HXMY0yUY2exDyJ1egQNy5A* result;
	NimStringV2 text_1;
	tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ T2_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	text_1.len = 0; text_1.p = NIM_NIL;
	if (((NI)0) < 0 || ((NI)0) >= args_p1.len){ raiseIndexError2(((NI)0),args_p1.len-1); goto LA1_;
	}
	text_1 = niminiConvertToString__niminiZauto95bindings_u12(args_p1.p->data[((NI)0)]);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T2_ = getAnsiTextDimensions__libZansi95parser_u434(text_1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	result = tupleWidthHeightToValue__niminiZtype95converters_u3201(T2_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	if (text_1.p && !(text_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(text_1.p);
}
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		if (text_1.p && !(text_1.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(text_1.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, register_getAnsiTextDimensions__libZansi95parser_u465)(void) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD_;
	tyProc__uEHdpYdtD80h7sXcarWpbg T1_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T2_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ T3_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	nimZeroMem((void*)(&T1_), sizeof(tyProc__uEHdpYdtD80h7sXcarWpbg));
	T1_.ClP_0 = ((TM__7VUp4HkTkBAUceCS9cYfV1A_49) (niminiAuto_getAnsiTextDimensions__libZansi95parser_u460)); T1_.ClE_0 = NIM_NIL;
	T2_.len = 0; T2_.p = NIM_NIL;
	T2_.len = 0; T2_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	colontmpD_.len = 1; colontmpD_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	colontmpD_.p->data[0] = TM__7VUp4HkTkBAUceCS9cYfV1A_50;
	T3_.len = 0; T3_.p = NIM_NIL;
	T3_.len = 0; T3_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(0, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	registerNative__niminiZruntime_u6373(TM__7VUp4HkTkBAUceCS9cYfV1A_42, T1_, T2_, colontmpD_, T3_, TM__7VUp4HkTkBAUceCS9cYfV1A_51);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqdestroy___system_u3717(colontmpD_);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, newAnsiParserState__libZansi95parser_u100)(tyObject_AnsiParserState__hXKo0zTYmCVqECdNV6ufbw* Result) {
	tyObject_Style__UURjArTrf2wmcCbN5MncAQ T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyObject_AnsiParserState__hXKo0zTYmCVqECdNV6ufbw));
	(*Result).x = ((NI)0);
	(*Result).y = ((NI)0);
	nimZeroMem((void*)(&T1_), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
	T1_ = defaultStyle__srcZtypes_u65();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).style = T1_;
	(*Result).savedX = ((NI)0);
	(*Result).savedY = ((NI)0);
	(*Result).maxX = ((NI)0);
	(*Result).maxY = ((NI)0);
	}BeforeRet_: ;
}
static N_INLINE(tySequence__48JTohSgTy339bRxHzUD8KA, toRunes__pureZunicode_u7844)(NimStringV2 s_p0) {
	tySequence__48JTohSgTy339bRxHzUD8KA result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	if ((s_p0.len-1)-((NI)0) != -1 && (((NI)0) < 0 || ((NI)0) >= s_p0.len || (s_p0.len-1) < 0 || (s_p0.len-1) >= s_p0.len)){ raiseIndexError4(((NI)0), (s_p0.len-1), s_p0.len); goto BeforeRet_;
	}
	result = toRunes__pureZunicode_u4517((((s_p0).p) ? ((NIM_CHAR*)s_p0.p->data+(((NI)0))) : NIM_NIL), ((s_p0.len-1))-(((NI)0))+1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, ansi8ToRgb__libZansi95parser_u6)(NI colorNum_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
	NI idx_1;
{	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	idx_1 = (NI)((colorNum_p0) % (((NI)16)));
	{
		tyTuple__hSHiEU6uEtL7soi1F4tKCg c_1;
		if (!(idx_1 < ((NI)8))) goto LA3_;
		if ((NU)(idx_1) > (NU)(7)){ raiseIndexError2(idx_1, 7); goto BeforeRet_;
		}
		c_1 = baseColors__libZansi95parser_u9[(idx_1)- 0];
		result.r = c_1.Field0;
		result.g = c_1.Field1;
		result.b = c_1.Field2;
		goto BeforeRet_;
	}
	goto LA1_;
LA3_: ;
	{
		tyTuple__hSHiEU6uEtL7soi1F4tKCg c_2;
		NI TM__7VUp4HkTkBAUceCS9cYfV1A_56;
		if (nimSubInt(idx_1, ((NI)8), &TM__7VUp4HkTkBAUceCS9cYfV1A_56)) { raiseOverflow(); goto BeforeRet_;
		};
		if ((NU)((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_56)) > (NU)(7)){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_56), 7); goto BeforeRet_;
		}
		c_2 = brightColors__libZansi95parser_u10[((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_56))- 0];
		result.r = c_2.Field0;
		result.g = c_2.Field1;
		result.b = c_2.Field2;
		goto BeforeRet_;
	}
LA1_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ, ansi256ToRgb__libZansi95parser_u33)(NI colorNum_p0) {
	tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
	{
		if (!(colorNum_p0 < ((NI)16))) goto LA3_;
		result = ansi8ToRgb__libZansi95parser_u6(colorNum_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	goto LA1_;
LA3_: ;
	{
		NU8 colontmpD_;
		NU8 colontmpD__2;
		NU8 colontmpD__3;
		NU8 colontmpD__4;
		NU8 colontmpD__5;
		NU8 colontmpD__6;
		NI idx_1;
		NI TM__7VUp4HkTkBAUceCS9cYfV1A_61;
		NI r_1;
		NI g_1;
		NI b_1;
		NU8 rVal_1;
		NU8 gVal_1;
		NU8 bVal_1;
		if (!(colorNum_p0 < ((NI)232))) goto LA6_;
		colontmpD_ = (NU8)0;
		colontmpD__2 = (NU8)0;
		colontmpD__3 = (NU8)0;
		colontmpD__4 = (NU8)0;
		colontmpD__5 = (NU8)0;
		colontmpD__6 = (NU8)0;
		if (nimSubInt(colorNum_p0, ((NI)16), &TM__7VUp4HkTkBAUceCS9cYfV1A_61)) { raiseOverflow(); goto BeforeRet_;
		};
		idx_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_61);
		r_1 = (NI)(((NI)((idx_1) / (((NI)36)))) % (((NI)6)));
		g_1 = (NI)(((NI)((idx_1) / (((NI)6)))) % (((NI)6)));
		b_1 = (NI)((idx_1) % (((NI)6)));
		{
			if (!(r_1 == ((NI)0))) goto LA10_;
			colontmpD_ = ((NU8)0);
			rVal_1 = colontmpD_;
		}
		goto LA8_;
LA10_: ;
		{
			NI TM__7VUp4HkTkBAUceCS9cYfV1A_62;
			NI TM__7VUp4HkTkBAUceCS9cYfV1A_63;
			if (nimMulInt(r_1, ((NI)40), &TM__7VUp4HkTkBAUceCS9cYfV1A_62)) { raiseOverflow(); goto BeforeRet_;
			};
			if (nimAddInt(((NI)55), (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_62), &TM__7VUp4HkTkBAUceCS9cYfV1A_63)) { raiseOverflow(); goto BeforeRet_;
			};
			colontmpD__2 = ((NU8) ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_63)));
			rVal_1 = colontmpD__2;
		}
LA8_: ;
		{
			if (!(g_1 == ((NI)0))) goto LA15_;
			colontmpD__3 = ((NU8)0);
			gVal_1 = colontmpD__3;
		}
		goto LA13_;
LA15_: ;
		{
			NI TM__7VUp4HkTkBAUceCS9cYfV1A_64;
			NI TM__7VUp4HkTkBAUceCS9cYfV1A_65;
			if (nimMulInt(g_1, ((NI)40), &TM__7VUp4HkTkBAUceCS9cYfV1A_64)) { raiseOverflow(); goto BeforeRet_;
			};
			if (nimAddInt(((NI)55), (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_64), &TM__7VUp4HkTkBAUceCS9cYfV1A_65)) { raiseOverflow(); goto BeforeRet_;
			};
			colontmpD__4 = ((NU8) ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_65)));
			gVal_1 = colontmpD__4;
		}
LA13_: ;
		{
			if (!(b_1 == ((NI)0))) goto LA20_;
			colontmpD__5 = ((NU8)0);
			bVal_1 = colontmpD__5;
		}
		goto LA18_;
LA20_: ;
		{
			NI TM__7VUp4HkTkBAUceCS9cYfV1A_66;
			NI TM__7VUp4HkTkBAUceCS9cYfV1A_67;
			if (nimMulInt(b_1, ((NI)40), &TM__7VUp4HkTkBAUceCS9cYfV1A_66)) { raiseOverflow(); goto BeforeRet_;
			};
			if (nimAddInt(((NI)55), (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_66), &TM__7VUp4HkTkBAUceCS9cYfV1A_67)) { raiseOverflow(); goto BeforeRet_;
			};
			colontmpD__6 = ((NU8) ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_67)));
			bVal_1 = colontmpD__6;
		}
LA18_: ;
		result.r = rVal_1;
		result.g = gVal_1;
		result.b = bVal_1;
		goto BeforeRet_;
	}
	goto LA1_;
LA6_: ;
	{
		NU8 gray_1;
		NI TM__7VUp4HkTkBAUceCS9cYfV1A_68;
		NI TM__7VUp4HkTkBAUceCS9cYfV1A_69;
		NI TM__7VUp4HkTkBAUceCS9cYfV1A_70;
		if (nimSubInt(colorNum_p0, ((NI)232), &TM__7VUp4HkTkBAUceCS9cYfV1A_68)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimMulInt((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_68), ((NI)10), &TM__7VUp4HkTkBAUceCS9cYfV1A_69)) { raiseOverflow(); goto BeforeRet_;
		};
		if (nimAddInt(((NI)8), (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_69), &TM__7VUp4HkTkBAUceCS9cYfV1A_70)) { raiseOverflow(); goto BeforeRet_;
		};
		gray_1 = ((NU8) ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_70)));
		result.r = gray_1;
		result.g = gray_1;
		result.b = gray_1;
		goto BeforeRet_;
	}
LA1_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, applySgrParams__libZansi95parser_u44)(tySequence__qwqHTkRvwhrRyENtudHQ7g params_p0, tyObject_Style__UURjArTrf2wmcCbN5MncAQ* style_p1) {
	NI i_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	i_1 = ((NI)0);
	{
		while (1) {
			NI T3_;
			NI code_1;
			NI TM__7VUp4HkTkBAUceCS9cYfV1A_93;
			T3_ = params_p0.len;
			if (!(i_1 < T3_)) goto LA2;
			if (i_1 < 0 || i_1 >= params_p0.len){ raiseIndexError2(i_1,params_p0.len-1); goto BeforeRet_;
			}
			code_1 = params_p0.p->data[i_1];
			switch (code_1) {
			case ((NI)0):
			{
				tyObject_Style__UURjArTrf2wmcCbN5MncAQ defaultSty_1;
				defaultSty_1 = defaultStyle__srcZtypes_u65();
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(*style_p1).fg = defaultSty_1.fg;
				(*style_p1).bg = defaultSty_1.bg;
				(*style_p1).bold = defaultSty_1.bold;
				(*style_p1).italic = defaultSty_1.italic;
				(*style_p1).underline = defaultSty_1.underline;
				(*style_p1).dim = defaultSty_1.dim;
			}
			break;
			case ((NI)1):
			{
				(*style_p1).bold = NIM_TRUE;
			}
			break;
			case ((NI)2):
			{
				(*style_p1).dim = NIM_TRUE;
			}
			break;
			case ((NI)3):
			{
				(*style_p1).italic = NIM_TRUE;
			}
			break;
			case ((NI)4):
			{
				(*style_p1).underline = NIM_TRUE;
			}
			break;
			case ((NI)22):
			{
				(*style_p1).bold = NIM_FALSE;
				(*style_p1).dim = NIM_FALSE;
			}
			break;
			case ((NI)23):
			{
				(*style_p1).italic = NIM_FALSE;
			}
			break;
			case ((NI)24):
			{
				(*style_p1).underline = NIM_FALSE;
			}
			break;
			case ((NI)30) ... ((NI)37):
			{
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_57;
				tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T13_;
				if (nimSubInt(code_1, ((NI)30), &TM__7VUp4HkTkBAUceCS9cYfV1A_57)) { raiseOverflow(); goto BeforeRet_;
				};
				nimZeroMem((void*)(&T13_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
				T13_ = ansi8ToRgb__libZansi95parser_u6((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_57));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(*style_p1).fg = T13_;
			}
			break;
			case ((NI)40) ... ((NI)47):
			{
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_58;
				tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T15_;
				if (nimSubInt(code_1, ((NI)40), &TM__7VUp4HkTkBAUceCS9cYfV1A_58)) { raiseOverflow(); goto BeforeRet_;
				};
				nimZeroMem((void*)(&T15_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
				T15_ = ansi8ToRgb__libZansi95parser_u6((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_58));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(*style_p1).bg = T15_;
			}
			break;
			case ((NI)38):
			{
				{
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_59;
					NI T19_;
					if (nimAddInt(i_1, ((NI)2), &TM__7VUp4HkTkBAUceCS9cYfV1A_59)) { raiseOverflow(); goto BeforeRet_;
					};
					T19_ = params_p0.len;
					if (!((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_59) < T19_)) goto LA20_;
					{
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_60;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_71;
						tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T26_;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_72;
						if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_60)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_60) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_60) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_60),params_p0.len-1); goto BeforeRet_;
						}
						if (!(params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_60)] == ((NI)5))) goto LA24_;
						if (nimAddInt(i_1, ((NI)2), &TM__7VUp4HkTkBAUceCS9cYfV1A_71)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_71) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_71) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_71),params_p0.len-1); goto BeforeRet_;
						}
						nimZeroMem((void*)(&T26_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
						T26_ = ansi256ToRgb__libZansi95parser_u33(params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_71)]);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						(*style_p1).fg = T26_;
						if (nimAddInt(i_1, ((NI)2), &TM__7VUp4HkTkBAUceCS9cYfV1A_72)) { raiseOverflow(); goto BeforeRet_;
						};
						i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_72);
					}
					goto LA22_;
LA24_: ;
					{
						NIM_BOOL T28_;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_73;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_74;
						NI T30_;
						NU8 r_1;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_75;
						NU8 g_1;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_76;
						NU8 b_1;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_77;
						tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T33_;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_78;
						T28_ = (NIM_BOOL)0;
						if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_73)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_73) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_73) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_73),params_p0.len-1); goto BeforeRet_;
						}
						T28_ = (params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_73)] == ((NI)2));
						if (!(T28_)) goto LA29_;
						if (nimAddInt(i_1, ((NI)4), &TM__7VUp4HkTkBAUceCS9cYfV1A_74)) { raiseOverflow(); goto BeforeRet_;
						};
						T30_ = params_p0.len;
						T28_ = ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_74) < T30_);
LA29_: ;
						if (!T28_) goto LA31_;
						if (nimAddInt(i_1, ((NI)2), &TM__7VUp4HkTkBAUceCS9cYfV1A_75)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_75) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_75) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_75),params_p0.len-1); goto BeforeRet_;
						}
						r_1 = ((NU8) (params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_75)]));
						if (nimAddInt(i_1, ((NI)3), &TM__7VUp4HkTkBAUceCS9cYfV1A_76)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_76) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_76) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_76),params_p0.len-1); goto BeforeRet_;
						}
						g_1 = ((NU8) (params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_76)]));
						if (nimAddInt(i_1, ((NI)4), &TM__7VUp4HkTkBAUceCS9cYfV1A_77)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_77) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_77) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_77),params_p0.len-1); goto BeforeRet_;
						}
						b_1 = ((NU8) (params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_77)]));
						T33_.r = r_1;
						T33_.g = g_1;
						T33_.b = b_1;
						(*style_p1).fg = T33_;
						if (nimAddInt(i_1, ((NI)4), &TM__7VUp4HkTkBAUceCS9cYfV1A_78)) { raiseOverflow(); goto BeforeRet_;
						};
						i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_78);
					}
					goto LA22_;
LA31_: ;
LA22_: ;
				}
LA20_: ;
			}
			break;
			case ((NI)48):
			{
				{
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_79;
					NI T37_;
					if (nimAddInt(i_1, ((NI)2), &TM__7VUp4HkTkBAUceCS9cYfV1A_79)) { raiseOverflow(); goto BeforeRet_;
					};
					T37_ = params_p0.len;
					if (!((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_79) < T37_)) goto LA38_;
					{
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_80;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_81;
						tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T44_;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_82;
						if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_80)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_80) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_80) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_80),params_p0.len-1); goto BeforeRet_;
						}
						if (!(params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_80)] == ((NI)5))) goto LA42_;
						if (nimAddInt(i_1, ((NI)2), &TM__7VUp4HkTkBAUceCS9cYfV1A_81)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_81) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_81) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_81),params_p0.len-1); goto BeforeRet_;
						}
						nimZeroMem((void*)(&T44_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
						T44_ = ansi256ToRgb__libZansi95parser_u33(params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_81)]);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						(*style_p1).bg = T44_;
						if (nimAddInt(i_1, ((NI)2), &TM__7VUp4HkTkBAUceCS9cYfV1A_82)) { raiseOverflow(); goto BeforeRet_;
						};
						i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_82);
					}
					goto LA40_;
LA42_: ;
					{
						NIM_BOOL T46_;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_83;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_84;
						NI T48_;
						NU8 r_2;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_85;
						NU8 g_2;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_86;
						NU8 b_2;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_87;
						tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T51_;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_88;
						T46_ = (NIM_BOOL)0;
						if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_83)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_83) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_83) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_83),params_p0.len-1); goto BeforeRet_;
						}
						T46_ = (params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_83)] == ((NI)2));
						if (!(T46_)) goto LA47_;
						if (nimAddInt(i_1, ((NI)4), &TM__7VUp4HkTkBAUceCS9cYfV1A_84)) { raiseOverflow(); goto BeforeRet_;
						};
						T48_ = params_p0.len;
						T46_ = ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_84) < T48_);
LA47_: ;
						if (!T46_) goto LA49_;
						if (nimAddInt(i_1, ((NI)2), &TM__7VUp4HkTkBAUceCS9cYfV1A_85)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_85) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_85) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_85),params_p0.len-1); goto BeforeRet_;
						}
						r_2 = ((NU8) (params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_85)]));
						if (nimAddInt(i_1, ((NI)3), &TM__7VUp4HkTkBAUceCS9cYfV1A_86)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_86) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_86) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_86),params_p0.len-1); goto BeforeRet_;
						}
						g_2 = ((NU8) (params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_86)]));
						if (nimAddInt(i_1, ((NI)4), &TM__7VUp4HkTkBAUceCS9cYfV1A_87)) { raiseOverflow(); goto BeforeRet_;
						};
						if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_87) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_87) >= params_p0.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_87),params_p0.len-1); goto BeforeRet_;
						}
						b_2 = ((NU8) (params_p0.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_87)]));
						T51_.r = r_2;
						T51_.g = g_2;
						T51_.b = b_2;
						(*style_p1).bg = T51_;
						if (nimAddInt(i_1, ((NI)4), &TM__7VUp4HkTkBAUceCS9cYfV1A_88)) { raiseOverflow(); goto BeforeRet_;
						};
						i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_88);
					}
					goto LA40_;
LA49_: ;
LA40_: ;
				}
LA38_: ;
			}
			break;
			case ((NI)39):
			{
				tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T53_;
				nimZeroMem((void*)(&T53_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
				T53_ = white__srcZtypes_u59();
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(*style_p1).fg = T53_;
			}
			break;
			case ((NI)49):
			{
				tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T55_;
				nimZeroMem((void*)(&T55_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
				T55_ = black__srcZtypes_u45();
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(*style_p1).bg = T55_;
			}
			break;
			case ((NI)90) ... ((NI)97):
			{
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_89;
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_90;
				tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T57_;
				if (nimSubInt(code_1, ((NI)90), &TM__7VUp4HkTkBAUceCS9cYfV1A_89)) { raiseOverflow(); goto BeforeRet_;
				};
				if (nimAddInt((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_89), ((NI)8), &TM__7VUp4HkTkBAUceCS9cYfV1A_90)) { raiseOverflow(); goto BeforeRet_;
				};
				nimZeroMem((void*)(&T57_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
				T57_ = ansi8ToRgb__libZansi95parser_u6((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_90));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(*style_p1).fg = T57_;
			}
			break;
			case ((NI)100) ... ((NI)107):
			{
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_91;
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_92;
				tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ T59_;
				if (nimSubInt(code_1, ((NI)100), &TM__7VUp4HkTkBAUceCS9cYfV1A_91)) { raiseOverflow(); goto BeforeRet_;
				};
				if (nimAddInt((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_91), ((NI)8), &TM__7VUp4HkTkBAUceCS9cYfV1A_92)) { raiseOverflow(); goto BeforeRet_;
				};
				nimZeroMem((void*)(&T59_), sizeof(tyObject_Color__TZLGUfQjHRBnaB3m3yIxqQ));
				T59_ = ansi8ToRgb__libZansi95parser_u6((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_92));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(*style_p1).bg = T59_;
			}
			break;
			default:
			{
			}
			break;
			}
			if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_93)) { raiseOverflow(); goto BeforeRet_;
			};
			i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_93);
		} LA2: ;
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, parseAnsiToBuffer__libZansi95parser_u183)(NimStringV2 ansiContent_p0, NI maxWidth_p1, NI maxHeight_p2, tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw* Result) {
	tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw buffer_1;
	tySequence__48JTohSgTy339bRxHzUD8KA runes_1;
	tyObject_AnsiParserState__hXKo0zTYmCVqECdNV6ufbw state_1;
	NI i_1;
	NI TM__7VUp4HkTkBAUceCS9cYfV1A_118;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw));
	nimZeroMem((void*)(&buffer_1), sizeof(tyObject_TermBuffer__a0me0i7S30c79coeAcFBkWw));
	runes_1.len = 0; runes_1.p = NIM_NIL;
	nimZeroMem((void*)(&state_1), sizeof(tyObject_AnsiParserState__hXKo0zTYmCVqECdNV6ufbw));
	newAnsiParserState__libZansi95parser_u100((&state_1));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	newTermBuffer__backendsZterminalZtermbuffer_u4(maxWidth_p1, maxHeight_p2, (&buffer_1));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	runes_1 = toRunes__pureZunicode_u7844(ansiContent_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	i_1 = ((NI)0);
	{
		while (1) {
			NI T4_;
			T4_ = runes_1.len;
			if (!(i_1 < T4_)) goto LA3;
			{
				NI32 rune_1;
				NI TM__7VUp4HkTkBAUceCS9cYfV1A_117;
				{
					NIM_BOOL T8_;
					NIM_BOOL T9_;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_52;
					NI T11_;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_53;
					tyTuple__JTIDOE9coS9asgfLHY5jZqMA tmpTuple_1;
					tySequence__qwqHTkRvwhrRyENtudHQ7g params_1;
					NI bytePos_1;
					NI seqLen_1;
					NIM_CHAR cmd_1;
					T8_ = (NIM_BOOL)0;
					T9_ = (NIM_BOOL)0;
					if (i_1 < 0 || i_1 >= runes_1.len){ raiseIndexError2(i_1,runes_1.len-1); goto LA1_;
					}
					T9_ = eqeq___pureZunicode_u1126(runes_1.p->data[i_1], ((NI32)27));
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					if (!(T9_)) goto LA10_;
					if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_52)) { raiseOverflow(); goto LA1_;
					};
					T11_ = runes_1.len;
					T9_ = ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_52) < T11_);
LA10_: ;
					T8_ = T9_;
					if (!(T8_)) goto LA12_;
					if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_53)) { raiseOverflow(); goto LA1_;
					};
					if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_53) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_53) >= runes_1.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_53),runes_1.len-1); goto LA1_;
					}
					T8_ = eqeq___pureZunicode_u1126(runes_1.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_53)], ((NI32)91));
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
LA12_: ;
					if (!T8_) goto LA13_;
					nimZeroMem((void*)(&tmpTuple_1), sizeof(tyTuple__JTIDOE9coS9asgfLHY5jZqMA));
					params_1.len = 0; params_1.p = NIM_NIL;
					bytePos_1 = ((NI)0);
					{
						NI j_1;
						NI i_2;
						j_1 = (NI)0;
						i_2 = ((NI)0);
						{
							while (1) {
								NimStringV2 colontmpD_;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_54;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_55;
								if (!(i_2 < i_1)) goto LA18;
								colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
								j_1 = i_2;
								if (j_1 < 0 || j_1 >= runes_1.len){ raiseIndexError2(j_1,runes_1.len-1); goto LA15_;
								}
								colontmpD_ = nuctoUTF8(runes_1.p->data[j_1]);
								if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
								if (nimAddInt(bytePos_1, colontmpD_.len, &TM__7VUp4HkTkBAUceCS9cYfV1A_54)) { raiseOverflow(); goto LA15_;
								};
								bytePos_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_54);
								if (nimAddInt(i_2, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_55)) { raiseOverflow(); goto LA15_;
								};
								i_2 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_55);
								if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD_.p);
}
							} LA18: ;
						}
					}
					tmpTuple_1 = parseAnsiSequence__libZansi95parser_u102(ansiContent_p0, bytePos_1);
					if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
					seqLen_1 = tmpTuple_1.Field0;
					cmd_1 = tmpTuple_1.Field1;
					params_1 = tmpTuple_1.Field2;
					eqwasMoved___niminiZtokenizer_u857((&tmpTuple_1.Field2));
					{
						NI runesInSeq_1;
						NI tempByteCount_1;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_108;
						if (!(((NI)0) < seqLen_1)) goto LA21_;
						switch (((NU8)(cmd_1))) {
						case 109:
						{
							applySgrParams__libZansi95parser_u44(params_1, (&state_1.style));
							if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
						}
						break;
						case 72:
						case 102:
						{
							NI colontmpD__2;
							NI colontmpD__3;
							NI colontmpD__4;
							NI colontmpD__5;
							NI row_1;
							NI col_1;
							colontmpD__2 = (NI)0;
							colontmpD__3 = (NI)0;
							colontmpD__4 = (NI)0;
							colontmpD__5 = (NI)0;
							{
								NIM_BOOL T27_;
								NI T28_;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_94;
								T27_ = (NIM_BOOL)0;
								T28_ = params_1.len;
								T27_ = (((NI)0) < T28_);
								if (!(T27_)) goto LA29_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								T27_ = (((NI)0) < params_1.p->data[((NI)0)]);
LA29_: ;
								if (!T27_) goto LA30_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								if (nimSubInt(params_1.p->data[((NI)0)], ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_94)) { raiseOverflow(); goto LA15_;
								};
								colontmpD__2 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_94);
								row_1 = colontmpD__2;
							}
							goto LA25_;
LA30_: ;
							{
								colontmpD__3 = ((NI)0);
								row_1 = colontmpD__3;
							}
LA25_: ;
							{
								NIM_BOOL T35_;
								NI T36_;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_95;
								T35_ = (NIM_BOOL)0;
								T36_ = params_1.len;
								T35_ = (((NI)1) < T36_);
								if (!(T35_)) goto LA37_;
								if (((NI)1) < 0 || ((NI)1) >= params_1.len){ raiseIndexError2(((NI)1),params_1.len-1); goto LA15_;
								}
								T35_ = (((NI)0) < params_1.p->data[((NI)1)]);
LA37_: ;
								if (!T35_) goto LA38_;
								if (((NI)1) < 0 || ((NI)1) >= params_1.len){ raiseIndexError2(((NI)1),params_1.len-1); goto LA15_;
								}
								if (nimSubInt(params_1.p->data[((NI)1)], ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_95)) { raiseOverflow(); goto LA15_;
								};
								colontmpD__4 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_95);
								col_1 = colontmpD__4;
							}
							goto LA33_;
LA38_: ;
							{
								colontmpD__5 = ((NI)0);
								col_1 = colontmpD__5;
							}
LA33_: ;
							state_1.y = row_1;
							state_1.x = col_1;
						}
						break;
						case 65:
						{
							NI colontmpD__6;
							NI colontmpD__7;
							NI n_1;
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_96;
							colontmpD__6 = (NI)0;
							colontmpD__7 = (NI)0;
							{
								NI T44_;
								T44_ = params_1.len;
								if (!(((NI)0) < T44_)) goto LA45_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								colontmpD__6 = params_1.p->data[((NI)0)];
								n_1 = colontmpD__6;
							}
							goto LA42_;
LA45_: ;
							{
								colontmpD__7 = ((NI)1);
								n_1 = colontmpD__7;
							}
LA42_: ;
							if (nimSubInt(state_1.y, n_1, &TM__7VUp4HkTkBAUceCS9cYfV1A_96)) { raiseOverflow(); goto LA15_;
							};
							state_1.y = ((((NI)0) >= (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_96)) ? ((NI)0) : (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_96));
						}
						break;
						case 66:
						{
							NI colontmpD__8;
							NI colontmpD__9;
							NI n_2;
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_97;
							colontmpD__8 = (NI)0;
							colontmpD__9 = (NI)0;
							{
								NI T51_;
								T51_ = params_1.len;
								if (!(((NI)0) < T51_)) goto LA52_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								colontmpD__8 = params_1.p->data[((NI)0)];
								n_2 = colontmpD__8;
							}
							goto LA49_;
LA52_: ;
							{
								colontmpD__9 = ((NI)1);
								n_2 = colontmpD__9;
							}
LA49_: ;
							if (nimAddInt(state_1.y, n_2, &TM__7VUp4HkTkBAUceCS9cYfV1A_97)) { raiseOverflow(); goto LA15_;
							};
							state_1.y = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_97);
						}
						break;
						case 67:
						{
							NI colontmpD__10;
							NI colontmpD__11;
							NI n_3;
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_98;
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_99;
							colontmpD__10 = (NI)0;
							colontmpD__11 = (NI)0;
							{
								NI T58_;
								T58_ = params_1.len;
								if (!(((NI)0) < T58_)) goto LA59_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								colontmpD__10 = params_1.p->data[((NI)0)];
								n_3 = colontmpD__10;
							}
							goto LA56_;
LA59_: ;
							{
								colontmpD__11 = ((NI)1);
								n_3 = colontmpD__11;
							}
LA56_: ;
							if (nimSubInt(maxWidth_p1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_98)) { raiseOverflow(); goto LA15_;
							};
							if (nimAddInt(state_1.x, n_3, &TM__7VUp4HkTkBAUceCS9cYfV1A_99)) { raiseOverflow(); goto LA15_;
							};
							state_1.x = (((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_98) <= (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_99)) ? (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_98) : (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_99));
						}
						break;
						case 68:
						{
							NI colontmpD__12;
							NI colontmpD__13;
							NI n_4;
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_100;
							colontmpD__12 = (NI)0;
							colontmpD__13 = (NI)0;
							{
								NI T65_;
								T65_ = params_1.len;
								if (!(((NI)0) < T65_)) goto LA66_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								colontmpD__12 = params_1.p->data[((NI)0)];
								n_4 = colontmpD__12;
							}
							goto LA63_;
LA66_: ;
							{
								colontmpD__13 = ((NI)1);
								n_4 = colontmpD__13;
							}
LA63_: ;
							if (nimSubInt(state_1.x, n_4, &TM__7VUp4HkTkBAUceCS9cYfV1A_100)) { raiseOverflow(); goto LA15_;
							};
							state_1.x = ((((NI)0) >= (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_100)) ? ((NI)0) : (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_100));
						}
						break;
						case 69:
						{
							NI colontmpD__14;
							NI colontmpD__15;
							NI n_5;
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_101;
							colontmpD__14 = (NI)0;
							colontmpD__15 = (NI)0;
							{
								NI T72_;
								T72_ = params_1.len;
								if (!(((NI)0) < T72_)) goto LA73_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								colontmpD__14 = params_1.p->data[((NI)0)];
								n_5 = colontmpD__14;
							}
							goto LA70_;
LA73_: ;
							{
								colontmpD__15 = ((NI)1);
								n_5 = colontmpD__15;
							}
LA70_: ;
							if (nimAddInt(state_1.y, n_5, &TM__7VUp4HkTkBAUceCS9cYfV1A_101)) { raiseOverflow(); goto LA15_;
							};
							state_1.y = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_101);
							state_1.x = ((NI)0);
						}
						break;
						case 70:
						{
							NI colontmpD__16;
							NI colontmpD__17;
							NI n_6;
							NI TM__7VUp4HkTkBAUceCS9cYfV1A_102;
							colontmpD__16 = (NI)0;
							colontmpD__17 = (NI)0;
							{
								NI T79_;
								T79_ = params_1.len;
								if (!(((NI)0) < T79_)) goto LA80_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								colontmpD__16 = params_1.p->data[((NI)0)];
								n_6 = colontmpD__16;
							}
							goto LA77_;
LA80_: ;
							{
								colontmpD__17 = ((NI)1);
								n_6 = colontmpD__17;
							}
LA77_: ;
							if (nimSubInt(state_1.y, n_6, &TM__7VUp4HkTkBAUceCS9cYfV1A_102)) { raiseOverflow(); goto LA15_;
							};
							state_1.y = ((((NI)0) >= (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_102)) ? ((NI)0) : (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_102));
							state_1.x = ((NI)0);
						}
						break;
						case 71:
						{
							NI colontmpD__18;
							NI colontmpD__19;
							NI col_2;
							colontmpD__18 = (NI)0;
							colontmpD__19 = (NI)0;
							{
								NIM_BOOL T86_;
								NI T87_;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_103;
								T86_ = (NIM_BOOL)0;
								T87_ = params_1.len;
								T86_ = (((NI)0) < T87_);
								if (!(T86_)) goto LA88_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								T86_ = (((NI)0) < params_1.p->data[((NI)0)]);
LA88_: ;
								if (!T86_) goto LA89_;
								if (((NI)0) < 0 || ((NI)0) >= params_1.len){ raiseIndexError2(((NI)0),params_1.len-1); goto LA15_;
								}
								if (nimSubInt(params_1.p->data[((NI)0)], ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_103)) { raiseOverflow(); goto LA15_;
								};
								colontmpD__18 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_103);
								col_2 = colontmpD__18;
							}
							goto LA84_;
LA89_: ;
							{
								colontmpD__19 = ((NI)0);
								col_2 = colontmpD__19;
							}
LA84_: ;
							state_1.x = col_2;
						}
						break;
						case 74:
						{
						}
						break;
						case 75:
						{
						}
						break;
						case 115:
						{
							state_1.savedX = state_1.x;
							state_1.savedY = state_1.y;
						}
						break;
						case 117:
						{
							state_1.x = state_1.savedX;
							state_1.y = state_1.savedY;
						}
						break;
						default:
						{
						}
						break;
						}
						runesInSeq_1 = ((NI)0);
						tempByteCount_1 = ((NI)0);
						{
							while (1) {
								NIM_BOOL T99_;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_104;
								NI T101_;
								NimStringV2 colontmpD__20;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_105;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_106;
								NI TM__7VUp4HkTkBAUceCS9cYfV1A_107;
								T99_ = (NIM_BOOL)0;
								T99_ = (tempByteCount_1 < seqLen_1);
								if (!(T99_)) goto LA100_;
								if (nimAddInt(i_1, runesInSeq_1, &TM__7VUp4HkTkBAUceCS9cYfV1A_104)) { raiseOverflow(); goto LA15_;
								};
								T101_ = runes_1.len;
								T99_ = ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_104) < T101_);
LA100_: ;
								if (!T99_) goto LA98;
								colontmpD__20.len = 0; colontmpD__20.p = NIM_NIL;
								if (nimAddInt(i_1, runesInSeq_1, &TM__7VUp4HkTkBAUceCS9cYfV1A_105)) { raiseOverflow(); goto LA15_;
								};
								if ((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_105) < 0 || (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_105) >= runes_1.len){ raiseIndexError2((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_105),runes_1.len-1); goto LA15_;
								}
								colontmpD__20 = nuctoUTF8(runes_1.p->data[(NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_105)]);
								if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
								if (nimAddInt(tempByteCount_1, colontmpD__20.len, &TM__7VUp4HkTkBAUceCS9cYfV1A_106)) { raiseOverflow(); goto LA15_;
								};
								tempByteCount_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_106);
								if (nimAddInt(runesInSeq_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_107)) { raiseOverflow(); goto LA15_;
								};
								runesInSeq_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_107);
								if (colontmpD__20.p && !(colontmpD__20.p->cap & NIM_STRLIT_FLAG)) {
 dealloc(colontmpD__20.p);
}
							} LA98: ;
						}
						if (nimAddInt(i_1, runesInSeq_1, &TM__7VUp4HkTkBAUceCS9cYfV1A_108)) { raiseOverflow(); goto LA15_;
						};
						i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_108);
						eqdestroy___niminiZtokenizer_u860(params_1);
						eqdestroy___libZansi95parser_u164((&tmpTuple_1));
						goto LA5;
					}
LA21_: ;
					{
						LA15_:;
					}
					{
						eqdestroy___niminiZtokenizer_u860(params_1);
						eqdestroy___libZansi95parser_u164((&tmpTuple_1));
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
LA13_: ;
				if (i_1 < 0 || i_1 >= runes_1.len){ raiseIndexError2(i_1,runes_1.len-1); goto LA1_;
				}
				rune_1 = runes_1.p->data[i_1];
				switch (((NI) (rune_1))) {
				case ((NI)10):
				{
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_109;
					if (nimAddInt(state_1.y, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_109)) { raiseOverflow(); goto LA1_;
					};
					state_1.y = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_109);
					state_1.x = ((NI)0);
				}
				break;
				case ((NI)13):
				{
					state_1.x = ((NI)0);
				}
				break;
				case ((NI)9):
				{
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_110;
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_111;
					if (nimAddInt((NI)((state_1.x) / (((NI)8))), ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_110)) { raiseOverflow(); goto LA1_;
					};
					if (nimMulInt((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_110), ((NI)8), &TM__7VUp4HkTkBAUceCS9cYfV1A_111)) { raiseOverflow(); goto LA1_;
					};
					state_1.x = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_111);
					{
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_112;
						if (!(maxWidth_p1 <= state_1.x)) goto LA109_;
						state_1.x = ((NI)0);
						if (nimAddInt(state_1.y, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_112)) { raiseOverflow(); goto LA1_;
						};
						state_1.y = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_112);
					}
LA109_: ;
				}
				break;
				default:
				{
					NI TM__7VUp4HkTkBAUceCS9cYfV1A_115;
					{
						NIM_BOOL T114_;
						tyObject_Style__UURjArTrf2wmcCbN5MncAQ colontmpD__21;
						NI idx_1;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_113;
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_114;
						tyObject_Cell__cmvwxiDU9cRtyqddD9c1iMTA T118_;
						T114_ = (NIM_BOOL)0;
						T114_ = (state_1.x < maxWidth_p1);
						if (!(T114_)) goto LA115_;
						T114_ = (state_1.y < maxHeight_p2);
LA115_: ;
						if (!T114_) goto LA116_;
						nimZeroMem((void*)(&colontmpD__21), sizeof(tyObject_Style__UURjArTrf2wmcCbN5MncAQ));
						if (nimMulInt(state_1.y, buffer_1.width, &TM__7VUp4HkTkBAUceCS9cYfV1A_113)) { raiseOverflow(); goto LA1_;
						};
						if (nimAddInt((NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_113), state_1.x, &TM__7VUp4HkTkBAUceCS9cYfV1A_114)) { raiseOverflow(); goto LA1_;
						};
						idx_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_114);
						if (idx_1 < 0 || idx_1 >= buffer_1.cells.len){ raiseIndexError2(idx_1,buffer_1.cells.len-1); goto LA1_;
						}
						T118_.ch = dollar___pureZunicode_u663(rune_1);
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
						colontmpD__21 = eqdup___srcZtypes_u76(state_1.style);
						T118_.style = colontmpD__21;
						eqsink___backendsZsdl3Zsdl95canvas_u269((&buffer_1.cells.p->data[idx_1]), T118_);
						{
							if (!(state_1.maxX < state_1.x)) goto LA121_;
							state_1.maxX = state_1.x;
						}
LA121_: ;
						{
							if (!(state_1.maxY < state_1.y)) goto LA125_;
							state_1.maxY = state_1.y;
						}
LA125_: ;
					}
LA116_: ;
					if (nimAddInt(state_1.x, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_115)) { raiseOverflow(); goto LA1_;
					};
					state_1.x = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_115);
					{
						NI TM__7VUp4HkTkBAUceCS9cYfV1A_116;
						if (!(maxWidth_p1 <= state_1.x)) goto LA129_;
						state_1.x = ((NI)0);
						if (nimAddInt(state_1.y, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_116)) { raiseOverflow(); goto LA1_;
						};
						state_1.y = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_116);
					}
LA129_: ;
				}
				break;
				}
				if (nimAddInt(i_1, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_117)) { raiseOverflow(); goto LA1_;
				};
				i_1 = (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_117);
			} LA5: ;
		} LA3: ;
	}
	if (nimAddInt(state_1.maxY, ((NI)1), &TM__7VUp4HkTkBAUceCS9cYfV1A_118)) { raiseOverflow(); goto LA1_;
	};
	buffer_1.height = ((maxHeight_p2 <= (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_118)) ? maxHeight_p2 : (NI)(TM__7VUp4HkTkBAUceCS9cYfV1A_118));
	(*Result) = buffer_1;
	eqwasMoved___srcZlayers_u13((&buffer_1));
	eqdestroy___pureZunicode_u714(runes_1);
	eqdestroy___srcZlayers_u16((&buffer_1));
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		eqdestroy___pureZunicode_u714(runes_1);
		eqdestroy___srcZlayers_u16((&buffer_1));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, atmlibatsansi_parserdotnim_Init000)(void) {
{
NIM_BOOL* nimErr_;
nimErr_ = nimErrorFlag();
	queuePluginRegistration__niminiZauto95pointer_u25(register_stripAnsi__libZansi95parser_u369);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	queuePluginRegistration__niminiZauto95pointer_u25(register_convertBracketNotationToAnsi__libZansi95parser_u429);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	queuePluginRegistration__niminiZauto95pointer_u25(register_getAnsiTextDimensions__libZansi95parser_u465);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	BeforeRet_: ;
	nimTestErrorFlag();
}
}

